define([],function(){return function(e){"use strict";var t=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.title="Representantes",this.grid_representante=this.dialog.find(".grid_representante"),this.array_representante=[],this.carrega_representantes=function(){WS.get("representante/listar/",{desconsiderar_bloqueados:!1},function(e){t.array_representante=e,t.listar()})},this.listar=function(){var e=document.createElement("div");e.className="div_listagem_representante",e.style="min-width: 100%;",t.grid_representante.find(".div_listagem_representante").remove(),t.grid_representante[0].appendChild(e);var n=detectmob()?"select":"dragAndDrop";get_icon_class();t.grid_representante.find(".div_listagem_representante").css("height","calc(100vh - 42px)"),t.grid_representante.find(".div_listagem_representante").dxDataGrid({dataSource:t.array_representante,allowColumnReordering:!0,showBorders:!0,columnResizingMode:"widget",rowAlternationEnabled:!1,searchPanel:{visible:!detectmob(),width:200,placeholder:"Pesquisa geral"},paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},allowColumnReordering:!0,allowColumnResizing:!0,columnChooser:{enabled:!0,allowSearch:!0,mode:n},stateStoring:{enabled:!0,type:"custom",customLoad:function(){return App.get_parametro_usuario("listagem_projeto_status")},customSave:function(e){App.set_parametro_usuario("listagem_projeto_status",e)}},selection:{mode:"multiple"},export:{enabled:!0,fileName:"Relatório de representantes "+agora(),allowExportSelectedData:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},filterPanel:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!0},columnFixing:{enabled:!0},onToolbarPreparing:function(e){var n=[{widget:"dxButton",options:{icon:"fa fa-plus",hint:"Novo Representante",text:"Novo Representante",onClick:function(){View.load("representante/detalhes",function(e,n){n.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==t.html_id&&t.carrega_representantes()})},n.show(null,FORMULARIO.NOVO)},View.ABA.MULTIPLAS)}},location:"after",name:"BtnNovoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de chamados",text:"Recarregar listagem",onClick:function(){t.listar()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-cog",hint:"Configurações",text:"Configurações",onClick:function(){View.load("representante/configuracoes",function(e,n){n.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==t.html_id&&t.carrega_representantes()})},n.show()})}},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=add_botao_dx_toolbar(n,e.toolbarOptions.items)},columns:[{caption:"Código",dataField:"codigo",width:90},{caption:"Nome",dataField:"nome_fantasia"},{dataField:"telefone",caption:"Telefone",width:250},{dataField:"bloqueado",caption:"Bloqueado",width:120,calculateCellValue:function(e){return"S"==e.bloqueado?"Sim":"Não"}},{type:"buttons",width:140,buttons:[{hint:"Visualizar",icon:"fa fa-eye",cssClass:"icon_black",onClick:function(e){View.load("representante/detalhes",function(t,n){n.show(e.row.data.representante_id,FORMULARIO.VISUALIZAR)},View.ABA.MULTIPLAS)}},{hint:"Editar",icon:"edit",cssClass:"icon_black",onClick:function(e){View.load("representante/detalhes",function(n,a){a.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==t.html_id&&t.carrega_representantes()})},a.show(e.row.data.representante_id,FORMULARIO.EDITAR)},View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fa fa-trash",cssClass:"icon_black",onClick:function(e){View.load("representante/detalhes",function(n,a){a.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==t.html_id&&t.carrega_representantes()})},a.show(e.row.data.representante_id,FORMULARIO.EXCLUIR)},View.ABA.MULTIPLAS)}}]}]})},this.unload=function(){View.unload(this.html_id)},this.carrega_representantes()}});