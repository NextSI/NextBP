define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.tab_listagem=this.dialog.find(".tab_listagem"),this.edt_nome=this.dialog.find(".edt_nome"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.arr_grupos_usuarios=null,this.modulo=null,this.show=function(t,o){i.modulo=o,i.onselect=t,alertaPopUp({titulo:"Selecionar Grupos",conteudo:(t,o)=>{setTimeout(()=>{i.popup=o,i.dialog.css("padding","0px"),t.replaceWith(i.dialog),i.dialog.closest(".dx-popup-content").css("padding","0px")})},largura:"calc(100% - 20px)",larguraMinima:"300px",larguraMaxima:"800px",botaoConfirmarTexto:null,botaoCancelarTexto:"Fechar"}),set_focus(i.edt_nome),i.listar()},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id),i.popup.hide()},this.listar=function(){i.arr_grupos_usuarios=null,WS.get("grupo_usuarios/listar/",{modulo:i.modulo},function(t){i.arr_grupos_usuarios=t,i.render_lista()})},this.render_lista=function(){var t=i.tab_listagem.find("tbody"),o=t.find("tr:first"),n=i.arr_grupos_usuarios.filter(function(t){var o=!0;return""!=i.edt_nome.val()&&t.nome.toUpperCase().indexOf(i.edt_nome.val().toUpperCase())<0&&(o=!1),o});i.tab_listagem.find("tr:gt(1)").remove(),$(n).each(function(n,e){!function(n){var e=o.clone();e.removeAttr("template-row"),e.css("display",""),$(e.find("[template-field='nome']")).text(n.nome);var a=$(e.find(".btn_selecionar")),l=function(){i.onselect(n),i.unload()};a.unbind("click"),a.click(l),e.dblclick(l),e.appendTo(t)}(e)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.edt_nome.unbind("keyup"),this.edt_nome.keyup(function(){i.render_lista()})}});