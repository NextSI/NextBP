"use strict";define(["react","react-dom"],function(e,o){class t extends e.Component{constructor(e,o){var t;super(e,o),t=this,this.props.ClienteSelecionado=null,this.props.FunctionSelect=null,this.props.OnChange=!1,this.props.setConfiguracoes={},this.props.setFunctionSelect=e=>{this.props.FunctionSelect=e},this.props.setCliente=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.props.OnChange=o,null!==e&&(set_value_combobox($(t.refs.cbo_cliente),e.cliente_id,e.cliente_nome),null!==t.props.OnChange&&"function"==typeof t.props.OnChange&&t.props.OnChange())}}componentDidMount(){this.criarCombobox()}listarClientes(e,o,t){let n=o.parent().find(".edt_combobox"),i=$(window).width()<992,a=t.props.setConfiguracoes.main_externo,s=t.props.setConfiguracoes.WS_params||{};s.texto_pesquisa=n.val(),a&&void 0!==a.edt_representante&&""==a.edt_representante.val()?alert_modal("Atenção","Por favor, informe o Representante","Ok",function(){n.val(""),set_focus(a.edt_representante)}):WS.get("agenda_contatos/listar/",s,function(a){if(limpar_combobox(o),$(a).each(function(e,n){let a=[],s=$('<span class="label lb_tipo" style="margin: 5px;"></span>');a.Nome=""==n.nome_fantasia||null==n.nome_fantasia?n.razao_social.trim():n.nome_fantasia.trim(),null!=a.Nome&&""!=a.Nome||(a.Nome="-"),a["Razão"]=null!=n.razao_social&&""!=n.razao_social?n.razao_social.trim():"-",a["Código"]=""==n.codigo||null==n.codigo?"-":n.codigo,a.Unidade=""==n.unidade||null==n.unidade?"-":n.unidade,i||(a.CNPJ=""==n.cnpj||null==n.cnpj?"-":n.cnpj,a.Telefone=""==n.telefone||null==n.telefone?"-":n.telefone),void 0!==t.props.setConfiguracoes.exibe_tipo_entidade&&!1!==t.props.setConfiguracoes.exibe_tipo_entidade&&("C"==n.tipo?(s.addClass("label-info"),s.attr("title","Cliente")):"O"==n.tipo?(s.addClass("label-primary"),s.attr("title","Organização")):"F"==n.tipo?(s.addClass("label-warning"),s.attr("title","Fornecedor")):"E"==n.tipo&&(s.addClass("label-success"),s.attr("title","Empresa")),s.tooltip(),s.text(null!=n.tipo?n.tipo:"")),add_option_combobox(o,e,n.id>0?n.id:null,a,s,JSON.stringify(n))}),a.length>0&&e(!0),t.props.setConfiguracoes.WS_params.cadastra_novo&&(!App.verifica_permissao(App.sessao.dados.empresa_filial_id,"prospect")||""==n.val()||a.length>0?o.parent().find(".btn_novo").addClass("hidden"):o.parent().find(".btn_novo").removeClass("hidden")),i){let e=0,o=parent.find(".combobox");e=$(o).width()-535,$(parent).find(".multi-column-dropdown").css("left",e+"px")}else{let e=o.parent(),t=e.find(".combobox"),n=$(t).width();$(e).find(".multi-column-dropdown").css("width","900px"),n=parseInt(n)-28,$(e).find(".multi-column-dropdown").css("left","-"+n+"px")}$(o.parent()).find(".ul_row").click(function(){t.eventosCombobox(t,o,$(this).parent())})})}criarCombobox(){create_combobox($(this.refs.cbo_cliente),this.listarClientes,null,null,this),this.criar_events($(this.refs.cbo_cliente))}eventosCombobox(e,o,t){let n=o.parent().find(".edt_combobox"),i=null;void 0!==t?void 0!==t.attr("dados-adicionais")&&(i=JSON.parse(t.attr("dados-adicionais"))):void 0!==n&&""!=n.val()&&void 0!==n.attr("dados-adicionais")&&(i=JSON.parse(n.attr("dados-adicionais"))),null!==i?(e.props.ClienteSelecionado=i,null!=e.props.FunctionSelect&&i&&e.props.FunctionSelect()):(e.props.ClienteSelecionado={id:null,nome_fantasia:"",tipo:""},e.props.FunctionSelect())}criar_events(e){let o=e.parent().find(".edt_combobox"),t=this;o.keypress(function(o){13==o.keyCode&&setTimeout(function(){t.eventosCombobox(t,$(e))},150)}),o.keyup(function(o){""==o.target.value&&setTimeout(function(){t.eventosCombobox(t,$(e))},150)})}render(){let o=!1;return void 0!==this.props.initial_values.disabled&&(o=this.props.initial_values.disabled),e.createElement("select",{ref:"cbo_cliente",className:"form-control select-multi-column",placeholder:this.props.initial_values.placeholder,disabled:o})}}return t});