var WebSock=function(){var e=null,o=new Set,t=[];return{conectar:function(){e&&e.readyState===WebSocket.OPEN||window.App.sessao.dados.websocketurl&&((e=new WebSocket(`${window.App.sessao.dados.websocketurl}?t=${window.App.sessao.token}`)).addEventListener("open",t=>{console.log("WebSocket open: ",t),o.forEach(function(o){e.send(JSON.stringify({tipo:"registrar",tela:o}))})}),e.addEventListener("message",e=>{console.log("WebSocket message: ",e);var o=JSON.parse(e.data);t.forEach(function(e){e(o)})}),e.addEventListener("error",e=>{console.log("WebSocket error: ",e)}),e.addEventListener("close",e=>{console.log("WebSocket close: ",e)}))},registrarTela:function(t){o.add(t),e&&e.readyState===WebSocket.OPEN&&e.send(JSON.stringify({tipo:"registrar",tela:t}))},removerTela:function(t){o.delete(t),e&&e.readyState===WebSocket.OPEN&&e.send(JSON.stringify({tipo:"remover",tela:t}))},adicionarListener:function(e){"function"==typeof e&&-1===t.indexOf(e)&&t.push(e)},removerListener:function(e){t=t.filter(function(o){return o!==e})},listarUsuarios:function(){e&&e.readyState===WebSocket.OPEN?e.send(JSON.stringify({tipo:"listar_usuarios"})):console.warn("WebSocket ainda n√£o conectado.")},verificar:function(){return e&&e.readyState===WebSocket.OPEN}}},WSock=new WebSock;