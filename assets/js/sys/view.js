var View=function(){var e=[],i=[],a=[],t=[];View.TYPE_CHANGE={LOAD:0,UNLOAD:1},View.ABA={NAO:0,SIM:1,SIM_E_RECARREGAR_SE_ESTIVER_ABERTA:3,MULTIPLAS:2,POPUP:4},View.janelas_mdi=function(){return t},View.get_id_tela_ativa=function(){var e=View.get_md5_tela_ativa();return $("#content").find('[id="'+e+'"]').attr("viewcode")},View.get_md5_tela_ativa=function(){return divsModal.length>0?divsModal[divsModal.length-1]:App.tabsInstance._getActiveItem().attr("aba-id-md5")},View.existe=function(e){return t.filter(i=>{if(i.id_md5===e)return!0}).length>0},View.loadPE=function(e,i,a){var t=function(){void 0!==a&&a()},o=!1,d="webservice/especificos/peJS/"+e+".pe.js";if(View.validaExistenciaPE(d)&&(o=!0),o||(d="webservice/peJS/"+e+".pe.js",View.validaExistenciaPE(d)&&(o=!0)),o){d=WS_ROOT+d+"?anticache="+(new Date).getTime();try{require([d],function(e){new e(i);t()},function(e){console.warn("Não foi possível carregar o script, verifique o nome do arquivo"),t()})}catch(e){console.warn("Não foi possível carregar o script, verifique o nome do arquivo"),t()}}else t()},View.validaExistenciaPE=function(e){if(App.sessao&&void 0!==App.sessao.dados.peJS&&Array.isArray(App.sessao.dados.peJS)){for(var i=0;i<App.sessao.dados.peJS.length;i++)if(App.sessao.dados.peJS[i].indexOf(e)>=0)return!0;return!1}return!0},View.loadPEEspecificos=function(e){var i=function(e,i){if(View.validaExistenciaPE(e)){var a=document.createElement("script");a.setAttribute("src",WS_URI.replace("webservice/index.php","")+e+"?anticache="+(new Date).getTime()),a.onload=function(){i()},a.onerror=function(){i()},document.head.appendChild(a)}else i()};i("webservice/peJS/especificos.pe.js",function(){i("webservice/especificos/peJS/especificos.pe.js",function(){e()})})},View.loadPEMenu=function(e){!function(e){if(View.validaExistenciaPE("webservice/especificos/peJS/menu.pe.js")){var i=document.createElement("script");i.setAttribute("src",WS_URI.replace("webservice/index.php","")+"webservice/especificos/peJS/menu.pe.js?anticache="+(new Date).getTime()),i.onload=function(){e()},i.onerror=function(){e()},document.head.appendChild(i)}else e()}(function(){void 0!==e&&e()})},View.loadReact=function(e,i={},a=()=>{},t=View.ABA.SIM,o=!1){View.load(e,a,t,o,"react",i,null)},View.load=function(e,i,a,o,d,r,n,s){var c=void 0===a?View.ABA.NAO:a;o=void 0!==o&&o,r=void 0===r?{}:r;if(c==View.ABA.SIM||c==View.ABA.SIM_E_RECARREGAR_SE_ESTIVER_ABERTA)for(var p=0;p<t.length;p++)if(t[p].view_str==e){if(c==View.ABA.SIM)return void View.show(t[p].id_md5);View.unload(t[p].id_md5)}for(p=0;p<t.length;p++){if("function"==typeof e&&"object"==typeof e.defaultProps&&e.defaultProps.viewCode&&"object"==typeof t[p].view&&t[p].view.props&&t[p].view.props.viewCode&&e.defaultProps.viewCode==t[p].view.props.viewCode&&t[p].view.props.viewCode===TELAS.DETALHES_CHAMADO.codigo&&t[p].view.props.chamadoId==r.chamadoId)return void View.show(t[p].id_md5);if("tarefa/detalhes"===e&&r.tarefaQuadroId&&"object"==typeof t[p].view&&t[p].view.tarefa_quadro_id&&e==t[p].view_str&&t[p].view.tarefa_quadro_id==r.tarefaQuadroId)return void View.show(t[p].id_md5);if("tarefa/detalhes_cartao"===e&&r.cartaoId&&"object"==typeof t[p].view&&t[p].view.cartao_id&&e==t[p].view_str&&t[p].view.cartao_id==r.cartaoId)return void View.show(t[p].id_md5);if("solicitacao/detalhes"===e&&r.solicitacaoAtividadeId&&"object"==typeof t[p].view&&[FORMULARIO.NOVO,FORMULARIO.EDITAR,void 0].includes(t[p].view.tipo)&&t[p].view.solicitacao_atividade&&t[p].view.solicitacao_atividade.id&&e==t[p].view_str&&t[p].view.solicitacao_atividade.id==r.solicitacaoAtividadeId)return void View.show(t[p].id_md5);if("solicitacao/detalhes"===e&&r.solicitacaoId&&"object"==typeof t[p].view&&t[p].view.tipo==FORMULARIO.VISUALIZAR&&t[p].view.solicitacao_atividade&&t[p].view.solicitacao_atividade.solicitacao_id&&e==t[p].view_str&&t[p].view.solicitacao_atividade.solicitacao_id==r.solicitacaoId)return void View.show(t[p].id_md5);if("processo/detalhes"===e&&r.processoId&&"object"==typeof t[p].view&&t[p].view.processo&&t[p].view.processo.processo_id&&e==t[p].view_str&&t[p].view.processo.processo_id==r.processoId)return void View.show(t[p].id_md5);if("formulario/detalhes"===e&&r.formularioId&&"object"==typeof t[p].view&&t[p].view.formulario_id&&e==t[p].view_str&&t[p].view.formulario_id==r.formularioId)return void View.show(t[p].id_md5);if(("atividade_projeto/listar"===e||"projeto/detalhes"===e)&&r.projetoId&&"object"==typeof t[p].view&&t[p].view.projeto_id&&e==t[p].view_str&&t[p].view.projeto_id==r.projetoId)return void View.show(t[p].id_md5);if("atividade_projeto/detalhes"===e&&r.projetoAtividadeId&&"object"==typeof t[p].view&&t[p].view.projeto_atividade_id&&e==t[p].view_str&&t[p].view.projeto_atividade_id==r.projetoAtividadeId)return void View.show(t[p].id_md5);if(("pdca/atividades"===e||"pdca/detalhes"===e)&&r.pdcaId&&"object"==typeof t[p].view&&t[p].view.pdca&&t[p].view.pdca.pdca_id&&e==t[p].view_str&&t[p].view.pdca.pdca_id==r.pdcaId)return void View.show(t[p].id_md5);if("oportunidade/detalhes"===e&&r.oportunidadeId&&"object"==typeof t[p].view&&t[p].view.oportunidade_id&&e==t[p].view_str&&t[p].view.oportunidade_id==r.oportunidadeId)return void View.show(t[p].id_md5);if("cliente/detalhes"===e&&r.clienteId&&"object"==typeof t[p].view&&t[p].view.cliente_id&&e==t[p].view_str&&t[p].view.cliente_id==r.clienteId)return void View.show(t[p].id_md5)}var v=o?VIEW_URI:"assets/view/",w=(v+e).replace(/\//g,"__"),l=md5(w+(new Date).getTime()),_=null;if(n?n.attr("id",l):c==View.ABA.POPUP?_=alertaPopUp({titulo:"#Titulo",conteudo:(e,i)=>{const a=$("<div>").css({"min-height":"50vh",display:"flex","justify-content":"center","align-items":"center","background-color":"#f5f5f5","border-radius":"8px"}).appendTo(e);$("<div>").dxLoadIndicator({height:50,width:50}).appendTo(a);const t=$("<div>").addClass("hidden").attr("id",l).css({"min-height":"50vh","padding-left":"15px","padding-right":"15px"}).appendTo(e);setTimeout(()=>{t.removeClass("hidden"),a.addClass("hidden")},1e3)},botaoConfirmarTexto:"Cancelar",largura:"calc(100% - 20px)",larguraMinima:"400px",largura:"50vw",arrBotoes:s}):$("#content").append('<div id="'+l+'" style="display: none;"></div>'),void 0!==d&&"react"==d){var f=$("#"+l);view="string"==typeof e?window.views[e]:e,r=spread({html_id:l},r);var u=Object.assign({},React.createElement(view,r));f.attr("div-view",view.name),f.attr("viewcode",u.props.viewCode),u.html_id=l,u.dialog=f,u.title=void 0!==u.props.abaTitulo?u.props.abaTitulo:null,u.unload=function(){View.unload(l)},ReactDOM.render(u,f[0]),i(l,u),App.translate(l),App.manual(l),App.aplicar_permissoes(l),App.aplicar_mascaras(l),App.aplicar_switchs(l),App.aplicar_checkbox(l),App.aplicar_selectpicker(l),c!=View.ABA.NAO&&c!=View.ABA.POPUP&&(t.push({react:!0,id_md5:l,data:new Date,view:u,view_str:view.name,id_md5_origem:View.get_md5_tela_ativa()}),App.gerenciar_abas(l,t[t.length-1],View.TYPE_CHANGE.LOAD))}else(n?$(n[0]):$("#"+l)).load(v+e+".html",function(a,d,r){if("error"==d)alert_modal_internet();else{var n=$(this);n.attr("div-view",e),o&&(WS_URI_PE_PHONEGAP.indexOf("http://")>=0||WS_URI_PE_PHONEGAP.indexOf("https://")>=0)&&void 0===App.require_paths[v+e]&&(App.require_paths[v+e]=WS_URI_PE_PHONEGAP+v+e,App.requirejsConfig()),App.localhost&&require.undef(v+e),require([v+e+".js"],function(a){var o=new a(l);_&&_.option("title",o.title),i(l,o),App.translate(l),App.manual(l),App.aplicar_permissoes(l),App.aplicar_mascaras(l),App.aplicar_switchs(l),App.aplicar_checkbox(l),App.aplicar_selectpicker(l),c!=View.ABA.NAO&&c!=View.ABA.POPUP&&(t.push({id_md5:l,data:new Date,view:o,view_str:e,id_md5_origem:View.get_md5_tela_ativa()}),App.gerenciar_abas(l,t[t.length-1],View.TYPE_CHANGE.LOAD)),n.css("display",""),"function"==typeof o.onload&&o.onload()},function(e){console.warn("Não foi possível carregar o script, verifique o nome do arquivo")})}})},View.unload=function(e){for(var i=0;i<t.length;i++)if(t[i].id_md5==e){if(App.gerenciar_abas(e,t[i],View.TYPE_CHANGE.UNLOAD),$('[aba-id-md5="'+t[i].id_md5_origem+'"]').length?View.show(t[i].id_md5_origem):View.show($(".tab-home").attr("aba-id-md5")),void 0!==t[i].react&&!0===t[i].react){var a=$("#"+e);ReactDOM.unmountComponentAtNode(a[0])}t.splice(i,1)}void 0===e?($("#content").find("div").remove(),$(".app-aba[aba-mdi]").remove(),t=[]):"string"==typeof e&&($("#"+e).remove(),View.removeAllIntervals(e),App.removeTab(e))},View.hide=function(e){void 0===e?$("#content").find("div[div-view]").hide():"string"==typeof e&&$("#"+e).hide()},View.navegador=function(e,i,a,o=!1,d=null){var r=void 0===a?View.ABA.MULTIPLAS:a;if(r==View.ABA.SIM)for(var n=0;n<t.length;n++)if(t[n].view_str==e)return void View.show(t[n].id_md5);var s=md5(e+(new Date).getTime()),c={html_id:s,title:i},p=$('<div id="'+s+'" style="display: none;"><iframe aba-view-iframe src="'+e+'" style="border: none; padding: 0px; margin: 0px; width: 100%; height: 100%"></iframe></div>');p.css("height","calc(100vh - 36px)"),$("#content").append(p),App.translate(s),App.aplicar_permissoes(s),App.aplicar_mascaras(s),App.aplicar_switchs(s),App.aplicar_checkbox(s),App.aplicar_selectpicker(s),p.attr("div-view",e),r!=View.ABA.NAO&&(t.push({id_md5:s,data:new Date,view:c,view_str:e}),App.gerenciar_abas(s,t[t.length-1],View.TYPE_CHANGE.LOAD),setTimeout(()=>{if(o){let e=[],i=$(p).find("iframe").clone();e.push(i),imprimir_div(!1,e,d)}},150))},View.show=function(e,t){View.hide();var o=$('[aba-id-md5="'+e+'"]').attr("scroll");if("string"==typeof e){var d=$("#"+e);d.show(),t||App.foco_aba(e);var r=d.find("iframe[aba-view-iframe]");if(r.length>0){var n;n=$("#menu_lateral").height()-$(".app-abas").height()-50,r.css("height",n)}setTimeout(function(){$(document).scrollTop(void 0!==o?o:0)},5);for(var s=0;s<i.length;s++)if(i[s].view_html_id==e)return void i[s].funcao();for(s=0;s<a.length;s++)if(a[s].view_html_id!=e)return void a[s].funcao();App.drawerInstance&&App.drawerInstance._dimensionChanged()}},View.setInterval=function(i,a,t){var o={view_html_id:i,funcao:a,delay:t,id:window.setInterval(a,t)};return e.push(o),o.id},View.removeInterval=function(i){!function(i){for(var a=0;a<e.length;a++)if(e[a].id==i)return window.clearInterval(e[a].id),void e.splice(a,1)}(i)},View.removeAllIntervals=function(i){var a=function(i){for(var t=0;t<e.length;t++)if(e[t].view_html_id==i)return window.clearInterval(e[t].id),e.splice(t,1),void a(i)};a(i)},View.setShowEvent=function(e,a){var t={view_html_id:e,funcao:a};i.push(t)},View.setHideEvent=function(e,i){var t={view_html_id:e,funcao:i};a.push(t)}};