define([],function(){return function(a){"use strict";var i=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.title="Ações, Metas e resultados",this.btn_incluir=this.dialog.find(".btn_incluir"),this.lista_indicadores=this.dialog.find(".lista_indicadores"),this.nome_indicador=this.dialog.find(".nome_indicador"),this.onclose=null,this.btn_proxima_etapa=this.dialog.find(".btn_proxima_etapa"),this.btn_voltar=this.dialog.find(".btn_voltar"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_confirmar=this.dialog.find(".btn_confirmar"),this.btn_fechar=this.dialog.find(".btn_fechar"),this.btn_incluir_responsabilidade=this.dialog.find(".btn_incluir_responsabilidade"),this.tabela_responsabilidades=this.dialog.find(".tabela_responsabilidades"),this.tab_curva_indicadores=this.dialog.find(".tab_curva_indicadores"),this.btn_responsabilidade=this.dialog.find(".btn_responsabilidade"),this.steps=this.dialog.find(".steps"),this.tabela_possibilidades=this.dialog.find(".tabela_possibilidades"),this.tabela_possibilidades_acao=this.dialog.find(".tabela_possibilidades_acao"),this.cbo_acao_24_horas=this.dialog.find(".cbo_acao_24_horas"),this.responsabilidade_escolhida=this.dialog.find(".responsabilidade_escolhida"),this.arr_possibilidades=[],this.arr_possibilidades_acao_24_horas=[],this.tabela_possibilidades_a2=this.dialog.find(".tabela_possibilidades_a2"),this.responsabilidade_escolhida_a2=this.dialog.find(".responsabilidade_escolhida_a2"),this.tabela_possibilidades_acao_a2=this.dialog.find(".tabela_possibilidades_acao_a2"),this.desc_funcao=this.dialog.find(".desc_funcao"),this.desc_missao_cargo=this.dialog.find(".desc_missao_cargo"),this.tabela_acao_possibilidade=this.dialog.find(".tabela_acao_possibilidade"),this.tabela_acao_possibilidade_a2=this.dialog.find(".tabela_acao_possibilidade_a2"),this.tab_responsabilidades_resumo=this.dialog.find(".tab_responsabilidades_resumo"),this.tabela_possibilidades_resumo_a1=this.dialog.find(".tabela_possibilidades_resumo_a1"),this.tabela_possibilidades_24_resumo_a1=this.dialog.find(".tabela_possibilidades_24_resumo_a1"),this.tabela_acao_possibilidade_resumo_a1=this.dialog.find(".tabela_acao_possibilidade_resumo_a1"),this.tabela_possibilidades_resumo_a2=this.dialog.find(".tabela_possibilidades_resumo_a2"),this.tabela_possibilidades_resumo_a2=this.dialog.find(".tabela_possibilidades_resumo_a2"),this.tabela_possibilidades_24_resumo_a2=this.dialog.find(".tabela_possibilidades_24_resumo_a2"),this.tabela_acao_possibilidade_resumo_a2=this.dialog.find(".tabela_acao_possibilidade_resumo_a2"),this.arr_possibilidades_a2=[],this.arr_possibilidades_acao_24_horas_a2=[],this.check_acao=this.dialog.find(".check_acao"),this.check_acao_a2=this.dialog.find(".check_acao_a2"),this.edt_missao_cargo=this.dialog.find(".edt_missao_cargo"),this.edt_performance=this.dialog.find(".edt_performance"),this.media_efetividade=this.dialog.find(".media_efetividade"),this.media_desejado=this.dialog.find(".media_desejado"),this.media_qe=this.dialog.find(".media_qe"),this.pagina=this.dialog.find(".pagina"),this.edt_funcao=this.dialog.find(".edt_funcao"),this.btn_info_curva_abc=this.dialog.find(".btn_info_curva_abc"),this.btn_info_efetividade=this.dialog.find(".btn_info_efetividade"),this.btn_info_acao=this.dialog.find(".btn_info_acao"),this.btn_info_acao_24=this.dialog.find(".btn_info_acao_24"),this.lbl_autor=this.dialog.find(".lbl_autor"),this.indice_atual=0,this.indicador_id=0,this.controle_qtdA=!1,this.MODO_EDICAO=!0,this.flag_salvar=!0,this.arr_telas=[],this.obj_dados={},this.atuacao_efetiva_id=0,this.id_responsabilidade_escolhida_1=null,this.id_responsabilidade_escolhida_2=0,this.arr_eventos_telas=[],this.arr_indicadores=[],this.limite=3,this.arr_ids_indicadores=[],this.arr_responsabilidades=[],this.responsabilidades_a=[],this.arr_metodos_telas=[],this.arr_acoes_possibilidades=[],this.arr_acoes_possibilidades_a2=[],this.arr_steps=[],this.indicador_iniciado="N",this.versao_base=!1,this.modo_click="",this.usuario_id=0,this.finalizada=!1,this.show=function(a,e){i.atuacao_efetiva_id=a,i.indicador_id=e,i.preencher_responsabilidades(),i.carrega_indicador_responsabilidade()},this.carrega_tela_atual=function(){WS.get("atuacao_efetiva_indicador/listar_tela_atual/",{atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id},function(a){var e=a[0];e.tela_atual=e.tela_atual||0,i.tela_atual=e.tela_atual,i.finalizada="S"==e.finalizado,i.lbl_autor.text(e.nome),i.title="Ações, Metas e resultados ("+e.nome_indicador+")",i.nome_indicador.text(e.nome_indicador),i.usuario_id=e.usuario_id,i.desc_funcao.text(e.funcao),i.desc_missao_cargo.text(e.missao_cargo),i.finalizada&&($(i.arr_steps[PASSOS_INDICADOR.TELA_RESUMO_GERAL]).css("display","inline-block"),i.passos(PASSOS_INDICADOR.TELA_RESUMO_GERAL),i.indice_atual=PASSOS_INDICADOR.TELA_RESUMO_GERAL);for(var s=0;s<=+e.tela_atual;s++)$(i.steps.find("li")[s]).show()})},this.carrega_indicador_responsabilidade=function(){WS.get("atuacao_efetiva_indicador_responsabilidade/listar/",{atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id,tipo:"a"},function(a){0!=a.length&&a[0].ordem>0&&a[1].ordem>0&&(i.responsabilidade_escolhida_1=a[0],i.responsabilidade_escolhida_2=a[1],i.carrega_dados_responsabilidade_escolhida(a[0],TIPO_ETAPA.A1),i.carrega_dados_responsabilidade_escolhida(a[1],TIPO_ETAPA.A2),i.preencher_acao_possibilidades(TIPO_ETAPA.A1,a[0].responsabilidade_id),i.preencher_acao_possibilidades(TIPO_ETAPA.A2,a[1].responsabilidade_id)),i.carrega_tela_atual()})},this.salvar_tela_atual=function(){+i.tela_atual<=i.indice_atual&&WS.post("atuacao_efetiva_indicador/salvar_tela_atual/",{tela_atual:i.indice_atual,atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id},function(a){$(i.steps.find("li")[i.indice_atual]).fadeIn("slow"),i.tela_atual=a.tela_atual})},this.somente_leitura=function(){i.edt_acao_trinta_dias.prop("disabled",!0),i.edt_missao_cargo.prop("disabled",!0),i.edt_performance.prop("disabled",!0),i.tabela_possibilidades_a2.find("tbody tr td:nth-child(1) input").prop("disabled",!0),i.tabela_possibilidades.find("tbody tr td:nth-child(1) input").prop("disabled",!0),i.check_acao.attr("disabled",!0),i.check_acao_a2.attr("disabled",!0),i.tabela_responsabilidades.find("tbody tr input").prop("disabled",!0)},this.add_row_responsabilidade=function(a,e){var s=null,d=(s=e?i.tab_responsabilidades_resumo.find("tbody"):i.tabela_responsabilidades.find("tbody")).find("[template-row]").clone();d.removeAttr("template-row"),d.css("display","");var o=d.find('[template-field="descricao"]'),t=d.find('[template-field="select_curva"]'),n=d.find('[template-field="efetividade"]'),r=d.find('[template-field="desejado"]'),l=d.find(".btn_excluir");a&&(d.attr({"data-id":a.id,"data-responsabilidade-id":a.responsabilidade_id}),o.val(a.descricao).prop("readonly",!0),t.keyup(i.calculo_qe).keyup(i.calcula_media).prop("disabled",i.versao_base),n.keyup(i.calculo_qe).keyup(i.calcula_media),r.keyup(i.calculo_qe).keyup(i.calcula_media),t.val(a.curva_abc).change(i.calculo_qe,i.calcula_media).prop("disabled",i.versao_base).trigger("change"),n.val(a.efetividade_atual).change(i.calculo_qe,i.calcula_media).trigger("change"),0==a.efetividade_desejada?r.val(""):r.val(a.efetividade_desejada).change(i.calculo_qe).change(i.calcula_media).trigger("change").prop("disabled",!0)),(l=d.find(".btn_excluir")).unbind("click"),l.click(function(){d.attr("data-id")?alert_modal("Evento Agenda","Tem certeza que deseja deletar esta responsabilidade?","Sim",function(){WS.post("atuacao_efetiva_responsabilidades/excluir/",{responsabilidade_id:a.id,atuacao_efetiva_id:i.atuacao_efetiva_id},function(a){d.fadeOut(),alert_saved("registro excluído")})},!0,"Não",function(){}):d.fadeOut()}),d.appendTo(s),r.trigger("change")},i.btn_incluir_responsabilidade.unbind("click"),i.btn_incluir_responsabilidade.click(function(a){i.add_row_responsabilidade()}),this.btn_info_curva_abc.unbind("click"),this.btn_info_curva_abc.click(function(a){var i=$('<h3 style="text-align: center; background: #cecece; padding: 10px;">CURVA ABC</h3><p><b style="font-size: 25px;">P</b>ara lhe ajudar a ter ainda mais foco e poder de forma estratégica direcionar sua energia e capital intelectual, nos basearemos conceitualmente na Lei de Pareto, ou princípio 80/20, que garante que foco mínimo pode representar resultados grandiosos. <p><b style="font-size: 25px;">A</b> Lei de Pareto, nascida dentro da economia, quando levada para o campo pessoal, adverte que 80% dos resultados que se alcança é consequência de apenas 20% dos esforços empregados. Em outras palavras, determinadas ações estratégicas podem oferecer um retorno muito maior do que muitas outras<p><b style="font-size: 25px;">B</b>aseado nisso, imaginando que queremos ter um resultado ainda melhor na Meta / KPI selecionado, deveremos distinguir, neste momento, pensando no cenário atual, das Responsabilidades / tarefas / Deveres já listados, quais podem gerar mais retorno x energia empregada (ROE). <p><b style="font-size: 25px;">P</b>ara isso, utilizaremos três níveis de classificação: <p><b style="font-size: 25px;">C</b>lassificação como A - Responsabilidades / tarefas / Deveres que se empregássemos mais energia e capital intelectual, poderia, no cenário atual, trazer MUITO resultado no KPI selecionado. <p><b style="font-size: 25px;">C</b>lassificação como B - Responsabilidades / tarefas / Deveres que se empregássemos mais energia e capital intelectual, poderia, no cenário atual, trazer MÉDIO resultado no KPI selecionado.<p><b style="font-size: 25px;">C</b>lassificação como C - Responsabilidades / tarefas / Deveres que se empregássemos mais energia e capital intelectual, poderia, no cenário atual, trazer BAIXO resultado no KPI selecionado.<p><b style="font-size: 25px;">D</b>ica: Entenda que não estamos classificando a importância, uma vez que provavelmente, tudo que está nesta lista é importante. Porém, algumas atividades, geram maior impacto em alguns KPIs e outras atividades por sua vez, em outros KPIs. Neste momento, nosso FOCO será apenas na Meta / KPI selecionado. <p><b style="font-size: 25px;">O</b>bs: Para seguir o principio 80 x 20, o sistema, permitirá que apenas que dois itens, sejam selecionados como A, enquanto Bs e Cs, não há limites. </p>');View.load("atuacao_efetiva/tutorial",function(a,e){e.show(i,"Atuacão Efetiva")},View.ABA.NAO)}),this.btn_info_efetividade.unbind("click"),this.btn_info_efetividade.click(function(a){var i=$('<h3 style="text-align: center; background: #cecece; padding: 10px;">EFETIVIDADE</h3><p><b style="font-size: 25px;">E</b>fetividade significa: O que resolve de fato. Não significa fazer ou quanto eu faço, mas obter o melhor ou maximo de resultado, no menor tempo, com o menor custo de energia ou dinheiro possível.  É como um lutador de boxe nocautear seu adversário logo nos primeiros segundos de luta. Não significa somente atingir ou não a meta, mas sim o quanto efetivo ele foi, se comparado a outros lutadores ou comparado a outras lutas.</p><p><b style="font-size: 25px;">A</b>pesar da maioria das pessoas não entenderem este ponto, a meta não existe para ser atingida, ela existe para ser superada (principio básico no entendimento e criação de programas de desenvolvimento de atletas de alto rendimento). Acreditem ou não, sempre será possíveis fazer mais, ou melhor, ou mais rápido e com menos custo. Tudo é uma questão de foco, dedicação, estratégia, criatividade e tempo.</p><p><b style="font-size: 25px;">E</b>xemplo: Na indústria automotiva, em 1994, a produção de carros x trabalhador empregado era de 10,8 carros por trabalhador, em 2004 (10 anos), esse número aumentos para 20,8 carros por trabalhador. Um crescimento de quase 100%. Ou seja, não se trata só de eficiência, mas de uma somatória de pontos como mudança e melhoria de processos, procedimentos, tecnologia, recursos e estratégia que permitiram que pudéssemos produzir Mais carros, Melhores carros,  em menos tempo com menor custo operacional. </p><p><b style="font-size: 25px;">A</b>pesar de muitas vezes não sabermos como, algumas metas, podem ser alcançadas na metade do tempo proposto. Algumas metas podem ser superada em 100%. </p><p><b style="font-size: 25px;">O</b> CONCEITO EFETIVIDADE, questiona o produzido x potencial de produção, levando em conta, o quanto se pode melhor o processo atual, os procedimentos, a tecnologia utilizada, a gestão empregada, a estratégia utilizada, a atitude / conhecimento / competência dos envolvidos entre outras coisas como criatividade e acima de tudo, coragem de tentar algo novo. </p><p><b style="font-size: 25px;">B</b>aseado nisso e entendendo é claro, que entre nossa execução e o resultado desejado, existem inúmeros “barreiras ou adversidades” como a falta de tempo, concorrentes, pressão, falta de recursos humanos qualificados ou financeiros. </p><p><b style="font-size: 25px;">I</b>ndependente disso, analisando o cenário (você tentando x as barreiras e adversidades jogando contra o tempo todo) o quanto, você tem conseguido atingir de EFETIVIDADE em cada um dos itens listado?  Lembrando que 100% é algo talvez improvável de se atingir, raríssimo ou momentâneo, e 0% caso não esteja fazendo (por questão de outras prioridades) ou faço e não estou obtendo resultados algum (entendendo que muitas vezes, a culta nem é sua). </p><p><b style="font-size: 25px;">C</b>ontudo, entre 0% a 100%, existem 99 momentos. Atualmente, em que ponto da régua estamos se imaginarmos que o 100% seria o perfeito, maravilhoso, extraordinário. </p><p><b style="font-size: 25px;">D</b>ica 1: Essa é uma análise de cenário, e não de competências. É como uma sistema de GPS moderno que lhe permite medir a velocidade do trajeto, relacionado ao transito mais ou menos intenso. Ou seja, como as coisas estão andando em cada uma dos itens listados. </p><p><b style="font-size: 25px;">D</b>ica 2. O 100% não significa meta, apenas o final da linha. Aquele ponto que mesmo sem transito, seria impossível que alguém no mundo consiga superar.  </p><p><b style="font-size: 25px;">D</b>ica 3: Tempo dedicado, não tem nada a ver com efetividade, na verdade, efetividade, significa, inclusive, gastar menos tempo e obter igual ou até mesmo, melhores resultados.</p>');View.load("atuacao_efetiva/tutorial",function(a,e){e.show(i,"Atuacão Efetiva")},View.ABA.NAO)}),this.btn_info_acao.unbind("click"),this.btn_info_acao.click(function(a){var i=$('<h3 style="text-align: center; background: #cecece; padding: 10px;">Brainstorming de ações</h3><p><b style="font-size: 25px;">O</b> brainstorming (em português "tempestade cerebral") ou tempestade de ideias, mais que uma técnica de dinâmica de grupo, é uma atividade desenvolvida para explorar a potencialidade criativa de um indivíduo ou de um grupo - criatividade em equipe - colocando-a a serviço de objetivos pré-determinados.</p> <p><b style="font-size: 25px;">P</b>or isso, vamos verdadeiramente nos esforçar para pensar em todo tipo de possibilidade sem julgamento, sem visar o resultado de cara, sem colocar barreiras ou suposições, não pelo menos neste momento.</p> <p><b style="font-size: 25px;">D</b>ica 1. Não pense mais nos KPIs, apenas que tipos de ações poderíamos adotar que poderiam melhorar um pouco a nossa efetividade na responsabilidade escolhida.</p> <p><b style="font-size: 25px;">D</b>ica 2. Em geral, as primeiras ideias, são apenas passagens para boas ideias que virão, por isso, neste momento, QUANTIDADE é mais importante que QUALIDADE. </p> ');View.load("atuacao_efetiva/tutorial",function(a,e){e.show(i,"Atuacão Efetiva")},View.ABA.NAO)}),this.btn_info_acao_24.unbind("click"),this.btn_info_acao_24.click(function(a){var i=$('<p><b style="font-size: 25px;">D</b>izem que toda grande jornada começa com uma primeiro passo. Chegou a hora de escolher as suas primeiras ações a serem iniciadas ou executadas. A decisão deverá ser estratégica, os riscos deverão ser medidos, porém, a decisão deverá ser tomada. </p><p><b style="font-size: 25px;">D</b>ica 1. Não se pergunte se irá dar certo, mas, SE VALE A PENA TENTAR. Se vale a pena ariscar. Se a resposta for sim, inicie o quanto, antes, inicie agora o primeiro passo, AGORA.  Não espere ter tempo para iniciar, pois ele nunca aparecerá. Isso porque tempo é uma questão de prioridade e não de tempo. Não deixe que as coisas urgentes se sobreponham as coisas que você julga ser importante. </p><p><b style="font-size: 25px;">D</b>ica 2. Ao iniciar algumas ações, mesmo sem ter muita certeza ou mesmo sem saber ao certo onde exatamente você vai chegar, ao começar se mexer diferente, você perceberá coisas diferentes, terá feedbacks diferentes do meio externos, e irá, por meio das próprias respostas que as ações forem gerando, lhe dará os indícios do próximo passo e um universo de ações aparecerá a sua volta, o importante e se mexer. </p><p><b style="font-size: 25px;">P</b>or isso, boa sorte!!!!</p>');View.load("atuacao_efetiva/tutorial",function(a,e){e.show(i,"Atuacão Efetiva")},View.ABA.NAO)}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_proxima_etapa.unbind("click"),this.btn_proxima_etapa.click(function(){i.modo_click="btn",i.flag_salvar=!0,i.indice_atual++,i.salvar_tela_atual(i.indice_atual),i.passos(i.indice_atual)}),this.btn_voltar.unbind("click"),this.btn_voltar.click(function(){i.modo_click="btn",i.btn_proxima_etapa.prop("disabled",!1),i.flag_salvar=!1,i.indice_atual--,i.passos(i.indice_atual)}),this.btn_fechar.unbind("click"),this.btn_fechar.click(function(){i.unload()}),this.btn_confirmar.unbind("click"),this.btn_confirmar.click(function(){var a=i.tabela_acao_possibilidade_a2.find("tbody tr");$.each(a,function(a,e){$.each(i.arr_acoes_possibilidades_a2,function(a,s){s.id==$(e).find("td").attr("data-id")&&""!=$(e).find("td textarea").val()&&(i.arr_acoes_possibilidades_a2[a].meta_acao_24_horas=$(e).find("td textarea").val())})}),1==i.flag_salvar&&1==i.MODO_EDICAO&&i.salva_possibilidade_acao(i.responsabilidade_escolhida_2.id,i.arr_acoes_possibilidades_a2,TIPO_ETAPA.A2),i.atualiza_possibilidades_acao_24_horas(i.responsabilidade_escolhida_2.id,TIPO_ETAPA.A2),i.finalizada?i.unload():(View.load("atuacao_efetiva/fechamento",function(a,e){e.show(i.atuacao_efetiva_id);e.onclose=function(a){a&&i.unload()}}),i.finaliza_atuacao_efetiva_indicador())}),this.check_acao.click(function(a){var e=$(this),s=e.closest("tr").attr("data-id"),d=1==(d=!e.find("[type='checkbox']").prop("checked"))?"S":"N";s&&1==i.MODO_EDICAO&&i.salva_possibilidade_acao_24_horas([{acao_vinte_quatro_horas:d,id:s}],i.responsabilidade_escolhida_1.id,TIPO_ETAPA.A1)}),this.check_acao_a2.click(function(a){var e=$(this),s=e.closest("tr").attr("data-id"),d=1==(d=!e.find("[type='checkbox']").prop("checked"))?"S":"N";s&&1==i.MODO_EDICAO&&i.salva_possibilidade_acao_24_horas([{acao_vinte_quatro_horas:d,id:s}],i.responsabilidade_escolhida_2.id,TIPO_ETAPA.A2)}),this.finaliza_atuacao_efetiva_indicador=function(){WS.post("atuacao_efetiva_indicador/finaliza_indicador/",{atuacao_efetiva_indicador_id:i.indicador_id},function(a){alert_saved("Salvo com sucesso"),i.finalizada=!0,void 0!==i.onsave&&i.onsave&&i.onsave(a)})},this.salva_dados_atuacao_efetiva=function(a){WS.post("atuacao_efetiva/salvar/",{missao_cargo:a.missao_cargo,atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id,funcao_id:a.funcao_id,funcao:a.funcao,usuario_id:i.usuario_id},function(a){alert_saved("Salvo com sucesso"),void 0!==i.onsave&&i.onsave&&i.onsave(a)})},this.salva_possibilidade_acao=function(a,e,s){WS.post("atuacao_efetiva_possibilidade_acao/salvar/",{possibilidades:JSON.stringify(e),atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id,responsabilidade_id:a,usuario_id:i.usuario_id},function(e){var d=e[0];i.preencher_possibilidades(d,s),i.atualiza_possibilidades_acao_24_horas(a,s),alert_saved("Salvo com sucesso"),void 0!==i.onsave&&i.onsave&&i.onsave(e)})},this.preencher_possibilidades=function(a,e,s){var d=null,o=null;if(e==TIPO_ETAPA.A1)s?(d=i.tabela_possibilidades_resumo_a1.find("tbody tr td:nth-child(1) input"),o=i.tabela_possibilidades_resumo_a1.find("tbody tr")):(d=i.tabela_possibilidades.find("tbody tr td:nth-child(1) input"),o=i.tabela_possibilidades.find("tbody tr"));else{if(e!=TIPO_ETAPA.A2)return;s?(d=i.tabela_possibilidades_resumo_a2.find("tbody tr td:nth-child(1) input"),o=i.tabela_possibilidades_resumo_a2.find("tbody tr")):(d=i.tabela_possibilidades_a2.find("tbody tr td:nth-child(1) input"),o=i.tabela_possibilidades_a2.find("tbody tr"))}d.keydown(function(a){if(13===a.which){var i=d.index(this)+1;d.eq(i).focus()}});var t=a.length;d.val(""),$.each(o,function(i,e){s&&$(e).removeClass("hidden"),i+1<=t&&($(e).find("td input").attr("data-id",a[i].id),$(e).find("td input").val(a[i].descricao))}),1==i.versao_base&&(i.tabela_possibilidades.find("tbody tr td input").prop("disabled",!0),i.tabela_possibilidades_a2.find("tbody tr td input").prop("disabled",!0))},this.preencher_acao_possibilidades=function(a,e){WS.get("atuacao_efetiva_possibilidade_acao/listar/",{responsabilidade_id:e,atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id},function(e){var s=$.map(e,function(a,i){if("S"==a.acao_vinte_quatro_horas)return a});if(a==TIPO_ETAPA.A1)var d=i.tabela_acao_possibilidade.find("tbody tr textarea"),o=i.tabela_acao_possibilidade.find("tbody tr label.lbl_titulo"),t=i.tabela_acao_possibilidade.find("tbody tr");else{if(a!=TIPO_ETAPA.A2)return;d=i.tabela_acao_possibilidade_a2.find("tbody tr textarea"),o=i.tabela_acao_possibilidade_a2.find("tbody tr label.lbl_titulo"),t=i.tabela_acao_possibilidade_a2.find("tbody tr")}1==i.versao_base&&d.prop("disabled",!0);var n=s.length;d.val(""),$.each(t,function(a,e){if(a+1<=n){var t=$(e).find("td");t.attr("data-id",s[a].id),$(o[a]).text(s[a].descricao),$(d[a]).val(s[a].meta_acao_24_horas),t.removeClass("hidden"),t.attr("data-agenda-gerada",s[a].agenda_gerada),t.attr("data-status",s[a].status),t.attr("data-avaliacao-id",s[a].atuacao_efetiva_avaliacao_id);var r=$(e).find(".btn_definir_metas"),l=$(e).find(".btn_gerar_agenda"),_=$(e).find(".btn_info_carta"),c=$(e).find(".lbl_info"),p=t.attr("data-avaliacao-id"),u=$(t).attr("data-id"),b=t.attr("data-status");r.unbind("click"),r.click(function(d){View.load("atuacao_efetiva/metas_indicador_atuacao",function(d,o){o.show(u,i.atuacao_efetiva_id,i.indicador_id,p,b,s[a].descricao,s[a].usuario_id);o.onsave=function(a){$(e).find("td").attr("data-status",a),c.removeClass("label-warning label-success label-info label-danger"),b=a,a==STATUS_INDICADORES.NAO_APROVADO?(_.prop("disabled",!1),_.addClass("btn-danger"),c.text("Não Aprovado"),c.addClass("label-warning")):a==STATUS_INDICADORES.NAO_INICIADO||a==STATUS_INDICADORES.EM_ELABORACAO||a==STATUS_INDICADORES.EM_APROVACAO?_.prop("disabled",!0):a==STATUS_INDICADORES.EM_ANDAMENTO?("S"==t.attr("data-agenda-gerada")||"S"!=App.sessao.dados.supervisor_empenho&&1!=App.sessao.dados.admin||(l.removeClass("hidden"),l.text("Agenda gerada"),l.removeClass("btn-info").addClass("btn-link"),l.prop("disabled",!0)),_.prop("disabled",!1),_.addClass("btn-success"),c.text("Em Andamento"),c.addClass("label-success")):a==STATUS_INDICADORES.REFAZER?(c.text("Aguardando revisão"),c.addClass("label-info")):_.prop("disabled",!1)},o.onclose=function(a){+a>0&&(a==STATUS_INDICADORES.EM_APROVACAO?(c.text("Aguardando Aprovação"),c.addClass("label-info")):a==STATUS_INDICADORES.EM_ANDAMENTO&&"S"==App.sessao.dados.supervisor_empenho&&(c.text("Em Andamento"),c.addClass("label-success")))}})}),b==STATUS_INDICADORES.NAO_INICIADO||b==STATUS_INDICADORES.EM_ELABORACAO||b==STATUS_INDICADORES.EM_APROVACAO?_.prop("disabled",!0):_.prop("disabled",!1),b==STATUS_INDICADORES.EM_APROVACAO&&(c.text("Aguardando Aprovação"),c.addClass("label-info")),b==STATUS_INDICADORES.NAO_APROVADO?(_.addClass("btn-danger"),c.text("Não Aprovado"),c.addClass("label-danger")):b==STATUS_INDICADORES.EM_ANDAMENTO?(_.addClass("btn-success"),c.text("Em Andamento"),c.addClass("label-success")):b==STATUS_INDICADORES.REFAZER&&(c.text("Aguardando revisão"),c.addClass("label-info")),_.unbind("click"),_.click(function(a){$(a.target);+p>0&&View.load("atuacao_efetiva/avaliar",function(a,e){e.show(i.atuacao_efetiva_id,i.indicador_id,p,u,FORMULARIO.VISUALIZAR)})}),"S"!=App.sessao.dados.supervisor_empenho&&1!=App.sessao.dados.admin||(b==STATUS_INDICADORES.EM_ANDAMENTO&&l.removeClass("hidden"),"S"!=t.attr("data-agenda-gerada")?(l.unbind("click"),l.click(function(e){var d;if(b!=STATUS_INDICADORES.EM_ANDAMENTO&&s[a].usuario_id!=App.sessao.dados.usuario_id)return(d=new Validation).add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Metas ainda não foram aprovadas!")),void alert_modal("Validação",d);(d=new Validation).add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Tem certeza que deseja gerar a agenda?")),alert_modal("Atuação Efetiva",d,"Sim",function(){WS.post("atuacao_efetiva_resultado_esperado/gerar_agenda/",{possibilidade_acao_id:s[a].id,atuacao_efetiva_id:s[a].atuacao_efetiva_id,atuacao_efetiva_resultado_esperado_id:s[a].atuacao_efetiva_resultado_esperado_id,indicador_id:s[a].indicador_id},function(a){t.attr("data-agenda-gerada","S");var e=new Validation;e.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Agenda gerada com sucesso!")),l.text("Agenda gerada"),l.removeClass("btn-info").addClass("btn-link"),l.prop("disabled",!0),alert_modal("Validação",e),alert_saved("Salvo com sucesso"),void 0!==i.onsave&&i.onsave&&i.onsave(a)})},!0,"Não",null,function(){})})):(l.text("Agenda gerada"),l.removeClass("btn-info").addClass("btn-link"),l.prop("disabled",!0)))}else $(e).find("td").addClass("hidden")})})},this.preencher_possibilidades_a2=function(a){i.arr_possibilidades_a2=[];var e=i.tabela_possibilidades_a2.find("tbody tr td:nth-child(1) input"),s=i.tabela_possibilidades_a2.find("tbody tr"),d=a.length;e.val(""),$.each(s,function(i,e){i+1<=d&&($(e).find("td input").attr("data-id",a[i].id),$(e).find("td input").val(a[i].descricao))})},this.salva_possibilidade_acao_24_horas=function(a,e,s){WS.post("atuacao_efetiva_possibilidade_acao/salvar/",{possibilidades:JSON.stringify(a),atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id,responsabilidade_id:e,usuario_id:i.usuario_id},function(a){var e=a[0];i.preencher_acao_possibilidades(s,e[0].responsabilidade_id),void 0!==i.onsave&&i.onsave&&i.onsave(a)})},this.preencher_possibilidades_acao_24_horas=function(a,e){if(e==TIPO_ETAPA.A1){i.arr_possibilidades_acao_24_horas=a;var s=i.tabela_possibilidades_acao.find("tbody tr td:nth-child(2) input"),d=i.tabela_possibilidades_acao.find("tbody tr")}else{if(e!=TIPO_ETAPA.A2)return;i.arr_possibilidades_acao_24_horas_a2=a;s=i.tabela_possibilidades_acao_a2.find("tbody tr td:nth-child(2) input"),d=i.tabela_possibilidades_acao_a2.find("tbody tr")}s.keydown(function(a){if(13===a.which){var i=s.index(this)+1;s.eq(i).focus()}});var o=a.length;s.val(""),$.each(d,function(e,s){e+1<=o?($(s).attr("data-id",a[e].id),$(s).find("td input").val(a[e].descricao),$(s).find("[type='checkbox']").prop("disabled",!1),"S"==a[e].acao_vinte_quatro_horas&&(0==i.MODO_EDICAO?($(s).find("[type='checkbox']").prop("disabled",!1),$(s).find("[type='checkbox']").prop("checked",!0).change(),$(s).find("[type='checkbox']").prop("disabled",!0)):$(s).find("[type='checkbox']").prop("checked",!0).change())):$(s).find("[type='checkbox']").prop("disabled",!0)}),1==i.versao_base&&(i.check_acao.prop("disabled",!0),i.check_acao_a2.prop("disabled",!0))},this.atualiza_possibilidades_acao_24_horas=function(a,e){WS.get("atuacao_efetiva_possibilidade_acao/listar/",{responsabilidade_id:a,atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id},function(a){i.preencher_possibilidades_acao_24_horas(a,e)})},this.inicia_indicador=function(){WS.post("atuacao_efetiva_indicador/inicia_indicador/",{atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id,iniciado:"S"},function(a){i.indicador_iniciado=a.iniciado||"N"})},this.salva_dados_responsabilidades=function(a){WS.post("atuacao_efetiva_indicador_responsabilidade/salvar/",{responsabilidades:JSON.stringify(a),atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id,calculo_efetividade:parseInt(i.media_efetividade.text()),calculo_desejado:parseInt(i.media_desejado.text()),calculo_qe:parseInt(i.media_qe.text()),usuario_id:i.usuario_id},function(a){i.preencher_responsabilidades(),"N"==i.indicador_iniciado&&i.inicia_indicador(),void 0===i.responsabilidade_escolhida_1?View.load("atuacao_efetiva/escolha_responsabilidade",function(a,e){e.show(i.atuacao_efetiva_id,i.indicador_id,TIPO_ETAPA.A1),e.onsave=function(a,s){i.responsabilidade_escolhida_1=a,i.responsabilidade_escolhida_2=s,i.salva_ordem_responsabilidades(a.id,1,a.responsabilidade_id,a.indicador_id),i.salva_ordem_responsabilidades(s.id,2,s.responsabilidade_id,s.indicador_id),i.carrega_dados_responsabilidade_escolhida(a,TIPO_ETAPA.A1),i.carrega_dados_responsabilidade_escolhida(s,TIPO_ETAPA.A2),i.responsabilidade_escolhida.text(a.descricao),i.responsabilidade_escolhida_a2.text(s.descricao),e.unload()}},View.ABA.NAO):(i.carrega_dados_responsabilidade_escolhida(i.responsabilidade_escolhida_1,TIPO_ETAPA.A1),i.carrega_dados_responsabilidade_escolhida(i.responsabilidade_escolhida_2,TIPO_ETAPA.A2)),alert_saved("Salvo com sucesso"),void 0!==i.onsave&&i.onsave&&i.onsave(a)})},this.preencher_responsabilidades=function(){WS.get("atuacao_efetiva_indicador_responsabilidade/listar/",{atuacao_efetiva_id:i.atuacao_efetiva_id,indicador_id:i.indicador_id},function(a){i.tabela_responsabilidades.find("tbody tr").not("[template-row]").remove(),$.each(a,function(a,e){i.add_row_responsabilidade(e)})})},this.calcula_media=function(a){for(var e=$(a.target).closest("table"),s=e.find("td:nth-child(3) input"),d=e.find("td:nth-child(4) input"),o=e.find("td:nth-child(5) div"),t=e.find("td:nth-child(2) select"),n=0,r=0,l=0,_=0,c=0,p=0,u=0,b=0;b<$(d).length;b++)"A"==$(t[b]).val().toUpperCase()?(n+=PESOS_HPE.A,r=parseInt($(s[b]).val())*PESOS_HPE.A,l=parseInt($(d[b]).val())*PESOS_HPE.A,c=parseInt($(o[b]).text())*PESOS_HPE.A):"B"==$(t[b]).val().toUpperCase()?(n+=PESOS_HPE.B,r=parseInt($(s[b]).val())*PESOS_HPE.B,l=parseInt($(d[b]).val())*PESOS_HPE.B,c=parseInt($(o[b]).text())*PESOS_HPE.B):"C"==$(t[b]).val().toUpperCase()&&(n+=PESOS_HPE.C,r=parseInt($(s[b]).val())*PESOS_HPE.C,l=parseInt($(d[b]).val())*PESOS_HPE.C,c=parseInt($(o[b]).text())*PESOS_HPE.C),""!=$(d[b]).val()&&(_+=l),""!=$(s[b]).val()&&(p+=r),""!=$(o[b]).text()&&(u+=c);(p>0||n>0||_>0||u>0)&&(i.media_efetividade.text(Math.ceil(p/n)),i.media_desejado.text(Math.ceil(_/n)),i.media_qe.text(Math.ceil(u/n)))},this.calculo_qe=function(a){var i=$(this).closest("tr"),e=i.find(":nth-child(3) input").val(),s=i.find(":nth-child(4) input").val();if(s<e||0==parseInt(s)||0==parseInt(e))i.find(":nth-child(5) div").text("").css("vertical-align","middle").css("text-align","center");else if(""!=e&&""!=s&&parseInt(e)<parseInt(s)){var d=100*(s-e)/e;i.find(":nth-child(5) div").text(Math.ceil(d)).attr("readonly",!0).attr("rel","tooltip").css("cursor","pointer").tooltip({title:"Deve existir um aumento de "+Math.ceil(d)+"% em relação à efetividade atual para atingir o desejado.",placement:"left"}).attr("data-toggle","tooltip").attr("data-html","true"),i.find(":nth-child(5) div").parent().css("vertical-align","middle").css("text-align","center")}else i.find(":nth-child(5) div").text(0).css("vertical-align","middle").css("text-align","center")},this.carrega_dados_responsabilidade_escolhida=function(a,e){WS.get("atuacao_efetiva_possibilidade_acao/listar/",{responsabilidade_id:a.responsabilidade_id,atuacao_efetiva_id:a.atuacao_efetiva_id,indicador_id:i.indicador_id},function(s){i.preencher_possibilidades_acao_24_horas(s,e),e==TIPO_ETAPA.A1?(i.responsabilidade_escolhida.text(a.descricao),$.each(s,function(a,e){i.arr_possibilidades.push({descricao:e.descricao,id:e.id,meta_acao_24_horas:e.meta_acao_24_horas,acao_24_horas:e.acao_vinte_quatro_horas})})):e==TIPO_ETAPA.A2&&(i.responsabilidade_escolhida_a2.text(a.descricao),$.each(s,function(a,e){i.arr_possibilidades_a2.push({descricao:e.descricao,id:e.id,meta_acao_24_horas:e.meta_acao_24_horas,acao_24_horas:e.acao_vinte_quatro_horas})})),i.preencher_possibilidades(s,e)})},this.salva_ordem_responsabilidades=function(a,e,s,d){WS.post("atuacao_efetiva_indicador_responsabilidade/salvar/",{indicador_responsabilidade_id:a,ordem:e,atuacao_efetiva_id:i.atuacao_efetiva_id,responsabilidade_id:s,indicador_id:d,usuario_id:i.usuario_id},function(a){alert_saved("Salvo com sucesso")})},this.voltar_ao_topo=function(){$("html, body").animate({scrollTop:0},200,"linear")},this.atualiza_array_responsabilidades=function(){i.arr_responsabilidades=[],$.each(i.tabela_responsabilidades.find("tbody tr"),function(a,e){""!=$(e).find("td:nth-child(1) input").val().trim()&&i.arr_responsabilidades.push({descricao:$(e).find("td:nth-child(1) input").val(),curva_abc:$(e).find("td:nth-child(2) select").val(),efetividade_atual:$(e).find("td:nth-child(3) input").val(),efetividade_desejada:$(e).find("td:nth-child(4) input").val(),quociente_efetividade:$(e).find("td:nth-child(5) div").text(),indicador_responsabilidade_id:$(e).attr("data-id"),responsabilidade_id:$(e).attr("data-responsabilidade-id")})})},i.arr_metodos_telas=[{metodo:function(){}},{metodo:function(){$.each(i.tabela_responsabilidades.find("tbody tr"),function(a,e){if(""!=$(e).find("td:nth-child(1) input").val()&&""!=$(e).find("td:nth-child(2) select").val()&&""==$(e).find("td:nth-child(3) input").val()){var s=new Validation;return s.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Preencha a Efetividade.")),alert_modal("Validação",s,null,function(){$(e).find("td:nth-child(3) input").focus()}),i.flag_salvar=!1,i.indice_atual>0&&i.indice_atual--,i.passos(i.indice_atual),!1}}),i.atualiza_array_responsabilidades();var a=0;if($.each(i.arr_responsabilidades,function(i,e){"A"==e.curva_abc.toUpperCase()&&a++}),2!=a){var e=new Validation;e.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Escolha duas responsabilidades mais importantes")),alert_modal("Validação",e),i.flag_salvar=!1,i.indice_atual--,i.passos(i.indice_atual)}else 1==i.flag_salvar&&i.salva_dados_responsabilidades(i.arr_responsabilidades);i.voltar_ao_topo()}},{metodo:function(){var a=i.tabela_possibilidades.find("tbody tr td:nth-child(1) input"),e=0;if($.each(a,function(a,s){if($(s).attr("data-id")>0&&""==$(s).val()){var d=new Validation;d.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Possibilidade não pode estar em branco.")),alert_modal("Validação",d),i.flag_salvar=!1,i.indice_atual--,i.passos(i.indice_atual)}""==$(s).val()||e++}),0==e){var s=new Validation;s.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Preencha pelo menos uma Possibilidade de Ação.")),alert_modal("Validação",s),i.flag_salvar=!1,i.indice_atual--,i.passos(i.indice_atual)}i.arr_possibilidades=[],$.each(a,function(a,e){""!=$(e).val()&&i.arr_possibilidades.push({descricao:$(e).val(),id:$(e).attr("data-id")})}),1==i.flag_salvar&&1==i.MODO_EDICAO&&i.salva_possibilidade_acao(i.responsabilidade_escolhida_1.responsabilidade_id,i.arr_possibilidades,TIPO_ETAPA.A1),i.voltar_ao_topo()}},{metodo:function(){var a=i.tabela_possibilidades_acao.find("tbody tr").find(".check_acao input"),e=0;if($.each(a,function(a,i){1==$(i).prop("checked")&&(e+=1)}),e<=0&&"btn"==i.modo_click){var s=new Validation;s.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Escolha pelo menos uma ação de 24 horas")),alert_modal("Validação",s),i.flag_salvar=!1,i.indice_atual--,i.passos(i.indice_atual)}var d=i.tabela_possibilidades.find("tbody tr td:nth-child(1) input");i.arr_acoes_possibilidades=[],$.each(d,function(a,e){""!=$(e).val()&&i.arr_acoes_possibilidades.push({id:$(e).attr("data-id")})}),i.voltar_ao_topo()}},{metodo:function(){var a=i.tabela_acao_possibilidade.find("tbody tr");$.each(a,function(a,e){$.each(i.arr_acoes_possibilidades,function(a,s){s.id==$(e).find("td").attr("data-id")&&""!=$(e).find("td textarea").val()&&(i.arr_acoes_possibilidades[a].meta_acao_24_horas=$(e).find("td textarea").val())})}),1==i.flag_salvar&&1==i.MODO_EDICAO&&i.salva_possibilidade_acao(i.responsabilidade_escolhida_1.id,i.arr_acoes_possibilidades,TIPO_ETAPA.A1),i.voltar_ao_topo()}},{metodo:function(){var a=i.tabela_possibilidades_a2.find("tbody tr td:nth-child(1) input");i.arr_possibilidades_a2=[],$.each(a,function(a,e){""!=$(e).val()&&i.arr_possibilidades_a2.push({descricao:$(e).val(),id:$(e).attr("data-id")})}),1==i.flag_salvar&&1==i.MODO_EDICAO&&i.salva_possibilidade_acao(i.responsabilidade_escolhida_2.responsabilidade_id,i.arr_possibilidades_a2,TIPO_ETAPA.A2),i.voltar_ao_topo()}},{metodo:function(){var a=i.tabela_possibilidades_acao_a2.find("tbody tr").find(".check_acao_a2 input"),e=0;if($.each(a,function(a,i){1==$(i).prop("checked")&&(e+=1)}),e<=0&&"btn"==i.modo_click){var s=new Validation;s.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Escolha pelo menos uma ação de 24 horas")),alert_modal("Validação",s),i.flag_salvar=!1,i.indice_atual--,i.passos(i.indice_atual)}var d=i.tabela_possibilidades_a2.find("tbody tr td:nth-child(1) input");i.arr_acoes_possibilidades_a2=[],$.each(d,function(a,e){""!=$(e).val()&&i.arr_acoes_possibilidades_a2.push({id:$(e).attr("data-id")})}),i.voltar_ao_topo()}},{metodo:function(){i.atualiza_array_responsabilidades(),i.tab_responsabilidades_resumo.find("tbody tr").not("[template-row]").remove(),$.each(i.arr_responsabilidades,function(a,e){i.add_row_responsabilidade(e,!0)}),i.preencher_possibilidade_resumo(TIPO_ETAPA.A1),i.preencher_possibilidade_resumo_acao_24_horas(TIPO_ETAPA.A1),i.preencher_acao_possibilidades_resumo(TIPO_ETAPA.A1),i.preencher_possibilidade_resumo(TIPO_ETAPA.A2),i.preencher_possibilidade_resumo_acao_24_horas(TIPO_ETAPA.A2),i.preencher_acao_possibilidades_resumo(TIPO_ETAPA.A2),i.voltar_ao_topo()}}],this.preencher_possibilidade_resumo=function(a){var e=null;a==TIPO_ETAPA.A1?((e=i.tabela_possibilidades_resumo_a1.find("tbody tr")).addClass("hidden"),$.each(i.arr_possibilidades,function(a,i){$(e[a]).removeClass("hidden").find("input").val(i.descricao).attr("disabled",!0)})):a==TIPO_ETAPA.A2&&((e=i.tabela_possibilidades_resumo_a2.find("tbody tr")).addClass("hidden"),$.each(i.arr_possibilidades_a2,function(a,i){$(e[a]).removeClass("hidden").find("input").val(i.descricao).attr("disabled",!0)}))},this.preencher_possibilidade_resumo_acao_24_horas=function(a,e){var s=null;a==TIPO_ETAPA.A1?((s=i.tabela_possibilidades_24_resumo_a1.find("tbody tr")).addClass("hidden"),$.each(i.arr_possibilidades,function(a,i){var e=$(s[a]);"S"==i.acao_24_horas&&e.removeClass("hidden").find("input").val(i.descricao).attr("disabled",!0)})):a==TIPO_ETAPA.A2&&((s=i.tabela_possibilidades_24_resumo_a2.find("tbody tr")).addClass("hidden"),$.each(i.arr_possibilidades_a2,function(a,i){var e=$(s[a]);"S"==i.acao_24_horas&&e.removeClass("hidden").find("input").val(i.descricao).attr("disabled",!0)}))},this.preencher_acao_possibilidades_resumo=function(a){if(a==TIPO_ETAPA.A1){var e=i.arr_possibilidades_acao_24_horas.filter(function(a,i){if("S"==a.acao_vinte_quatro_horas)return a});(s=i.tabela_acao_possibilidade_resumo_a1.find("tbody tr")).addClass("hidden"),$.each(e,function(a,e){var d=$(s[a]);d.removeClass("hidden");var o=d.find("textarea").attr("disabled",!0),t=d.find(".lbl_titulo"),n=d.find(".ir_para_metas");n.unbind("click"),n.click(function(a){i.passos(PASSOS_INDICADOR.TELA_ACOES_INICIATIVAS_A1),i.indice_atual=PASSOS_INDICADOR.TELA_ACOES_INICIATIVAS_A1}),t.text(e.descricao),o.text(e.meta_acao_24_horas)})}else if(a==TIPO_ETAPA.A2){var s;e=i.arr_possibilidades_acao_24_horas_a2.filter(function(a,i){if("S"==a.acao_vinte_quatro_horas)return a});(s=i.tabela_acao_possibilidade_resumo_a2.find("tbody tr")).addClass("hidden"),$.each(e,function(a,e){var d=$(s[a]);d.removeClass("hidden");var o=d.find("textarea").attr("disabled",!0),t=d.find(".lbl_titulo"),n=d.find(".ir_para_metas");n.unbind("click"),n.click(function(a){i.passos(PASSOS_INDICADOR.TELA_ACOES_INICIATIVAS_A2),i.indice_atual=PASSOS_INDICADOR.TELA_ACOES_INICIATIVAS_A2}),t.text(e.descricao),o.text(e.meta_acao_24_horas)})}},this.passos=function(a){i.dialog.find("[tipo='etapa']").addClass("hidden"),$(i.arr_steps).removeClass("active"),a==PASSOS_INDICADOR.TELA_ACOES_INICIATIVAS_A2?(i.btn_confirmar.css("display","inline-block"),i.btn_proxima_etapa.removeClass("hidden"),1==i.versao_base&&(i.btn_fechar.removeClass("hidden"),i.btn_fechar.css("display",""),i.btn_confirmar.addClass("hidden"))):(i.btn_confirmar.css("display","none"),i.btn_proxima_etapa.removeClass("hidden"),1==i.versao_base&&i.btn_fechar.addClass("hidden")),a==PASSOS_INDICADOR.TELA_RESUMO_GERAL&&i.btn_proxima_etapa.addClass("hidden"),$(i.arr_telas[a]).removeClass("hidden"),$(i.arr_steps[a]).addClass("active"),0!=a?i.btn_voltar.removeClass("hidden"):i.btn_voltar.addClass("hidden"),i.arr_metodos_telas[a].metodo(),i.pagina.text(a+1+"/"+$(i.arr_metodos_telas).length)},this.pega_telas=function(){$.each(i.steps.find("li"),function(a,e){$(e).click(function(e){i.modo_click="steps",i.passos(a),i.indice_atual=a}),i.arr_steps.push(e)}),$.each(i.dialog.find("[tipo='etapa']"),function(a,e){i.arr_telas.push(e)})},i.pega_telas(),i.passos(i.indice_atual),i.steps.find("li").hide(),this.unload=function(){i.close(),View.unload(this.html_id)},this.close=function(){void 0!==i.onclose&&i.onclose&&i.onclose()}}});