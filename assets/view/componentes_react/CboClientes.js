"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}define(["react","react-dom"],function(e,t){var o=function(t){function o(e,t){var n;return _classCallCheck(this,o),(n=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,e,t))).props.ClienteSelecionado=null,n.props.FunctionSelect=null,n.props.OnChange=!1,n.props.setConfiguracoes={},n.props.setFunctionSelect=function(e){n.props.FunctionSelect=e},n.props.setCliente=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.props.OnChange=t,null!==e&&(set_value_combobox($(n.refs.cbo_cliente),e.cliente_id,e.cliente_nome),null!==n.props.OnChange&&"function"==typeof n.props.OnChange&&n.props.OnChange())},n}return _inherits(o,t),_createClass(o,[{key:"componentDidMount",value:function(){this.criarCombobox()}},{key:"listarClientes",value:function(e,t,o){var n=t.parent().find(".edt_combobox"),i=$(window).width()<992,r=o.props.setConfiguracoes.main_externo,a=o.props.setConfiguracoes.WS_params||{};a.texto_pesquisa=n.val(),r&&void 0!==r.edt_representante&&""==r.edt_representante.val()?alert_modal("Atenção","Por favor, informe o Representante","Ok",function(){n.val(""),set_focus(r.edt_representante)}):WS.get("agenda_contatos/listar/",a,function(r){if(limpar_combobox(t),$(r).each(function(e,n){var r=[],a=$('<span class="label lb_tipo" style="margin: 5px;"></span>');r.Nome=""==n.nome_fantasia||null==n.nome_fantasia?n.razao_social.trim():n.nome_fantasia.trim(),null!=r.Nome&&""!=r.Nome||(r.Nome="-"),r["Razão"]=null!=n.razao_social&&""!=n.razao_social?n.razao_social.trim():"-",r["Código"]=""==n.codigo||null==n.codigo?"-":n.codigo,r.Unidade=""==n.unidade||null==n.unidade?"-":n.unidade,i||(r.CNPJ=""==n.cnpj||null==n.cnpj?"-":n.cnpj,r.Telefone=""==n.telefone||null==n.telefone?"-":n.telefone),void 0!==o.props.setConfiguracoes.exibe_tipo_entidade&&!1!==o.props.setConfiguracoes.exibe_tipo_entidade&&("C"==n.tipo?(a.addClass("label-info"),a.attr("title","Cliente")):"O"==n.tipo?(a.addClass("label-primary"),a.attr("title","Organização")):"F"==n.tipo?(a.addClass("label-warning"),a.attr("title","Fornecedor")):"E"==n.tipo&&(a.addClass("label-success"),a.attr("title","Empresa")),a.tooltip(),a.text(null!=n.tipo?n.tipo:"")),add_option_combobox(t,e,n.id>0?n.id:null,r,a,JSON.stringify(n))}),r.length>0&&e(!0),o.props.setConfiguracoes.WS_params.cadastra_novo&&(!App.verifica_permissao(App.sessao.dados.empresa_filial_id,"prospect")||""==n.val()||r.length>0?t.parent().find(".btn_novo").addClass("hidden"):t.parent().find(".btn_novo").removeClass("hidden")),i){var a,s=parent.find(".combobox");a=$(s).width()-535,$(parent).find(".multi-column-dropdown").css("left",a+"px")}else{var l=t.parent(),c=l.find(".combobox"),p=$(c).width();$(l).find(".multi-column-dropdown").css("width","900px"),p=parseInt(p)-28,$(l).find(".multi-column-dropdown").css("left","-"+p+"px")}$(t.parent()).find(".ul_row").click(function(){o.eventosCombobox(o,t,$(this).parent())})})}},{key:"criarCombobox",value:function(){create_combobox($(this.refs.cbo_cliente),this.listarClientes,null,null,this),this.criar_events($(this.refs.cbo_cliente))}},{key:"eventosCombobox",value:function(e,t,o){var n=t.parent(),i=n.find(".edt_combobox"),r=(n.find(".ncbo_scroll").find(".row_selected"),n.find(".ninput-group-btn-dropdown"),null);void 0!==o?void 0!==o.attr("dados-adicionais")&&(r=JSON.parse(o.attr("dados-adicionais"))):void 0!==i&&""!=i.val()&&void 0!==i.attr("dados-adicionais")&&(r=JSON.parse(i.attr("dados-adicionais"))),null!==r?(e.props.ClienteSelecionado=r,null!=e.props.FunctionSelect&&r&&e.props.FunctionSelect()):(e.props.ClienteSelecionado={id:null,nome_fantasia:"",tipo:""},e.props.FunctionSelect())}},{key:"criar_events",value:function(e){var t=e.parent().find(".edt_combobox"),o=this;t.keypress(function(t){13==t.keyCode&&setTimeout(function(){o.eventosCombobox(o,$(e))},150)}),t.keyup(function(t){""==t.target.value&&setTimeout(function(){o.eventosCombobox(o,$(e))},150)})}},{key:"render",value:function(){var t=!1;return void 0!==this.props.initial_values.disabled&&(t=this.props.initial_values.disabled),e.createElement("select",{ref:"cbo_cliente",className:"form-control select-multi-column",placeholder:this.props.initial_values.placeholder,disabled:t})}}]),o}(e.Component);return o});