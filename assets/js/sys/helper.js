function add_option(e,t,a,i){e.append($("<option "+(void 0!==i?i:"")+"></option>").val(t).html(a))}function set_focus(e){setTimeout(function(){$(e).focus()},700)}function clone_obj(e){return JSON.parse(JSON.stringify(e))}function formataDinheiro(e,t){var a=e.toFixed(2).split(".");return a[0]=t+a[0].split(/(?=(?:...)*$)/).join("."),a.join(",")}function formataCasasDecimaisSemTruncar(e,t){var a=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(a)[0]}function nl2br(e,t){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function getBrowser(){var e=detect.parse(navigator.userAgent).browser;return"chrome"===e.family.toLowerCase()?"chrome":"opera"===e.family.toLowerCase()?"opera":"firefox"===e.family.toLowerCase()?"mozilla":"safari"===e.family.toLowerCase()?"safari":"edge"===e.family.toLowerCase()?"edge":"ie"===e.family.toLowerCase()?"ie":void 0}function get_datepicker(e){if(void 0!==e){if(Modernizr.inputtypes.date)return e.val();var t=e.val(),a="";return null!=t&&""!=t&&(a=t.substring(6,10)+"-",a+=t.substring(3,5)+"-",a+=t.substring(0,2)),a}}function set_datepicker(e,t){if(void 0!==e&&(Modernizr.inputtypes.date||(e.mask("99/99/9999"),"safari"==getBrowser()||"ie"==getBrowser()?e.datepicker({dateFormat:"dd/mm/yy",beforeShow:function(){setTimeout(function(){$(".ui-datepicker").css("z-index",99999999999999)},0)}}):e.datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0})),"string"==typeof t)){var a=t.substr(0,10);if(Modernizr.inputtypes.date)e.val(a);else{var i=a.match(/(\d+)/g);"yyyy-mm-dd"==a?e.datepicker("setDate",null):(realDate=new Date(i[0],i[1]-1,i[2]),e.datepicker("setDate",realDate)),"safari"!=getBrowser()&&"ie"!=getBrowser()||e.css("position","relative")}}}function ArrayFilter(e){this.elementos=e}function filterAssunto(){}function findNivel(){}function msg_count(e,t,a){line_breaks=(e.val().match(/\n/g)||[]).length,$(t).text(e.val().length+line_breaks+" "+App.lang.gestao_agenda.caracteres+", "+App.lang.gestao_agenda.limite_caracteres+" "+a),e.val().length>=a?$(t).addClass("text-danger"):$(t).removeClass("text-danger")}function zebra_color(){var e=$('<table class="table table-striped zebra-color-fix" style="display: none;"><tr><td>a</td></tr><tr><td>b</td></tr></table>');e.appendTo($("body"));var t=e.find("tbody>tr").css("background-color");return delete e,$(".zebra-color-fix").remove(),t}function navbar_css(){var e=$(".app-abas");return{bg_color:e.css("background-color"),border_color:e.css("border-bottom-width"),border_width:e.css("border-bottom-color"),border_style:e.css("border-bottom-style")}}function numberToReal(e){var t=e.toFixed(2).split(".");return t[0]="R$ "+t[0].split(/(?=(?:...)*$)/).join("."),t.join(",")}function cripto(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}function base64_decode(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function pad(e,t,a){return a=a||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(a)+e}function is_html(e){return/<[a-z][\s\S]*>/i.test(e)||/&(#[0-9]+|[a-zA-Z]+);/.test(e)}function set_tinymce(e,t,a,i,r,o,n){try{var l=$(e).attr("id"),s=["undo redo | styleselect | bold italic | forecolor backcolor","alignleft aligncenter alignright alignjustify | bullist numlist | link image media "];$(window).width()<992&&(s="bold italic | alignleft aligncenter alignright alignjustify"),tinyMCE.get(l)?tinyMCE.get(l).setContent(t||""):(tinyMCE.baseURL="./assets/js/sys/libs/tinymce/",tinyMCE.init({menu:{},images_upload_handler:function(e,t,a){var r,o;(r=new XMLHttpRequest).withCredentials=!1,r.open("POST",WS_URI+"/imagem_tinymce/upload/"),r.setRequestHeader("X-Auth-Token",WS.token),r.onload=function(){var e;200==r.status?(e=JSON.parse(r.responseText))&&"string"==typeof e.location?t(e.location):a("Invalid JSON: "+r.responseText):a("HTTP Error: "+r.status)},(o=new FormData).append("file",e.blob(),e.filename()),void 0!==i&&o.append("modulo_id",i),r.send(o)},min_height:n||300,selector:"#"+l,extended_valid_elements:"script[language|type]",invalid_elements:"script",theme:"silver",language:"pt_BR",format:"text",readonly:a||!1,height:n||300,paste_data_images:!0,browser_spellcheck:!0,contextmenu:!1,media_live_embeds:!0,media_poster:!1,media_dimensions:!1,media_alt_source:!1,resize:!0,plugins:["media advlist autolink lists link image imagetools charmap print preview hr anchor pagebreak","searchreplace visualblocks visualchars code","insertdatetime nonbreaking table directionality","template paste textpattern"],toolbar:s,image_advtab:!0,content_css:"./"+App.url_css_bootstrap,forced_root_block:"",menubar:!1,setup:function(e){e.on("init",function(a){e.setContent(t||"")}),r&&e.on("Change",function(e){r()})}})),$(tinyMCE.get(l).editorContainer).attr("style",$(tinyMCE.get(l).editorContainer).attr("style")+(o||""))}catch(e){console.log(e)}}function get_tinymce(e){try{var t=$(e).attr("id");return tinyMCE.get(t)?tinyMCE.get(t).getContent():""}catch(e){return console.log(e),""}}function somar_horas(e,t){var a="00:00:00";if(!e&&!t)return a;e||(e=a),t||(t=a);var i=parseInt(e.length,10)-parseInt(e.split(":").join("").length,10),r=parseInt(t.length,10)-parseInt(t.split(":").join("").length,10);e&&2!=i&&(e+=":00"),t&&2!=r&&(t+=":00");for(var o=[e,t],n=0,l=0;l<o.length;l++){var s=o[l];if(s&&":00"!=s){var d=s.split(":");n+=3600*parseInt(d[0],10),n+=60*parseInt(d[1],10),n+=parseInt(d[2],10)}}var c=Math.floor(n/3600);n-=3600*c;var u=Math.floor(n/60);return n-=60*u,c=c.toString(),u=u.toString(),n=n.toString(),(1==c.length?"0"+c:c)+":"+(1==u.length?"0"+u:u)+":"+(1==n.length?"0"+n:n)}function subtrair_horas(e,t){var a="00:00:00";if(!e&&!t)return a;e||(e=a),t||(t=a);var i=parseInt(e.length,10)-parseInt(e.split(":").join("").length,10),r=parseInt(t.length,10)-parseInt(t.split(":").join("").length,10);e&&2!=i&&(e+=":00"),t&&2!=r&&(t+=":00");var o=0,n=0,l=0;if(e&&":00"!=e){var s=e.split(":");n+=3600*parseInt(s[0],10),n+=60*parseInt(s[1],10),n+=parseInt(s[2],10)}if(t&&":00"!=t){var d=t.split(":");l+=3600*parseInt(d[0],10),l+=60*parseInt(d[1],10),l+=parseInt(d[2],10)}n>=l?o=n-l:l>n&&(o=l-n);var c=Math.floor(o/3600);o-=3600*c;var u=Math.floor(o/60);o-=60*u;var p="";return l>n&&(p="-"),c=c.toString().replace(/\D/g,""),u=u.toString(),o=o.toString(),p+(1==c.length?"0"+c:c)+":"+(1==u.length?"0"+u:u)+":"+(1==o.length?"0"+o:o)}function qtd_str_ocorrencias(e,t){var a=0;if(!e)return-1;for(var i=0;i<e.length;i++)e[i]==t&&a++;return a}function format_time(e,t){var a=qtd_str_ocorrencias(e=e,":");if(1==a?e+=":00":a>1&&1==qtd_str_ocorrencias(e,".")&&(e=e.substring(0,e.indexOf("."))),""==e||null==e)return"000:00";if(e.toString().indexOf("-")>-1){if((e=(e=e.toString().replace("-","")).trim()).length>6){for(var i=e,r=0;r<1;r++)i=(t?"-0":"0")+i;return i.substring(0,i.lastIndexOf(":"))}}else if(e.length>6){var o=9-(i=e).length;if(o<0)return i.substring(0,i.lastIndexOf(":"));for(r=0;r<o;r++)i="0"+i;return 10==e.length?i.substring(0,7):i.substring(0,6)}}function extrair_campos(e){var t=[],a=!1,i=[];arguments.length>0&&(i=arguments),3==arguments.length&&(a=i[2]);var r=function(e){for(var a=0;a<e.elementos.length;a++){var i=e.elementos[a];i.tipo==ELEMENTO_TIPO.TABELA?i.campos.map(function(e){t.push(e)}):t.push(i)}};try{return a?e.grupos.map(function(e){r(e)}):e.map(function(e){r(e)}),t}catch(e){return[]}}function valor_campo_formulario(e,t){var a=[],i=null,r=null,o=[];arguments.length>0&&(o=arguments),3==arguments.length&&(r=o[2]),t=t.replace("campos.elemento_html_","");try{e.grupos.map(function(e){!function(e){for(var t=0;t<e.elementos.length;t++){var i=e.elementos[t];if(i.tipo==ELEMENTO_TIPO.TABELA){var r=i.valor||[];r.map(function(e,t){var o=i.campos.filter(function(t){if(t.elem_key==e.elem_key)return t});if(o.length>0){var n=r[t].valor,l=r[t].linha,s=JSON.parse(JSON.stringify(o[0]));s.valor=n,s.linha=l,a.push(s)}})}else a.push(i)}}(e)}),a.map(function(e){e.id_elemento==t&&(null!=e.linha?r==e.linha&&(i=e.valor):i=e.valor)})}catch(e){return console.warn("Falha ao mapear campos do formulário.",e),null}return i}function monta_editor(e,t,a){return CodeMirror.fromTextArea(e[0],{autoRefresh:!0,lineNumbers:!0,mode:t,indentUnit:2,smartIndent:!0,lineWrapping:!0,extraKeys:{Tab:"indentMore","Shift-Tab":"indentLess"},delay:500,readOnly:a,theme:"night",extraKeys:{F11:function(t){e.closest(".modal").children().toggleClass("modal-dialog"),alert_warning('Para sair do modo "Tela Cheia" pressione a tecla "ESC"'),t.setOption("fullScreen",!t.getOption("fullScreen"))},Esc:function(t){e.closest(".modal").children().addClass("modal-dialog"),t.getOption("fullScreen")&&t.setOption("fullScreen",!1)}}})}function convert_rgb_hex(e){var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);delete t[0];for(var a=1;a<=3;++a)t[a]=parseInt(t[a]).toString(16),1==t[a].length&&(t[a]="0"+t[a]);return color="#"+t.join(""),color}function convert_rgb_rgba(e,t){return e.replace("b","ba").replace(")",void 0!==t&&null!=t?", "+t+")":",1)")}function getDate(){var e=new Date,t=1==(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):(e.getMonth()+1).toString();return e.getFullYear()+"-"+t+"-"+e.getDate()}function getDateNow(e){var t=new Date;if(void 0!==e&&e){var a=1==(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1):(t.getMonth()+1).toString(),i=1==t.getDate().toString().length?"0"+t.getDate():t.getDate().toString();return t.getFullYear()+"-"+a+"-"+i}return t}function isLeap(e){return e%4==0&&e%100!=0||e%400==0}function getDaysInMonth(e,t){return[31,isLeap(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}function AddMonths(e,t,a){var i=e.getDate(),r=e;r.setDate(1),r.setMonth(e.getMonth()+t);if(i>getDaysInMonth(r.getFullYear(),r.getMonth())?r.setDate(getDaysInMonth(r.getFullYear(),r.getMonth())):r.setDate(i),void 0!==a&&a){var o=1==(r.getMonth()+1).toString().length?"0"+(r.getMonth()+1):(r.getMonth()+1).toString(),n=1==r.getDate().toString().length?"0"+r.getDate():r.getDate().toString();return r.getFullYear()+"-"+o+"-"+n}return r}function AddDays(e,t,a){var i=1*t;if(e.setTime(e.getTime()+864e5*i),void 0!==a&&a){var r=1==(e.getMonth()+1).toString().length?"0"+(e.getMonth()+1):(e.getMonth()+1).toString(),o=1==e.getDate().toString().length?"0"+e.getDate():e.getDate().toString();return e.getFullYear()+"-"+r+"-"+o}return e}function addMinutes(e,t){return new Date(e.getTime()+6e4*t)}function format_ToDate(e,t){var a=e.split("-"),i=new Date;if(i.setDate(a[2]),i.setMonth(a[1]-1),i.setYear(a[0]),void 0!==t&&t){var r=1==(i.getMonth()+1).toString().length?"0"+(i.getMonth()+1):(i.getMonth()+1).toString(),o=1==i.getDate().toString().length?"0"+i.getDate():i.getDate().toString();return i.getFullYear()+"-"+r+"-"+o}return i}function date_create(e){var t=(e=e.trim().replace("T"," ")).split(" ");if(0==t.length||t.length>2)return null;var a=t[0],i=null;2==t.length&&(i=t[1]),t=a.split("-");var r=new Date(t[0],t[1]-1,t[2]);return i&&(t=i.split(":"),r.setHours(t[0]),r.setMinutes(t[1]),3==t.length?r.setSeconds(t[2]):r.setSeconds(0),r.setMilliseconds(0)),r}Array.prototype.clean=function(e){for(var t=0;t<this.length;t++)this[t]==e&&(this.splice(t,1),t--);return this},ArrayFilter.prototype.operacao_filtro=function(e,t){for(var a=[],i=0;i<this.elementos.length;i++)"atividade_sintetica"==e&&t==$(this.elementos[i]).attr("idpai")&&void 0===$(this.elementos[i]).attr("atividade")&&a.push(i),"atividade_analitica"==e&&t==$(this.elementos[i]).attr("idpai")&&void 0!==$(this.elementos[i]).attr("atividade")&&a.push(i),"todas"==e&&t==$(this.elementos[i]).attr("idpai")&&a.push(i),"identidade"==e&&t==$(this.elementos[i]).attr("identificacao")&&a.push(i),"objects"==e&&t==$(this.elementos[i]).attr("idpai")&&a.push($(this.elementos[i])),"root_simples"==e&&void 0===$(this.elementos[i]).attr("idpai")&&void 0!==$(this.elementos[i]).attr("atividade")&&a.push($(this[i])),"root"==e&&void 0===$(this.elementos[i]).attr("idpai")&&a.push($(this.elementos[i]));return a},filterAssunto.prototype=[],filterAssunto.prototype.filterAssunto=function(e){var t=[];if(!e){for(var a=0;a<this.length;a++)e==this[a].assunto&&t.push(this[a]);return t}},findNivel.prototype=[],findNivel.prototype.findNivel=function(e){if(e){for(var t=0;t<this.length;t++)if(e==this[t])return!0;return!1}},String.prototype.format_date=function(e,t){if("NULL"==this)return"";void 0===e&&(e=!1),void 0===t&&(t=!1);var a=this.substr(0,10).match(/(\d+)/g);return!a||a.length<3?"":!0===e?4==a[2].length?a[2]+"-"+a[1]+"-"+a[0]:a[0]+"-"+a[1]+"-"+a[2]:!0===t&&"pt-BR"!==navigator.language?a[1]+"/"+a[2]+"/"+a[0]:a[2]+"/"+a[1]+"/"+a[0]},Date.prototype.addDay=function(e){if(""==e)return this;try{var t=this.getTime();return new Date(t+864e5*e)}catch(e){return this}},Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},String.prototype.format_date_time=function(){return this.format_date()+" "+this.substr(11,5)},Date.prototype.today=function(){return(this.getDate()<10?"0":"")+this.getDate()+"/"+(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+this.getFullYear()},Date.prototype.time_now=function(){return(this.getHours()<10?"0":"")+this.getHours()+":"+(this.getMinutes()<10?"0":"")+this.getMinutes()+":"+(this.getSeconds()<10?"0":"")+this.getSeconds()},Date.prototype.now=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)+" "+this.time_now()},String.prototype.format_number=function(e,t){var a=t?".":",",i=t?",":".",r=parseFloat(this).toFixed(e),o=r.indexOf("."),n=parseInt(o>=0?r.toString().substring(0,o):r.toString().substring(0,r.length)),l=o>=0?parseFloat("0."+r.toString().substring(o+1,r.length)).toFixed(e).toString().substr(2,e):"";return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+(e>0?i+l:"")},String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),i=e-3600*t-60*a;return t<10&&(t="0"+t),a<10&&(a="0"+a),i<10&&(i="0"+i),t+":"+a+":"+i},Number.prototype.format_number=function(e,t){return this.toString().format_number(e,t)},String.prototype.repeat=function(e){return new Array(e+1).join(this)},Number.prototype.arredondar=function(e){return void 0===e&&(e=2),parseFloat(Number(this).toFixed(e))};var time_create=function(e){var t=new Date("1970-01-01T"+e);return"Invalid Date"==t.toString()?new Date(0):t},checa_permissao=function(e){return App.sessao.dados.permissoes.filter(function(t){return t.chave===e})},set_format_date=function(e){var t="dd/MM/"+(!0===e?"yyyy":"yy");return"pt-BR"!==navigator.language&&(t="MM/dd/"+(!0===e?"yyyy":"yy")),t},fn_dias_uteis=function(e,t,a){if("string"!=typeof t||""===t.trim())return null;var i=new Date(t.replace(/-/g,"/")),r=new Array(7),o=App.sessao.dados.calendarios_trabalho.filter(function(t){return t.calendario_trabalho_id==e});if(a=""==a?0:parseInt(a,10),1!=o.length)return a>0?i.setDate(i.getDate()+a-1):i.setDate(i.getDate()+a),new Date(i).toISOString();if(o=o[0],r[0]="Sunday",r[1]="Monday",r[2]="Tuesday",r[3]="Wednesday",r[4]="Thursday",r[5]="Friday",r[6]="Saturday",a>0){for(var n=0;n<a;n++){for(var l=!0;l;)if(App.sessao.dados.feriados.filter(function(t){return t.data_feriado==new Date(i).toISOString().format_date(!0)&&t.calendario_trabalho_id.split(",").indexOf(e.toString())>=0}).length>0)i.setDate(i.getDate()+1),l=!1;else switch(r[new Date(i).getDay()]){case"Sunday":null==o.dom_manha_inicio?i.setDate(i.getDate()+1):l=!1;break;case"Monday":null==o.seg_manha_inicio&&null==o.seg_tarde_inicio?i.setDate(i.getDate()+1):l=!1;break;case"Tuesday":null==o.ter_manha_inicio&&null==o.ter_tarde_inicio?i.setDate(i.getDate()+1):l=!1;break;case"Wednesday":null==o.qua_manha_inicio&&null==o.qua_tarde_inicio?i.setDate(i.getDate()+1):l=!1;break;case"Thursday":null==o.qui_manha_inicio&&null==o.qui_tarde_inicio?i.setDate(i.getDate()+1):l=!1;break;case"Friday":null==o.sex_manha_inicio&&null==o.sex_tarde_inicio?i.setDate(i.getDate()+1):l=!1;break;case"Saturday":null==o.sab_manha_inicio?i.setDate(i.getDate()+1):l=!1;break;default:l=!1}i.setDate(i.getDate()+1)}i.setDate(i.getDate()-1)}return new Date(i).toISOString().format_date(!0)},fn_horas_uteis=function(e,t,a,i){return fn_converter_segundos_para_horas(fn_segundos_uteis(e,t,a),i)},fn_segundos_uteis=function(e,t,a){if(!App.sessao)return 0;var i=0,r=0,o=0,n=null,l=null,s=null,d="",c="",u="",p=null,m=null,f=null,h=0,g=0,_=0,v=0;if(void 0===e||""==e||void 0===t||""==t||void 0===a||""==a)return 0;var x=App.sessao.dados.calendarios_trabalho.filter(function(t){return t.calendario_trabalho_id==e});if(1!=x.length)return 0;if(x=x[0],t=date_create(t),a=date_create(a),t.getTime()>a.getTime())return 0;for(var y=new Date(t.getFullYear(),t.getMonth(),t.getDate()),b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),D=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2),T=time_create((t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()),S=time_create((a.getHours()<10?"0":"")+a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes()+":"+(a.getSeconds()<10?"0":"")+a.getSeconds()),A=Math.ceil((b.getTime()-y.getTime())/864e5)+1;i<A;){n=null,l=null,r=(s=new Date(t.getFullYear(),t.getMonth(),t.getDate()+i)).getDay()+1,p=null,m=null,f=null,h=null,g=0,_=0;var w=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2);if(w>D)break;if(!n){switch(r){case 1:n=x.dom_manha_inicio||x.dom_tarde_inicio,time_create(x.dom_manha_fim),time_create(x.dom_tarde_inicio);break;case 2:n=x.seg_manha_inicio||x.seg_tarde_inicio,time_create(x.seg_manha_fim),time_create(x.seg_tarde_inicio);break;case 3:n=x.ter_manha_inicio||x.ter_tarde_inicio,time_create(x.ter_manha_fim),time_create(x.ter_tarde_inicio);break;case 4:n=x.qua_manha_inicio||x.qua_tarde_inicio,time_create(x.qua_manha_fim),time_create(x.qua_tarde_inicio);break;case 5:n=x.qui_manha_inicio||x.qui_tarde_inicio,time_create(x.qui_manha_fim),time_create(x.qui_tarde_inicio);break;case 6:n=x.sex_manha_inicio||x.sex_tarde_inicio,time_create(x.sex_manha_fim),time_create(x.sex_tarde_inicio);break;case 7:n=x.sab_manha_inicio||x.sab_tarde_inicio,time_create(x.sab_manha_fim),time_create(x.sab_tarde_inicio)}n&&(n=time_create(n))}if(!l){switch(r){case 1:l=x.dom_tarde_fim||x.dom_manha_fim;break;case 2:l=x.seg_tarde_fim||x.seg_manha_fim;break;case 3:l=x.ter_tarde_fim||x.ter_manha_fim;break;case 4:l=x.qua_tarde_fim||x.qua_manha_fim;break;case 5:l=x.qui_tarde_fim||x.qui_manha_fim;break;case 6:l=x.sex_tarde_fim||x.sex_manha_fim;break;case 7:l=x.sab_tarde_fim||x.sab_manha_fim}l&&(l=time_create(l))}switch(r){case 1:c=time_create(x.dom_tarde_inicio),d=time_create(x.dom_manha_fim);break;case 2:c=time_create(x.seg_tarde_inicio),d=time_create(x.seg_manha_fim);break;case 3:c=time_create(x.ter_tarde_inicio),d=time_create(x.ter_manha_fim);break;case 4:c=time_create(x.qua_tarde_inicio),d=time_create(x.qua_manha_fim);break;case 5:c=time_create(x.qui_tarde_inicio),d=time_create(x.qui_manha_fim);break;case 6:c=time_create(x.sex_tarde_inicio),d=time_create(x.sex_manha_fim);break;case 7:c=time_create(x.sab_tarde_inicio),d=time_create(x.sab_manha_fim)}if(n&&l){var O=App.sessao.dados.feriados.filter(function(t){return t.data_feriado==w&&t.calendario_trabalho_id.split(",").indexOf(e.toString())>=0});p=1==O.length?time_create(O[0].hora_inicio):null,m=1==O.length?time_create(O[0].hora_fim):null;var M=null,C=null,I=null,F=null;switch(r){case 1:M=time_create(x.dom_manha_fim),C=time_create(x.dom_manha_inicio),I=time_create(x.dom_tarde_fim),F=time_create(x.dom_tarde_inicio);break;case 2:M=time_create(x.seg_manha_fim),C=time_create(x.seg_manha_inicio),I=time_create(x.seg_tarde_fim),F=time_create(x.seg_tarde_inicio);break;case 3:M=time_create(x.ter_manha_fim),C=time_create(x.ter_manha_inicio),I=time_create(x.ter_tarde_fim),F=time_create(x.ter_tarde_inicio);break;case 4:M=time_create(x.qua_manha_fim),C=time_create(x.qua_manha_inicio),I=time_create(x.qua_tarde_fim),F=time_create(x.qua_tarde_inicio);break;case 5:M=time_create(x.qui_manha_fim),C=time_create(x.qui_manha_inicio),I=time_create(x.qui_tarde_fim),F=time_create(x.qui_tarde_inicio);break;case 6:M=time_create(x.sex_manha_fim),C=time_create(x.sex_manha_inicio),I=time_create(x.sex_tarde_fim),F=time_create(x.sex_tarde_inicio);break;case 7:M=time_create(x.sab_manha_fim),C=time_create(x.sab_manha_inicio),I=time_create(x.sab_tarde_fim),F=time_create(x.sab_tarde_inicio)}u=M.getTime()-C.getTime()+(I.getTime()-F.getTime()),h=c.getTime()>0?c.getTime()-d.getTime():0,p&&m?(p.getTime()<n.getTime()&&p.setTime(n.getTime()),m.getTime()>l.getTime()&&m.setTime(l.getTime()),s.getTime()==y.getTime()&&1e4*t.getHours()+100*t.getMinutes()+t.getSeconds()>1e4*m.getHours()+100*m.getMinutes()+m.getSeconds()&&m.setTime(t.getTime()),p.getTime()>=d.getTime()&&p.getTime()<=c.getTime()&&p.setTime(c.getTime()),m.getTime()>=d.getTime()&&m.getTime()<=c.getTime()&&m.setTime(c.getTime()),(f=m.getTime()-p.getTime()-h)<0&&(f=0),f>u&&(f=u),o=o+u-f):(g=s.getTime()==y.getTime()&&1e4*t.getHours()+100*t.getMinutes()+t.getSeconds()>=1e4*n.getHours()+100*n.getMinutes()+n.getSeconds()?T.getTime():n.getTime(),_=s.getTime()==b.getTime()&&1e4*a.getHours()+100*a.getMinutes()+a.getSeconds()<=1e4*l.getHours()+100*l.getMinutes()+l.getSeconds()?S.getTime():l.getTime(),g>=d.getTime()&&g<=c.getTime()&&(h=0,g=c.getTime()),_>=d.getTime()&&_<=c.getTime()&&(_=c.getTime()),(T.getTime()>c.getTime()&&s.getTime()==y.getTime()||S.getTime()<d.getTime()&&s.getTime()==b.getTime())&&(h=0),(v=_-g-h)<0&&(v=0),o+=v)}i++}return o<0&&(o=0),o/1e3},fn_converter_segundos_para_horas=function(e,t){if(void 0===e)return null;void 0===t&&(t=!1);var a=Math.floor(e/3600),i=Math.floor(e%3600/60),r=Math.floor(e%3600%60),o=Math.abs(a),n=Math.abs(i),l=Math.abs(r);o.toString().length<2&&(o=("0"+o).slice(-2)),n=("0"+n).slice(-2),l=("0"+l).slice(-2);var s="";return e<0&&(t||parseInt(n,10)>0||parseInt(o,10)>0)&&(s="-"),s+o+":"+n+(t?":"+l:"")},fn_converter_horas_para_segundos=function(e){var t,a,i=0;if(void 0===e||!e||"0"==e)return 0;arr_time=e.split(":"),t=parseInt(arr_time[0],10),a=parseInt(arr_time[1],10),3==arr_time.length&&(i=parseInt(arr_time[2],10));var r=arr_time[0].indexOf("-")>=0?-1:1;return(3600*Math.abs(t)+60*a+i)*r};function removerAcentos(e){return e.replace(/[\W\[\] ]/g,function(e){return{"â":"a","Â":"A","à":"a","À":"A","á":"a","Á":"A","ã":"a","Ã":"A","ê":"e","Ê":"E","è":"e","È":"E","é":"e","É":"E","î":"i","Î":"I","ì":"i","Ì":"I","í":"i","Í":"I","õ":"o","Õ":"O","ô":"o","Ô":"O","ò":"o","Ò":"O","ó":"o","Ó":"O","ü":"u","Ü":"U","û":"u","Û":"U","ú":"u","Ú":"U","ù":"u","Ù":"U","ç":"c","Ç":"C"}[e]||e})}function remover_conhecidencias(e,t,a){var i=new RegExp(t+"(.+?)"+a,"g");return e.replace(i,"")}var FILTRO_USUARIO_FUNC={edt:null,cbo:null,tipo_oportunidade:function(e){var t=new Object;t.descricao=FILTRO_USUARIO_FUNC.edt.val(),console.log(FILTRO_USUARIO_FUNC.edt),WS.get("tipo_oportunidade/listar/",t,function(t){limpar_combobox(FILTRO_USUARIO_FUNC.cbo),$(t).each(function(e,t){var a=[];a["Descrição"]=t.descricao,add_option_combobox(FILTRO_USUARIO_FUNC.cbo,e,t.tipo_oportunidade_id,a)}),t.length>0?e(!0):e(!1)})},funil:function(e){var t=new Object;t.nome=FILTRO_USUARIO_FUNC.edt.val(),WS.get("funil_vendas/listar/",t,function(t){limpar_combobox(FILTRO_USUARIO_FUNC.cbo),FILTRO_USUARIO_FUNC.edt.val(""),set_value_combobox(FILTRO_USUARIO_FUNC.cbo,"",""),$(t).each(function(e,t){var a=[];a["Descrição"]=t.nome,add_option_combobox(FILTRO_USUARIO_FUNC.cbo,e,t.id,a)}),t.length>0?e(!0):e(!1)})}};function is_undefined(e){return void 0===e}function func_nextURI(e){if(str_uri="",void 0!==e){str_uri+=WS_URI+e.route;var t=function(){var t=[],a=[],i="";for(var r in e.args)t.push(r),a.push(e.args[r]);for(var o=0;o<t.length;o++){var n=null;n=a[o]instanceof Array?JSON.stringify(a[o]):a[o],i+="&"+t[o]+"="+n}return i}();return str_uri+="?"+t,str_uri}}function verificar_status_enviado(e){var t="";return"Atrasado"==e?t="atrasado":"Concluído"==e?t="concluido":"Não Iniciado"==e?t="nao_iniciado":"Andamento"==e?t="andamento":"Programado"==e&&(t="programado"),t}function List(e){this.indice=-1,this.vinculo=[],void 0!==e?(this.data=e,this.indice=this.data.length):this.data=[]}function Dictionary(){this.key=null,this.value=null,this.dom_reference=null,this.Lista=[]}function elem_key_random(){return(new Date).getTime()+String(Math.round(1e4*Math.random()))+String(Math.round(1e4*Math.random()))+String(Math.round(1e4*Math.random()))}List.prototype.MaxDate=function(){var e=[];if(0==this.data.length)return null;for(var t=0;t<this.data.length;t++)e.push(format_ToDate(this.data[t]));return new Date(Math.max.apply(null,e)).today().format_date(!0)},List.prototype.MinDate=function(){var e=[];if(0==this.data.length)return null;for(var t=0;t<this.data.length;t++)e.push(format_ToDate(this.data[t]));return new Date(Math.min.apply(null,e)).today().format_date(!0)},List.prototype.Max=function(){var e=[];if(0==this.data.length)return null;for(var t=0;t<this.data.length;t++)e.push(this.data[t]);return Math.max.apply(null,e)},List.prototype.Min=function(){var e=[];if(0==this.data.length)return null;for(var t=0;t<this.data.length;t++)e.push(this.data[t]);return Math.min.apply(null,e)},List.prototype.Add=function(e){void 0!==e&&(this.data.push(e),this.vinculo.push(""),this.indice++)},List.prototype.Vincular=function(e,t,a){this.vinculo[e]={vinculo_id:t,vinculo_dom:a,data:this.data[e]}},List.prototype.GetVinculoAt=function(e){return void 0!==e?this.vinculo[e]:void console.warn("Desculpe, mas é necessário um índice para buscar o vinculo.")},List.prototype.GetIndex=function(){return this.indice},List.prototype.Find=function(e){return this.data.findIndex(function(t){return t===e})},List.prototype.Exist=function(e){return void 0!==this.data.find(function(t){return t===e})},List.prototype.AddRange=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.data.push(e[t]),this.indice++,this.vinculo.push("")},List.prototype.ElementAt=function(e){return this.data[e]},List.prototype.RemoveAt=function(e){var t=[];if(void 0!==e)if("object"!=typeof e)this.data.splice(e,1);else if("object"==typeof e){for(var a,i=0;i<e.length;i++)for(var r=0;r<this.data.length;r++)if(void 0!==a&&a!=r)r!=e[i]&&t.push(this.data[r]);else if(r==e[i]){a=r;break}this.data=t}},List.prototype.Count=function(){return this.data.length},List.prototype.ToArray=function(){return this.data},List.prototype.ToString=function(){return isArray(this.data)?this.data.toString():JSON.stringify(this.data)},List.prototype.Clear=function(){this.data=[],this.indice=-1,this.vinculo=[]},Dictionary.prototype.Add=function(e,t){var a=!1,i=0;if(void 0!==e&&void 0!==t){if(this.Lista.length>0)for(var r=0;r<this.Lista.length;r++){if(void 0===this.Lista[e.toString()+""]){a=!0;break}i=1,a=!1}0==this.Lista.length&&(a=!0),a?this.Lista[e.toString()+""]=t:a||0!=i?a||1!=i||console.warn("Desculpe, essa chave já existe, atualize o valor ou remova."):console.warn("Desculpe, falha ao inserir.")}else console.warn("Desculpe, um paramêtro não foi enviado!.")},Dictionary.prototype.AddDOMReference=function(e,t){if(0!=this.Lista.length&&this.Lista.length>0)for(var a=0;a<this.Lista.length;a++){if(void 0===this.Lista[e.toString()+""])return;var i=new Object;i.value="",i.value=this.Lista[e.toString()+""],i.DOM=null,i.DOM=t,this.Lista[e.toString()+""]=i}},Dictionary.prototype.MaxDateKey=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(format_ToDate(t));return new Date(Math.max.apply(null,e)).today().format_date(!0)},Dictionary.prototype.MinDateKey=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(format_ToDate(t));return new Date(Math.min.apply(null,e)).today().format_date(!0)},Dictionary.prototype.MinDateValue=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(format_ToDate(this.Lista[t]));return new Date(Math.min.apply(null,e)).today().format_date(!0)},Dictionary.prototype.MaxDateValue=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(format_ToDate(this.Lista[t]));return new Date(Math.max.apply(null,e)).today().format_date(!0)},Dictionary.prototype.MaxKey=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(t);return Math.max(e)},Dictionary.prototype.Keys=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(t);return e},Dictionary.prototype.Values=function(){var e=[];for(var t in this.Lista)"clean"!=t&&e.push(this.Lista[t]);return e},Dictionary.prototype.Destruir=function(){this.Dictionary=new Dictionary},Dictionary.prototype.ElementAt=function(e){return this.Lista[e.toString()+""]};var func_todos_extension=function(e,t){var a=$(e),i=a.find('option:not([value="-1"]):selected').length,r=a.find('option:not([value="-1"])').length,o=a.find('option[value="-1"]:selected').length>0;if(0==t)o?a.find("option").each(function(e,t){$(t).prop("selected",!0)}):a.find("option").each(function(e,t){$(t).prop("selected",!1)});else{i=a.find('option:not([value="-1"]):selected').length,r=a.find('option:not([value="-1"])').length,o=a.find('option[value="-1"]:selected').length>0;i==r?a.find('option[value="-1"]').prop("selected",!0):a.find('option[value="-1"]').prop("selected",!1)}a.selectpicker("refresh")},PARAMETRO_CLASS=function(){this.container_principal=document.createElement("div"),this.form_group_container=document.createElement("div"),this.label_element=document.createElement("label"),this.elemento_entrada=null,this.container_principal.classList.add("col-xs-12","col-md-12","col-sm-12","col-lg-6"),this.form_group_container.classList.add("form-group"),this.id=null,this.nome_campo=null,this.alias_campo=null,this.tipo_campo=PARAMETRO_PERSONALIZADO_TIPO.STRING,this.ipt_tipo=PARAMETRO_PERSONALIZADO_IPT.INPUT,this.sql_original=null,this.operador=null,this.label_element.style.textIndent="5px",this.label_element.style.borderBottom="2px solid #D2D2D2",this.label_element.style.display="flex",this.label_element.style.display="-webkit-flex",this.label_element.style.textTransform="capitalize",this.label_element.style.paddingBottom="8px",this.label_element.style.marginBottom="10px",this.get_elemento_operador=function(){var e="";return void 0!==this.sql_original&&null!=this.sql_original.toString().match(/(LIKE|=|IN|NOT IN|!=|<>|>|<)/)&&(e=this.sql_original.toString().match(/(LIKE|=|IN|NOT IN|!=|<>|>|<|>=|<=)/g)[0],this.operador=e),this.operador},this.get_elemento_tipo=function(){return this.tipo_campo==PARAMETRO_PERSONALIZADO_TIPO.STRING?this.tipo_campo=ELEMENTO_TIPO.TEXTO:this.tipo_campo===PARAMETRO_PERSONALIZADO_TIPO.DATA?this.tipo_campo=ELEMENTO_TIPO.DATA:this.tipo_campo==PARAMETRO_PERSONALIZADO_TIPO.FLOAT&&(this.tipo_campo=ELEMENTO_TIPO.DECIMAL),this.tipo_campo},this.gerar_elemento=function(){return this.label_element.setAttribute("for",this.id),this.label_element.textContent=this.alias_campo,this.ipt_tipo==PARAMETRO_PERSONALIZADO_IPT.INPUT?(this.elemento_entrada=document.createElement("input"),this.elemento_entrada.classList.add("form-control"),this.elemento_entrada.setAttribute("campo_id",this.nome_campo),this.elemento_entrada.setAttribute("id",this.id),this.elemento_entrada.setAttribute("campo_tipo",this.tipo_campo),this.elemento_entrada.setAttribute("type","text")):this.ipt_tipo==PARAMETRO_PERSONALIZADO_IPT.SMC?(this.elemento_entrada=document.createElement("select"),this.elemento_entrada.classList.add("form-control"),this.elemento_entrada.setAttribute("campo_id",this.nome_campo),this.elemento_entrada.setAttribute("id",this.id)):this.ipt_tipo==PARAMETRO_PERSONALIZADO_IPT.DATE&&(this.elemento_entrada=document.createElement("input"),this.elemento_entrada.classList.add("form-control"),this.elemento_entrada.setAttribute("campo_id",this.nome_campo),this.elemento_entrada.setAttribute("campo_tipo",this.tipo_campo),this.elemento_entrada.setAttribute("id",this.id),this.elemento_entrada.setAttribute("type","date")),this.form_group_container.appendChild(this.label_element),this.form_group_container.appendChild(this.elemento_entrada),this.container_principal.appendChild(this.form_group_container),this.container_principal}};function get_time_difference(e,t){var a=new Object;if(e>t)var i=e.getTime()-t.getTime();else i=t.getTime()-e.getTime();a.days=Math.floor(i/1e3/60/60/24),i-=1e3*a.days*60*60*24,a.hours=Math.floor(i/1e3/60/60),i-=1e3*a.hours*60*60,a.minutes=Math.floor(i/1e3/60),i-=1e3*a.minutes*60,a.seconds=Math.floor(i/1e3);var r="00";a.hours>0&&(r=String(a.hours)),1==r.length&&(r="0"+r);var o="00";a.minutes>0&&(o=String(a.minutes)),1==o.length&&(o="0"+o);var n="00";a.seconds>0&&(n=String(a.seconds)),1==n.length&&(n="0"+n);var l=r+":"+o+":"+n;return a.duration=l,a}function date_diff(e,t){var a=t,i=e;"string"==typeof e?i=new Date(e).getTime():"object"==typeof e&&null!=e&&(i=e.getTime()),"string"==typeof t?a=new Date(t).getTime():"object"==typeof t&&null!=t&&(a=t.getTime());var r=i-a;return Math.round(r/864e5)}function dia_contador_str(e){return void 0===e?"":0==e?App.lang.dia_semana.hoje:1==e?App.lang.dia_semana.amanha:e>1?App.lang.dia_semana.falta+" "+e.toString()+" "+App.lang.dia_semana.dias:-1==e?App.lang.dia_semana.um_dia_atras:e<-1?Math.abs(e).toString()+" "+App.lang.dia_semana.dias_atras:""}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function validateForm(){var e=$(":input[required]:visible"),t=0;return $(e).each(function(e,a){""==$(a).val()&&($(a).css("border-color","red"),t++,$(a).unbind("blur"),$(a).bind("blur",function(e){""!=$(a).val()&&$(a).css("border-color","none")}))}),t>0}function somenteNumeros(e,t){/\D/g.test(e)&&(t.value=e.replace(/\D/g,""))}function InputFileNext(e){this.default_object={elem:null,placeholder:"Nenhum Arquivo Selecionado",atualizar_texto:!0,apenas_imagem:!1};var t=arguments;if("object"==typeof t[0])for(var a in t[0])this.default_object[a]=t[0][a];var i=this.default_object.placeholder,r='<span class="InputFileNext btn btn-primary btn-sm"><label class="anexo_base_label" for="anexo_base_input"></label><span class="anexo_base_button label_mobilefile col-xs-12"><input class="anexo_base_input col-xs-12 mobile_inputfile" type="file" '+(1==this.default_object.apenas_imagem?' accept="image/*" ':"")+'  ><span class="btn_input"><span class="hidden">text</span><span class="anexo_base_button_icon2 glyphicon glyphicon-open"></span><span class="anexo_base_input_text" style="float:none !important;">'+i+"</span></span></span></span>";if(null!=this.default_object.elem)var o=$(this.default_object.elem).append(r);$(o).find(".anexo_base_button");var n=$(o).find(".anexo_base_input"),l=$(o).find(".anexo_base_input_text");if(this.default_object.atualizar_texto&&n.unbind("change").change(function(e){0===$(this).get(0).files.length?$(l).text(i):$(l).text($(this).val().split("fakepath\\").length>1?$(this).val().split("fakepath\\")[1].toString():$(this).val().split("fakepath\\")[0].toString())}),void 0!==e.evento&&e.evento.length>0)for(var s=0;s<e.evento.length;s++){var d=e.evento[s];$(n).bind(d.nome,d.func)}return n}function object_to_array(e){var t=null;return null!=e&&void 0!==e&&(t=Object.keys(e).map(function(t){return e[t]})),t}function extender_parametros(e,t){return spread(e,t)}Number.prototype.format_time=function(){var e=this,t=Math.floor(e/1e3/60/60);e-=1e3*t*60*60;var a=Math.floor(e/1e3/60);e-=1e3*a*60;var i=Math.floor(e/1e3);return e-=1e3*i,(t=1==t.toString().length?"0"+t:t)+":"+(a=1==a.toString().length?"0"+a:a)+":"+(i=1==i.toString().length?"0"+i:i)};var PhoneGapFile=function(){PhoneGapFile.STATE={NOT_STARTED:0,SUCCESS:1,FAIL:1},this.retorno={state:PhoneGapFile.STATE.NOT_STARTED,file:{}};var e=this;PhoneGapFile.camera=function(t){var a=new File_Class;navigator.camera.getPicture(function(i){var r=i,o=r.substring(r.lastIndexOf("/")+1);window.resolveLocalFileSystemURL(r,function(i){i.file(function(i){a.lastModified=i.lastModified,a.lastModifiedDate=i.lastModifiedDate,a.localURL=i.localURL,a.name=o,a.size=i.size,a.mime_type=i.type,a.type=i.type,e.retorno.state=PhoneGapFile.STATE.SUCCESS,e.retorno.file=a,t(e.retorno)})},function(){e.retorno.state=PhoneGapFile.STATE.FAIL,t(e.retorno)})},function(a){e.retorno.state=PhoneGapFile.STATE.FAIL,PhoneGapNotification.alert("Falha ao abrir a camera, por favor tente novamente ou verifique as permissões."),console.log(a),t(e.retorno)},{quality:25,destinationType:navigator.camera.DestinationType.NATIVE_URI,sourceType:navigator.camera.PictureSourceType.CAMERA,allowEdit:!1,saveToPhotoAlbum:!0})},PhoneGapFile.getFile=function(t){var a=new File_Class;navigator.camera.getPicture(function(i){var r=i;-1==r.indexOf("file:///")&&(r="file://"+r);var o=(r=(r=r.replace("cdvfile","file")).replace("cdv","file")).substring(r.lastIndexOf("/")+1);window.resolveLocalFileSystemURL(r,function(i){i.file(function(i){console.log("PATH",r),a.lastModified=i.lastModified,a.lastModifiedDate=i.lastModifiedDate,a.localURL=r,a.name=o,a.size=i.size,a.mime_type=i.type,a.type=i.type,e.retorno.state=PhoneGapFile.STATE.SUCCESS,e.retorno.file=a,t(e.retorno)})},function(a){e.retorno.state=PhoneGapFile.STATE.FAIL,PhoneGapNotification.alert("Falha ao abrir a camera, por favor tente novamente ou verifique as permissões."),console.log(a),t(e.retorno)})},function(){e.retorno.state=PhoneGapFile.STATE.FAIL,PhoneGapNotification.alert("Falha ao abrir a camera, por favor tente novamente ou verifique as permissões."),console.log(error),t(e.retorno)},{quality:25,destinationType:navigator.camera.DestinationType.FILE_URI,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY,mediaType:navigator.camera.MediaType.ALLMEDIA})},PhoneGapFile.download=function(e,t){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(a){var i,r=new FileTransfer,o=encodeURI(e),n=e.substring(e.lastIndexOf("/")+1).split("&")[0].replace("?documento_revisao_id=","");WS.get("documento/getInfo/",{documento_revisao_id:n},function(e){i=e;var a=cordova.file.externalRootDirectory+"Download/"+i.nome_arquivo;console.log(a);var n=0;r.onprogress=function(e){var t=!1;if(e.lengthComputable){var a=Math.floor(e.loaded/e.total*100);navigator.notification.progressValue(a),a<1&&(t=!0,n++),100===a&&(navigator.notification.progressStop(),t=!1),t&&1==n&&(navigator.notification.progressStart("Baixando o arquivo...","O arquivo será salvo na pasta /Download/"),t=!1)}},r.download(o,a,function(e){PhoneGapNotification.alert("NextBP - Soluções Inteligentes","Seu download foi concluído com sucesso!\nO arquivo  se encontra na pasta /Download/"),navigator.notification.beep(1),navigator.vibrate(200),void 0!==t&&null!=t&&(t(),console.log(e))},function(e){console.log("download error code"+e.code),console.log(e),PhoneGapNotification.alert("Download","Falha ao realizar download do arquivo.")},!0)})},function(e){console.log(e),PhoneGapNotification.alert("Download","Falha ao realizar download do arquivo.")})}},PhoneGapNotification=function(){PhoneGapNotification.alert=function(e,t){navigator.notification.alert(t,function(){},"[Next BP] - "+e,!1)}},PhoneGapWS=function(e,t){this.files=[],this.disable_buttons=[],this.route="",this.documentos=[],this.ft=new FileTransfer,this.data={},this.watcher_documentos=null,this.filenames=[],PhoneGapWS.STATE={NOT_STARTED:0,SUCCESS:1,ERROR:2},this.retorno={state:PhoneGapWS.STATE.NOT_STARTED,return_value:null};var a=this;this.func_control_buttons=function(e){$(a.disable_buttons).each(function(t,a){e?a.removeClass("disabled"):a.addClass("disabled")})},this.generate_file=function(){$.each(a.data.documentos,function(e,t){var i,r=(i=t).name,o=i.mime_type,n=o.split("/")[0],l=o.split("/")[1],s=!1,d="";r.lastIndexOf(".")&&(s=!0,d=r.substring(r.lastIndexOf("."))),r="image"===n?"image_"+md5(r+"_"+e)+(!1===s?"jpeg"===l?".jpg":".png":d):"video"===n?"video_"+md5(r+"_"+e)+(!1===s?"mp4"===l?".mp4":"ogg"===l?".ogv":"avi"===l||"msvideo"===l||"x-msvideo"===l?".avi":"quicktime"===l?".mov":"mpeg"===l?".mpeg":".wmv":d):"audio"===n?"audio_"+md5(r+"_"+e)+(!1===s?"mp3"===l?".mp3":"amr"===l?".amr":"wav":d):"text"===n?"docs_"+md5(r+"_"+e)+(!1===s?"plain"===l?".txt":"html"===l?".html":".doc":d):l.indexOf("excel")>-1?"sheets_"+md5(r+"_"+e)+(!1===s?"excel"===l?".xls":".csv":d):l.indexOf("powerpoint")>-1?"slide_"+md5(r+"_"+e)+(!1===s?(l.indexOf("powerpoint"),".ppt"):d):"pdf"===l?"pdf_"+md5(r+"_"+e)+(!1===s?".pdf":d):"file_"+md5(r+"_"+e)+(!1===s?".":d);var c=null;t.id&&(c=t.id);var u={id:c,elem_key:e,nome:r,mime_type:o,localURL:i.localURL,enviado:!1};a.filenames.push(r),a.documentos.push(u)})},this.generate_file_options=function(){$.each(a.documentos,function(e,t){t.options=new FileUploadOptions,t.options.fileKey=a.data.documento_key,t.options.fileName=t.nome,t.options.mimeType=t.mime_type,t.options.chunkedMode=!1,t.options.headers={Connection:"close"};var i={};for(var r in a.data)"optionsFileKey"!=r&&"documentos"!=r&&"documento_key"!=r&&(i[r]=a.data[r]);t.id&&(i.arquivo_id=t.id),t.options.params=i})},this.notification={init:function(){navigator.notification.progressStart("[Next BP] Enviando para o servidor","O arquivo está sendo enviado para o servidor.\n\nPor favor aguarde.")},close:function(){setTimeout(function(){navigator.notification.progressStop(),clearTimeout(this)},600)},alert_loading:function(e){e?navigator.notification.activityStart("[Next BP] Upload de Arquivos","Por favor aguarde..."):navigator.notification.activityStop()},alert:function(e){navigator.notification.alert(e,function(){},"[Next BP] - Upload de Arquivo",!1)},loading:function(e){navigator.notification.progressValue(e)}},this.controller_progress=function(){for(var e=[],t=0;t<a.documentos.length;t++){var i=a.documentos[t];i.enviado&&e.push(i)}var r;return r=100*e.length/a.documentos.length,!(e.length<a.documentos.length)||r},this.start_process=function(){a.watcher_documentos=setInterval(function(){var e=0,i=a.controller_progress();1!=i?(e=i,a.notification.loading(e),i=a.controller_progress()):(clearInterval(a.watcher_documentos),a.notification.loading(100),a.notification.close(),a.notification.alert("Arquivo enviado com sucesso!"),a.retorno.state=PhoneGapWS.STATE.SUCCESS,a.retorno.return_value=a.filenames.join(),t(a.retorno))},600)},this.send_to_server=function(){$.each(a.documentos,function(e,i){var r=WS_URI+a.route;r.lastIndexOf("//")>10&&(r=r.substr(0,r.lastIndexOf("//"))+r.substr(r.lastIndexOf("//")+1)),a.ft.upload(i.localURL,r,function(e){i.enviado=!0},function(e){console.log(e),1===e.code?a.notification.alert("Falha no servidor. CODE: 404 "):5===e.code?a.notification.alert("Falha ao enviar o arquivo. CODE:"+e.code):3===e.code?a.notification.alert("Falha ao conectar no servidor. CODE: 500 "):a.notification.alert("Falha desconhecida, por favor tente novamente."),a.retorno.state=PhoneGapWS.STATE.ERROR,a.retorno.return_value=i.name,clearInterval(a.watcher_documentos),t(a.retorno)},i.options)}),a.notification.init(),a.start_process()},this.init=function(){void 0!==e.disable_buttons&&(a.disable_buttons=e.disable_buttons,a.func_control_buttons(!1)),void 0!==e.route?a.route=e.route:console.warn("PhoneGapWS::Rota não informada"),void 0!==e.data?a.data=e.data:console.warn("PhoneGapWS::Parametros não informados.");try{a.generate_file(),a.generate_file_options(),a.send_to_server()}catch(e){a.notification.alert("Desculpe, ocorreu uma falha durante o processo de upload, por favor tente novamente."),a.notification.close(),console.log(e)}}()},File_Class=function(){this.localUrl="",this.name="",this.mime_type="",this.lastModified="",this.lastModifiedDate="",this.enviado=!1};new PhoneGapFile,new PhoneGapNotification;var spread=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};function hexc(e){var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);delete t[0];for(var a=1;a<=3;++a)t[a]=parseInt(t[a]).toString(16),1==t[a].length&&(t[a]="0"+t[a]);return color="#"+t.join(""),color}function mostrar_notificacao(e,t,a){"granted"!==Notification.permission?Notification.requestPermission():new Notification(e,{icon:"assets/img/logo_transp.png",body:t}).onclick=function(){a()}}function copyToClipboard(e){var t=$("<input>");$("body").append(t),t.val(e).select(),document.execCommand("copy"),t.remove(),alert_info("Copiado para área de transferência")}function download_arquivo(e,t){require(["file-saver"],function(){saveAs(dataURItoBlob(e),t)})}function dataURItoBlob(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([i],{type:a})}function traduzir_devextreme(){DevExpress.localization.loadMessages({"pt-br":{Yes:"Sim",No:"Não",Cancel:"Cancelar",Clear:"Limpar",Done:"Concluído",Loading:"Carregando ...",Select:"Selecione ...",Search:"Pesquisar ...",Back:"Voltar",OK:"OK","dxCollectionWidget-noDataText":"Sem dados","validation-required":"Preenchimento obrigatório","validation-required-formatted":"{0} é de preenchimento obrigatório","validation-numeric":"Valor deve ser um número","validation-numeric-formatted":"{0} deve ser um número","validation-range":"Valor está fora do intervalo","validation-range-formatted":"{0} está fora do intervalo","validation-stringLength":"O comprimento do valor não está correto","validation-stringLength-formatted":"O comprimento de {0} não está correto","validation-custom":"Valor inválido","validation-custom-formatted":"{0} é inválido","validation-compare":"Valores não coincidem","validation-compare-formatted":"{0} não coincidem","validation-pattern":"Valor não corresponde ao padrão","validation-pattern-formatted":"{0} não corresponde ao padrão","validation-email":"Email inválido","validation-email-formatted":"{0} é inválido","validation-mask":"Valor inválido","dxLookup-searchPlaceholder":"Número mínimo de caracteres: {0}","dxList-pullingDownText":"Puxar para baixo para recarregar...","dxList-pulledDownText":"Soltar para recarregar...","dxList-refreshingText":"Recarregando ...","dxList-pageLoadingText":"A carregar ...","dxList-nextButtonText":"Mais","dxList-selectAll":"Selecionar todos","dxListEditDecorator-delete":"Eliminar","dxListEditDecorator-more":"Mais","dxScrollView-pullingDownText":"Puxar para baixo para recarregar...","dxScrollView-pulledDownText":"Soltar para recarregar...","dxScrollView-refreshingText":"Recarregando ...","dxScrollView-reachBottomText":"A carregar ...","dxDateBox-simulatedDataPickerTitleTime":"Selecionar hora","dxDateBox-simulatedDataPickerTitleDate":"Selecionar data","dxDateBox-simulatedDataPickerTitleDateTime":"Selecionar data e hora","dxDateBox-validation-datetime":"Valor deve ser uma data ou hora","dxFileUploader-selectFile":"Selecionar arquivo","dxFileUploader-dropFile":"ou Soltar arquivo aqui","dxFileUploader-bytes":"bytes","dxFileUploader-kb":"kb","dxFileUploader-Mb":"Mb","dxFileUploader-Gb":"Gb","dxFileUploader-upload":"Upload","dxFileUploader-uploaded":"Upload concluído","dxFileUploader-readyToUpload":"Pronto para upload","dxFileUploader-uploadFailedMessage":"Upload falhou","dxRangeSlider-ariaFrom":"De {0}","dxRangeSlider-ariaTill":"Até {0}","dxSwitch-switchedOnText":"Sim","dxSwitch-switchedOffText":"Não","dxForm-optionalMark":"opcional","dxForm-requiredMessage":"{0} é de preenchimento obrigatório","dxNumberBox-invalidValueMessage":"Valor deve ser um número","dxDataGrid-columnChooserTitle":"Seletor de Colunas","dxDataGrid-columnChooserEmptyText":"Arraste uma coluna para até aqui para escondê-la","dxDataGrid-groupContinuesMessage":"Continua na página seguinte","dxDataGrid-groupContinuedMessage":"Continuação da página anterior","dxDataGrid-groupHeaderText":"Agrupar pela coluna","dxDataGrid-ungroupHeaderText":"Remover grupo","dxDataGrid-ungroupAllText":"Remover todos os grupos","dxDataGrid-editingEditRow":"Editar","dxDataGrid-editingSaveRowChanges":"Salvar","dxDataGrid-editingCancelRowChanges":"Cancelar","dxDataGrid-editingDeleteRow":"Eliminar","dxDataGrid-editingUndeleteRow":"Recuperar","dxDataGrid-editingConfirmDeleteMessage":"Tem certeza que deseja eliminar este registro?","dxDataGrid-validationCancelChanges":"Cancelar alterações","dxDataGrid-groupPanelEmptyText":"Arraste uma coluna aqui para agrupar os registros por ela","dxDataGrid-noDataText":"Sem dados","dxDataGrid-searchPanelPlaceholder":"Pesquisar ...","dxDataGrid-filterRowShowAllText":"(Todos)","dxDataGrid-filterRowResetOperationText":"Limpar","dxDataGrid-filterRowOperationEquals":"Igual","dxDataGrid-filterRowOperationNotEquals":"Diferente","dxDataGrid-filterRowOperationLess":"Menor que","dxDataGrid-filterRowOperationLessOrEquals":"Menor que ou igual a","dxDataGrid-filterRowOperationGreater":"Maior que","dxDataGrid-filterRowOperationGreaterOrEquals":"Maior que ou igual a","dxDataGrid-filterRowOperationStartsWith":"Começa com","dxDataGrid-filterRowOperationContains":"Contém","dxDataGrid-filterRowOperationNotContains":"Não contém","dxDataGrid-filterRowOperationEndsWith":"Termina com","dxDataGrid-filterRowOperationBetween":"Entre","dxDataGrid-filterRowOperationBetweenStartText":"Início","dxDataGrid-filterRowOperationBetweenEndText":"Fim","dxDataGrid-applyFilterText":"Aplicar filtro","dxDataGrid-trueText":"Sim","dxDataGrid-falseText":"Não","dxDataGrid-sortingAscendingText":"Ordenar ascendentemente","dxDataGrid-sortingDescendingText":"Ordenar descendentemente","dxDataGrid-sortingClearText":"Limpar ordenação","dxDataGrid-editingSaveAllChanges":"Salvar todas as alterações","dxDataGrid-editingCancelAllChanges":"Descartar alterações","dxDataGrid-editingAddRow":"Adicionar uma linha","dxDataGrid-summaryMin":"Mín: {0}","dxDataGrid-summaryMinOtherColumn":"Mín de {1} é {0}","dxDataGrid-summaryMax":"Máx: {0}","dxDataGrid-summaryMaxOtherColumn":"Máx de {1} é {0}","dxDataGrid-summaryAvg":"Méd: {0}","dxDataGrid-summaryAvgOtherColumn":"Média de {1} é {0}","dxDataGrid-summarySum":"Soma: {0}","dxDataGrid-summarySumOtherColumn":"Soma de {1} é {0}","dxDataGrid-summaryCount":"Contagem: {0}","dxDataGrid-columnFixingFix":"Fixar","dxDataGrid-columnFixingUnfix":"Não fixar","dxDataGrid-columnFixingLeftPosition":"À esquerda","dxDataGrid-columnFixingRightPosition":"À direita","dxDataGrid-exportTo":"Exportar para","dxDataGrid-exportToExcel":"Exportar para Excel","dxDataGrid-excelFormat":"Planilha Excel","dxDataGrid-exportAll":"Exportar todos os dados","dxDataGrid-exportSelectedRows":"Exportar linhas selecionadas","dxDataGrid-selectedRows":"Linhas selecionadas","dxDataGrid-headerFilterEmptyValue":"(Vazio)","dxDataGrid-headerFilterOK":"OK","dxDataGrid-headerFilterCancel":"Cancelar","dxDataGrid-ariaColumn":"Coluna","dxDataGrid-ariaValue":"Valor","dxDataGrid-ariaFilterCell":"Filtro de célula","dxDataGrid-ariaCollapse":"Contrair","dxDataGrid-ariaExpand":"Expandir","dxDataGrid-ariaDataGrid":"Grelha de dados","dxDataGrid-ariaSearchInGrid":"Pesquisar na grade de dados","dxDataGrid-ariaSelectAll":"Selecionar todos","dxDataGrid-ariaSelectRow":"Selecionar linha","dxDataGrid-filterBuilderPopupTitle":"Construtor de filtro","dxDataGrid-filterPanelCreateFilter":"Criar filtro","dxDataGrid-filterPanelClearFilter":"Limpar","dxDataGrid-filterPanelFilterEnabledHint":"Habilitar o filtro","dxTreeList-ariaTreeList":"Lista em árvore","dxTreeList-editingAddRowToNode":"Adicionar","dxPager-infoText":"Página {0} de {1} ({2} itens)","dxPager-pagesCountText":"de","dxPivotGrid-grandTotal":"Grande Total","dxPivotGrid-total":"{0} Total","dxPivotGrid-fieldChooserTitle":"Seletor de Colunas","dxPivotGrid-showFieldChooser":"Mostrar Seletor de Colunas","dxPivotGrid-expandAll":"Expandir Tudo","dxPivotGrid-collapseAll":"Contrair Tudo","dxPivotGrid-sortColumnBySummary":'Ordenar "{0}" por esta Coluna',"dxPivotGrid-sortRowBySummary":'Ordenar "{0}" por esta Linha',"dxPivotGrid-removeAllSorting":"Remover Todas as Ordenações","dxPivotGrid-dataNotAvailable":"N/A","dxPivotGrid-rowFields":"Campos de Linha","dxPivotGrid-columnFields":"Campos de Coluna","dxPivotGrid-dataFields":"Campos de Dados","dxPivotGrid-filterFields":"Campos de Filtro","dxPivotGrid-allFields":"Todos os Campos","dxPivotGrid-columnFieldArea":"Arraste os campos de coluna até aqui","dxPivotGrid-dataFieldArea":"Arraste os campos de dados até aqui","dxPivotGrid-rowFieldArea":"Arraste os campos de linha até aqui","dxPivotGrid-filterFieldArea":"Arraste os campos de filtro até aqui","dxScheduler-editorLabelTitle":"Assunto","dxScheduler-editorLabelStartDate":"Data de Início","dxScheduler-editorLabelEndDate":"Data Final","dxScheduler-editorLabelDescription":"Descrição","dxScheduler-editorLabelRecurrence":"Repetir","dxScheduler-openAppointment":"Abrir compromisso","dxScheduler-recurrenceNever":"Nunca","dxScheduler-recurrenceDaily":"Diariamente","dxScheduler-recurrenceWeekly":"Semanalmente","dxScheduler-recurrenceMonthly":"Mensalmente","dxScheduler-recurrenceYearly":"Anualmente","dxScheduler-recurrenceEvery":"Todos","dxScheduler-recurrenceEnd":"Fim da repetição","dxScheduler-recurrenceAfter":"Depois de","dxScheduler-recurrenceOn":"A","dxScheduler-recurrenceRepeatDaily":"dia(s)","dxScheduler-recurrenceRepeatWeekly":"semana(s)","dxScheduler-recurrenceRepeatMonthly":"mês(es)","dxScheduler-recurrenceRepeatYearly":"ano(s)","dxScheduler-switcherDay":"Dia","dxScheduler-switcherWeek":"Semana","dxScheduler-switcherWorkWeek":"Dias úteis","dxScheduler-switcherMonth":"Mês","dxScheduler-switcherTimelineDay":"Linha de tempo Dia","dxScheduler-switcherTimelineWeek":"Linha de tempo Semana","dxScheduler-switcherTimelineWorkWeek":"Linha de tempo Dias úteis","dxScheduler-switcherTimelineMonth":"Linha de tempo Mês","dxScheduler-switcherAgenda":"Agenda","dxScheduler-recurrenceRepeatOnDate":"na data","dxScheduler-recurrenceRepeatCount":"ocorrência(s)","dxScheduler-allDay":"Todo o dia","dxScheduler-confirmRecurrenceEditMessage":"Deseja editar só este compromisso ou a série toda?","dxScheduler-confirmRecurrenceDeleteMessage":"Deseja eliminar só este compromisso ou a série toda?","dxScheduler-confirmRecurrenceEditSeries":"Editar série","dxScheduler-confirmRecurrenceDeleteSeries":"Eliminar série","dxScheduler-confirmRecurrenceEditOccurrence":"Editar compromisso","dxScheduler-confirmRecurrenceDeleteOccurrence":"Eliminar compromisso","dxScheduler-noTimezoneTitle":"Sem fuso horário","dxScheduler-moreAppointments":"{0} mais","dxCalendar-todayButtonText":"Hoje","dxCalendar-ariaWidgetName":"Calendário","dxColorView-ariaRed":"Vermelho","dxColorView-ariaGreen":"Verde","dxColorView-ariaBlue":"Azul","dxColorView-ariaAlpha":"Transparência","dxColorView-ariaHex":"Código de cor","dxTagBox-selected":"{0} selecionados","dxTagBox-allSelected":"Todos selecionados ({0})","dxTagBox-moreSelected":"{0} mais","vizExport-printingButtonText":"Imprimir","vizExport-titleMenuText":"Exportar/Imprimir","vizExport-exportButtonText":"{0}-Arquivo","dxFilterBuilder-and":"E","dxFilterBuilder-or":"OU","dxFilterBuilder-notAnd":"NÃO E","dxFilterBuilder-notOr":"NÃO OU","dxFilterBuilder-addCondition":"Adicionar condição","dxFilterBuilder-addGroup":"Adicionar Grupo","dxFilterBuilder-enterValueText":"<preencha com um valor>","dxFilterBuilder-filterOperationEquals":"Igual","dxFilterBuilder-filterOperationNotEquals":"Diferente","dxFilterBuilder-filterOperationLess":"Menor que","dxFilterBuilder-filterOperationLessOrEquals":"Menor ou igual que","dxFilterBuilder-filterOperationGreater":"Maior que","dxFilterBuilder-filterOperationGreaterOrEquals":"Maior ou igual que","dxFilterBuilder-filterOperationStartsWith":"Começa com","dxFilterBuilder-filterOperationContains":"Contém","dxFilterBuilder-filterOperationNotContains":"Não contém","dxFilterBuilder-filterOperationEndsWith":"Termina com","dxFilterBuilder-filterOperationIsBlank":"É vazio","dxFilterBuilder-filterOperationIsNotBlank":"Não é vazio","dxFilterBuilder-filterOperationBetween":"Entre","dxFilterBuilder-filterOperationAnyOf":"Algum de","dxFilterBuilder-filterOperationNoneOf":"Nenhum de"}}),DevExpress.localization.locale("pt-br")}function agora(e,t=!1){return date=getDateNow(),(e?(date.getFullYear()<10?"0"+date.getFullYear():date.getFullYear())+"-"+(date.getMonth()+1<10?"0"+(date.getMonth()+1):date.getMonth()+1)+"-"+(date.getDate()<10?"0"+date.getDate():date.getDate()):(date.getDate()<10?"0"+date.getDate():date.getDate())+"-"+(date.getMonth()+1<10?"0"+(date.getMonth()+1):date.getMonth()+1)+"-"+(date.getFullYear()<10?"0"+date.getFullYear():date.getFullYear()))+" "+(date.getHours()<10?"0"+date.getHours():date.getHours())+":"+(date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes())+(t?date.getSeconds()<10?":0"+date.getSeconds():":"+date.getSeconds():"")}function detectmob(){var e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),e}document.addEventListener("DOMContentLoaded",function(){Notification?"granted"!==Notification.permission&&Notification.requestPermission():alert("As notificações Desktop não estão ativadas em seu navegador.")});var extensoes_validas_assinatura=["doc","docx","pdf"];function extensao_valida(e,t){if(!e)return!1;var a=e.split(".").pop().toLowerCase();return t.indexOf(a)>=0}function emailValido(e){return/\S+@\S+\.\S+/.test(e)}function janelas_ajustaveis(e,t,a){e.resizable({handles:"e",create:function(e,t){$(".ui-resizable-e").css("cursor","ew-resize")},resize:function(e,t){$(".ui-resizable-e").css("cursor","ew-resize")},grid:$(window.top).outerWidth()/12,helper:"ui-resizable-helper",stop:function(a,i){var r=Math.round(e.outerWidth()/($(window.top).outerWidth()/12));e.css("width",""),e.css("height",""),e.removeClass("col-md-1 col-md-2 col-md-3 col-md-4 col-md-5 col-md-6 col-md-7 col-md-8 col-md-9 col-md-10 col-md-11 col-md-12"),e.addClass("col-md-"+r),t.css("width",""),t.css("height",""),t.removeClass("col-md-1 col-md-2 col-md-3 col-md-4 col-md-5 col-md-6 col-md-7 col-md-8 col-md-9 col-md-10 col-md-11 col-md-12"),t.addClass("col-md-"+(12-r))},maxWidth:$(window.top).outerWidth()/12*(a||12)})}function event_salvar(e,t){e.keydown(function(e){if(e.ctrlKey&&83==e.keyCode)return t.find(".dx-treelist-save-button").focus().trigger("click"),t.find(".dx-datagrid-save-button").focus().trigger("click"),!1})}function event_desfazer(e,t){e.keydown(function(e){if(e.ctrlKey&&90==e.keyCode)return t.find(".dx-treelist-cancel-button").trigger("click"),t.find(".dx-datagrid-cancel-button").trigger("click"),!1})}function get_cor_primaria(){return $(".get_color_primary").css("color")}function formatDate(e,t){if(e&&"object"==typeof e){var a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate();return r<10&&(r="0"+r),i<10&&(i="0"+i),t?a+"-"+i+"-"+r:r+"/"+i+"/"+a}return e}function formatDateTime(e,t){return"object"==typeof e?(t?e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate()):(e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+e.getFullYear())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()):e}function exportar_div(e,t){t=t||"download.png",html2canvas(e,{onrendered:function(e){download_arquivo(e.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream"),t)}})}function favoritar_itens(e,t){if(!Array.isArray(e))return!1;if(0===e.length)return!1;let a=App.get_parametro_usuario("favoritos");for(let i=0;i<e.length;i++){const r=e[i];if(a[r.tipo]||(a[r.tipo]=[]),t){a[r.tipo].filter(e=>parseInt(e)===parseInt(r.id)).length>0||a[r.tipo].push(parseInt(r.id))}else a[r.tipo].length>0&&(a[r.tipo]=a[r.tipo].filter(e=>parseInt(e)!=parseInt(r.id)))}App.set_parametro_usuario("favoritos",a)}function favoritar_item(e,t,a){let i=[];if(("number"==typeof t||"string"==typeof t)&&parseInt(t)>0&&i.push(parseInt(t)),Array.isArray(t)&&(i=t),0===i.length)return!1;if(""===e.toString().trim())return!1;let r=App.get_parametro_usuario("favoritos");if(r=r[e]||[],a){r.filter(e=>parseInt(e)===parseInt(t)).length>0||r.push(parseInt(t))}else r.length>0&&(r=r.filter(function(e){return parseInt(e)!=parseInt(t)}));let o={};return o[e]=r,App.set_parametro_usuario("favoritos",o),alert_saved(a?"Favorito adicionado":"Favorito removido"),!0}function verifica_favorito(e,t){if(0===parseInt(t))return!1;if(""===e.toString().trim())return!1;let a=App.get_parametro_usuario("favoritos");return!(void 0===a[e]||!Array.isArray(a[e]))&&-1!==$.inArray(parseInt(t),a[e])}function onDoubleClick(e,t){var a=e.component;function i(){a.clickCount=1,a.clickKey=e.key,a.clickDate=new Date}a.clickCount&&1==a.clickCount&&a.clickKey==e.key?a.clickKey==e.key&&(new Date-a.clickDate<=300?(a.clickCount=0,a.clickKey=0,a.clickDate=null,void 0!==t&&t(),e.event.preventDefault()):i()):i()}function alert_saved(e){alert_tooltip(e,TIPO_NOTIFICACAO_TOOLTIP.SUCESSO)}function alert_fail(e){alert_tooltip(e,TIPO_NOTIFICACAO_TOOLTIP.FALHA)}function alert_info(e){alert_tooltip(e,TIPO_NOTIFICACAO_TOOLTIP.INFORMATIVO)}function alert_warning(e){alert_tooltip(e,TIPO_NOTIFICACAO_TOOLTIP.AVISO)}function alert_tooltip(e,t,a){if(e){t=t||TIPO_NOTIFICACAO_TOOLTIP.SUCESSO,a=a||null;DevExpress.ui.notify.default({message:e,type:t,displayTime:5e3,width:a,minWidth:null},{direction:"up-push",position:"bottom center"})}}function add_botao_dx_toolbar(e,t){for(var a=[],i=0;i<e.length;i++){(r=e[i])&&a.push(r)}for(i=0;i<t.length;i++){var r;(r=t[i])&&a.push(r)}return a}function add_filtro_cor_tema(e){for(var t=e.element.find(".dx-header-row .dx-header-filter"),a=0;a<t.length;a++){var i=$(t[a]);i.hasClass("dx-header-filter-empty")?i.removeClass("dx-theme-accent-as-text-color"):i.addClass("dx-theme-accent-as-text-color")}}function convert_parameter_to_json(e){if("object"==typeof e)for(var t in e){var a=e[t];e[t]=null!=a&&""!=a&&" "!=a?JSON.parse(a):{}}else e={};return e}function get_icon_class(){var e=App.get_parametro_usuario("tema_utilizado").nome;return"generic.dark"!=e&&"material.blue.dark"!=e?"icon_black":"icon_white"}function loadOptionsToActionParams(e,t){var a={};if(t&&(a.isCountQuery=t),e){["skip","take","requireTotalCount","requireGroupCount"].forEach(function(t){void 0!==e[t]&&(a[t]=e[t])});var i=DevExpress.data.utils.normalizeSortingInfo,r=e.group,o=e.filter,n=e.select;e.sort&&(a.sort=JSON.stringify(i(e.sort))),r&&(isAdvancedGrouping(r)&&(r=i(r)),a.group=JSON.stringify(r)),Array.isArray(o)&&(stringifyDatesInFilter(o=$.extend(!0,[],o)),a.filter=JSON.stringify(o)),e.totalSummary&&(a.totalSummary=JSON.stringify(e.totalSummary)),e.groupSummary&&(a.groupSummary=JSON.stringify(e.groupSummary)),n&&(Array.isArray(n)||(n=[n]),a.select=JSON.stringify(n))}return $.extend(a,null),a}function isAdvancedGrouping(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if("groupInterval"in e[t]||"isExpanded"in e[t])return!0;return!1}function stringifyDatesInFilter(e){e.forEach(function(t,a){Array.isArray(t)?stringifyDatesInFilter(t):"[object Date]"===Object.prototype.toString.call(t)&&(e[a]=serializeDate(t))})}function serializeDate(e){function t(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}var a=[1+e.getMonth(),"/",e.getDate(),"/",e.getFullYear()],i=e.getHours(),r=e.getMinutes(),o=e.getSeconds(),n=e.getMilliseconds();return i+r+o+n>0&&a.push(" ",t(i,2),":",t(r,2),":",t(o,2),".",t(n,3)),a.join("")}function createLoadExtra(e){return{totalCount:"totalCount"in e?e.totalCount:-1,groupCount:"groupCount"in e?e.groupCount:-1,summary:e.summary||null}}function getSegundaFeira(e){var t=(e=new Date(e)).getDay(),a=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(a))}function dateDiff(e,t,a=!1,i=!1){if(e&&t){if(i){const a=864e5,i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((r-i)/a)}e=new Date(e).setHours(23,59,59,59),t=new Date(t).setHours(0,0,0,0);const r=Math.abs(e-t);return a?Math.ceil(r/864e5):r}return null}function set_span_status_projeto(e,t){var a=$('<span class="label '+str_cor_status(t)+'">');switch(t){case ATIVIDADE_SITUACAO.PROGRAMADO:t="Programado";break;case ATIVIDADE_SITUACAO.ANDAMENTO:t="Andamento";break;case ATIVIDADE_SITUACAO.CONCLUIDO:t="Concluído";break;case ATIVIDADE_SITUACAO.NAO_INICIADO:t="Não iniciado";break;case ATIVIDADE_SITUACAO.ATRASADO:t="Atrasado";break;case ATIVIDADE_SITUACAO.CANCELADA:t="Cancelada"}a.text(t),e.html(a)}function string_to_slug(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",a=0;a<28;a++)e=e.replace(new RegExp(t.charAt(a),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(a));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function string_to_array(e){return e.split(" ").join(",").split(",").join(";").split(";").filter(function(e){return!!e})}function findOne(e,t){return t.some(function(t){return e.indexOf(t)>=0})}function obter_valores_checkBox(e){for(var t=[],a=e.filter(":checked"),i=0;i<a.length;i++)t.push($(a[i]).val());return t}function disable_checkBox(e,t){e.prop("disabled",t),e.parent().attr("disabled",t),e.parents().eq(1).attr("disabled",t)}function alertaPopUp({titulo:e,conteudo:t,botaoConfirmarTexto:a="Ok",botaoConfirmarFuncao:i,botaoCancelarTexto:r,botaoCancelarFuncao:o,largura:n="auto",larguraMinima:l="350px",larguraMaxima:s="100%",altura:d="auto",autoClose:c=!0,arrBotoes:u=[],key:p,toast:m=!1}){if("string"==typeof arguments[0]&&(e=arguments[0]||e,t=arguments[1]||t,a=arguments[2]||a,i=arguments[3]||i,r=arguments[4]||r,o=arguments[5]||o,n=arguments[6]||n,d=arguments[7]||d,c=arguments[8]||c,u=arguments[9]||u),m)return void alert_fail(e);if(p&&alertaPopUp.prototype.bp_key.includes(p))return;alertaPopUp.prototype.bp_key.push(p);let f=[{widget:"dxButton",location:"after",options:{icon:"fa fa-window-restore",onClick:function(e){h.option({fullScreen:!h.option("fullScreen"),position:{my:"center",at:"center"}})}}},{widget:"dxButton",location:"after",options:{icon:"fa fa-times ",onClick:function(e){"function"==typeof o&&o(h),p&&alertaPopUp.prototype.bp_key.includes(p)&&(alertaPopUp.prototype.bp_key=alertaPopUp.prototype.bp_key.filter(e=>e!==p)),c&&h.hide()}}},...u];a&&f.push({toolbar:"bottom",location:a&&r?"after":"center",widget:"dxButton",options:{text:a,hint:a,elementAttr:{class:"class-name"},onClick:function(){"function"==typeof i&&i(h),p&&alertaPopUp.prototype.bp_key.includes(p)&&(alertaPopUp.prototype.bp_key=alertaPopUp.prototype.bp_key.filter(e=>e!==p)),c&&h.hide()}}}),r&&f.push({toolbar:"bottom",location:a&&r?"after":"center",widget:"dxButton",options:{text:r,hint:r,elementAttr:{class:"class-name"},onClick:function(){"function"==typeof o&&o(h),p&&alertaPopUp.prototype.bp_key.includes(p)&&(alertaPopUp.prototype.bp_key=alertaPopUp.prototype.bp_key.filter(e=>e!==p)),c&&h.hide()}}});var h=null;h&&$(".default_popup"+("_"+p??"")).remove();var g=$("<div />").addClass("default_popup"+("_"+p??"")).appendTo($("#default_popup"));return(h=g.dxPopup({width:n,minWidth:l,maxWidth:s,maxHeight:"100%",height:d,showTitle:!0,title:e,animation:null,contentTemplate:function(e){var a=$("<div id='scrollView'></div>"),i=$("<div />");if(a.append(i),"function"==typeof t)t(i,h);else if("object"==typeof t&&t&&t.messages){for(var r=[],o=0;o<t.messages.length;o++){for(var n=t.messages[o],l=!1,s=0;s<r.length;s++){(d=r[s]).ref==n.ref&&(l=!0,d.messages.push(n.message))}if(!l){var d={ref:n.ref,messages:[n.message]};r.push(d)}}var c=$("<div>");for(o=0;o<r.length;o++){d=r[o];var u=$('<ul class="text-danger">'+d.ref+"</ul>");for(s=0;s<d.messages.length;s++){n=d.messages[s];u.append('<li class="text-info">'+n+"</li>")}c.append(u)}i.html(c)}else i.html(t);return a.dxScrollView({height:"100%",width:"100%",direction:"both"}),e.append(a),e},visible:!1,resizeEnabled:!0,showCloseButton:!1,hideOnOutsideClick:!1,toolbarItems:f}).dxPopup("instance")).show(),h}String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0},alertaPopUp.prototype.bp_key=[];var obter_iniciais=function(e){var t,a=(t=e,t.replace("(","").replace(")","").replace("[","").replace("]","").replace("{","").replace("}","").replace("-","").replace(".","").replace("~","")).split(" "),i=a[0].substring(0,1).toUpperCase();return a.length>1&&(i+=a[a.length-1].substring(0,1).toUpperCase()),i},formatar_data_humano=function(e){var t=e.substr(0,10).split("-"),a=(new Date).getFullYear();return parseInt(t[2])+" de "+MesAbreviado(t[1])+(t[0]!=a?" de "+t[0]:"")},imprimir_div=function(e,t,a=null){var i=window.open();$(document).find("head>link").clone().each(function(e,t){$(i.document.head).append($("<link>",{rel:"stylesheet",type:"text/css",href:t.href}))}),$(document).find("head>style").clone().each(function(e,t){t.textContent.search("DevExtreme")>0&&$(i.document.head).append(t)}),a&&(i.document.title=a),$("<style type='text/css'> .input_consulta_integracao {height: 34px !important;} </style>").appendTo($(i.document.head)),!0===e&&$(i.document.body).append('<div class="text-center" style="margin-bottom: 10px"><img class="img_logo" src="'+window.location.href.substr(0,window.location.href.lastIndexOf("/"))+'/assets/img/logo_transp.png" style="max-width: 300px;"></div>');for(var r=null,o=0;o<t.length;o++)r=t[o],$(i.document.body).append($(r));setTimeout(function(){i.print()},1e3),i.onafterprint=function(){i.close()}};function isEquivalent(e,t){if(typeof e!=typeof t)return!1;if(!e&&t)return!1;if(e&&!t)return!1;if(void 0===e&&void 0===t)return!0;if(null==e&&null==t)return!0;if("object"!=typeof e||"object"!=typeof t)return e===t;var a=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(a.length!=i.length)return!1;for(var r=0;r<a.length;r++){var o=a[r];if(!isEquivalent(e[o],t[o]))return!1}return!0}function isValidDate(e){if(!e.match(/^\d{4}-\d{2}-\d{2}$/))return!1;var t=new Date(e),a=t.getTime();return!(!a&&0!==a)&&t.toISOString().slice(0,10)===e}function formatarCampoHorasTrabalhadas(e){WS.get("chamado/get_configuracoes/",null,function(t){var a=t.chamado_mascara_horas_trabalhadas;void 0!==e&&e(a)})}function converterLookup(e,t,a,i,r){for(var o="",n=0;n<e.length;n++)for(var l=e[n],s=0;s<t.length;s++){var d=t[s];(r?l[r]:l)===d[a]&&(o+=(""==o?"":", ")+d[i])}return o}function makeid(e,t=!1){let a="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<e;r++)a+=i.charAt(Math.floor(62*Math.random()));return!0===t?a.toUpperCase():a}function alertaValidacao(e="",t=""){DevExpress.ui.dialog.alert(t,e)}function cortar_texto(e,t){return"undefined"!==t&&null!==t&&t>0&&e.length>t?e.substring(0,t)+"...":e}function ColumnsFormularioCustomizado(e,t,a){if(e&&Array.isArray(e)&&0!==e.length&&t&&Array.isArray(t)&&a&&a.grupos&&Array.isArray(a.grupos))for(let i=0;i<e.length;i++){const r=e[i];e:for(let e=0;e<a.grupos.length;e++){const i=a.grupos[e];for(let e=0;e<i.elementos.length;e++){const a=i.elementos[e];if(a.id_elemento=`fc_${a.id_elemento}`,a.id_elemento==r){t.push({dataField:r,caption:a.nome,dataType:datatype_elemento_tipo(a.tipo),format:a.tipo==ELEMENTO_TIPO.DECIMAL?{type:"fixedPoint",precision:parseInt(a.decimais)}:a.tipo==ELEMENTO_TIPO.DATA?"dd/MM/yyyy":null,visible:!1,width:"100px",allowHeaderFiltering:a.tipo!=ELEMENTO_TIPO.DATA,allowSearch:a.tipo!=ELEMENTO_TIPO.DATA});break e}}}}}function chamado_fila_sla(e,t,a){if(!e)return!1;App.temp.chamado_fila_sla||(App.temp.chamado_fila_sla=[]),App.temp.chamado_fila_callback||(App.temp.chamado_fila_callback=[]),App.temp.chamado_fila_sla.includes(+e)||App.temp.chamado_fila_sla.push(+e),App.temp.chamado_fila_callback.push({chamado_id:+e,html_id:t,callback:a,timeout:(new Date).getTime()+9e4}),App.temp.chamado_file_timer||(App.temp.chamado_file_timer=setInterval(()=>{chamado_fila_sla_get()},6e4))}const chamado_fila_sla_get_response_callback=e=>{if(!Array.isArray(e))return!1;const t=(new Date).getTime();e.forEach(e=>{for(let a=0;a<App.temp.chamado_fila_callback.length;a++){const i=App.temp.chamado_fila_callback[a];e.chamado_id==i.chamado_id?(App.temp.chamado_fila_callback[a]=null,View.existe(i.html_id)&&i.callback(e)):i.timeout<t&&(App.temp.chamado_fila_callback[a]=null)}App.temp.chamado_fila_callback=App.temp.chamado_fila_callback.filter(e=>e)})};function chamado_fila_sla_get(){const e=App.temp.chamado_fila_sla;App.temp.chamado_fila_sla=[],WS.get("chamado/get_dados_sla/",{chamado_id:e},chamado_fila_sla_get_response_callback)}function random_hash(){var e=new Uint32Array(4);return window.crypto.getRandomValues(e),window.btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}async function enumerateDirectoryWithManyFiles(e){let t=e.createReader(),a=[],i=async function(){let e=await function(e){return new Promise((t,a)=>{e.readEntries(e=>{t(e)},e=>a(e))})}(t);e.length>0&&(a=a.concat(e),await i())};return await i(),a}function data_hora_servidor(e){WS.get("util/data_hora/",null,e)}function converterDatasNoObj(e){if(!Array.isArray(e))return e;if(3===e.length&&"string"==typeof e[1]){const[t,a,i]=e;return"between"===a.toLowerCase()&&Array.isArray(i)?[t,a,i.map(e=>format_ToDate(e.split("T")[0]))]:[t,a,Array.isArray(i)?converterDatasNoObj(i):i]}return e.map(converterDatasNoObj)}