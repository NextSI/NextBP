define([],function(){return function(i){"use strict";var e=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.cbo_processo=this.dialog.find(".cbo_processo"),this.cbo_responsavel=this.dialog.find(".cbo_responsavel"),this.cbo_solicitante=this.dialog.find(".cbo_solicitante"),this.edt_codigo=this.dialog.find(".edt_codigo"),this.edt_descricao=this.dialog.find(".edt_descricao"),this.edt_solicitacao_ini=this.dialog.find(".edt_solicitacao_ini"),this.edt_solicitacao_fim=this.dialog.find(".edt_solicitacao_fim"),this.edt_recebimento_ini=this.dialog.find(".edt_recebimento_ini"),this.edt_recebimento_fim=this.dialog.find(".edt_recebimento_fim"),this.edt_execucao_ini=this.dialog.find(".edt_execucao_ini"),this.edt_execucao_fim=this.dialog.find(".edt_execucao_fim"),this.chk_sintetico=this.dialog.find(".chk_sintetico"),this.chk_analitico=this.dialog.find(".chk_analitico"),this.chk_tipo=this.dialog.find(".chk_tipo"),this.div_analitico=this.dialog.find(".div_analitico"),this.div_legenda_sintetico=this.dialog.find(".div_legenda_sintetico"),this.div_legenda_analitico=this.dialog.find(".div_legenda_analitico"),this.btn_limpar_filtros=this.dialog.find(".btn_limpar_filtros"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_pesquisar=this.dialog.find(".btn_pesquisar"),this.show=function(i,t,o,c,a,s,n,_,d,l,r,h){i=i||0,e.edt_descricao.val(a||""),e.edt_codigo.val(s||""),set_datepicker(e.edt_solicitacao_ini),set_datepicker(e.edt_solicitacao_fim),set_datepicker(e.edt_recebimento_ini),set_datepicker(e.edt_recebimento_fim),set_datepicker(e.edt_execucao_ini),set_datepicker(e.edt_execucao_fim);var f=new Date,p=f.getFullYear(),g=("0"+(f.getMonth()+1)).slice(-2),u=new Date(p,g,1),m=new Date(p,g,0),b=p+"-"+g+"-"+("0"+u.getDate()).slice(-2),v=p+"-"+g+"-"+("0"+m.getDate()).slice(-2);setTimeout(function(){set_datepicker(e.edt_solicitacao_ini,n||b),set_datepicker(e.edt_solicitacao_fim,_||v)}),0==i?e.chk_sintetico.prop("checked",!0).trigger("click"):e.chk_analitico.prop("checked",!0).trigger("click"),e.listar_filtro_processo(t),e.listar_filtro_solicitante(c),show_modal(e.modal.attr("id"))},this.listar_filtro_processo=function(i){e.cbo_processo.find("option").remove(),WS.get("processo/listar/",null,function(t){$(t).each(function(i,t){add_option(e.cbo_processo,t.processo_id,t.nome)}),i&&e.cbo_processo.val(i).trigger("change"),e.cbo_processo.selectpicker("refresh")})},this.listar_filtro_responsavel=function(i){e.cbo_responsavel.find("option").remove(),WS.get("usuario/listar/",{tipo_usuario:2},function(t){for(var o=0;o<t.length;o++){var c=t[o];add_option(e.cbo_responsavel,c.usuario_id,c.nome)}i&&e.cbo_responsavel.val(i).trigger("change"),e.cbo_responsavel.selectpicker("refresh")})},this.listar_filtro_solicitante=function(i){e.cbo_solicitante.find("option").remove(),WS.get("usuario/listar/",{tipo_usuario:2},function(t){for(var o=0;o<t.length;o++){var c=t[o];add_option(e.cbo_solicitante,c.usuario_id,c.nome)}i&&e.cbo_solicitante.val(i).trigger("change"),e.cbo_solicitante.selectpicker("refresh")})},this.close=function(){close_modal(e.modal.attr("id")),void 0!==e.onclose&&e.onclose&&e.onclose()},this.unload=function(){e.close(),View.unload(this.html_id)},this.limpar_filtros=function(){e.edt_recebimento_ini.val(""),e.edt_recebimento_fim.val(""),e.edt_execucao_ini.val(""),e.edt_execucao_fim.val(""),e.edt_codigo.val(""),e.edt_descricao.val(""),e.cbo_processo.val("").trigger("change"),e.cbo_solicitante.val("").trigger("change"),e.cbo_processo.selectpicker("refresh"),e.cbo_solicitante.selectpicker("refresh")},this.btn_limpar_filtros.unbind("click"),this.btn_limpar_filtros.click(function(){e.limpar_filtros()}),this.chk_tipo.unbind("click"),this.chk_tipo.click(function(){1==e.chk_sintetico.prop("checked")?(e.div_legenda_sintetico.removeClass("hidden"),e.div_legenda_analitico.addClass("hidden"),e.div_analitico.addClass("hidden")):1==e.chk_analitico.prop("checked")&&(e.div_legenda_sintetico.addClass("hidden"),e.div_legenda_analitico.removeClass("hidden"),e.div_analitico.removeClass("hidden"))}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){e.unload()}),this.btn_pesquisar.unbind("click"),this.btn_pesquisar.click(function(){var i={processo_id:e.cbo_processo.val(),responsavel_id:e.cbo_responsavel.val(),solicitante_id:e.cbo_solicitante.val(),codigo:e.edt_codigo.val(),descricao:e.edt_descricao.val(),data_solicitacao_ini:get_datepicker(e.edt_solicitacao_ini),data_solicitacao_fim:get_datepicker(e.edt_solicitacao_fim),data_recebimento_ini:get_datepicker(e.edt_recebimento_ini),data_recebimento_fim:get_datepicker(e.edt_recebimento_fim),data_execucao_ini:get_datepicker(e.edt_execucao_ini),data_execucao_fim:get_datepicker(e.edt_execucao_fim),tipo:1==e.chk_sintetico.prop("checked")?0:1};e.onselect(i),e.unload()})}});