var View=function(){var e=[],i=[],a=[],t=[];View.TYPE_CHANGE={LOAD:0,UNLOAD:1},View.ABA={NAO:0,SIM:1,SIM_E_RECARREGAR_SE_ESTIVER_ABERTA:3,MULTIPLAS:2},View.janelas_mdi=function(){return t},View.get_id_tela_ativa=function(){var e=View.get_md5_tela_ativa();return $("#content").find('[id="'+e+'"]').attr("viewcode")},View.get_md5_tela_ativa=function(){return divsModal.length>0?divsModal[divsModal.length-1]:App.tabsInstance._getActiveItem().attr("aba-id-md5")},View.existe=function(e){return t.filter(i=>{if(i.id_md5===e)return!0}).length>0},View.loadPE=function(e,i,a){var t=function(){void 0!==a&&a()},n=!1,r="webservice/especificos/peJS/"+e+".pe.js";if(View.validaExistenciaPE(r)&&(n=!0),n||(r="webservice/peJS/"+e+".pe.js",View.validaExistenciaPE(r)&&(n=!0)),n){r=WS_ROOT+r+"?anticache="+(new Date).getTime();try{require([r],function(e){new e(i);t()},function(e){console.warn("Não foi possível carregar o script, verifique o nome do arquivo"),t()})}catch(e){console.warn("Não foi possível carregar o script, verifique o nome do arquivo"),t()}}else t()},View.validaExistenciaPE=function(e){if(App.sessao&&void 0!==App.sessao.dados.peJS&&Array.isArray(App.sessao.dados.peJS)){for(var i=0;i<App.sessao.dados.peJS.length;i++)if(App.sessao.dados.peJS[i].indexOf(e)>=0)return!0;return!1}return!0},View.loadPEEspecificos=function(e){var i=function(e,i){if(View.validaExistenciaPE(e)){var a=document.createElement("script");a.setAttribute("src",WS_URI.replace("webservice/index.php","")+e+"?anticache="+(new Date).getTime()),a.onload=function(){i()},a.onerror=function(){i()},document.head.appendChild(a)}else i()};i("webservice/peJS/especificos.pe.js",function(){i("webservice/especificos/peJS/especificos.pe.js",function(){e()})})},View.loadPEMenu=function(e){!function(e){if(View.validaExistenciaPE("webservice/especificos/peJS/menu.pe.js")){var i=document.createElement("script");i.setAttribute("src",WS_URI.replace("webservice/index.php","")+"webservice/especificos/peJS/menu.pe.js?anticache="+(new Date).getTime()),i.onload=function(){e()},i.onerror=function(){e()},document.head.appendChild(i)}else e()}(function(){void 0!==e&&e()})},View.loadReact=function(e,i,a,t,n){View.load(e,a,t,n,"react",i)},View.load=function(e,i,a,n,r,o){var s=void 0===a?View.ABA.NAO:a;n=void 0!==n&&n,o=void 0===o?{}:o;if(s==View.ABA.SIM||s==View.ABA.SIM_E_RECARREGAR_SE_ESTIVER_ABERTA)for(var p=0;p<t.length;p++)if(t[p].view_str==e){if(s==View.ABA.SIM)return void View.show(t[p].id_md5);View.unload(t[p].id_md5)}var d=n?VIEW_URI:"assets/view/",c=(d+e).replace(/\//g,"__"),v=md5(c+(new Date).getTime());if($("#content").append('<div id="'+v+'" style="display: none;"></div>'),void 0!==r&&"react"==r){var l=$("#"+v);view="string"==typeof e?window.views[e]:e,o=spread({html_id:v},o);var w=Object.assign({},React.createElement(view,o));l.attr("div-view",view.name),l.attr("viewcode",w.props.viewCode),w.html_id=v,w.dialog=l,w.title=void 0!==w.props.abaTitulo?w.props.abaTitulo:null,w.unload=function(){View.unload(v)},ReactDOM.render(w,l[0]),App.translate(v),App.manual(v),App.aplicar_permissoes(v),App.aplicar_mascaras(v),App.aplicar_switchs(v),App.aplicar_checkbox(v),App.aplicar_selectpicker(v),s!=View.ABA.NAO&&(t.push({react:!0,id_md5:v,data:new Date,view:w,view_str:view.name,id_md5_origem:View.get_md5_tela_ativa()}),App.gerenciar_abas(v,t[t.length-1],View.TYPE_CHANGE.LOAD)),i(v,w)}else $("#"+v).load(d+e+".html",function(a,r,o){if("error"==r)alert_modal_internet();else{var p=$(this);p.attr("div-view",e),n&&(WS_URI_PE_PHONEGAP.indexOf("http://")>=0||WS_URI_PE_PHONEGAP.indexOf("https://")>=0)&&void 0===App.require_paths[d+e]&&(App.require_paths[d+e]=WS_URI_PE_PHONEGAP+d+e,App.requirejsConfig()),App.localhost&&require.undef(d+e),require([d+e+".js"],function(a){var n=new a(v);App.translate(v),App.manual(v),App.aplicar_permissoes(v),App.aplicar_mascaras(v),App.aplicar_switchs(v),App.aplicar_checkbox(v),App.aplicar_selectpicker(v),s!=View.ABA.NAO&&(t.push({id_md5:v,data:new Date,view:n,view_str:e,id_md5_origem:View.get_md5_tela_ativa()}),App.gerenciar_abas(v,t[t.length-1],View.TYPE_CHANGE.LOAD)),p.css("display",""),i(v,n)},function(e){console.warn("Não foi possível carregar o script, verifique o nome do arquivo")})}})},View.unload=function(e){for(var i=0;i<t.length;i++)if(t[i].id_md5==e){if(App.gerenciar_abas(e,t[i],View.TYPE_CHANGE.UNLOAD),$('[aba-id-md5="'+t[i].id_md5_origem+'"]').length?View.show(t[i].id_md5_origem):View.show($(".tab-home").attr("aba-id-md5")),void 0!==t[i].react&&!0===t[i].react){var a=$("#"+e);ReactDOM.unmountComponentAtNode(a[0])}t.splice(i,1)}void 0===e?($("#content").find("div").remove(),$(".app-aba[aba-mdi]").remove(),t=[]):"string"==typeof e&&($("#"+e).remove(),View.removeAllIntervals(e),App.removeTab(e))},View.hide=function(e){void 0===e?$("#content").find("div[div-view]").hide():"string"==typeof e&&$("#"+e).hide()},View.navegador=function(e,i,a){var n=void 0===a?View.ABA.MULTIPLAS:a;if(n==View.ABA.SIM)for(var r=0;r<t.length;r++)if(t[r].view_str==e)return void View.show(t[r].id_md5);var o=md5(e+(new Date).getTime()),s={html_id:o,title:i},p=$('<div id="'+o+'" style="display: none;"><iframe aba-view-iframe src="'+e+'" style="border: none; padding: 0px; margin: 0px; width: 100%; height: 100%"></iframe></div>');p.css("height","calc(100vh - 36px)"),$("#content").append(p),App.translate(o),App.aplicar_permissoes(o),App.aplicar_mascaras(o),App.aplicar_switchs(o),App.aplicar_checkbox(o),App.aplicar_selectpicker(o),p.attr("div-view",e),n!=View.ABA.NAO&&(t.push({id_md5:o,data:new Date,view:s,view_str:e}),App.gerenciar_abas(o,t[t.length-1],View.TYPE_CHANGE.LOAD))},View.show=function(e,t){View.hide();var n=$('[aba-id-md5="'+e+'"]').attr("scroll");if("string"==typeof e){var r=$("#"+e);r.show(),t||App.foco_aba(e);var o=r.find("iframe[aba-view-iframe]");if(o.length>0){var s;s=$("#menu_lateral").height()-$(".app-abas").height()-50,o.css("height",s)}setTimeout(function(){$(document).scrollTop(void 0!==n?n:0)},5);for(var p=0;p<i.length;p++)if(i[p].view_html_id==e)return void i[p].funcao();for(p=0;p<a.length;p++)if(a[p].view_html_id!=e)return void a[p].funcao();App.drawerInstance&&App.drawerInstance._dimensionChanged()}},View.setInterval=function(i,a,t){var n={view_html_id:i,funcao:a,delay:t,id:window.setInterval(a,t)};return e.push(n),n.id},View.removeInterval=function(i){!function(i){for(var a=0;a<e.length;a++)if(e[a].id==i)return window.clearInterval(e[a].id),void e.splice(a,1)}(i)},View.removeAllIntervals=function(i){var a=function(i){for(var t=0;t<e.length;t++)if(e[t].view_html_id==i)return window.clearInterval(e[t].id),e.splice(t,1),void a(i)};a(i)},View.setShowEvent=function(e,a){var t={view_html_id:e,funcao:a};i.push(t)},View.setHideEvent=function(e,i){var t={view_html_id:e,funcao:i};a.push(t)}};