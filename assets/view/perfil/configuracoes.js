define([],function(){return function(a){"use strict";var o=this,e={listagem_area:!1,listagem_calendario_trabalho:!1,setar_opcoes_selecionadas:!1};this.html_id=a,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.onsave=null,this.cbo_areas_colaborador=this.dialog.find(".cbo_areas_colaborador"),this.cbo_areas_cliente=this.dialog.find(".cbo_areas_cliente"),this.cbo_areas_fornecedor=this.dialog.find(".cbo_areas_fornecedor"),this.cbo_areas_organizacao=this.dialog.find(".cbo_areas_organizacao"),this.cbo_calendario_trabalho_colaborador=this.dialog.find(".cbo_calendario_trabalho_colaborador"),this.cbo_calendario_trabalho_cliente=this.dialog.find(".cbo_calendario_trabalho_cliente"),this.cbo_calendario_trabalho_fornecedor=this.dialog.find(".cbo_calendario_trabalho_fornecedor"),this.cbo_calendario_trabalho_organizacao=this.dialog.find(".cbo_calendario_trabalho_organizacao"),this.edt_nivel_colaborador=this.dialog.find(".edt_nivel_colaborador"),this.edt_nivel_cliente=this.dialog.find(".edt_nivel_cliente"),this.edt_nivel_fornecedor=this.dialog.find(".edt_nivel_fornecedor"),this.edt_nivel_organizacao=this.dialog.find(".edt_nivel_organizacao"),this.edt_qtde_dias_expirar_senha=this.dialog.find(".edt_qtde_dias_expirar_senha"),this.edt_login_numero_tentativas=this.dialog.find(".edt_login_numero_tentativas"),this.edt_minutos_desbloqueio_forca_bruta=this.dialog.find(".edt_minutos_desbloqueio_forca_bruta"),this.edt_senha_tamanho_minimo=this.dialog.find(".edt_senha_tamanho_minimo"),this.edt_senha_exigir_maiusculo_e_minusculo=this.dialog.find(".edt_senha_exigir_maiusculo_e_minusculo"),this.edt_senha_exigir_numero=this.dialog.find(".edt_senha_exigir_numero"),this.edt_senha_exigir_caracter_especial=this.dialog.find(".edt_senha_exigir_caracter_especial"),this.btn_permissoes_colaborador=this.dialog.find(".btn_permissoes_colaborador"),this.btn_permissoes_cliente=this.dialog.find(".btn_permissoes_cliente"),this.btn_permissoes_fornecedor=this.dialog.find(".btn_permissoes_fornecedor"),this.btn_permissoes_organizacao=this.dialog.find(".btn_permissoes_organizacao"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.show=function(){o.edt_nivel_colaborador.val(10),o.edt_nivel_cliente.val(10),o.edt_nivel_fornecedor.val(10),o.edt_nivel_organizacao.val(10),o.preencher_combobox();var a=setInterval(function(){e.listagem_area&&e.listagem_calendario_trabalho&&(o.setar_valores_campos(),clearInterval(a))},500),i=setInterval(function(){e.listagem_area&&e.listagem_calendario_trabalho&&e.setar_opcoes_selecionadas&&(show_modal(o.modal.attr("id")),clearInterval(i),e.listagem_area=!1,e.listagem_calendario_trabalho=!1,e.selecionar_opcoes=!1)},500)},this.listar_areas=function(){WS.get("area/listar/",null,function(a){add_option(o.cbo_areas_colaborador,"","Nenhum"),add_option(o.cbo_areas_cliente,"","Nenhum"),add_option(o.cbo_areas_fornecedor,"","Nenhum"),add_option(o.cbo_areas_organizacao,"","Nenhum");for(var i=0;i<a.data.length;i++){var _=a.data[i];add_option(o.cbo_areas_colaborador,_.id,_.nome),add_option(o.cbo_areas_cliente,_.id,_.nome),add_option(o.cbo_areas_fornecedor,_.id,_.nome),add_option(o.cbo_areas_organizacao,_.id,_.nome)}e.listagem_area=!0})},this.listar_calendario_trabalho=function(){WS.get("calendario_trabalho/listar/",null,function(a){add_option(o.cbo_calendario_trabalho_colaborador,"","Nenhum"),add_option(o.cbo_calendario_trabalho_cliente,"","Nenhum"),add_option(o.cbo_calendario_trabalho_fornecedor,"","Nenhum"),add_option(o.cbo_calendario_trabalho_organizacao,"","Nenhum");for(var i=0;i<a.length;i++){var _=a[i];add_option(o.cbo_calendario_trabalho_colaborador,_.calendario_trabalho_id,_.nome),add_option(o.cbo_calendario_trabalho_cliente,_.calendario_trabalho_id,_.nome),add_option(o.cbo_calendario_trabalho_fornecedor,_.calendario_trabalho_id,_.nome),add_option(o.cbo_calendario_trabalho_organizacao,_.calendario_trabalho_id,_.nome)}e.listagem_calendario_trabalho=!0})},this.preencher_combobox=function(){o.listar_areas(),o.listar_calendario_trabalho()},this.close=function(){close_modal(o.modal.attr("id")),void 0!==o.onclose&&o.onclose&&o.onclose()},this.unload=function(){o.close(),View.unload(this.html_id)},this.setar_valores_campos=function(){WS.get("perfil_padrao/listar/",null,function(a){$.each(a.lista_perfil_padrao,function(a,e){switch(parseInt(e.codigo,10)){case USUARIO_TIPO.COLABORADOR:o.cbo_calendario_trabalho_colaborador.val(e.calendario_trabalho_id),o.cbo_areas_colaborador.val(e.area_id),o.edt_nivel_colaborador.val(e.nivel);break;case USUARIO_TIPO.CLIENTE:o.cbo_calendario_trabalho_cliente.val(e.calendario_trabalho_id),o.cbo_areas_cliente.val(e.area_id),o.edt_nivel_cliente.val(e.nivel);break;case USUARIO_TIPO.FORNECEDOR:o.cbo_calendario_trabalho_fornecedor.val(e.calendario_trabalho_id),o.cbo_areas_fornecedor.val(e.area_id),o.edt_nivel_fornecedor.val(e.nivel);break;case USUARIO_TIPO.PROSPECT:o.cbo_calendario_trabalho_organizacao.val(e.calendario_trabalho_id),o.cbo_areas_organizacao.val(e.area_id),o.edt_nivel_organizacao.val(e.nivel)}}),o.edt_qtde_dias_expirar_senha.val(a.seguranca.qtde_dias_expirar_senha),o.edt_login_numero_tentativas.val(a.seguranca.login_numero_tentativas),o.edt_minutos_desbloqueio_forca_bruta.val(a.seguranca.minutos_desbloqueio_forca_bruta),o.edt_senha_tamanho_minimo.val(a.seguranca.senha_tamanho_minimo),o.edt_senha_exigir_maiusculo_e_minusculo.prop("checked","S"===a.seguranca.senha_exigir_maiusculo_e_minusculo).change(),o.edt_senha_exigir_numero.prop("checked","S"===a.seguranca.senha_exigir_numero).change(),o.edt_senha_exigir_caracter_especial.prop("checked","S"===a.seguranca.senha_exigir_caracter_especial).change(),e.setar_opcoes_selecionadas=!0})},o.btn_cancelar.unbind("click"),o.btn_cancelar.click(function(a){o.unload()}),o.btn_salvar.unbind("click"),o.btn_salvar.click(function(a){var e=[{codigo:USUARIO_TIPO.COLABORADOR,area_id:o.cbo_areas_colaborador.val(),calendario_trabalho_id:o.cbo_calendario_trabalho_colaborador.val(),nivel:o.edt_nivel_colaborador.val()},{codigo:USUARIO_TIPO.CLIENTE,area_id:o.cbo_areas_cliente.val(),calendario_trabalho_id:o.cbo_calendario_trabalho_cliente.val(),nivel:o.edt_nivel_cliente.val()},{codigo:USUARIO_TIPO.FORNECEDOR,area_id:o.cbo_areas_fornecedor.val(),calendario_trabalho_id:o.cbo_calendario_trabalho_fornecedor.val(),nivel:o.edt_nivel_fornecedor.val()},{codigo:USUARIO_TIPO.PROSPECT,area_id:o.cbo_areas_organizacao.val(),calendario_trabalho_id:o.cbo_calendario_trabalho_organizacao.val(),nivel:o.edt_nivel_organizacao.val()}];WS.post("perfil_padrao/salvar/",{perfil:JSON.stringify(e),qtde_dias_expirar_senha:o.edt_qtde_dias_expirar_senha.val(),login_numero_tentativas:o.edt_login_numero_tentativas.val(),minutos_desbloqueio_forca_bruta:o.edt_minutos_desbloqueio_forca_bruta.val(),senha_tamanho_minimo:o.edt_senha_tamanho_minimo.val(),senha_exigir_maiusculo_e_minusculo:o.edt_senha_exigir_maiusculo_e_minusculo.prop("checked"),senha_exigir_numero:o.edt_senha_exigir_numero.prop("checked"),senha_exigir_caracter_especial:o.edt_senha_exigir_caracter_especial.prop("checked")},function(a){alert_saved("PermissÃµes salvas com sucesso!"),o.unload()})}),o.btn_permissoes_colaborador.click(function(){View.load("usuario/permissoes",function(a,o){o.show_permissoes_perfil(FORMULARIO.EDITAR,USUARIO_TIPO.COLABORADOR)})}),o.btn_permissoes_cliente.click(function(){View.load("usuario/permissoes",function(a,o){o.show_permissoes_perfil(FORMULARIO.EDITAR,USUARIO_TIPO.CLIENTE)})}),o.btn_permissoes_fornecedor.click(function(){View.load("usuario/permissoes",function(a,o){o.show_permissoes_perfil(FORMULARIO.EDITAR,USUARIO_TIPO.FORNECEDOR)})}),o.btn_permissoes_organizacao.click(function(){View.load("usuario/permissoes",function(a,o){o.show_permissoes_perfil(FORMULARIO.EDITAR,USUARIO_TIPO.PROSPECT)})})}});