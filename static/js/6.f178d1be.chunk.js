(this.webpackJsonpnext_bp=this.webpackJsonpnext_bp||[]).push([[6],{1024:function(e,a,t){},1030:function(e,a,t){e.exports={pivotChart:"ListagemAlocacoes_pivotChart__1Bzge",filtrosData:"ListagemAlocacoes_filtrosData__1yGP_",refreshButton:"ListagemAlocacoes_refreshButton__2wO3Z"}},1031:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(488),r=t(717),d=t(271),l=t(307),c=t.n(l),u=t(330),p=t(321),m=t.n(p),h=t(280),_=t(244);class f extends i.a.Component{constructor(e){var a,t;super(e),this.state={grupoMotivoChamadoId:null!==(a=e.grupoMotivoChamadoId)&&void 0!==a?a:null,nome:null!==(t=e.nome)&&void 0!==t?t:null,motivosSelecionados:[]},this.chamadoMotivoList=Object(r.b)(),this.obterMotivosSelecionados=this.obterMotivosSelecionados.bind(this),this.motivosOnSelectionChanged=this.motivosOnSelectionChanged.bind(this),this.nomeChange=this.nomeChange.bind(this),this.salvar=this.salvar.bind(this),this.cancelar=this.cancelar.bind(this),this.excluir=this.excluir.bind(this)}obterMotivosSelecionados(){this.state.grupoMotivoChamadoId&&Object(n.b)(this.state.grupoMotivoChamadoId,(e=>this.setState({nome:e.nome,motivosSelecionados:e.motivos.map((e=>e.chamado_motivo_id))})))}componentDidMount(){this.obterMotivosSelecionados(),this.setState({chamadoMotivoList:this.chamadoMotivoList})}componentWillUnmount(){this.props.onClose&&this.props.onClose()}motivosOnSelectionChanged(e){this.setState({motivosSelecionados:e.selectedRowKeys})}nomeChange(e){e.value!==this.state.nome&&this.setState({nome:e.value})}salvar(){Object(n.e)({grupo_id:this.state.grupoMotivoChamadoId,nome:this.state.nome,motivos:this.state.motivosSelecionados.map((e=>({chamado_motivo_id:e})))},(()=>d.a.unload(this.props.html_id)))}cancelar(){d.a.unload(this.props.html_id)}excluir(){Object(n.d)(this.state.grupoMotivoChamadoId,(()=>d.a.unload(this.props.html_id)))}render(){const e=[Object(_.jsx)(h.a,{width:"100%"})];return Object(_.jsxs)(i.a.Fragment,{children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)(c.a,{style:{paddingLeft:"10px",paddingRight:"10px"},children:[Object(_.jsx)(l.Item,{location:"before",children:Object(_.jsx)(u.Button,{onClick:this.salvar,text:"Salvar",icon:"save",stylingMode:"contained",type:"default"})}),Object(_.jsx)(l.Item,{location:"before",children:Object(_.jsx)(u.Button,{onClick:this.cancelar,text:"Cancelar",icon:"remove",stylingMode:"text",type:"normal"})}),Object(_.jsx)(l.Item,{location:"after",children:Object(_.jsx)(u.Button,{onClick:this.excluir,text:"Excluir",icon:"trash",stylingMode:"text",type:"danger",visible:!!this.state.grupoMotivoChamadoId})})]})})}),Object(_.jsxs)("div",{className:"panel panel-default",style:{padding:"10px"},children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)(m.a,{stylingMode:"filled",value:this.state.nome,width:"100%",placeholder:"Nome do Grupo de Motivos",onValueChanged:this.nomeChange})})})}),Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-12",children:[Object(_.jsx)("div",{children:"Selecione abaixo os motivos que fazem parte deste grupo"}),Object(_.jsx)(s.default,{style:{height:"calc(100vh - 195px)"},dataSource:this.state.chamadoMotivoList,selectedRowKeys:this.state.motivosSelecionados,onSelectionChanged:this.motivosOnSelectionChanged,selection:{mode:"multiple",selectAllMode:"allPages",showCheckBoxesMode:"always"},filterPanel:{visible:!1},groupPanel:{visible:!1},export:{enabled:!1},columnChooser:{enabled:!1},paging:{enabled:!1},children:e})]})})]})]})}}f.defaultProps={abaTitulo:"Grupo de Motivos",grupoMotivoChamadoId:null},a.default=f},1032:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(489),r=t(778),d=t(280),l=t(244);class c extends i.a.Component{render(){const e=(()=>{let e=[...r.a];return e.splice(2,0,Object(l.jsx)(d.a,{})),e})();return Object(l.jsx)(i.a.Fragment,{children:Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(s.stateStoring)("listagem_agenda_contatos"),dataSource:Object(n.a)(!1),selection:{mode:"multiple"},children:e})})})})}}c.defaultProps={abaTitulo:"Agenda de Contatos"},a.default=c},1033:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(254),r=t(722),d=t(723),l=t(296),c=t(313),u=t(244);class p extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.dataGrid=null}onToolbarPreparing(e){this.dataGrid=e.component;const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Classifica\xe7\xe3o de Chamado",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var t=0;t<e.toolbarOptions.items.length;t++){const a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=e.component.getController("editing").getChanges();Object(r.b)(t,(a=>{e.component.saveEditData()}))})}}render(){const e=[...d.a,Object(u.jsxs)(n.Column,{type:"buttons",width:110,children:[Object(u.jsx)(l.a,{visible:e=>!e.row.removed&&!e.row.data.padrao,onClick:e=>{this.dataGrid.deleteRow(e.row.rowIndex)}}),Object(u.jsx)(c.a,{visible:e=>e.row.removed,onClick:e=>{this.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(u.jsx)(i.a.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(s.stateStoring)("DataGridChamadoClassificacao"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(r.a)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:e})})})})}}p.defaultProps={abaTitulo:"Classifica\xe7\xe3o"},a.default=p},1034:function(e,a,t){e.exports={kanbanList:"Kanban_kanbanList__1ptgn"}},1035:function(e,a,t){},1036:function(e,a,t){},1037:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var o=t(247),i=t.n(o),s=t(87),n=t(357),r=t(376),d=t(555),l=t(726),c=t(244);function u(e){const[a,t]=Object(o.useState)(!1),u=Object(o.useCallback)((e=>t(e)));let p=[];return!!Array.isArray(e.historico)&&(e.historico.forEach((e=>{let t=Object(c.jsx)(r.a,{nome:e.usuario_nome,tamanho:"32",usuarioId:e.usuario_id,imgAlternativa:"assets/img/icones_bp/imagem_usuario_padrao.svg"}),o=parseInt(s.a.sessao.dados.usuario_id,10)===parseInt(e.usuario_id,10),m=o?"text-right pull-right":"text-left";const h=e.processo_atividade_nome?Object(c.jsx)("div",{className:"small text-muted",title:"Atividade ".concat(e.processo_atividade_nome),children:Object(c.jsx)("span",{className:"text hideextra",style:{display:"block",maxWidth:"120px"},children:e.processo_atividade_nome})}):null;p.push(Object(c.jsx)("div",{className:"panel",children:Object(c.jsx)("div",{className:"panel-body",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-xs-12 text-left",style:{display:"inline-flex"},children:[o?null:Object(c.jsxs)(i.a.Fragment,{children:[t,Object(c.jsx)(n.a,{})]}),Object(c.jsxs)("div",{style:{width:"100%"},children:[Object(c.jsxs)("div",{className:m,children:[Object(c.jsx)(l.a,{nome:e.usuario_nome}),Object(c.jsx)(d.a,{dataEnvio:e.data,aoAlterarTipoExibicao:u,extenso:a}),h]}),Object(c.jsxs)(i.a.Fragment,{children:[Object(c.jsx)(n.b,{}),Object(c.jsx)("div",{className:"mensagemTextoHistorico",dangerouslySetInnerHTML:{__html:e.mensagem}})]})]}),o?Object(c.jsxs)(i.a.Fragment,{children:[Object(c.jsx)(n.a,{}),t]}):null]})})})}))})),p)}},1038:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(254),r=t(743),d=t(744),l=t(296),c=t(313),u=t(244);class p extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.dataGrid=null}onToolbarPreparing(e){this.dataGrid=e.component;const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Classifica\xe7\xe3o de Chamado",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var t=0;t<e.toolbarOptions.items.length;t++){const a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=e.component.getController("editing").getChanges();Object(r.a)(t,(a=>{e.component.saveEditData()}))})}}render(){const e=[...d.a,Object(u.jsxs)(n.Column,{type:"buttons",width:110,children:[Object(u.jsx)(l.a,{visible:e=>!e.row.removed&&!e.row.data.padrao,onClick:e=>{this.dataGrid.deleteRow(e.row.rowIndex)}}),Object(u.jsx)(c.a,{visible:e=>e.row.removed,onClick:e=>{this.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"buttons")];return Object(u.jsx)(i.a.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(s.stateStoring)("DataGridTipoMoeda"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(r.b)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:e})})})})}}p.defaultProps={abaTitulo:"Tipo de Moeda"},a.default=p},1039:function(e,a,t){e.exports={container:"Cockpit_container__1CzsS",containerCentralPendencias:"Cockpit_containerCentralPendencias__PmkYt"}},1040:function(e,a,t){e.exports={container:"cardCockpit_container__1mZsK",card:"cardCockpit_card__g32t9",topoTitulo:"cardCockpit_topoTitulo__pNIRR",button:"cardCockpit_button__3Tilp",cardCorpo:"cardCockpit_cardCorpo__2UTNh",qtdEmAtraso:"cardCockpit_qtdEmAtraso__1inW1",cardRodape:"cardCockpit_cardRodape__2nk13",totalSection:"cardCockpit_totalSection__g9k8V",totalIndicator:"cardCockpit_totalIndicator__31ocR"}},1041:function(e,a,t){e.exports={progress:"ProjetoGantt_progress__4p3o5",taskWrapper:"ProjetoGantt_taskWrapper__1UOAo",taskTitle:"ProjetoGantt_taskTitle__2BpWJ",taskRow:"ProjetoGantt_taskRow__LN2Uv"}},1042:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return _}));var o=t(248),i=t(247),s=t(373),n=t.n(s),r=t(753),d=t(267),l=t(253),c=t(754),u=t(43),p=t.n(u),m=t(87),h=t(244);function _(){let e=null,a=null,t=null,s=null;"S"===m.a.sessao.dados.tecnico&&(e=m.a.sessao.dados.tecnico_id.toString(),a=m.a.sessao.dados.usuario_id);const u=new Date;u.setDate(1);let _=window.pad(u.getMonth()+1,2),f=u.getFullYear(),b=new Date(f,_,1),v=new Date(f,_,0);t=f+"-"+_+"-"+window.pad(b.getDate(),2),s=f+"-"+_+"-"+window.pad(v.getDate(),2);let g=m.a.get_parametro_usuario("apontamento_simples");Object.keys(g).length&&(a=+g.usuario_id>0?g.usuario_id:a,t=g.data_inicio?g.data_inicio:t,s=g.data_fim?g.data_fim:s,e=g.tecnico_id?g.tecnico_id:e);const[w,j]=Object(i.useState)(t),[O,x]=Object(i.useState)(s),[A,C]=Object(i.useState)(a),[S,I]=Object(i.useState)(e),[E,P]=Object(i.useState)([]),[T,y]=Object(i.useState)([]),[R,D]=Object(i.useState)({});async function M(){if(w&&O&&w>O)window.alertaPopUp("Valida\xe7\xe3o","A <strong>Data In\xedcio</strong> n\xe3o pode ser maior que a <strong>Data Fim</strong>"),j(t),x(s);else if(w&&O&&A){let e=m.a.get_parametro_usuario("apontamento_simples");m.a.set_parametro_usuario("apontamento_simples",Object(o.a)(Object(o.a)({},e),{},{data_inicio:w,data_fim:O,usuario_id:A,tecnico_id:S}));const a=await l.a.get({route:"/apontamento_projeto/buscar_dados_listagem_apontamento_simples/",data:{data_inicio:w,data_fim:O,usuario_id:A},awaitReturn:!0});P(a)}}return Object(i.useEffect)((()=>{M()}),[w,O,A]),Object(i.useEffect)((()=>{!function(){if(E.length){const e=[{dataField:"projeto_codigo_nome",caption:"C\xf3d./Nome Projeto",width:250,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0,visible:!1},{dataField:"projeto_codigo",caption:"C\xf3d. Projeto",width:150,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0},{dataField:"projeto_nome",caption:"Projeto",width:200,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0},{dataField:"projeto_atividade_nome",caption:"Atividade",width:200,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!1,fixed:!0},{dataField:"soma_horas_atividade_periodo",caption:"Total Atividade",dataType:"number",alignment:"left",width:200,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0},{dataField:"porcentagem",caption:"% Conclus\xe3o",dataType:"number",alignment:"left",width:200,allowEditing:!0,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0,editorOptions:{min:0,max:100,showSpinButtons:!0}}],a={totalItems:[{column:"soma_horas_atividade_periodo",summaryType:"sum",skipEmptyValues:!0,displayFormat:"{0}"}]};let t=E[0],o=Object.keys(t).filter((e=>{if(e.indexOf("-")>-1){let a=e.split("-");if(4===a[0].length&&2===a[1].length&&2===a[2].length)return e}}));for(let i=0;i<o.length;i++){let t=o[i],s=window.formatar_data_humano(t);e.push({dataField:t,caption:s,width:85,allowEditing:!0,allowHeaderFiltering:!1,allowFiltering:!1,allowGrouping:!1,allowReordering:!1,allowSorting:!1,allowFixing:!1,allowHiding:!1,dataType:"number",headerCellTemplate(e,a){p()(e).text(s);let t=a.column.dataField;const o=new Date(t+" 00:00:00"),i=window.getDateNow(!0);let n=o.getDay(),r=[],d=null;if(m.a.sessao.dados.feriados.length&&(r=m.a.sessao.dados.feriados.filter((e=>e.data_feriado===t)),r.length&&(d=r[0].nome)),t===i){let a="Hoje"+(d?" ("+d+")":"");6===n&&(a="Hoje (S\xe1bado"+(d?" | "+d+")":")")),0===n&&(a="Hoje (Domingo"+(d?" | "+d+")":")")),p()(e).addClass("text-info").css({fontWeight:"bold"}).parent().css({backgroundColor:"rgba(49, 112, 143, 0.2)"}).attr("title",a)}else if(6===n||0===n){let a="";6===n&&(a="S\xe1bado"+(d?" ("+d+")":"")),0===n&&(a="Domingo"+(d?" ("+d+")":"")),p()(e).addClass("text-muted").css({fontWeight:"bold"}).parent().css({backgroundColor:"rgba(119, 119, 119, 0.2)"}).attr("title",a)}else r.length&&p()(e).addClass("text-danger").css({fontWeight:"bold"}).parent().css({backgroundColor:"rgba(169, 68, 66, 0.2)"}).attr("title","Feriado ("+d+")")},cellTemplate(e,a){if(p()(e).css({borderLeft:"1px solid rgba(119, 119, 119, 0.2)",borderRight:"1px solid rgba(119, 119, 119, 0.2)"}),"data"===a.rowType&&a.value){p()(e).text(a.value);let t=a.column.dataField,o=a.data,i=Object.keys(o),s=Object.values(o),n=null;for(let e=0;e<i.length;e++){let a=i[e],o=s[e],r=a.indexOf("__")>-1?a.split("__"):[];if(r[0]===t&&"apontamento_padrao"==r[1]){n=o;break}}"S"===n&&p()(e).addClass("text-warning").css({fontWeight:"bolder",backgroundColor:"rgba(138, 109, 0, 0.2)",border:"1px solid rgba(138, 109, 0)"}).attr("title","Apontamento bloqueado para edi\xe7\xe3o, pois foi realizado pela tela de Apontamento de Atividades")}},validationRules:[{type:"custom",validationCallback(e){let a=e.value,t=Object.keys(e.data),o=Object.values(e.data),i=e.column.dataField,s=!0;for(let n=0;n<t.length;n++){let e=t[n],a=o[n],r=e.indexOf("__")>-1?e.split("__"):[];if(r[0]===i&&"apontamento_padrao"===r[1]&&"S"===a){s=!1;break}}if(s&&a&&!Number.isInteger(a)){let e=a.toString().split(".");if(0!==+e[1]&&5!==+e[1])return!1}return!0},message:"Permitido somente valores inteiros ou exatos."},{type:"custom",validationCallback(e){let a=e.value,t=Object.keys(e.data),o=Object.values(e.data),i=e.column.dataField,s=!0;for(let n=0;n<t.length;n++){let e=t[n],a=o[n],r=e.indexOf("__")>-1?e.split("__"):[];if(r[0]===i&&"apontamento_padrao"===r[1]&&"S"===a){s=!1;break}}return!(s&&a&&parseInt(a)>24)},message:"Apontamento maior que 24h n\xe3o permitido."}]}),a.totalItems.push({column:t,summaryType:"sum",skipEmptyValues:!0,displayFormat:"{0}"})}D(a),y(e)}}()}),[E]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col-md-2",children:[Object(h.jsx)("label",{children:"Data In\xedcio"}),Object(h.jsx)(n.a,{type:"date",displayFormat:"dd/MM/yyyy",showClearButton:!0,value:w,onValueChanged:e=>{let a=window.formatDate(e.value,!0);j(a)},style:{backgroundColor:"#FFF"}})]}),Object(h.jsxs)("div",{className:"col-md-2",children:[Object(h.jsx)("label",{children:"Data Fim"}),Object(h.jsx)(n.a,{type:"date",displayFormat:"dd/MM/yyyy",showClearButton:!0,value:O,onValueChanged:e=>{let a=window.formatDate(e.value,!0);x(a)},style:{backgroundColor:"#FFF"}})]}),Object(h.jsxs)("div",{className:"col-md-4",children:[Object(h.jsx)("label",{children:"T\xe9cnico"}),Object(h.jsx)(r.default,{selecionado:S,aoAlterar:(e,a)=>{I(e),C(a.usuario_id)},dropDownBoxStyle:{backgroundColor:"#FFF"}})]})]}),E.length&&T.length&&Object(h.jsx)("div",{className:"row",style:{marginTop:10},children:Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsx)(d.default,{remoteOperations:{groupPaging:!0,paging:!0,filtering:!0,sorting:!0,grouping:!0,summary:!1},dataSource:E,style:{height:"calc(100vh - 110px)"},keyExpr:"projeto_atividade_id",columns:T,summary:R,columnChooser:{enabled:!0},editing:{mode:"batch",allowAdding:!1,allowDeleting:!1,useIcons:!1,allowUpdating:!0},stateStoring:{enabled:!0,type:"custom",customSave(e){let a=Object(o.a)(Object(o.a)({},e),{},{columns:function(e){let a=["projeto_codigo_nome","projeto_codigo","projeto_nome","projeto_atividade_nome","soma_horas_atividade_periodo","porcentagem"];return e.filter((e=>a.includes(e.dataField)))}(e.columns)}),t=m.a.get_parametro_usuario("apontamento_simples");m.a.set_parametro_usuario("apontamento_simples",Object(o.a)(Object(o.a)({},t),{},{dataGrid:a}))},async customLoad(){let e=m.a.get_parametro_usuario("apontamento_simples");if(e&&e.dataGrid)return e.dataGrid}},onToolbarPreparing:function(e){const a=[{widget:"dxButton",options:{icon:"help",hint:"Ajuda",text:"Ajuda",onClick:e=>{window.open(m.a.manual_link("log/BPM8214"),"_blank").focus()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:e=>M()},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=e.component.getController("validating")._validationState;let o=!1;if(t.length)for(let e=0;e<t.length;e++){if(!1===t[e].isValid){o=!0;break}}if(o)window.alertaPopUp("Valida\xe7\xe3o","Realize os ajustes dos valores inv\xe1lidos antes de continuar");else{const a=()=>{const a=window.CircularJSON.stringify(e.component.getController("editing").getChanges()),t=e.component.getController("editing").getChanges();let o=!0,i="";t.forEach((e=>{let a=Object.keys(e.data);if(1==a.length&&a.includes("porcentagem")){o=!1;const a=E.find(((a,t,o)=>a.projeto_atividade_id===e.key));i+=a.projeto_atividade_nome+"<br/>"}})),o?Object(c.b)(a,A,M):window.alertaPopUp("Valida\xe7\xe3o","Necess\xe1rio informar as horas trabalhadas para salvar. <br/><br/><b>Atividade(s): </b><br/>"+i)};let t=e.component.getController("editing").getChanges(),o=[];for(let e=0;e<t.length;e++){let a=t[e].data,i=Object.keys(a),s=Object.values(a);for(let e=0;e<s.length;e++){let a=s[e];0===Number(a)&&(o.includes(i[e].format_date())||o.push(i[e].format_date()))}}o.length?window.alertaPopUp("Aten\xe7\xe3o","Foram encontrados alguns apontamentos com valor 0 (zero) ou vazio. Esses apontamentos, caso existam, ser\xe3o exclu\xeddos.<br><br>Tem certeza que deseja continuar e salvar as altera\xe7\xf5es?<br><br>".concat(o.join("<br>")),"Sim, salvar altera\xe7\xf5es",(()=>{a()}),"N\xe3o, cancelar altera\xe7\xf5es",(()=>!1)):a()}})}},onEditingStart:e=>{let a=Object.keys(e.data),t=Object.values(e.data),o=e.column.dataField,i={};for(let s=0;s<a.length;s++){let e=a[s],n=t[s],r=e.indexOf("__")>-1?e.split("__"):[];r[0]===o&&("apontamento_padrao"===r[1]&&(i.apontamento_padrao=n),"apontamento_projeto_simples_id"===r[1]&&(i.apontamento_projeto_simples_id=n))}"S"===i.apontamento_padrao&&(e.cancel=!0)}})})})]})}_.defaultProps={abaTitulo:"Apontamento Simples"}},1043:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(247),i=t.n(o),s=t(267),n=t(755),r=t(254),d=t(296),l=t(313),c=t(253),u=t(244);class p extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){return Object(u.jsx)("div",{children:Object(u.jsxs)(s.default,{dataSource:Object(n.a)(),onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_cargos"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},style:{height:"calc(100vh - 48px)"},children:[Object(u.jsx)(r.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}),Object(u.jsxs)(r.Column,{type:"buttons",children:[Object(u.jsx)(d.a,{visible:e=>!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(u.jsx)(l.a,{visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cargo",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());c.a.post("/cargo/salvar/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}p.defaultProps={abaTitulo:"Cargos"}},1044:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));var o=t(87),i=t(247),s=t(715),n=t(43),r=t.n(n),d=t(244);function l(e){let{empresa_filial_id:a,usuario_tipo:t,todas_permissoes:n,permissoes_selecionadas:l,ao_selecionar:c,ao_listar_permissoes:u}=e,p=!1,m=!1,h=[],_={},f=[];Object.keys(n).forEach((e=>{if(!(!n[e].perfil||null==t||Array.isArray(n[e].perfil)&&n[e].perfil.includes(parseInt(t))||parseInt(n[e].perfil)===parseInt(t)))return;if(!o.a.verifica_permissao(a,e)&&(parseInt(t)===window.USUARIO_TIPO.COLABORADOR||null===t))return;if(parseInt(t)!==window.USUARIO_TIPO.COLABORADOR&&null!==t&&n[e].perfil&&(Array.isArray(n[e].perfil)&&1===n[e].perfil.length&&n[e].perfil.includes(window.USUARIO_TIPO.COLABORADOR)||n[e].perfil===window.USUARIO_TIPO.COLABORADOR))return;!0===n[e].principal&&(_[parseInt(n[e].modulo)]=e);let i=!0===n[e].principal?null:_[parseInt(n[e].modulo)]||(!0===n[e].especifico?"especificos":"sistema");switch(h.push({chave:e,descricao:n[e].descricao||e,chave_pai:i,observacao:n[e].observacao||""}),i){case"especificos":p=!0;break;case"sistema":m=!0}for(const a of l)if(a.chave===e){f.push(e);break}})),m&&h.unshift({chave:"sistema",descricao:"Sistema",chave_pai:null}),p&&h.push({chave:"especificos",descricao:"Espec\xedficos",chave_pai:null});const b=Object(i.useCallback)((e=>{var a;"headerRow"===e.parentType&&(e.editorOptions.visible=!1),"dataRow"===e.parentType&&e.row&&"descricao"===e.dataField&&(e.editorOptions.visible=(a=e.row,!["especificos","sistema"].includes(a.data.chave)))}),[]),v=Object(i.useCallback)((e=>{c&&c(e.selectedRowsData)}),[c]);return u&&u(h),Object(d.jsxs)(s.TreeList,{id:"permissoes",dataSource:h,showRowLines:!0,showBorders:!0,columnAutoWidth:!0,defaultSelectedRowKeys:f,keyExpr:"chave",parentIdExpr:"chave_pai",allowSelectAll:!0,onSelectionChanged:v,onEditorPreparing:b,children:[Object(d.jsx)(s.FilterRow,{visible:!0}),Object(d.jsx)(s.Selection,{mode:"multiple"}),Object(d.jsx)(s.Column,{dataField:"descricao",caption:"Permiss\xf5es",cellTemplate:(e,a)=>{if(void 0===a.data.observacao||""===a.data.observacao||null===a.data.observacao)r()(e).text(a.data.descricao);else{const t=r()("<div>"),o=r()("<i>").attr("id","infoPermissao").attr("class","fas fa-info-circle").attr("title",a.data.observacao).css({cursor:"pointer"}).on("click",(e=>{window.alertaPopUp(a.data.descricao,a.data.observacao,"Ok")})),i=r()("<span>").attr("id","descricaoPermissao").html("&nbsp;".concat(a.data.descricao));r()(t).append([o,i]),r()(e).append(t)}}})]})}},1045:function(e,a,t){"use strict";var o=t(247),i=t.n(o),s=t(244);class n extends o.Component{constructor(e){super(e),this.handlePathItemClick=e=>{this.props.fnCarregarDados(e)},this.handlePathItemClick=this.handlePathItemClick.bind(this)}render(){let e=null;return e=this.props.arrCurrentPath&&this.props.arrCurrentPath.length>0?this.props.arrCurrentPath.map(((e,a)=>Object(s.jsxs)(i.a.Fragment,{children:[a>0&&Object(s.jsx)("li",{className:"dx-menu-item-wrapper",style:{pointerEvents:"none"},children:Object(s.jsx)("div",{className:"dx-item dx-menu-item dx-menu-item-has-icon dx-filemanager-breadcrumbs-path-separator-item",tabIndex:"-1",children:Object(s.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(s.jsx)("i",{className:"dx-icon dx-icon-spinnext"})})})}),Object(s.jsx)("li",{className:"dx-menu-item-wrapper",onClick:()=>{this.handlePathItemClick(e.id)},children:Object(s.jsx)("div",{className:"dx-menu-item-has-text",tabIndex:"-1",children:Object(s.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(s.jsx)("span",{className:"dx-menu-item-text",children:e.nome})})})})]},a))):Object(s.jsx)("li",{className:"dx-menu-item-wrapper",children:Object(s.jsx)("div",{className:"dx-item dx-menu-item dx-menu-item-has-text",tabIndex:"-1",children:Object(s.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(s.jsx)("span",{className:"dx-menu-item-text",children:"Carregando..."})})})}),Object(s.jsxs)("ul",{className:"dx-menu-items-container",children:[Object(s.jsx)("li",{className:"dx-menu-item-wrapper",onClick:()=>{this.props.arrCurrentPath.length>1&&this.handlePathItemClick(this.props.arrCurrentPath[this.props.arrCurrentPath.length-2].id)},children:Object(s.jsx)("div",{className:"dx-menu-item-has-icon dx-filemanager-breadcrumbs-parent-folder-item",tabIndex:"-1",children:Object(s.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(s.jsx)("i",{className:"dx-icon dx-icon-arrowup"})})})}),Object(s.jsx)("li",{className:"dx-menu-item-wrapper",style:{pointerEvents:"none"},children:Object(s.jsx)("div",{className:"dx-item dx-menu-item dx-menu-item-has-text dx-filemanager-breadcrumbs-separator-item",tabIndex:"-1",children:Object(s.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(s.jsx)("span",{className:"dx-menu-item-text",children:"\xa0"})})})}),e]})}}a.a=n},1046:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(247),i=t.n(o),s=t(254),n=t(267),r=t(296),d=t(313),l=t(757),c=t(253),u=t(244);class p extends i.a.Component{constructor(e){super(e),this.state={dataSource:Object(l.a)()},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){return Object(u.jsx)(i.a.Fragment,{children:Object(u.jsxs)(n.default,{dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(n.stateStoring)("listagemClassificacaoMovimentacaoFinanceira"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},style:{height:"calc(100vh - 48px)"},children:[Object(u.jsx)(s.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}),Object(u.jsx)(s.Column,{dataField:"tipo",caption:"Tipo",lookup:{dataSource:[{id:"1",descricao:"Entrada"},{id:"2",descricao:"Sa\xedda"}],displayExpr:"descricao",valueExpr:"id"}}),Object(u.jsxs)(s.Column,{type:"buttons",children:[Object(u.jsx)(r.a,{visible:e=>!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(u.jsx)(d.a,{visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Classifica\xe7\xe3o",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());c.a.post("/classificacao_movimentacao_financeira/salvar_dx_grid/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}p.defaultProps={abaTitulo:"Classifica\xe7\xe3o de Movimenta\xe7\xe3o Financeira"}},1047:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(247),i=t.n(o),s=t(497),n=t(244);class r extends i.a.Component{constructor(e){super(e)}render(){return this.props.quadro_id?Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(s.default,{tabela:"tarefa_quadro",id:this.props.quadro_id,html_id:this.props.html_id})}):Object(n.jsx)("p",{children:"ID do Quadro n\xe3o informado ou inexistente"})}}},1048:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(247),i=t.n(o),s=t(497),n=t(244);class r extends i.a.Component{constructor(e){super(e)}render(){return this.props.pdca_id?Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)(s.default,{tabela:"pdca",id:this.props.pdca_id,html_id:this.props.html_id})}):Object(n.jsx)("p",{children:"ID do PDCA n\xe3o informado ou inexistente"})}}},1049:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t(253),s=t(433),n=t(244);a.default=function(e){let{quadro:a,onSuccess:t}=e;const r=Object(o.useRef)(null);return Object(o.useEffect)((()=>{if(r.current){let e=null;const o=[{toolbar:"bottom",location:"center",widget:"dxButton",options:{text:"Duplicar",hint:"Duplicar",onClick:()=>{n()}}},{toolbar:"bottom",location:"center",widget:"dxButton",options:{text:"Cancelar",hint:"Cancelar",onClick:()=>{e&&e.hide()}}}];window.alertaPopUp({titulo:"Duplicar Quadro",conteudo:(a,t)=>{a.replaceWith(r.current),e=t},largura:"400px",botaoConfirmarTexto:null,botaoConfirmarFuncao:null,arrBotoes:o});const n=()=>{i.a.post("tarefa_quadro/duplicar_quadro",{quadro:a},(a=>{a?(Object(s.default)("Quadro duplicado com sucesso.","success"),t&&t()):Object(s.default)("Erro ao duplicar quadro.","error"),e&&e.hide()}))}}}),[]),Object(n.jsxs)("div",{ref:r,children:[" ",Object(n.jsxs)("label",{children:["Deseja realmente duplicar o quadro ",Object(n.jsx)("b",{children:a.nome}),"?"]})," "]})}},1051:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(248),i=t(281),s=t(267),n=t(490),r=t(244);function d(e){let a=null;return e.stateStoringNome&&(a=Object(s.stateStoring)(e.stateStoringNome,e.stateStoringColunas)),Object(r.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(n.c)({equipe_interna:!0,clientes:!0,fornecedores:!0,prospects:!0,dx_grid:!0}),displayExpr:a=>e.limparAoAlterar?"":a?a.nome:"",stateStoring:a})))}d.defaultProps={placeholder:"Pesquisar por nome",aoAlterar:null,limparAoAlterar:!1,columns:n.d}},1052:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return f}));var o=t(87),i=t(253),s=t(271),n=t(43),r=t.n(n),d=t(247),l=t.n(d),c=t(254),u=t(267),p=t(559),m=t(557),h=t(757),_=t(244);function f(e){let{projetoId:a,atividadeProjetoId:t,dataSource:n,html_id:f,instanceMovimentacaoFinanceira:b}=e;const[v,g]=Object(d.useState)([]),w=!(+t>0||+a>0),[j,O]=Object(d.useState)(null!==n&&void 0!==n?n:w?Object(p.e)():null),x=Object(p.d)(),A=l.a.createRef(),C=()=>A.current?A.current.instance:null,S="listagem_movimentacao_financeira"+(+a>0?"_"+a:"")+(+t>0?"_"+t:""),I={};Object(d.useEffect)((()=>async function(){return"S"===o.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira||!0===o.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira?await Object(h.b)():new Promise((e=>e([])))}().then((e=>g(e)))),[]);const E=e=>{if(w&&C())return C().cancelEditData(),C().refresh(),!1;const o=e=>{O(e)};+t>0?Object(m.a)(t).then(o):Object(p.a)(a).then(o)},P=e=>!(+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS),T=+a>0||+t>0?"calc(100vh - 173px)":"calc(100vh - 50px)",y={format:"R$ #,##0.##",showClearButton:!0},R=+t>0||+a>0?{totalItems:[{name:"entrada_valor_previsto",showInColumn:"valor_previsto",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Entrada: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saida_valor_previsto",showInColumn:"valor_previsto",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Sa\xedda: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saldo_valor_previsto",showInColumn:"valor_previsto",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Saldo: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"entrada_valor_realizado",showInColumn:"valor_realizado",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Entrada: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saida_valor_realizado",showInColumn:"valor_realizado",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Sa\xedda: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saldo_valor_realizado",showInColumn:"valor_realizado",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Saldo: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}}],calculateCustomSummary:function(e){"entrada_valor_previsto"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL&&(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",","))),"saida_valor_previsto"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS||(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",",")))),"saldo_valor_previsto"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL?e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",","):e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)-(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",","))),"entrada_valor_realizado"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL&&(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",","))),"saida_valor_realizado"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS||(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",",")))),"saldo_valor_realizado"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL?e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",","):e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)-(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",",")))}}:null;return Object(_.jsxs)(u.default,{ref:A,style:{height:T,width:"100%"},dataSource:j,remoteOperations:w,stateStoring:Object(u.stateStoring)(S),onInitNewRow:e=>{e.data.tabela=null,e.data.tabela_id=null},onInitialized:e=>{b&&b(e.component)},onEditorPreparing:e=>{if("dataRow"===e.parentType){if(!(+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS)){if("tipo"===e.dataField&&(e.editorOptions.dataSource={store:{type:"array",data:[{id:"1",descricao:"Entrada Manual"},{id:"2",descricao:"Sa\xedda Manual"}]}},"S"===o.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira||!0===o.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira)){let a=e.editorOptions.onValueChanged;e.editorOptions.onValueChanged=function(t){a.apply(this,arguments);let o=e.row.rowIndex;e.component.cellValue(o,"classificacao_movimentacao_financeira_id")&&e.component.cellValue(o,"classificacao_movimentacao_financeira_id",null)}}if("classificacao_movimentacao_financeira_id"===e.dataField&&v.length){let a=[];switch(+e.row.data.tipo){case window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL:a=v.filter((e=>e.tipo==window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL));break;case window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL:a=v.filter((e=>e.tipo==window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL))}e.editorOptions.dataSource=a}}}},onToolbarPreparing:e=>{var o=[{widget:"dxButton",options:{icon:"fa fa-plus",hint:"Adicionar uma movimenta\xe7\xe3o financeira",text:"Adicionar uma movimenta\xe7\xe3o financeira",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"save",hint:"Salvar",text:"Salvar",onClick:()=>{let e=C().getController("editing").getChanges().length?window.CircularJSON.stringify(C().getController("editing").getChanges()):null;if(!e)return!1;i.a.post({route:"projeto/salvar_movimentacao_financeira/",type:"POST",data:{arr_movimentacao_financeira:e},func_response:e=>{e&&(window.alert_saved("Salvo com sucesso"),E())},html_id:f})}},location:"after",name:"BtnSalvar",locateInMenu:"auto",visible:!(+t>0||+a>0)},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:E},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto",visible:!0}];e.toolbarOptions.items=window.add_botao_dx_toolbar(o,e.toolbarOptions.items);for(var s=0;s<e.toolbarOptions.items.length;s++){var n=e.toolbarOptions.items[s];"saveButton"===n.name&&(n.visible=!1)}},summary:R,children:[Object(_.jsx)(c.Column,{dataField:"projeto_id",width:"200px",visible:!1,allowEditing:!1}),Object(_.jsx)(c.Column,{dataField:"projeto_nome",width:"200px",caption:"Projeto",visible:0===+a,editCellTemplate:(e,a)=>{const t=a.component.cellValue(a.rowIndex,"projeto_id");return r()("<div>").dxDropDownBox({dropDownOptions:{width:"50vw",resizeEnabled:!0},dataSource:x,placeholder:"Pesquisar Projeto",remoteOperations:!0,value:t,valueExpr:"id",displayExpr:e=>e.nome,inputAttr:{"aria-label":"Owner"},contentTemplate:e=>r()("<div>").dxDataGrid({dataSource:Object(p.d)(),remoteOperations:!0,columns:[{dataField:"codigo",width:"100px"},{dataField:"nome",caption:"Nome do projeto"},{dataField:"status_nome",caption:"Status",width:"100px"},{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",width:"100px"}],filterValue:[["status_nome","<>","Conclu\xeddo"]],pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},filterPanel:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!1},allowColumnResizing:!0,columnResizingMode:"widget",hoverStateEnabled:!0,scrolling:{mode:"virtual"},height:"100%",selection:{mode:"single"},selectedRowKeys:[t],focusedRowEnabled:!0,focusedRowKey:t,onSelectionChanged(t){t.selectedRowKeys[0]&&(e.component.option("value",t.selectedRowKeys[0]),a.setValue(t.selectedRowsData[0].nome),a.component.cellValue(a.rowIndex,"projeto_id",t.selectedRowKeys[0]),a.component.cellValue(a.rowIndex,"projeto_codigo",t.selectedRowsData[0].codigo),a.component.cellValue(a.rowIndex,"projeto_atividade_id",null),a.component.cellValue(a.rowIndex,"projeto_atividade_codigo",null),a.component.cellValue(a.rowIndex,"projeto_atividade_simplificada",null),t.selectedRowKeys.length>0&&e.component.close())}})})}}),Object(_.jsx)(c.Column,{dataField:"projeto_codigo",width:"200px",visible:!1,allowEditing:!1}),Object(_.jsx)(c.Column,{dataField:"projeto_atividade_id",width:"200px",visible:!1,allowEditing:!1}),Object(_.jsx)(c.Column,{dataField:"projeto_atividade_simplificada",width:"200px",caption:"Atividade",visible:0===+t||0===+a,editCellTemplate:(e,t)=>{const o=r()("<div>"),i=a||t.component.cellValue(t.rowIndex,"projeto_id");if(0===parseInt(i))return o;const s=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.require(["react","react-dom","./assets/view/atividade_projeto/ListarAtividadeProjeto"],((s,n,d)=>{a||(I["projeto_"+i]=e);let l=d=s.createElement(d,null,null);n.render(l,o[0]),l.props.setParams({div:r()(o),data:e,parametro_usuario:"apontamento_projeto",dropdown:!0,somente_leitura:!0,atividade_selecionada:t.component.cellValue(t.rowIndex,"projeto_atividade_id")||null,ao_selecionar:(e,a)=>{t.component.cellValue(t.rowIndex,"projeto_atividade_id",e),t.component.cellValue(t.rowIndex,"projeto_atividade_codigo",a.codigo),t.setValue(a.atividade_simplificada)},fullscreen:!1,listar_somente_analiticas:!0})}))};let n=(e=>!!I["projeto_"+e]&&I["projeto_"+e])(i);return n?s(n,!0):Object(m.b)(i,s),o}}),Object(_.jsx)(c.Column,{dataField:"tipo",width:"200px",placeholder:o.a.lang.combobox.selecione,visible:!0,children:Object(_.jsx)(c.Lookup,{dataSource:p.f,displayExpr:"descricao",valueExpr:"id"})}),Object(_.jsx)(c.Column,{dataField:"classificacao_movimentacao_financeira_id",width:"200px",caption:"Classifica\xe7\xe3o",placeholder:o.a.lang.combobox.selecione,visible:"S"===o.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira||!0===o.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira,children:Object(_.jsx)(c.Lookup,{dataSource:v,displayExpr:"descricao",valueExpr:"classificacao_movimentacao_financeira_id",allowClearing:!0})}),Object(_.jsx)(c.Column,{dataField:"descricao",width:"200px",dataType:"string"}),Object(_.jsx)(c.Column,{dataField:"valor_previsto",width:"200px",dataType:"number",editorOptions:y,children:Object(_.jsx)(c.Format,{type:"currency",precision:2})}),Object(_.jsx)(c.Column,{dataField:"valor_realizado",width:"200px",dataType:"number",editorOptions:y,children:Object(_.jsx)(c.Format,{type:"currency",precision:2})}),Object(_.jsx)(c.Column,{dataField:"data_prevista",width:"200px",dataType:"date"}),Object(_.jsx)(c.Column,{dataField:"data_realizado",width:"200px",dataType:"date"}),Object(_.jsxs)(c.Column,{type:"buttons",width:"45px",fixed:!0,fixedPosition:"right",children:[Object(_.jsx)(c.Button,{hint:"Acessar registro",icon:"fa fa-external-link-square-alt",visible:e=>e.row.data.tabela_id>0,onClick:e=>(e=>{switch(e.tabela){case"projeto_atividade":s.a.load("atividade_projeto/detalhes",((a,t)=>{t.onclose=()=>E(),t.show({projeto_atividade_id:e.tabela_id,tipo:window.FORMULARIO.EDITAR})}),s.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:e.tabela_id});break;case"apontamento_projeto":s.a.load("apontamento_projeto/detalhes",((a,t)=>{t.onclose=()=>E(),t.show(e.tabela_id,window.FORMULARIO.EDITAR)}),s.a.ABA.MULTIPLAS);break;case"apontamento_despesa":s.a.load("apontamento_despesas/detalhes",((a,t)=>{t.onclose=()=>E(),t.show(window.FORMULARIO.EDITAR,e.tabela_id)}),s.a.ABA.MULTIPLAS)}})(e.row.data)}),Object(_.jsx)(c.Button,{hint:"Excluir",icon:"trash",visible:e=>0===+e.row.data.tabela_id&&!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(_.jsx)(c.Button,{hint:"Recuperar",icon:"revert",visible:e=>0===+e.row.data.tabela_id&&e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]}),Object(_.jsx)(c.Editing,{mode:"batch",allowUpdating:P,allowDeleting:P,useIcons:!0})]})}f.defaultProps={abaTitulo:"Movimenta\xe7\xe3o Financeira",projetoId:0,atividadeProjetoId:0}},1053:function(e,a,t){e.exports={container:"Favoritos_container__3BPoj",loadingIndicator:"Favoritos_loadingIndicator__12IOd"}},1054:function(e,a,t){},1055:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(247),i=t.n(o),s=t(798),n=t(797),r=t(244);class d extends i.a.Component{constructor(e){var a;super(e),this.state={componente:null!==(a=e.componente)&&void 0!==a?a:window.HOME_DRAWER_RIGHT_COMPONENTES.NOTAS},this.alterarOpcoes=this.alterarOpcoes.bind(this),e.callbackAlterarOpcoes&&e.callbackAlterarOpcoes(this.alterarOpcoes)}alterarOpcoes(e){this.setState({componente:e})}render(){switch(this.state.componente){case window.HOME_DRAWER_RIGHT_COMPONENTES.FAVORITOS:return Object(r.jsx)(n.default,{});case window.HOME_DRAWER_RIGHT_COMPONENTES.NOTAS:return Object(r.jsx)(s.default,{});case window.HOME_DRAWER_RIGHT_COMPONENTES.BOTH:return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(n.default,{height:"calc(50vh - 0px)"}),Object(r.jsx)(s.default,{height:"calc(50vh - 95px)"})]});default:return Object(r.jsx)(i.a.Fragment,{})}}}d.defaultProps={componente:window.HOME_DRAWER_RIGHT_COMPONENTES.NOTAS}},1056:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(248),i=t(281),s=t(743),n=t(744),r=t(244);function d(e){return Object(r.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.b)()})))}d.defaultProps={aoAlterar:null,displayExpr:e=>e&&e.nome,children:n.a}},1057:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(247),i=t.n(o),s=t(759),n=t(321),r=t.n(n),d=t(244);const l="00.000.000/0000-00",c="000.000.000-00";let u="";class p extends i.a.Component{constructor(e){super(e),this.ajustarMascara=e=>{11===(e.component.option("value")||"").toString().length&&14===e.component.element().find(".dx-texteditor-input")[0].selectionStart&&1===e.event.originalEvent.key.length&&parseInt(e.event.originalEvent.key)<=9&&this.setState({mask:l})},this.state={mask:e.valor&&e.valor.length>11?l:c,valor:e.valor},this.fnConsultarCNPJ=this.fnConsultarCNPJ.bind(this),this.ajustarMascara=this.ajustarMascara.bind(this)}render(){return Object(d.jsx)(r.a,{valueChangeEvent:"keyup change",onValueChanged:this.fnConsultarCNPJ,placeholder:this.props.placeholder,onKeyDown:this.ajustarMascara,onPaste:async e=>{if(u=e.event.originalEvent.clipboardData.getData("Text"),u=u.replace(/[^\d]/g,""),this.setState({valor:u,mask:u.length<=11?c:l}),this.props.aoAlterar&&14===u.length){let e=await Object(s.consultarCNPJ)(u);this.props.aoAlterar(u,e),u=""}},mask:this.state.mask,value:this.state.valor})}async fnConsultarCNPJ(e){if(this.setState({valor:e.value,mask:e.value.length<=11?c:l}),this.props.aoAlterar&&14===e.value.length&&(e.event&&e.event.originalEvent&&e.event.originalEvent.key&&1===e.event.originalEvent.key.length&&parseInt(e.event.originalEvent.key)<9||u&&14===u.length)){u="";let a=await Object(s.consultarCNPJ)(e.value);this.props.aoAlterar(e.value,a)}}}p.defaultProps={placeholder:"CPF/CNPJ",aoAlterar:null}},1058:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(247),i=t.n(o),s=t(254),n=t.n(s),r=t(244);class d extends i.a.Component{constructor(e){super(e),this.getKey=this.getKey.bind(this),this.onContentReady=this.onContentReady.bind(this),this.keyCount=0,this.dataGridRef=i.a.createRef()}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}render(){return Object(r.jsx)(i.a.Fragment,{children:Object(r.jsx)(n.a,{ref:this.dataGridRef,dataSource:[],editing:{mode:"cell",allowAdding:!0,allowUpdating:!0,allowDeleting:!0},showBorders:!0,paging:{enabled:!1},onContentReady:this.onContentReady,children:Object(r.jsx)(s.Column,{dataField:"email",caption:"E-mails dos respons\xe1veis",dataType:"string",validationRules:[{type:"email"}],fixed:!0,fixedPosition:"left"},"coluna_email")},this.getKey())})}getKey(){return this.keyCount++}onContentReady(e){"function"===typeof this.props.getDataGridRef&&this.props.getDataGridRef(e)}}},1059:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=(t(247),t(281)),s=t(739),n=t(244);function r(e){return Object(n.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.a)()})))}r.defaultProps={displayExpr:"nome",valueExpr:"categoria_pdca_id"}},1060:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var o=t(247),i=t.n(o),s=t(254),n=t.n(s),r=t(321),d=t.n(r),l=t(373),c=t.n(l),u=t(307),p=t(552),m=(t(760),t(244));class h extends i.a.Component{constructor(e){var a,t,o,i,s;super(e),this.state={votacao_id:null!==(a=e.votacao_id)&&void 0!==a?a:null,pergunta:null!==(t=e.pergunta)&&void 0!==t?t:"",expiracao:null!==(o=e.expiracao)&&void 0!==o?o:window.AddDays(new Date,1),voto_secreto:null===(i=e.voto_secreto)||void 0===i||i,opcoes:null!==(s=e.opcoes)&&void 0!==s?s:[{},{}]}}render(){var e;return this.props.aoAlterar&&this.props.aoAlterar(this.state),Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-xs-12 form-group",children:[Object(m.jsx)("div",{children:"Pergunta:"}),Object(m.jsx)(d.a,{defaultValue:"",onValueChange:e=>this.setState({pergunta:e})})]})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-xs-12 form-group",children:[Object(m.jsx)("div",{children:"Data de Expira\xe7\xe3o:"}),Object(m.jsx)(c.a,{value:this.state.expiracao,type:"datetime",useMaskBehavior:!0,stylingMode:"filled",onValueChange:e=>this.setState({expiracao:e}),readOnly:!1})]})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-xs-12 form-group",style:{display:"flex",justifyContent:"flex-start"},children:[Object(m.jsx)(p.Switch,{defaultValue:null===(e=this.props.voto_secreto)||void 0===e||e,onValueChange:e=>this.setState({voto_secreto:e}),style:{marginRight:"5px"}}),Object(m.jsx)("label",{children:"Voto secreto"})]})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xs-12 form-group",children:Object(m.jsxs)(n.a,{id:"gridContainer",dataSource:this.state.opcoes,showBorders:!0,showColumnHeaders:!1,noDataText:"Nenhuma op\xe7\xe3o para vota\xe7\xe3o.",showEditorAlways:!0,onEditorPreparing:e=>{"dataRow"==e.parentType&&"opcao"==e.dataField&&(e.editorOptions.placeholder="Informe aqui uma op\xe7\xe3o")},onRowInserted:e=>this.props.aoAlterar?this.props.aoAlterar(this.state):null,onRowUpdated:e=>this.props.aoAlterar?this.props.aoAlterar(this.state):null,onRowRemoved:e=>this.props.aoAlterar?this.props.aoAlterar(this.state):null,children:[Object(m.jsx)(s.Editing,{mode:"cell",allowUpdating:!0,allowAdding:!0,allowDeleting:!0}),Object(m.jsx)(s.Column,{dataField:"opcao",caption:"Op\xe7\xf5es",width:"100%",showEditorAlways:!0}),Object(m.jsxs)(s.Toolbar,{children:[Object(m.jsx)(u.Item,{location:"before",locateInMenu:"never"}),Object(m.jsx)(u.Item,{location:"after",name:"addRowButton",showText:!0,options:{text:"Adicionar Op\xe7\xe3o"}})]})]})})})]})}}h.defaultProps={}},1061:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return _}));var o=t(247),i=t.n(o),s=t(254),n=t.n(s),r=t(760),d=t(482),l=t.n(d),c=t(445),u=t(374),p=t.n(u),m=t(343),h=t(244);class _ extends i.a.Component{constructor(e){var a,t,o,i,s;super(e),this.callbackResultado=e=>{var a;this.setState({dataSource:e.resultado,usuario_votacao_opcao_id:e.usuario_votacao_opcao_id,encerrada:e.encerrada,dataSourceHistorico:null!==(a=e.votos)&&void 0!==a?a:[]})},this.callbackAoFalhar=e=>{this.carregarDados()},this.state={votacao_id:null!==(a=e.votacao_id)&&void 0!==a?a:null,pergunta:null!==(t=e.pergunta)&&void 0!==t?t:"",expiracao:null!==(o=e.expiracao)&&void 0!==o?o:"",encerrada:this.estaEncerrada(e.expiracao),voto_secreto:null===(i=e.voto_secreto)||void 0===i||i,opcoes:null!==(s=e.opcoes)&&void 0!==s?s:[],dataSource:[],dataSourceHistorico:[],usuario_votacao_opcao_id:null,popup_votos_visivel:!1},this.callbackResultado=this.callbackResultado.bind(this),this.callbackAoFalhar=this.callbackAoFalhar.bind(this),this.carregarDados=this.carregarDados.bind(this),this.onSelectionChanged=this.onSelectionChanged.bind(this),this.renderExpiracao=this.renderExpiracao.bind(this),this.hideInfo=this.hideInfo.bind(this)}componentDidMount(){this.carregarDados(),this.timer=setInterval((()=>{this.state.encerrada!==this.estaEncerrada(this.state.expiracao)&&this.carregarDados()}),3e4)}componentWillUnmount(){this.timer&&clearInterval(this.timer)}carregarDados(){Object(r.a)(this.state.votacao_id,this.callbackResultado,this.callbackAoFalhar)}estaEncerrada(e){if(!e)return!1;return new Date(e)<=new Date}onSelectionChanged(e){let{selectedRowsData:a}=e;const t=a[0];t&&t.votacao_opcao_id&&t.votacao_opcao_id!=this.state.usuario_votacao_opcao_id&&this.setState({usuario_votacao_opcao_id:t.votacao_opcao_id},(()=>{Object(r.b)(this.state.votacao_id,t.votacao_opcao_id,this.callbackResultado,this.callbackAoFalhar)}))}renderExpiracao(){return this.state.expiracao?this.state.encerrada?Object(h.jsx)("div",{className:"row small text-muted",children:Object(h.jsx)("div",{className:"col-xs-12",children:Object(h.jsxs)("div",{title:this.state.expiracao?this.state.expiracao.format_date_time():"",children:["Vota\xe7\xe3o encerrada ",l()(this.state.expiracao).fromNow()]})})}):Object(h.jsx)("div",{className:"row small text-muted",children:Object(h.jsx)("div",{className:"col-xs-12",children:Object(h.jsxs)("div",{children:["Esta vota\xe7\xe3o expira ",l()(this.state.expiracao).fromNow()]})})}):null}renderHistorico(){if(!this.state.voto_secreto)return Object(h.jsxs)("div",{className:"row small text-muted",children:[Object(h.jsx)("div",{className:"col-xs-12",children:Object(h.jsx)("a",{onClick:e=>this.setState({popup_votos_visivel:!0}),href:"#!",children:"Hist\xf3rico de votos"})}),Object(h.jsx)(c.Popup,{visible:this.state.popup_votos_visivel,onHiding:this.hideInfo,dragEnabled:!1,hideOnOutsideClick:!0,showCloseButton:!0,showTitle:!0,title:"Hist\xf3rico de Votos",container:"body",minWidth:400,minHeight:400,resizeEnabled:!0,children:Object(h.jsx)(p.a,{width:"100%",height:"100%",children:Object(h.jsxs)(n.a,{id:"gridContainer",dataSource:this.state.dataSourceHistorico,showBorders:!1,showColumnHeaders:!0,noDataText:"Nenhum voto realizado",wordWrapEnabled:!1,children:[Object(h.jsx)(s.GroupPanel,{visible:!0}),Object(h.jsx)(s.FilterRow,{visible:!0}),Object(h.jsx)(s.FilterPanel,{visible:!0}),Object(h.jsx)(s.HeaderFilter,{visible:!0}),Object(h.jsx)(s.Editing,{mode:"cell",allowUpdating:!1,allowAdding:!1,allowDeleting:!1}),Object(h.jsx)(s.Export,{enabled:!0,allowExportSelectedData:!1}),Object(h.jsx)(m.a,{dataField:"hora",width:150}),Object(h.jsx)(s.Column,{dataField:"usuario_nome"}),Object(h.jsx)(s.Column,{dataField:"opcao",width:150})]})})})]})}hideInfo(){this.setState({popup_votos_visivel:!1})}render(){return Object(h.jsxs)(i.a.Fragment,{children:[Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-xs-12",children:this.state.pergunta})}),Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-xs-12",children:Object(h.jsxs)(n.a,{id:"gridContainer",dataSource:this.state.dataSource,showBorders:!0,showColumnHeaders:!1,noDataText:"",keyExpr:"votacao_opcao_id",selectedRowKeys:this.state.usuario_votacao_opcao_id?[this.state.usuario_votacao_opcao_id]:null,onSelectionChanged:this.state.encerrada?null:this.onSelectionChanged,wordWrapEnabled:!0,allowColumnResizing:!0,children:[Object(h.jsx)(s.Editing,{mode:"cell",allowUpdating:!1,allowAdding:!1,allowDeleting:!1}),Object(h.jsx)(s.Selection,{mode:"single"}),Object(h.jsx)(s.Column,{dataField:"opcao"}),Object(h.jsx)(s.Column,{dataField:"votos",width:"55px",alignment:"right"})]})})}),this.renderExpiracao(),this.renderHistorico()]})}}_.defaultProps={}},1062:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return _}));var o=t(247),i=t.n(o),s=t(706),n=t.n(s),r=t(253),d=t(87),l=t(267),c=t(254),u=t(343),p=t(314),m=t(244);let h=null;class _ extends i.a.Component{constructor(e){super(e),this.dataGridRef=i.a.createRef(),this.state={opened:!0,openedStateMode:"shrink",revealMode:"slide",position:"right",dataSource:null},this.renderVersoes=this.renderVersoes.bind(this),this.onSelectionChanged=this.onSelectionChanged.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.onRowPrepared=this.onRowPrepared.bind(this),this.fnDiagram=this.fnDiagram.bind(this),"function"===typeof this.props.fnRenderVersoes&&this.props.fnRenderVersoes(this.renderVersoes)}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}componentDidMount(){"function"===typeof this.props.getFnDiagram&&this.props.getFnDiagram(this.fnDiagram)}renderVersoes(){r.a.get("processo/listar_versoes/",{processo_id:this.props.processo_id},(e=>{e.push({versao_processo_id:"rascunho",sequencia:"#N/D",publicacao:null,ativa:!1,versao_teste:!1,nova_versao_observacao:"",tipo_versao:"3",texto_tipo_versao:"#Rascunho"}),this.setState({dataSource:e})}))}render(){const{opened:e,openedStateMode:a,position:t,revealMode:o}=this.state,s=this.props.scrollview;return this.props.btnToggle.unbind("click").click((()=>{this.setState({opened:!this.state.opened})})),Object(m.jsx)(i.a.Fragment,{children:Object(m.jsx)(n.a,{opened:e,openedStateMode:a,position:t,revealMode:o,onContentReady:e=>{s.appendTo(s.parent().find(".dx-drawer-content"))},component:()=>Object(m.jsx)("div",{style:{maxWidth:"50vh",width:"550px",overflow:"auto"},children:Object(m.jsxs)(l.default,{height:"calc(100vh - 45px)",ref:this.dataGridRef,keyExpr:"versao_processo_id",dataSource:this.state.dataSource,selection:{mode:"single"},groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},onToolbarPreparing:this.onToolbarPreparing,onSelectionChanged:this.onSelectionChanged,onRowPrepared:this.onRowPrepared,onInitialized:e=>{e.component.option("selectedRowKeys",["rascunho"])},children:[Object(m.jsx)(c.Column,{dataField:"sequencia"}),Object(m.jsx)(c.Column,{dataField:"texto_tipo_versao",caption:"Tipo",groupIndex:"0"}),Object(m.jsx)(u.a,{dataField:"publicacao",caption:"Publica\xe7\xe3o"}),",",Object(m.jsxs)(c.Column,{type:"buttons",visible:!this.props.readOnly,children:[Object(m.jsx)(c.Button,{icon:"fas fa-file-pdf",visible:e=>parseInt(e.row.data.tipo_versao)!==window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO,onClick:e=>{d.a.obter_token_publico((function(a){d.a.download(window.WS_URI+"processo/download_versao/?versao_processo_id="+e.row.data.versao_processo_id+"&empresa_filial_id="+d.a.temp.empresa+"&token_publico="+a)}))}}),Object(m.jsx)(c.Button,{icon:"fas fa-undo",visible:e=>parseInt(e.row.data.tipo_versao)!==window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO,onClick:e=>{window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aten\xe7\xe3o !',"Deseja restaurar a modelagem da vers\xe3o "+e.row.data.sequencia+" de "+e.row.data.texto_tipo_versao+'? <hr/><strong class="text-info">As altera\xe7\xf5es feitas na modelagem que n\xe3o foram versionadas ser\xe3o perdidas.</strong>',"Restaurar vers\xe3o",(()=>{this.props.fnRestaurarVersao(e.row.data.versao_processo_id)}),!0)}}),Object(m.jsx)(c.Button,{icon:"fas fa-check",visible:e=>!e.row.data.ativa&&parseInt(e.row.data.tipo_versao)===window.VERSAO_PROCESSO_TIPO_VERSAO.AUTOMACAO,onClick:e=>{window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aten\xe7\xe3o !',"Deseja marcar como ativa esta vers\xe3o do processo?","Marcar como ativa",(()=>{this.props.fnAtivarVersao(e.row.data.versao_processo_id,!1)}),!0)}}),Object(m.jsx)(c.Button,{icon:"fas fas fa-flask",visible:e=>!e.row.data.versao_teste&&parseInt(e.row.data.tipo_versao)===window.VERSAO_PROCESSO_TIPO_VERSAO.AUTOMACAO,onClick:e=>{window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aten\xe7\xe3o !',"Deseja marcar como teste esta vers\xe3o do processo?","Marcar como teste",(()=>{this.props.fnAtivarVersao(e.row.data.versao_processo_id,!0)}),!0)}}),Object(m.jsx)(c.Button,{icon:"fas fa-comment",visible:e=>parseInt(e.row.data.tipo_versao)!==window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO,onClick:e=>{window.alertaPopUp(e.row.data.nome_publicador,e.row.data.nova_versao_observacao)}})]})]})}),height:"calc(100vh - 42px)"})})}onSelectionChanged(e){let{selectedRowsData:a}=e;const t=a[0];if(t){const e=()=>{parseInt(t.tipo_versao)===window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO?this.props.fnPreencher():this.props.fnPreencher(null,null,t.versao_processo_id)};if(h)if(h._historyToolbar.bar.onChanged.listeners[1]&&h._historyToolbar.bar.onChanged.listeners[1].control.history.historyItems.length){Object(p.confirm)("Voc\xea possui altera\xe7\xf5es n\xe3o salvas, deseja continuar ?","Aten\xe7\xe3o !").then((a=>{a&&e()}))}else e()}}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar vers\xe3o",text:"Nova vers\xe3o",onClick:()=>{this.props.fnGerarVersao()},visible:!this.props.readOnly},location:"after",name:"BtnAddVersao",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}onRowPrepared(e){"data"===e.rowType&&(e.data.ativa?(e.rowElement.removeClass("dx-row-alt"),e.rowElement.addClass("bg-success")):e.data.versao_teste&&(e.rowElement.removeClass("dx-row-alt"),e.rowElement.addClass("bg-warning")))}fnDiagram(e){h=e}}},1063:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(271),n=t(317),r=t(396),d=t(705),l=t.n(d),c=t(244);let u=null;const p=["fontName","fontSize","bold","italic","underline","fontColor"],m=["lineStyle","lineColor"],h=["layoutTreeTopToBottom","layoutTreeBottomToTop","layoutTreeLeftToRight","layoutTreeRightToLeft"],_=["pageSize","pageOrientation"];class f extends i.a.Component{constructor(e){super(e),this.nodeOnInserted=this.nodeOnInserted.bind(this),this.nodeOnRemoved=this.nodeOnRemoved.bind(this),this.incluirDestino=this.incluirDestino.bind(this),this.edgeOnUpdated=this.edgeOnUpdated.bind(this),this.edgeOnRemoved=this.edgeOnRemoved.bind(this),this.edgeOnRemoving=this.edgeOnRemoving.bind(this),this.itemDblClick=this.itemDblClick.bind(this),this.contentReady=this.contentReady.bind(this),this.diagramRef=i.a.createRef()}componentDidMount(){"function"===typeof this.props.fnGetInstanceDiagram&&this.props.fnGetInstanceDiagram(this.diagramRef.current.instance)}render(){return Object(c.jsxs)(l.a,{id:"diagram",ref:this.diagramRef,onItemDblClick:this.itemDblClick,onContentReady:this.contentReady,readOnly:"undefined"!==typeof this.props.diagramDataSource,height:"calc(100vh - 135px)",onCustomCommand:e=>{if("fullscreen"===e.name){const a=e.component.option("fullScreen");e.component.option("fullScreen",!a),a?this.props.div.find(".dx-drawer-panel-content").css("z-index",0):this.props.div.find(".dx-drawer-panel-content").css("z-index",1504)}},children:[Object(c.jsxs)(d.PropertiesPanel,{children:[Object(c.jsxs)(d.Tab,{title:"Estilo",children:[Object(c.jsx)(d.Group,{title:"Texto",commands:p}),Object(c.jsx)(d.Group,{title:"Objeto",commands:m})]}),Object(c.jsx)(d.Tab,{title:"Layout",children:Object(c.jsx)(d.Group,{title:"\xc1rvores",commands:h})}),Object(c.jsx)(d.Tab,{title:"Diagrama",children:Object(c.jsx)(d.Group,{title:"Propriedades da P\xe1gina",commands:_})})]}),Object(c.jsxs)(d.ViewToolbar,{children:[Object(c.jsx)(d.Command,{name:"zoomLevel"}),Object(c.jsx)(d.Command,{name:"fullscreen",text:"Tela Cheia",icon:"fullscreen"}),Object(c.jsx)(d.Command,{name:"export",icon:"export",items:["exportSvg","exportPng","exportJpg"]}),Object(c.jsx)(d.Command,{name:"Settings",icon:"preferences",items:["units","showGrid","snapToGrid","gridSize","simpleView","toolbox"]})]}),Object(c.jsx)(d.Nodes,{dataSource:new n.default({key:"id",data:this.props.nodesDataSource,onInserted:this.nodeOnInserted,onRemoving:this.nodeOnRemoved}),autoLayout:{type:"off"}}),Object(c.jsx)(d.Edges,{dataSource:new n.default({key:"id",data:this.props.edgesDataSource,onInserted:this.incluirDestino,onUpdated:this.edgeOnUpdated,onRemoving:this.edgeOnRemoving,onRemoved:this.edgeOnRemoved})}),Object(c.jsxs)(d.CustomShape,{category:"geral",type:"inicio",title:"In\xedcio",allowResize:!1,backgroundImageUrl:"assets/img/processo/atividade_inicio.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"In\xedcio",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(c.jsx)(d.ConnectionPoint,{x:.5,y:0}),Object(c.jsx)(d.ConnectionPoint,{x:.9,y:.5}),Object(c.jsx)(d.ConnectionPoint,{x:.5,y:1}),Object(c.jsx)(d.ConnectionPoint,{x:.1,y:.5})]}),Object(c.jsxs)(d.CustomShape,{category:"geral",type:"fim",title:"Fim",allowResize:!1,backgroundImageUrl:"assets/img/processo/atividade_fim.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Fim",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(c.jsx)(d.ConnectionPoint,{x:.5,y:0}),Object(c.jsx)(d.ConnectionPoint,{x:.9,y:.5}),Object(c.jsx)(d.ConnectionPoint,{x:.5,y:1}),Object(c.jsx)(d.ConnectionPoint,{x:.1,y:.5})]}),Object(c.jsxs)(d.CustomShape,{category:"geral",type:"atividade",title:"Atividade",allowResize:!1,backgroundImageUrl:"assets/img/processo/atividade.svg",backgroundImageLeft:.15,backgroundImageTop:.15,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:1,defaultHeight:.75,defaultText:"Atividade",allowEditText:!1,textLeft:0,textTop:0,textWidth:1,textHeight:1,children:[Object(c.jsx)(d.ConnectionPoint,{x:.5,y:0}),Object(c.jsx)(d.ConnectionPoint,{x:.9,y:.5}),Object(c.jsx)(d.ConnectionPoint,{x:.5,y:1}),Object(c.jsx)(d.ConnectionPoint,{x:.1,y:.5})]}),Object(c.jsxs)(d.CustomShape,{category:"geral",type:"exclusivo",title:"Gateway Exclusivo",allowResize:!1,backgroundImageUrl:"assets/img/processo/gateway_exclusivo.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Gateway Exclusivo",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(c.jsx)(d.ConnectionPoint,{x:.5,y:0}),Object(c.jsx)(d.ConnectionPoint,{x:.9,y:.5}),Object(c.jsx)(d.ConnectionPoint,{x:.5,y:1}),Object(c.jsx)(d.ConnectionPoint,{x:.1,y:.5})]}),Object(c.jsxs)(d.CustomShape,{category:"geral",type:"inclusivo",title:"Gateway Inclusivo",allowResize:!1,backgroundImageUrl:"assets/img/processo/gateway_inclusivo.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Gateway Inclusivo",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(c.jsx)(d.ConnectionPoint,{x:.5,y:0}),Object(c.jsx)(d.ConnectionPoint,{x:.9,y:.5}),Object(c.jsx)(d.ConnectionPoint,{x:.5,y:1}),Object(c.jsx)(d.ConnectionPoint,{x:.1,y:.5})]}),Object(c.jsxs)(d.CustomShape,{category:"geral",type:"paralelo",title:"Gateway Paralelo",allowResize:!1,backgroundImageUrl:"assets/img/processo/gateway_paralelo.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Gateway Paralelo",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(c.jsx)(d.ConnectionPoint,{x:.5,y:0}),Object(c.jsx)(d.ConnectionPoint,{x:.9,y:.5}),Object(c.jsx)(d.ConnectionPoint,{x:.5,y:1}),Object(c.jsx)(d.ConnectionPoint,{x:.1,y:.5})]}),Object(c.jsxs)(d.Toolbox,{children:[Object(c.jsx)(d.Group,{category:"eventos",title:"Eventos",expanded:!0,shapes:["inicio","fim"]}),Object(c.jsx)(d.Group,{category:"task",title:"Atividades",expanded:!0,shapes:["atividade"]}),Object(c.jsx)(d.Group,{category:"gateway",title:"Gateways",expanded:!0,shapes:["exclusivo","paralelo","inclusivo"]}),Object(c.jsx)(d.Group,{category:"texto",title:"Texto",expanded:!0,shapes:["text"]}),Object(c.jsx)(d.Group,{category:"containers",title:"Containers",expanded:!0})]}),Object(c.jsx)(d.ContextToolbox,{enabled:!0,category:"geral",shapeIconsPerRow:5,width:200})]})}nodeOnInserted(e,a){const t=this.props.processo.elementos.findIndex((e=>e.elemento_tipo===window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE&&(-1===a.indexOf("_")?a===e.elem_key:a.split("_")[1]===e.id.toString())||e.elemento_tipo===window.PROCESSO_ELEMENTO_TIPO.GATEWAY&&(-1===a.indexOf("_")?a===e.elem_key:a.split("_")[1]===e.id.toString())));if(-1===t){if(this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export()),"verticalContainer"!==e.type&&"horizontalContainer"!==e.type&&"text"!==e.type){const t=window.int_processo_elemento_tipo(e.type);let o=null;t===window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?(o=window.clone_obj(r.defaultProcessoAtividade),o.tipo=window.int_processo_atividade_tipo(e.type)):t===window.PROCESSO_ELEMENTO_TIPO.GATEWAY&&(o=window.clone_obj(r.defaultProcessoGateway),o.tipo=window.int_processo_gateway_tipo(e.type)),o.elemento_tipo=t,o.elem_key=a,o.descricao=e.text,this.props.fnSalvarElemento(o)}}else{this.props.processo.elementos[t].removido=!1;for(let e=0;e<this.props.processo.elementos[t].destinos.length;e++)this.props.processo.elementos[t].destinos[e].removido=!1;for(let e=0;e<this.props.processo.elementos.length;e++){const a=this.props.processo.elementos[e];for(var o=0;o<a.destinos.length;o++){const i=a.destinos[o];(parseInt(i.id)&&i.id==this.props.processo.elementos[t].id||i.elem_key&&i.elem_key==this.props.processo.elementos[t].elem_key)&&(this.props.processo.elementos[e].destinos[o].removido=!1)}}}}nodeOnRemoved(e){this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export());const a=-1===e.indexOf("_")?e:e.split("_")[1],t="atividade"===e.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===e.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null;for(let o=0;o<this.props.processo.elementos.length;o++){const e=this.props.processo.elementos[o];(e.id&&a===e.id.toString()&&t===e.elemento_tipo||a===e.elem_key)&&this.props.util.excluir_elemento(e,this.props.processo,(()=>{}))}this.props.div.find('[key="'+a+'"]').length&&this.props.div.find('[key="'+a+'"]').parent().find(".btn_cancelar").trigger("click")}incluirDestino(e){if(e.from&&e.to){"undefined"===typeof e.elemKey&&(e.elemKey=e.from+"__"+e.to);const a=-1===e.from.indexOf("_")?e.from:e.from.split("_")[1],t=-1===e.to.indexOf("_")?e.to:e.to.split("_")[1];let o=null,i=null;this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export());for(let s=0;s<this.props.processo.diagrama.shapes.length;s++){const a=this.props.processo.diagrama.shapes[s];if(e.from===a.dataKey&&(o=a.key),e.to===a.dataKey&&(i=a.key),o&&i)break}e:for(let e=0;e<this.props.processo.elementos.length;e++){const o=this.props.processo.elementos[e];if(!o.removido&&o.id&&a===o.id.toString()||a===o.elem_key)for(let a=0;a<this.props.processo.elementos.length;a++){const o=this.props.processo.elementos[a];if(!o.removido&&(o.id&&t===o.id.toString()||t===o.elem_key)){this.props.processo.elementos[e].destinos.push({descricao:o.descricao,elem_key:o.elem_key,elemento_tipo:o.elemento_tipo,id:o.id?o.id:null,key:o.id?o.id:o.elem_key,opcional:!!o.opcional&&o.opcional,permite_retorno:!!o.permite_retorno&&o.permite_retorno,sequencia:o.sequencia,tipo:o.tipo,evento_enviar:null,filtro_evento_enviar:null,tipo_automacao:null});break e}}}}}edgeOnUpdated(e,a){"undefined"===typeof a.elemKey&&(a.elemKey=a.from+"__"+a.to),null===a.from&&-1!==a.elemKey.indexOf("__")&&(a.from=a.elemKey.split("__")[0]),null===a.to&&-1!==a.elemKey.indexOf("__")&&(a.to=a.elemKey.split("__")[1]),this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export());const t=a.elemKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[0],o="atividade"===a.elemKey.split("__")[0].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===a.elemKey.split("__")[0].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null,i=a.elemKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[1];let s=null;i&&(s="atividade"===a.elemKey.split("__")[1].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===a.elemKey.split("__")[1].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null);for(let n=0;n<this.props.processo.elementos.length;n++){const e=this.props.processo.elementos[n];if(e.id&&t===e.id.toString()&&o===e.elemento_tipo||t===e.elem_key)for(let a=0;a<e.destinos.length;a++){const t=e.destinos[a];(t.id&&i===t.id.toString()&&s===t.elemento_tipo||i===t.elem_key)&&(this.props.processo.elementos[n].destinos[a].removido=!0)}}this.incluirDestino(a)}edgeOnRemoving(e){this.diagramRef.current.instance.getEdgeDataSource().store().byKey(e).then((e=>{const a=e.from?e.from.replaceAll("atividade_","").replaceAll("gateway_",""):null,t="atividade"===e.from.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===e.from.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null,o=e.to?e.to.replaceAll("atividade_","").replaceAll("gateway_",""):null;let i=null;if(o&&(i="atividade"===e.to.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===e.to.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null),a&&o)for(let s=0;s<this.props.processo.elementos.length;s++){const e=this.props.processo.elementos[s];if(e.id&&a===e.id.toString()&&t===e.elemento_tipo||a===e.elem_key)for(let a=0;a<e.destinos.length;a++){const t=e.destinos[a];(t.id&&o===t.id.toString()&&i===t.elemento_tipo||o===t.elem_key)&&(this.props.processo.elementos[s].destinos[a].removido=!0)}}}))}edgeOnRemoved(e){this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export())}itemDblClick(e){if("shape"===e.item.itemType&&"text"!==e.item.type){const a=-1===e.item.dataItem.id.indexOf("_")?e.item.dataItem.id:e.item.dataItem.id.split("_")[1];if(u!==a){u=a;let t=this.props.div.find(".dx-drawer-panel-content .dx-datagrid").first().addClass("hidden").parent(),o=document.createElement("div");o.className="divTmp",o.style="padding: 0px;",t.find(".divTmp").remove(),t[0].appendChild(o);const i=window.int_processo_elemento_tipo(e.item.type);let n=null;for(let e=0;e<this.props.processo.elementos.length;e++){let t=this.props.processo.elementos[e];if(!t.removido&&(a===t.id.toString()||a===t.elem_key)&&i===t.elemento_tipo){n=t;break}}const r=()=>{u=null,t.find(".dx-datagrid").first().removeClass("hidden"),this.props.div.find(".dx-drawer-panel-content").css("z-index",0)},d=(a,t)=>{e.component.getNodeDataSource().store().push([{type:"update",key:e.item.key,data:{text:a.descricao}}]),this.props.fnSalvarElemento(a,t)};i===window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?s.a.load("processo/atividade",((e,a)=>{t.find(".modal-content").parent().removeClass().parent().removeClass(),a.onsave=d,a.onclose=r,a.show(n,window.FORMULARIO.EDITAR,this.props.processo,this.props.formulario,null,null,null,!0),this.diagramRef.current.instance.option("fullScreen")?this.props.div.find(".dx-drawer-panel-content").css("z-index",1504):this.props.div.find(".dx-drawer-panel-content").css("z-index",0)}),void 0,void 0,void 0,void 0,t.find(".divTmp")):i===window.PROCESSO_ELEMENTO_TIPO.GATEWAY&&s.a.load("processo/gateway",((e,a)=>{t.find(".modal-content").parent().removeClass().parent().removeClass(),a.onsave=d,a.onclose=r,a.show(n,window.FORMULARIO.EDITAR,this.props.processo,null,null,this.props.formulario,null,!0),this.diagramRef.current.instance.option("fullScreen")?this.props.div.find(".dx-drawer-panel-content").css("z-index",1504):this.props.div.find(".dx-drawer-panel-content").css("z-index",0)}),void 0,void 0,void 0,void 0,t.find(".divTmp"))}}}contentReady(e){setTimeout((()=>{if(this.diagramRef.current)if("undefined"!==typeof this.props.diagramDataSource&&""!=this.props.diagramDataSource)this.diagramRef.current.instance.import(this.props.diagramDataSource);else{const a=()=>{const e=this.props.processo.diagrama.shapes.map((e=>e.key)),a=this.props.processo.diagrama.connectors.map((e=>e.key));return Math.max(...e,...a)+1};if(this.props.processo&&this.props.processo.diagrama){let t=0;for(let e=0;e<this.props.processo.diagrama.shapes.length;e++){const a=this.props.processo.diagrama.shapes[e];if("text"!==a.type&&"verticalContainer"!==a.type&&"horizontalContainer"!==a.type){let o=!1;const i=window.int_processo_elemento_tipo(a.type),s=-1===a.dataKey.indexOf("_")?a.dataKey:a.dataKey.split("_")[1];for(let t=0;t<this.props.processo.elementos.length;t++){const n=this.props.processo.elementos[t];n.elemento_tipo===i&&(parseInt(n.id)&&n.id.toString()===s||n.elem_key===s)&&(this.props.processo.diagrama.shapes[e].text=n.descricao,o=!0,this.props.processo.diagrama.shapes[e].type=window.str_processo_elemento_tipo(n.elemento_tipo,n.tipo),this.props.processo.elementos[t].encontrado=!0,this.props.processo.elementos[t].key=a.key);for(let e=0;e<n.destinos.length;e++){const o=n.destinos[e];o.elemento_tipo===i&&(parseInt(o.id)&&o.id.toString()===s||o.elem_key===s)&&(this.props.processo.elementos[t].destinos[e].key=a.key)}}o||(this.props.processo.diagrama.shapes.splice(e-t,1),t++)}}for(let e=0;e<this.props.processo.elementos.length;e++){const t=this.props.processo.elementos[e];t.encontrado||t.removido||this.props.processo.diagrama.shapes.push({key:a().toString(),dataKey:t.elem_key,text:t.descricao,type:window.str_processo_elemento_tipo(t.elemento_tipo,t.tipo),locked:!1,zIndex:0,x:0,y:0})}let o=0;for(let e=0;e<this.props.processo.diagrama.connectors.length;e++){let a=!1;const t=this.props.processo.diagrama.connectors[e],i=t.dataKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[0],s=t.dataKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[1];if(i&&s){e:for(let e=0;e<this.props.processo.elementos.length;e++){const t=this.props.processo.elementos[e];if(parseInt(t.id)&&i===t.id.toString()||i===t.elem_key)for(let o=0;o<t.destinos.length;o++){const i=t.destinos[o];if(!i.removido&&(parseInt(i.id)&&s===i.id.toString()||s===i.elem_key)){a=!0,this.props.processo.elementos[e].destinos[o].encontrado=!0;break e}}}a||(this.props.processo.diagrama.connectors.splice(e-o,1),o++)}}for(let e=0;e<this.props.processo.elementos.length;e++){const t=this.props.processo.elementos[e];for(let e=0;e<t.destinos.length;e++){const o=t.destinos[e];if(!o.encontrado&&!o.removido){this.props.processo.diagrama.connectors.length,this.props.processo.diagrama.connectors.length;this.props.processo.diagrama.connectors.push({key:a().toString(),dataKey:(parseInt(t.id)?(t.elemento_tipo==window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?"atividade_":"gateway_")+t.id:t.elem_key)+"__"+(parseInt(o.id)?(o.elemento_tipo==window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?"atividade_":"gateway_")+o.id:o.elem_key),locked:!1,zIndex:0,points:[{x:0,y:0},{x:0,y:0}],beginItemKey:t.key,endItemKey:o.key})}}}e.component.import(JSON.stringify(this.props.processo.diagrama))}}}))}}a.default=f},1064:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=t(281),s=t(755),n=t(244);function r(e){return Object(n.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.a)()})))}r.defaultProps={displayExpr:"descricao",valueExpr:"cargo_id",columns:[{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}]}},1065:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(247),i=t.n(o),s=t(253),n=t(244);class r extends i.a.Component{constructor(e){super(e);const a=window.cripto(s.a.token);this.arquivoUrlSufixo=this.props.permissao_download?"&acao=abrir":"&acao=abrir#toolbar=0",this.arquivo=window.WS_URI+"documento/download/?documento_revisao_id="+this.props.documento_revisao_id+"&documento_id="+this.props.documento_id+"&token_publico="+a+"&tipo=S&login_anonimo="+(!0===s.a.login_anonimo?"true":"false")}render(){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)("div",{children:Object(n.jsx)("iframe",{src:this.arquivo+this.arquivoUrlSufixo,style:{height:"calc(100vh - 47px)",width:"calc(100vw - 50px)"}})})})}}r.defaultProps={abaTitulo:"Visualizador de PDF",documento_revisao_id:0,documento_id:0,permissao_download:!0}},1066:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(247),i=t.n(o),s=t(253),n=t(244);class r extends i.a.Component{constructor(e){super(e),this.handleRotateLeft=()=>{this.updateRotation("90")},this.handleRotateRight=()=>{this.updateRotation("-90")},this.updateRotation=e=>{s.a.post("documento/girar_imagem/",{documento_revisao_id:this.props.documento_revisao_id,angulo:e},(e=>{const a=this.arquivo+"&t="+(new Date).getTime();this.refImg.current.src=a}))},this.refImg=i.a.createRef(null);const a=window.cripto(s.a.token);this.arquivo=window.WS_URI+"documento/download/?documento_revisao_id="+this.props.documento_revisao_id+"&documento_id="+this.props.documento_id+"&token_publico="+a+"&tipo=S&login_anonimo="+(!0===s.a.login_anonimo?"true":"false"),this.containerStyles={display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",border:"2px solid #ccc",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",padding:"10px 50px"},this.imageStyles={maxWidth:"100%",width:"auto",height:"auto",marginTop:10,pointerEvents:"none"}}render(){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("div",{style:this.containerStyles,children:[Object(n.jsxs)("h4",{children:[Object(n.jsx)("i",{className:"fas fa-image"}),"\xa0",this.props.documento_nome]}),Object(n.jsxs)("span",{style:{fontSize:"1.1em",display:"block",marginBottom:10},children:[Object(n.jsx)("i",{className:"fas fa-info-circle"}),"\xa0Use a tecla ",Object(n.jsx)("strong",{children:"Shift"})," e o ",Object(n.jsx)("strong",{children:"scroll do mouse"})," para dar zoom na imagem."]}),Object(n.jsxs)("div",{className:"modal-body div_viewer",style:{textAlign:"center"},children:[Object(n.jsx)("button",{className:"btn btn-default",onClick:this.handleRotateLeft,children:Object(n.jsx)("i",{className:"fa fa-undo"})}),Object(n.jsx)("button",{className:"btn btn-default",onClick:this.handleRotateRight,children:Object(n.jsx)("i",{className:"fa fa-redo"})})]}),Object(n.jsx)("img",{ref:this.refImg,src:this.arquivo,alt:"Pr\xe9 visualiza\xe7\xe3o de imagem",style:this.imageStyles})]})})}componentDidMount(){const e=this.refImg.current;window.wheelzoom(e),document.addEventListener("keydown",(a=>{"Shift"===a.key&&(e.style.pointerEvents="auto")})),document.addEventListener("keyup",(a=>{"Shift"===a.key&&(e.style.pointerEvents="none")}))}}r.defaultProps={abaTitulo:"Visualizador de Imagem",documento_revisao_id:0,documento_id:0,documento_nome:"Imagem",permissao_download:!0}},1067:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(247),i=t.n(o),s=t(253),n=t(244);class r extends i.a.Component{constructor(e){super(e);const a=window.cripto(s.a.token);this.arquivo=window.WS_URI+"documento/download/?documento_revisao_id="+this.props.documento_revisao_id+"&documento_id="+this.props.documento_id+"&token_publico="+a+"&tipo=S&login_anonimo="+(!0===s.a.login_anonimo?"true":"false"),this.containerStyles={display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",border:"2px solid #ccc",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",padding:"10px"},this.videoStyles={maxWidth:"100%",width:"auto",height:"auto",marginTop:10}}render(){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)("div",{style:this.containerStyles,children:[Object(n.jsxs)("h4",{style:{marginBottom:20},children:[Object(n.jsx)("i",{className:"fas fa-video"}),"\xa0",this.props.documento_nome]}),Object(n.jsx)("video",{src:this.arquivo,controls:!0,autoPlay:!0})]})})}}r.defaultProps={abaTitulo:"Visualizador de Video",documento_revisao_id:0,documento_id:0,documento_nome:"V\xeddeo",permissao_download:!0}},1068:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return c}));var o=t(248),i=t(247),s=t.n(i),n=t(413),r=t.n(n),d=t(565),l=t(244);function c(e){let{pai_tabela:a,pai_id:t,selecionados:i=[],onValueChanged:n=null,readOnly:c=!1,stylingMode:u="underlined",width:p="auto",maxDisplayedTags:m,applyValueMode:h="instantly"}=e;const _=Object(d.c)({pai_tabela:a,pai_id:t,dx_grid:!1}),f=i;return Object(l.jsx)(r.a,{readOnly:c,showMultiTagOnly:!1,dataSource:_,defaultValue:f,displayExpr:"nome",valueExpr:"id",itemRender:e=>{let{id:a,nome:t,cor_fundo:o,cor_fonte:i}=e;return Object(l.jsx)("div",{title:t,style:{display:"flex",padding:"6px",borderRadius:"14px",backgroundColor:o||"white",color:i||"black",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:Object(l.jsx)("span",{className:"",children:t})})},showSelectionControls:!0,multiline:!0,onValueChanged:e=>{"function"===typeof n&&n(e.value)},placeholder:"Etiquetas",searchEnabled:!0,stylingMode:u,width:p,maxDisplayedTags:m,applyValueMode:h,tagRender:e=>(e=>{let{etiqueta:a,onMouseEnter:t}=e;if(!a)return null;const i="string"===typeof a&&void 0!==m?a:a.nome,n=void 0!==m?{textOverflow:"ellipsis",overflow:"hidden",width:"120px",whiteSpace:"nowrap"}:{};return Object(l.jsx)(s.a.Fragment,{children:Object(l.jsxs)("div",{className:"dx-tag-content",onMouseEnter:e=>t(e,a),style:Object(o.a)({backgroundColor:a.cor_fundo||"white",color:a.cor_fonte||"black"},n),children:[Object(l.jsx)("span",{children:i}),Object(l.jsx)("div",{className:"dx-tag-remove-button"})]})})})({etiqueta:e,onMouseEnter:(e,a)=>{}})})}},1069:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(247),i=t.n(o),s=t(267),n=t(254),r=t(244);class d extends i.a.Component{constructor(e){super(e),this.dataGridRef=i.a.createRef()}componentDidMount(){"function"===typeof this.props.fnGetInstanceDatagrid&&this.props.fnGetInstanceDatagrid(this.dataGridRef.current.instance)}render(){return Object(r.jsx)("div",{children:Object(r.jsx)(s.default,{pager:{showPageSizeSelector:!1},elementAttr:{style:"height: 200px;"},ref:this.dataGridRef,dataSource:this.props.dataSource,groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},filterRow:{visible:!1},headerFilter:{visible:!1},editing:{mode:"cell",allowUpdating:!0,allowAdding:!0,allowDeleting:!0,useIcons:!0},children:Object(r.jsx)(n.Column,{dataField:"nome",caption:"Extens\xe3o Aceita"})})})}}},1070:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(248),i=t(281),s=t(748),n=t(280),r=t(244);function d(e){return Object(r.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.a)()})))}const l=[Object(r.jsx)(n.a,{width:"100%"},"nome")];d.defaultProps={aoAlterar:null,displayExpr:e=>e&&e.nome,children:l,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1}},1071:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var o=t(248),i=t(375),s=t.n(i),n=t(262),r=t(244);function d(e){var a,t;let i=[];const d=[window.ELEMENTO_TIPO.TEXTO,window.ELEMENTO_TIPO.INTEIRO,window.ELEMENTO_TIPO.INTEGRACAO],l=null!==(a=null===(t=e.formulario)||void 0===t?void 0:t.grupos)&&void 0!==a?a:[];for(let o=0;o<l.length;o++){const e=l[o];for(let a=0;a<e.elementos.length;a++){let t=window.clone_obj(e.elementos[a]);d.includes(+t.tipo)&&(t.grupo_nome=e.nome,i.push(t))}}const c=new n.default({store:{type:"array",data:i,key:"id_elemento"},group:"grupo_nome"});return Object(r.jsx)(s.a,Object(o.a)(Object(o.a)({},e),{},{dataSource:c,grouped:!0,valueExpr:"id_elemento",displayExpr:"nome",searchEnabled:!0}))}},1072:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=t(247),s=t(484),n=t(244);function r(e){var a;const[t,r]=Object(i.useState)(null!==(a=null===e||void 0===e?void 0:e.valor)&&void 0!==a?a:"0:00"),d=a=>{const t=(e=>{const a=e.replace(/[^0-9]/g,"");let t=parseInt(a.slice(0,-2),10)||0,o=parseInt(a.slice(-2),10)||0;return o>59&&(t+=Math.floor(o/60),o%=60),"".concat(t,":").concat(o.toString().padStart(2,"0"))})(a.component.option("value"));r(t),e.aoAlterar&&e.aoAlterar(t)};return Object(n.jsx)(s.TextBox,Object(o.a)(Object(o.a)({},e),{},{onValueChanged:a=>{const t=(e=>{const a=e.replace(/[^0-9]/g,"");if(0===a.length)return"0:00";if(1===a.length)return"0:0".concat(a);if(2===a.length)return"0:".concat(a);const t=a.slice(0,-2),o=a.slice(-2);return"".concat(parseInt(t,10),":").concat(o)})(a.value);r(t),e.aoAlterar&&e.aoAlterar(t)},valueChangeEvent:"keyup change",value:t,onFocusIn:d,onFocusOut:a=>{d(a),e.fnOnFocusOut&&e.fnOnFocusOut()},readOnly:e.readOnly}))}r.defaultProps={placeholder:"0:00",aoAlterar:null,readOnly:!1}},1073:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var o=t(248),i=t(247),s=t.n(i),n=t(253),r=t(267),d=t(254),l=t(262),c=t(549),u=t(442),p=t(280),m=t(244);class h extends s.a.Component{constructor(e){super(e),this.dataGridRef=s.a.createRef(),this.state={opened:!0,openedStateMode:"shrink",revealMode:"slide"}}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}render(){var e=this;const{opened:a,openedStateMode:t,position:i,revealMode:h}=this.state,_="Exportacao_"+window.agora(),f=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new l.default({pageSize:20,key:"log_id",load:t=>{let i=window.loadOptionsToActionParams(t);return new Promise(((t,s)=>{n.a.get({route:"processo/listar_log_processo/",data:Object(o.a)({processo_id:a,take:e.state.pageSize,skip:e.state.pageIndex,dx_grid:!0,requireTotalCount:!0},i),func_response:e=>{let a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:e=>{e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};return Object(m.jsx)(s.a.Fragment,{children:Object(m.jsx)("div",{style:{display:"flex",maxWidth:"70vw",minWidth:"60vw",overflowX:"auto"},children:Object(m.jsxs)(r.default,{height:"calc(100vh - 150px)",columnResizingMode:"widget",Width:"100%",style:{minWidth:"70vw"},ref:this.dataGridRef,keyExpr:"log_id",dataSource:f(this.props.processoId),columnChooser:{enabled:!1},searchPanel:{visible:!0},requireTotalCount:!0,export:{enabled:!0,fileName:_},filterPanel:{visible:!0},onToolbarPreparing:e=>{e.toolbarOptions.items.push({widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",onClick:()=>{this.setState({dataSource:f(this.props.processoId)})}},location:"auto"})},children:[Object(m.jsx)(d.Paging,{paging:{pageSize:this.state.pageSize}}),Object(m.jsx)(d.Pager,{showPageSizeSelector:!0,showInfo:!0}),Object(m.jsx)(u.a,{minWidth:100}),Object(m.jsx)(c.a,{minWidth:70}),Object(m.jsx)(p.a,{dataField:"nome_usuario",caption:"Nome do Usu\xe1rio",minWidth:150}),Object(m.jsx)(p.a,{dataField:"acao",caption:"A\xe7\xe3o",minWidth:100}),Object(m.jsx)(p.a,{dataField:"operacao",caption:"Opera\xe7\xe3o",minWidth:100}),Object(m.jsx)(p.a,{dataField:"detalhes",caption:"Detalhes",width:800,minWidth:200})]})})})}}},1074:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return n}));var o=t(248),i=t(495),s=t(488);class n extends i.a{constructor(e){super(e),this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState())}propsToObjState(){var e,a,t,o;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,dataSource:Object(s.a)(),instanceSelecaoPadraoTagBox:null!==(a=this.props.instanceSelecaoGrupoMotivoChamado)&&void 0!==a?a:null,aoAlterar:null!==(t=this.props.aoAlterar)&&void 0!==t?t:null,elementAttr:null!==(o=this.props.elementAttr)&&void 0!==o?o:null}}componentDidUpdate(e,a){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}n.defaultProps={placeholder:"Filtro por grupo de motivo do chamado",displayExpr:"nome",valueExpr:"grupo_id",searchEnabled:!0}},1077:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);var l=t(280),c=t(494),u=t(254);class p extends u.Column{}p.defaultProps={dataField:"nivel",caption:"N\xedvel"};class m extends u.Column{}m.defaultProps={dataField:"bloqueado",caption:"Bloqueado"};class h extends u.Column{}h.defaultProps={caption:"Previs\xe3o de Retorno",dataField:"previsao_retorno",calculateCellValue:e=>{const a=e.tipo_gestao_tempo;return+a===window.CHAMADO_MOTIVO_TEMPO.DIAS_CORRIDOS?e.dias:+a===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS?e.horas_uteis:void 0}};class _ extends u.Column{}_.defaultProps={dataField:"tipo_previsao_retorno",caption:"Tipo Previs\xe3o Retorno",calculateCellValue:e=>window.tipo_gestao_tempo(e.tipo_gestao_tempo)};class f extends u.Column{}f.defaultProps={dataField:"encerramento_inatividade",caption:"Tempo Encerramento Inatividade",calculateCellValue:e=>{const a=e.tipo_gestao_tempo_encerramento;return+a===window.CHAMADO_MOTIVO_TEMPO.DIAS_CORRIDOS?e.dias_encerramento:+a===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS?e.horas_uteis_encerramento:void 0}};class b extends u.Column{}b.defaultProps={dataField:"tipo_encerramento_inatividade",caption:"Tipo Encerramento Inatividade",calculateCellValue:e=>window.tipo_gestao_tempo(e.tipo_gestao_tempo_encerramento)};class v extends u.Column{}v.defaultProps={dataField:"tempo_resolucao_atendimento",caption:"Tempo Resolu\xe7\xe3o Atendimento",calculateCellValue:e=>e.horas_uteis_resolucao_atendimento};var g=t(244);const w=[Object(g.jsx)(l.a,{width:""},"Nome"),Object(g.jsx)(c.a,{width:180,disabled:!0,dropDownButtonTemplate:""},"Cor"),Object(g.jsx)(p,{},"Nivel"),Object(g.jsx)(m,{},"Bloqueado"),Object(g.jsx)(h,{dataField:"",visible:!1},"PrevisaoRetorno"),Object(g.jsx)(_,{dataField:"",visible:!1},"TipoPrevisaoRetorno"),Object(g.jsx)(b,{dataField:"",visible:!1},"TipoEncerramentoInatividade"),Object(g.jsx)(f,{dataField:"",visible:!1},"EncerramentoInatividade"),Object(g.jsx)(v,{dataField:"",visible:!1},"TempoResolucaoAtendimento")];var j=t(296),O=t(416),x=t(315);class A extends i.a.Component{constructor(e){super(e),this.state={},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Motivo de Chamado",text:"Adicionar",onClick:function(){window.View.load("motivos_chamados/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)}},location:"after",name:"BtnNovoMotivoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){window.View.load("motivos_chamados/configuracao",(function(e,a){a.onclose=function(){},a.show()}))},visible:window.App.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[...w,Object(g.jsxs)(u.Column,{type:"buttons",children:[Object(g.jsx)(x.a,{onClick:e=>{window.View.load("motivos_chamados/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.chamado_motivo_id,window.FORMULARIO.EDITAR)}))}},"btnEditar"),Object(g.jsx)(O.a,{onClick:e=>{window.View.load("motivos_chamados/detalhes",(function(a,t){t.show(e.row.data.chamado_motivo_id,window.FORMULARIO.VISUALIZAR)}))}},"BtnVisualizar"),Object(g.jsx)(j.a,{onClick:e=>{window.View.load("motivos_chamados/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.chamado_motivo_id,window.FORMULARIO.EXCLUIR)}))}},"BtnApagar")]},"btns")];return Object(g.jsx)(i.a.Fragment,{children:Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"col-md-12",children:Object(g.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(a={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"chamado_motivo_id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise((function(e,o){r.a.get({route:"chamado_motivo/listar/",data:Object(n.a)(Object(n.a)({},t),a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"chamado_motivo/listar/",data:{dx_grid:!0,chamado_motivo_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),stateStoring:Object(s.stateStoring)("listarMotivoChamado"),children:e})})})});var a}}A.defaultProps={abaTitulo:"Motivos"};a.default=A},1078:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return w}));var o=t(247),i=t(267),s=t(248),n=t(253),r=t(262);const d=e=>new r.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"rd_station_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){n.a.get({route:"rd_station_mkt/listar/",data:Object(s.a)(Object(s.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(s.a)(Object(s.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){n.a.get({route:"rd_station_mkt/listar/",data:{dx_grid:!0,rd_station_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),l=e=>{let{alteracoes:a,func_response:t,func_fail:o}=e;if(!a)return!1;n.a.post({route:"rd_station_mkt/salvar/",data:{alteracoes:a},func_response:t,func_fail:o})};var c=t(281);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new r.default({pageSize:20,key:"funil_vendas_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,o)=>{n.a.get({route:"funil_vendas/listar/",data:Object(s.a)({dx_grid:!0,funil_vendas_id:e},t),func_response:e=>{let t=window.createLoadExtra(e);a(Object(s.a)(Object(s.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){n.a.get({route:"funil_vendas/listar/",data:{dx_grid:!0,funil_vendas_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var p=t(244);function m(e){return Object(p.jsx)(c.default,Object(s.a)({},Object(s.a)(Object(s.a)({},e),{},{dataSource:u()})))}m.defaultProps={displayExpr:"nome",valueExpr:"funil_vendas_id",placeholder:"Pesquisar Funil de Vendas",aoAlterar:null,columns:[{dataField:"nome",caption:"Nome",dataType:"string"},{dataField:"padrao",caption:"Padr\xe3o",dataType:"string"}]};const h=e=>new r.default({pageSize:20,key:"funil_vendas_etapa_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,o)=>{n.a.get({route:"funil_vendas/listar_etapas/",data:Object(s.a)({dx_grid:!0,funil_vendas_id:e},t),func_response:e=>{let t=window.createLoadExtra(e);a(Object(s.a)(Object(s.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){n.a.get({route:"funil_vendas/listar_etapas/",data:{dx_grid:!0,funil_vendas_etapa_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});function _(e){const{funilVendasId:a=0}=e;return Object(p.jsx)(c.default,Object(s.a)({},Object(s.a)(Object(s.a)({},e),{},{dataSource:h(a)})))}_.defaultProps={displayExpr:"nome",valueExpr:"funil_vendas_etapa_id",placeholder:"Pesquisar Etapas do Funil de Vendas",columns:[{dataField:"nome",caption:"Nome",dataType:"string"},{dataField:"ordem",caption:"Ordem",dataType:"string"},{dataField:"probabilidade",caption:"Probabilidade",dataType:"string"},{dataField:"estagnado",caption:"Estagnado",dataType:"string"},{dataField:"dias_estagnado",caption:"Dias Estagnado",dataType:"string"}]};const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new r.default({pageSize:20,key:"representante_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,o)=>{n.a.get({route:"representante/listar/",data:Object(s.a)({dx_grid:!0,representante_id:e},t),func_response:e=>{let t=window.createLoadExtra(e);a(Object(s.a)(Object(s.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){n.a.get({route:"representante/listar/",data:{dx_grid:!0,representante_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};function b(e){return Object(p.jsx)(c.default,Object(s.a)({},Object(s.a)(Object(s.a)({},e),{},{dataSource:f()})))}b.defaultProps={displayExpr:"nome_fantasia",valueExpr:"representante_id",placeholder:"Pesquisar Representante",aoAlterar:null,columns:[{dataField:"nome_fantasia",caption:"Nome",dataType:"string"}]};var v=t(254),g=(t(330),t(414));function w(e){const{html_id:a}=e,t=Object(o.useRef)(null),s={display:"flex"},n={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return Object(p.jsx)("div",{style:{width:"100%"},children:Object(p.jsxs)(i.default,{ref:t,style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(i.stateStoring)("listagemRdStation"),dataSource:d(),editing:{mode:"batch",allowUpdating:!0,allowAdding:!0,allowDeleting:!0},onSaving:e=>{e.cancel=!0,e.changes.length&&(e.promise=new Promise(((a,t)=>{l({alteracoes:e.changes,func_response:t=>{a(t),e.component.refresh(!0).done((()=>{e.component.cancelEditData()}))},func_fail:e=>t(e)})})))},children:[Object(p.jsx)(v.Column,{dataField:"funil_vendas_id",caption:"Funil de Vendas",calculateDisplayValue:e=>e.funil_vendas_nome,setCellValue:async(e,a)=>{e.funil_vendas_id=a,e.funil_vendas_etapa_id=null,e.funil_vendas_etapa_nome=""},editCellComponent:e=>{var a,t;const o=null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.funil_vendas_id;return Object(p.jsx)(m,{selecionado:String(o),aoAlterar:(a,t)=>{e.data.setValue(String(a),t.nome)}})}}),Object(p.jsx)(v.Column,{dataField:"funil_vendas_etapa_id",caption:"Etapas do Funil",calculateDisplayValue:e=>e.funil_vendas_etapa_nome,setCellValue:async(e,a)=>{e.funil_vendas_etapa_id=a},editCellComponent:e=>{var a,t,o,i;const s=null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.funil_vendas_id,n=null===(o=e.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.funil_vendas_etapa_id;return Object(p.jsx)(_,{selecionado:String(n),funilVendasId:s,funilVendasEtapaId:n,aoAlterar:(a,t)=>{e.data.setValue(String(a),t.nome)}})}}),Object(p.jsx)(v.Column,{dataField:"representante_id",caption:"Representante Padr\xe3o",calculateDisplayValue:e=>e.representante_nome,setCellValue:async(e,a)=>{e.representante_id=a},editCellComponent:e=>{var a,t;const o=null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.representante_id;return Object(p.jsx)(b,{selecionado:String(o),aoAlterar:(a,t)=>{e.data.setValue(String(a),t.nome_fantasia)}})}}),Object(p.jsx)(v.Column,{dataField:"webhook_url",caption:"Webhook URL",allowEditing:!1,cellRender:e=>{var a,t,o,i;return Object(p.jsxs)("div",{style:s,children:[Object(p.jsx)("div",{style:n,children:null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.webhook_url}),Object(p.jsx)(g.default,{style:{padding:"0px"},url:null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.webhook_url,children:Object(p.jsx)("span",{className:"far fa-copy"})})]})}})]})})}w.defaultProps={abaTitulo:"RD Station"}},1079:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(262),d=t(253);var l=t(254);class c extends l.Column{}c.defaultProps={dataField:"inicio",caption:"In\xedcio",dataType:"number",alignment:"left"};class u extends l.Column{}u.defaultProps={dataField:"fim",caption:"Fim",dataType:"number",alignment:"left"};var p=t(494),m=t(244);const h=[Object(m.jsx)(c,{caption:"% In\xedcio"}),Object(m.jsx)(u,{caption:"% Fim"}),Object(m.jsx)(p.a,{caption:"Cor de Fundo"}),Object(m.jsx)(p.a,{caption:"Cor da Fonte",dataField:"cor_fonte"})];var _=t(296),f=t(313);class b extends i.a.Component{constructor(e){super(e),this.state={dataSource:new r.default({key:"cores_percentual_conclusao_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{d.a.get({route:"cores_percentual_conclusao/listar/",data:Object(n.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...h,Object(m.jsxs)(l.Column,{type:"buttons",children:[Object(m.jsx)(_.a,{visible:e=>!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(m.jsx)(f.a,{visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(m.jsx)("div",{children:Object(m.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,selection:{mode:"multiple"},stateStoring:Object(s.stateStoring)("ListagemChamadoCorPercentualConclusao"),onToolbarPreparing:this.onToolbarPreparing,editing:{mode:"batch",allowUpdating:!0,useIcons:!0},children:e})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cores por Conclus\xe3o",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{let t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());d.a.post("/cores_percentual_conclusao/salvar_edicao_batch/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))}),"revertButton"===a.name&&(a.options.onClick=a=>{e.component.cancelEditData()})}}}b.defaultProps={abaTitulo:"Cores por % de conclus\xe3o"}},1080:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return w}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(262),d=t(253);var l=t(314),c=t(280),u=t(254);class p extends u.Column{}p.defaultProps={dataField:"tipo",caption:"Tipo"};class m extends u.Column{}m.defaultProps={dataField:"path",caption:"Caminho"};var h=t(736),_=t(350),f=t(244);const b=[Object(f.jsx)(c.a,{}),Object(f.jsx)(p,{}),Object(f.jsx)(m,{}),Object(f.jsx)(h.a,{dataField:"data_exclusao",caption:"Data Exclus\xe3o"}),Object(f.jsx)(_.a,{dataField:"usuario_exclusao",caption:"Exclu\xeddo por"})];var v=t(296),g=t(313);class w extends i.a.Component{constructor(e){super(e),this.state={dataSource:new r.default({pageSize:20,key:"chave",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{d.a.get({route:"/documento/listar_documentos_pastas_excluidos/",data:Object(n.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...b,Object(f.jsxs)(u.Column,{type:"buttons",children:[Object(f.jsx)(v.a,{onClick:e=>{Object(l.confirm)("Deseja excluir <strong>"+e.row.data.nome+"</strong> permanentemente?","Aten\xe7\xe3o").then((a=>{a&&("documento"===e.row.data.tipo.toLowerCase()?d.a.post("/documento/excluir/",{documento_id:e.row.data.registro_id,excluir:!0},(function(a){window.alert_saved("Documento exclu\xeddo com sucesso"),e.component.refresh()})):"pasta"===e.row.data.tipo.toLowerCase()&&d.a.post("/documento_pasta/excluir/",{documento_pasta_id:e.row.data.registro_id,permanente:!0},(function(a){window.alert_saved("Pasta exclu\xedda com sucesso"),e.component.refresh()})))}))}}),Object(f.jsx)(g.a,{onClick:e=>{Object(l.confirm)("Deseja restaurar <strong>"+e.row.data.nome+"</strong>?","Aten\xe7\xe3o").then((a=>{a&&("documento"===e.row.data.tipo.toLowerCase()?d.a.post("/documento/restaurar_documento/",{documento_id:e.row.data.registro_id},(function(a){window.alert_saved("Documento restaurado com sucesso"),e.component.refresh()})):"pasta"===e.row.data.tipo.toLowerCase()&&d.a.post("/documento_pasta/excluir/",{documento_pasta_id:e.row.data.registro_id,excluir:!1},(function(a){window.alert_saved("Pasta restaurada com sucesso"),e.component.refresh()})))}))}})]})];return Object(f.jsx)("div",{children:Object(f.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,selection:{mode:"multiple"},stateStoring:Object(s.stateStoring)("ListagemLixeiraDocumentos"),onToolbarPreparing:this.onToolbarPreparing,pager:{visible:!0,showInfo:!0},children:e})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"clearformat",hint:"Esvaziar lixeira",text:"Esvaziar lixeira",onClick:a=>{e.component.getDataSource().store().load().done((function(a){const t=a.data,o=t.filter((e=>"documento"===e.tipo.toLowerCase())).map((e=>e.registro_id)),i=t.filter((e=>"pasta"===e.tipo.toLowerCase())).map((e=>e.registro_id));if(o.length>0||i.length>0){Object(l.confirm)("Deseja esvaziar a lixeira e excluir <strong>"+(o.length+i.length)+" registro(s)</strong> permanentemente?","Aten\xe7\xe3o").then((a=>{a&&(window.alert_info("Por favor, aguarde"),d.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(i),documentos:JSON.stringify(o),excluir:!0,exclusao_permanente:!0},(function(a){window.alert_saved("Lixeira esvaziada com sucesso"),e.component.refresh()})))}))}}))}},showText:"always",location:"after",name:"BtnEsvaziarLixeira",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"trash",hint:"Excluir selecionados",text:"Excluir selecionados",onClick:a=>{const t=e.component.getSelectedRowsData(),o=t.filter((e=>"documento"===e.tipo.toLowerCase())).map((e=>e.registro_id)),i=t.filter((e=>"pasta"===e.tipo.toLowerCase())).map((e=>e.registro_id));if(o.length>0||i.length>0){Object(l.confirm)("Deseja excluir <strong>"+(o.length+i.length)+" registro(s)</strong> permanentemente?","Aten\xe7\xe3o").then((a=>{a&&d.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(i),documentos:JSON.stringify(o),excluir:!0,exclusao_permanente:!0},(function(a){window.alert_saved("Registros exclu\xeddos com sucesso"),e.component.refresh()}))}))}}},showText:"always",location:"after",name:"BtnExcluirSelecionados",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"revert",hint:"Restaurar selecionados",text:"Restaurar selecionados",onClick:a=>{const t=e.component.getSelectedRowsData(),o=t.filter((e=>"documento"===e.tipo.toLowerCase())).map((e=>e.registro_id)),i=t.filter((e=>"pasta"===e.tipo.toLowerCase())).map((e=>e.registro_id));if(o.length>0||i.length>0){Object(l.confirm)("Deseja restaurar <strong>"+(o.length+i.length)+" registro(s)</strong>?","Aten\xe7\xe3o").then((a=>{a&&d.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(i),documentos:JSON.stringify(o),restaurar:!0},(function(a){window.alert_saved("Registros restaurados com sucesso"),e.component.refresh()}))}))}}},showText:"always",location:"after",name:"BtnRestaurarSelecionados",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}w.defaultProps={abaTitulo:"Lixeira de Documentos"}},1081:function(e,a,t){"use strict";t.r(a);var o=t(248),i=t(247),s=t.n(i),n=t(714),r=t.n(n),d=t(731),l=t(87),c=t(271),u=t(253),p=t(745),m=t(495),h=t(262);let _=()=>new h.default({paginate:!1,key:"id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(t,i){u.a.get({route:"grupo_ativos/listar/",data:Object(o.a)({nome:e.searchValue,dx_list:!0},a),func_response:function(e){t({data:e,key:"id"})},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});class f extends m.a{constructor(e){super(e),this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState())}propsToObjState(){var e,a,t,o;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,dataSource:_(),instanceSelecaoPadraoTagBox:null!==(a=this.props.instanceSelecaoGruposAtivos)&&void 0!==a?a:null,aoAlterar:null!==(t=this.props.aoAlterar)&&void 0!==t?t:null,elementAttr:null!==(o=this.props.elementAttr)&&void 0!==o?o:null}}componentDidUpdate(e,a){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}f.defaultProps={placeholder:"Filtro por grupos de ativos",dataSource:_(),displayExpr:"nome",valueExpr:"id"};var b=t(747),v=t(373),g=t.n(v),w=t(43),j=t.n(w);let O=!1;class x extends g.a{constructor(e){super(e),O=this.props.hoursOnly}}x.defaultProps={type:"datetime",displayFormat:"HH:mm",onOpened:e=>{let a=e.component._popup._$content;j()(a.find("div.dx-box-item")[0]).addClass("hidden"),j()(a.find(".dx-button-today")[0]).closest(".dx-toolbar-before").addClass("hidden"),O&&(j()(a.find(".dx-texteditor-input")[1]).val("00").prop("disabled",!0).trigger("change"),j()(a.find(".dx-texteditor-input")[1]).closest(".dx-texteditor-container").find(".dx-texteditor-buttons-container").addClass("hidden"),j()(a.find(".dx-texteditor-input")[1]).css("padding-left","26px"))},onClosed:e=>{let a=e.component._popup._$content;j()(a.find("div.dx-box-item")[0]).removeClass("hidden"),j()(a.find(".dx-button-today")[0]).closest(".dx-toolbar-before").removeClass("hidden"),O&&(j()(a.find(".dx-texteditor-input")[1]).prop("disabled",!1),j()(a.find(".dx-texteditor-input")[1]).closest(".dx-texteditor-container").find(".dx-texteditor-buttons-container").removeClass("hidden"),j()(a.find(".dx-texteditor-input")[1]).css("padding-left",""))}};var A=t(485),C=t(704),S=t.n(C),I=t(314),E=t(375),P=t.n(E),T=t(413),y=t.n(T);let R=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i="supervisor/listar_supervisionados/",s=e=>{let t=window.createLoadExtra(e);a&&a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},n=e=>{t&&e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))};if(!a)return await u.a.get({route:i,data:e,func_response:s,func_fail:n,awaitReturn:!0});u.a.get({route:i,data:e,func_response:s,func_fail:n})};var D=t(552),M=t(244);let k=null,N=null,F=null,L=null;function B(e){const a=e.appointmentData;let t="col-xs-12",o={overflow:"hidden",textOverflow:"ellipsis",position:"relative",top:-3},i={marginBottom:5};return a.data_feriado?Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(M.jsx)("div",{style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:Object(M.jsx)("span",{children:a.nome})}),Object(M.jsxs)("div",{children:[a.hora_inicio.substring(0,5)," - ",a.hora_fim.substring(0,5)]})]}),V(a)]}):"undefined"!==typeof a.oportunidade_agenda_id&&+a.oportunidade_agenda_id>0?Object(M.jsxs)("div",{style:{color:a.agenda_tipo_cor_texto},children:[Object(M.jsxs)("div",{className:"row",style:{marginBottom:5,display:"flex"},children:[Object(M.jsxs)("div",{className:"col-xs-1",children:["S"===a.atividade_realizada&&Object(M.jsx)("span",{className:"label label-success",children:Object(M.jsx)("i",{className:"fa fa-check"})}),"N"===a.atividade_realizada&&Object(M.jsx)("span",{className:"label label-warning",children:Object(M.jsx)("i",{className:"fas fa-thumbtack"})})]}),Object(M.jsx)("div",{className:"col-xs-11",style:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:8},children:a.descricao})]}),Object(M.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(M.jsx)("div",{style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:Object(M.jsx)("small",{children:Object(M.jsx)("span",{className:"label label-default",children:a.tipo_agenda_oportunidade_descricao})})}),Object(M.jsxs)("div",{children:[a.hora_inicio.substring(0,5)," - ",a.duracao.substring(0,5)]})]}),z(a)]}):("S"===a.realizado&&(t="col-xs-11",o={overflow:"hidden",textOverflow:"ellipsis",position:"relative",top:-3,paddingLeft:10},i={marginBottom:5,display:"flex"}),Object(M.jsxs)("div",{style:{color:a.agenda_tipo_cor_texto},children:[Object(M.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(M.jsx)("div",{className:"divDescricaoClass",style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:"S"===a.agenda_tipo_particular&&+a.usuario_id!==+l.a.sessao.dados.usuario_id?"Evento particular":a.descricao}),Object(M.jsxs)("div",{children:[a.hora_inicio.substring(0,5)," - ",a.hora_fim.substring(0,5)]})]}),Object(M.jsxs)("div",{className:"row",style:i,children:[Object(M.jsx)("div",{className:"col-xs-1",style:{top:-3},children:"S"===a.realizado&&Object(M.jsx)("span",{className:"label label-success",children:Object(M.jsx)("i",{className:"fa fa-check"})})}),Object(M.jsx)("div",{className:"col-xs-11",style:o,children:Object(M.jsx)("span",{className:"label label-default",children:a.agenda_tipo_nome})})]}),V(a)]}))}function U(e){const a=e.targetedAppointmentData;if("undefined"!==typeof a.oportunidade_agenda_id&&+a.oportunidade_agenda_id>0)return Object(M.jsx)("div",{children:Object(M.jsxs)("div",{style:{textAlign:"left"},children:[Object(M.jsxs)("div",{className:"row",style:{marginBottom:5},children:[Object(M.jsxs)("div",{className:"col-xs-1",children:["S"===a.atividade_realizada&&Object(M.jsx)("span",{className:"label label-success",children:Object(M.jsx)("i",{className:"fa fa-check"})}),"N"===a.atividade_realizada&&Object(M.jsx)("span",{className:"label label-warning",children:Object(M.jsx)("i",{className:"fas fa-thumbtack"})})]}),Object(M.jsx)("div",{className:"col-xs-11",style:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:8},children:a.descricao})]}),Object(M.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(M.jsx)("div",{style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:Object(M.jsx)("small",{children:Object(M.jsx)("span",{className:"label label-default",children:a.tipo_agenda_oportunidade_descricao})})}),Object(M.jsxs)("div",{children:[a.hora_inicio.substring(0,5)," - ",a.duracao.substring(0,5)]})]}),z(a)]})});{let e="col-xs-12",t={overflow:"hidden",textOverflow:"ellipsis"};return"S"===a.realizado&&(e="col-xs-11",t={overflow:"hidden",textOverflow:"ellipsis",paddingLeft:8}),Object(M.jsx)("div",{children:Object(M.jsxs)("div",{style:{textAlign:"left"},children:[Object(M.jsxs)("div",{className:"row",children:[Object(M.jsx)("div",{className:"col-xs-1",children:"S"===a.realizado&&Object(M.jsx)("span",{className:"label label-success",children:Object(M.jsx)("i",{className:"fa fa-check"})})}),Object(M.jsxs)("div",{className:e,style:t,children:["S"===a.agenda_tipo_particular&&+a.usuario_id!==+l.a.sessao.dados.usuario_id?"Evento particular":a.descricao,a.nome_ativo_reservado&&Object(M.jsx)("p",{children:Object(M.jsxs)("small",{children:["- Ativo: ",a.nome_ativo_reservado]})})]})]}),Object(M.jsxs)("div",{className:"row",style:{marginBottom:5},children:[Object(M.jsx)("div",{className:"col-md-6",children:Object(M.jsx)("small",{children:Object(M.jsx)("span",{className:"label label-default",children:a.agenda_tipo_nome})})}),Object(M.jsxs)("div",{className:"col-md-6",style:{textAlign:"right"},children:[a.hora_inicio.substring(0,5)," - ",a.hora_fim.substring(0,5)]})]}),V(a),(a.projeto_nome||a.atividade_projeto_nome)&&Object(M.jsxs)("p",{children:[a.projeto_nome&&Object(M.jsxs)(s.a.Fragment,{children:[Object(M.jsx)("strong",{children:"- Projeto:"})," ",Object(M.jsx)("span",{children:a.projeto_nome}),Object(M.jsx)("br",{})]}),a.atividade_projeto_nome&&Object(M.jsxs)(s.a.Fragment,{children:[Object(M.jsx)("strong",{children:"- Atividade Projeto:"})," ",Object(M.jsx)("span",{children:a.atividade_projeto_nome})]})]})]})})}}function V(e){return Object(M.jsxs)(s.a.Fragment,{children:[e.cliente_nome&&Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{className:"label label-info",children:"C"}),"\xa0",e.cliente_nome]}),e.fornecedor_nome&&Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{className:"label label-warning",children:"F"}),"\xa0",e.fornecedor_nome]}),e.prospect_nome&&Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{className:"label label-danger",children:"O"}),"\xa0",e.prospect_nome]}),e.empresa_nome&&Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{className:"label label-primary",children:"E"}),"\xa0",e.empresa_nome]})]})}function z(e){let a="label label-default";return"C"===e.entidade_tipo?a="label label-info":"F"===e.entidade_tipo?a="label label-warning":"O"===e.entidade_tipo?a="label label-danger":"E"===e.entidade_tipo&&(a="label label-primary"),Object(M.jsx)(s.a.Fragment,{children:Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{className:a,children:e.entidade_tipo}),"\xa0",e.entidade_nome]})})}class G extends s.a.Component{constructor(e){super(e),this.requestTipoAgenda=async function(){var e=await Object(d.c)();e.push({cor:"#33CCFF",nome:"CRM",tipo_agenda_id:"CRM"},{cor:"#D9534F",nome:"Feriado",tipo_agenda_id:"feriado"}),this.setState({dataSourceTipoAgenda:e})},this.requestUsuariosPorGrupo=async e=>{const a=await u.a.get("usuario/usuarios_grupo_usuario_logado/",{grupo_usuarios_id:JSON.stringify(e),modulo:window.MODULOS.AGENDA},null,null,null,null,null,null,null,!0);let t=this.state.arrUsuariosSelecionados;this.state.arrUsuariosSelecionados.forEach(((e,o)=>{a.filter((a=>null!==a&&+a.usuario_id===+e)).length||(t[o]=null)})),t=t.filter((e=>null!==e)),l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{grupos_usuarios:e})),this.setState({arrUsuarios:a,arrUsuariosSelecionados:t,arrGruposUsuariosSelecionados:e})},this.requestAtivosPorGrupo=async e=>{const a=await u.a.get("grupo_ativos/buscar_ativos/",{grupos_ativos_id:JSON.stringify(e)},null,null,null,null,null,null,null,!0);this.getKeySelecaoAtivo(),this.setState({dataSourceAtivos:a,arrGruposAtivosSelecionados:e})},this.getKeySelecaoUsuario=this.getKeySelecaoUsuario.bind(this),this.getKeySelecaoAtivo=this.getKeySelecaoAtivo.bind(this),this.requestUsuariosPorGrupo=this.requestUsuariosPorGrupo.bind(this),this.requestAtivosPorGrupo=this.requestAtivosPorGrupo.bind(this),this.getArrUsuario=this.getArrUsuario.bind(this),this.getArrAtivo=this.getArrAtivo.bind(this),this.getArrSupervisionado=this.getArrSupervisionado.bind(this),this.handleUsuariosSelecionados=this.handleUsuariosSelecionados.bind(this),this.calcularIntervaloHoras=this.calcularIntervaloHoras.bind(this),this.schedulerRef=s.a.createRef(),this.keySelecaoUsuarioCount=0,this.keySelecaoAtivoCount=0,this.dataSourceEvento=[],this.state={dataSourceTipoAgenda:[],arrUsuarios:[],arrUsuariosSelecionados:[],dataSourceAtivos:[],arrGruposUsuariosSelecionados:[],arrGruposAtivosSelecionados:[],arrAtivosSelecionados:[],arrSupervisionados:[],arrSupervisionadosSelecionados:[],filtroHoraInicio:8,filtroHoraFim:19,valorHoraInicio:null,valorHoraFim:null,viewType:"timelineMonth",filtersState:"",intervaloHoras:30,maxAppointmentsPerCell:"auto",filtrosIntervaloHoras:[{tempo:30,nome:"30 minutos"},{tempo:60,nome:"1 hora"},{tempo:120,nome:"2 horas"},{tempo:180,nome:"3 horas"},{tempo:240,nome:"4 horas"}]},this.requestTipoAgenda()}get Scheduler(){return this.schedulerRef.current?this.schedulerRef.current.instance:null}async loadFiltrosUsuario(){return await l.a.get_parametro_usuario("filtros_agenda")}async componentDidUpdate(){let e=await this.loadFiltrosUsuario();this.filtros_agenda_usuario=e}async componentDidMount(){let e=await this.loadFiltrosUsuario();this.filtros_agenda_usuario=e;let a=[],t=e.grupos_ativos?e.grupos_ativos:[],o=e.ativos?e.ativos:[],i=e.supervisionados?e.supervisionados:[],s=e.viewType?e.viewType:"timelineMonth",n="undefined"!==typeof e.filtersState?e.filtersState:"",r=e.hora_inicio?e.hora_inicio:8,c=e.hora_fim?e.hora_fim:19,u="undefined"!==typeof e.intervaloHoras?e.intervaloHoras:30,p="undefined"!==typeof e.maxAppointmentsPerCell?e.maxAppointmentsPerCell:"auto",m="undefined"!==typeof e.filtros_intervalo_horas?e.filtros_intervalo_horas:[{tempo:30,nome:"30 minutos"},{tempo:60,nome:"1 hora"},{tempo:120,nome:"2 horas"},{tempo:180,nome:"3 horas"},{tempo:240,nome:"4 horas"}],h=[{usuario_id:l.a.sessao.dados.usuario_id.toString(),nome:l.a.sessao.dados.nome}],_=[l.a.sessao.dados.usuario_id.toString()];(l.a.sessao.dados.admin||l.a.verifica_permissao(l.a.temp.empresa,"agenda_grupo_usuario")||l.a.verifica_permissao(l.a.temp.empresa,"agenda_todas"))&&(a=e.grupos_usuarios?e.grupos_usuarios:[],_=e.usuarios&&e.usuarios.length>0?e.usuarios:[l.a.sessao.dados.usuario_id.toString()]);let f=new Date;f.setHours(r),f.setMinutes(0),f.setSeconds(0);let b=new Date;b.setHours(c-1),b.setMinutes(0),b.setSeconds(0);let v=f,g=b;if(this.dataSourceEvento=Object(d.a)(_,null,this),this.setState({arrGruposUsuariosSelecionados:a,arrUsuarios:h,arrUsuariosSelecionados:_,arrGruposAtivosSelecionados:t,arrAtivosSelecionados:o,arrSupervisionados:await R({modulo:window.MODULOS.AGENDA,usuario_supervisor:l.a.sessao.dados.usuario_id}),arrSupervisionadosSelecionados:i,filtroHoraInicio:r,filtroHoraFim:c,valorHoraInicio:v,valorHoraFim:g,viewType:s,filtersState:n,intervaloHoras:u,maxAppointmentsPerCell:p,filtrosIntervaloHoras:m},(()=>{this.requestUsuariosPorGrupo(a),this.requestAtivosPorGrupo(t)})),""===n&&L.current){L.current.instance.element().addClass("filterOpen")}}getArrUsuario(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{usuario_id:null,nome:null};const t=this.state.arrUsuarios.filter((a=>+a.usuario_id===+e));if(1===t.length)return t[0];const o=this.state.arrSupervisionados.filter((a=>+a.supervisionado_id===+e));return 1===o.length?{usuario_id:o[0].supervisionado_id,nome:o[0].supervisionado_nome}:a}getArrAtivo(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:null,nome:null};const t=this.state.dataSourceAtivos.filter((a=>+a.id===+e));return 1===t.length?t[0]:a}getArrSupervisionado(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{supervisionado_id:null,supervisionado_nome:null};const t=this.state.arrSupervisionados.filter((a=>+a.supervisionado_id===+e));return 1===t.length?t[0]:a}getKeySelecaoUsuario(){return this.keySelecaoUsuarioCount++}getKeySelecaoAtivo(){return this.keySelecaoAtivoCount++}handleUsuariosSelecionados(){let e=[],a=this.state.arrUsuariosSelecionados,t=this.state.arrSupervisionadosSelecionados;for(let o=0;o<a.length;o++){const t=a[o];+t!==+l.a.sessao.dados.usuario_id?e.push(+t):e.unshift(+t)}for(let o=0;o<t.length;o++){const a=t[o];e.filter((e=>+e===+a)).length||e.push(+a)}return e}calcularIntervaloHoras(e,a){let t=[],i=[30,60,120,180,240];for(let o=0;o<i.length;o++){let s=i[o];if(0===60*(parseInt(a)-parseInt(e))%s){let e="";if(30==s)e="30 minutos";else{e=s/60+" hora(s)"}t.push({tempo:s,nome:e})}}let s=this.state.intervaloHoras;t.filter((e=>e.tempo==this.state.intervaloHoras)).length||(s=t[0].tempo),this.setState({filtrosIntervaloHoras:t,intervaloHoras:s,filtroHoraInicio:e,filtroHoraFim:a},(()=>{l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{filtros_intervalo_horas:t,hora_inicio:e,hora_fim:a}))}))}render(){let e=this.state.arrAtivosSelecionados,a=this.state.arrUsuariosSelecionados,t=this.state.arrSupervisionadosSelecionados,i=[];L=this.schedulerRef;for(let o=0;o<e.length;o++){let{id:a,nome:t}=this.getArrAtivo(e[o]);i.push({chave:"a_".concat(a),nome:t,ativo_id:a,usuario_id:null,tipo:"ativo"})}for(let o=0;o<a.length;o++){let{usuario_id:e,nome:t}=this.getArrUsuario(a[o]),s={chave:"u_".concat(e),nome:t,usuario_id:e,ativo_id:null,tipo:"usuario"};+e!==+l.a.sessao.dados.usuario_id?i.push(s):i.unshift(s)}for(let o=0;o<t.length;o++){let{supervisionado_id:e,supervisionado_nome:a}=this.getArrSupervisionado(t[o]);i.filter((a=>"usuario"===a.tipo&&+a.usuario_id===+e)).length||i.push({chave:"u_".concat(e),nome:a,usuario_id:e,ativo_id:null,tipo:"usuario"})}const m=new Date,h=i.length?Object(M.jsxs)(s.a.Fragment,{children:[Object(M.jsxs)(r.a,{ref:this.schedulerRef,dataSource:Object(d.a)(this.handleUsuariosSelecionados(),this.state.arrAtivosSelecionados,this),cellDuration:this.state.intervaloHoras,maxAppointmentsPerCell:this.state.maxAppointmentsPerCell,appointmentRender:B,appointmentTooltipRender:U,timeCellTemplate:(e,a,t)=>{if("month"!==this.state.viewType&&"timelineMonth"!==this.state.viewType&&"agenda"!==this.state.viewType&&"day"!==this.state.viewType&&"workWeek"!==this.state.viewType&&"week"!==this.state.viewType){let a=window.formatDate(e.date).substring(0,5);j()(t).append("<div><strong>".concat(a,"</strong><br /><span>").concat(e.text,"</span></div>"))}else j()(t).append("<small>".concat(e.text,"</small>"))},onAppointmentFormOpening:e=>{if(e.cancel=!0,"undefined"!==typeof e.appointmentData.oportunidade_agenda_id&&+e.appointmentData.oportunidade_agenda_id>0){let a=+e.appointmentData.representante_usuario_id!==+l.a.sessao.dados.usuario_id;c.a.load("oportunidade/atividade",(function(t,o){o.show(e.appointmentData.oportunidade_agenda_id,window.FORMULARIO.EDITAR,null,e.appointmentData.oportunidade_id,null,a),o.onclose=()=>{e.component._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(e.component._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),e.component._dataSource.reload()}}))}else e.appointmentData.data_feriado||c.a.load("agenda/agenda_evento",(function(a,t){var o={evento_id:e.appointmentData.agenda_evento_id,usuario_id:e.appointmentData.usuario_id,dia:e.appointmentData.dia,usuario_nome:e.appointmentData.nome_ativo_reservado?e.appointmentData.nome_ativo_reservado:"usuario_nome",agenda_ativo_id:e.appointmentData.agenda_ativo_id,convidado_evento:e.appointmentData.convidado_evento,permissao_manutencao_agenda_ativo:e.appointmentData.permissao_manutencao_agenda_ativo};t.onclose=function(){e.component._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(e.component._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),e.component._dataSource.reload()},t.show(o)}))},onCellClick:o=>{c.a.load("agenda/agenda_evento",((i,s)=>{let n={dia:window.formatDate(o.cellData.startDate,!0),hora_inicio:window.formatDateTime(o.cellData.startDate,!0).substr(-5),hora_fim:window.formatDateTime(o.component.option("selectedCellData")[o.component.option("selectedCellData").length-1].endDate,!0).substr(-5)},r=this.getArrUsuario(a.filter((e=>{if(e){return"u_".concat(e)===o.cellData.groups.evento_usuario_id}return!1}))[0],null);r||(r=this.getArrUsuario(t.filter((e=>{if(e){return"u_".concat(e)===o.cellData.groups.evento_usuario_id}return!1}))[0],null));let d=this.getArrAtivo(e.filter((e=>{if(e){return"a_".concat(e)===o.cellData.groups.evento_usuario_id}return!1}))[0],null);const l={evento_id:null,dia:n,usuario_id:null,agenda_ativo_id:null};r?(l.usuario_id=r.usuario_id,l.usuario_nome=r.nome):d&&(l.agenda_ativo_id=d.id,l.usuario_nome=d.nome),l.permissao_manutencao_agenda_ativo=d&&d.permissao_manutencao_agenda_ativo,s.onclose=function(){o.component._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(o.component._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),o.component._dataSource.reload()},s.show(l)}))},onAppointmentContextMenu:e=>{k=e.appointmentData,k.data_feriado&&e.event.stopPropagation()},onCellContextMenu:e=>{let{cellData:a}=e;F=a},groups:["evento_usuario_id"],editing:!1,showAllDayPanel:!1,defaultCurrentDate:m,remoteFiltering:!0,crossScrollingEnabled:!0,onOptionChanged:e=>{"currentView"===e.name&&(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{viewType:e.value})),this.setState({viewType:e.value}))},currentView:this.state.viewType,onContentReady:e=>{setTimeout((()=>{e.component.scrollTo(m),e.component._dimensionChanged()}),150);L&&L.current&&["timelineDay","timelineWorkWeek","timelineWeek","timelineMonth","month"].includes(this.state.viewType)&&(j()(L.current._element).find(".dx-scheduler-date-table-scrollable-content").height()<=j()(L.current._element).find(".dx-scheduler-date-table-scrollable-content").closest(".dx-scrollable-container").height()&&j()(L.current._element).find(".dx-scheduler-cell-sizes-vertical").attr("style","height: auto !important"),j()(L.current._element).find(".dx-scheduler-group-header-content").css("word-break","break-word"))},children:[Object(M.jsx)(n.Resource,{dataSource:this.state.dataSourceTipoAgenda,fieldExpr:"agenda_tipo_id",valueExpr:"tipo_agenda_id",colorExpr:"cor",useColorAsDefault:!0}),Object(M.jsx)(n.Resource,{dataSource:i,displayExpr:"nome",fieldExpr:"evento_usuario_id",valueExpr:"chave"}),Object(M.jsx)(n.View,{type:"day",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(M.jsx)(n.View,{type:"workWeek",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(M.jsx)(n.View,{type:"week",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(M.jsx)(n.View,{type:"month"}),Object(M.jsx)(n.View,{type:"timelineDay",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(M.jsx)(n.View,{type:"timelineWorkWeek",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(M.jsx)(n.View,{type:"timelineWeek",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(M.jsx)(n.View,{type:"timelineMonth"})]}),Object(M.jsx)(S.a,{dataSource:[{name:"novo_evento",icon:"fas fa-plus",text:"Novo evento",onItemClick:o=>{L.current&&L.current.instance&&c.a.load("agenda/agenda_evento",((i,s)=>{let n={dia:window.formatDate(o.startDate,!0),hora_inicio:window.formatDateTime(o.startDate,!0).substr(-5),hora_fim:window.formatDateTime(o.endDate,!0).substr(-5)},r=this.getArrUsuario(a.filter((e=>{if(e){return"u_".concat(e)===o.evento_usuario_id}return!1}))[0],null);r||(r=this.getArrUsuario(t.filter((e=>{if(e){return"u_".concat(e)===o.evento_usuario_id}return!1}))[0],null));let d=this.getArrAtivo(e.filter((e=>{if(e){return"a_".concat(e)===o.evento_usuario_id}return!1}))[0],null);const l={evento_id:null,dia:n,usuario_id:null,agenda_ativo_id:null};r?(l.usuario_id=r.usuario_id,l.usuario_nome=r.nome):d&&(l.agenda_ativo_id=d.id,l.usuario_nome=d.nome),l.permissao_manutencao_agenda_ativo=d&&d.permissao_manutencao_agenda_ativo,s.onclose=function(){L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),L.current.instance._dataSource.reload()},s.show(l)}))}},{name:"marcar_realizado",icon:"check",text:"Marcar como realizado",onItemClick:e=>{if("S"===e.realizado)window.alert_info("O evento j\xe1 est\xe1 marcado como realizado");else{Object(I.confirm)("Deseja marcar esse evento como realizado?","Aten\xe7\xe3o").then((a=>{a&&u.a.post("agenda_evento/alterar_agenda_realizado/",{agenda_evento_id:e.agenda_evento_id},(function(e){window.alert_saved("Evento realizado com sucesso"),L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),L.current.instance._dataSource.reload()}))}))}}},{name:"copiar_evento",icon:"copy",text:"Copiar evento",onItemClick:e=>{u.a.get("agenda_evento/objeto/",{agenda_evento_id:e.agenda_evento_id},(function(e){N={agenda_evento_id:e.id,agenda_evento_origem:e.id,usuario_id:e.usuario_id,dia:e.dia,hora_inicio:e.hora_inicio,hora_fim:e.hora_fim,agenda_tipo_id:e.agenda_tipo_id,agenda_local_id:e.agenda_local_id,cliente_id:e.cliente_id,projeto_id:e.projeto_id,projeto_atividade_id:e.projeto_atividade_id,descricao:e.descricao,descricao_detalhada:e.descricao_detalhada,prospect_id:e.prospect_id,empresa_id:e.empresa_id,fornecedor_id:e.fornecedor_id,agenda_ativo_id:e.agenda_ativo_id,evento_pessoal:e.evento_pessoal,arr_convidados:e.arr_convidados},window.alert_info("Evento copiado")}))}},{name:"visualizar_atividade",icon:"bulletlist",text:"Visualizar atividade de projeto",onItemClick:e=>{c.a.load("atividade_projeto/detalhes",(function(a,t){t.show(e.projeto_id,e.projeto_atividade_id,window.FORMULARIO.EDITAR,null,null,e.atividade_projeto_nome)}),c.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:e.projeto_atividade_id})}},{name:"realizar_apontamento",icon:"clock",text:"Realizar apontamento",onItemClick:e=>{c.a.load("apontamento_projeto/detalhes",(function(a,t){t.show(null,window.FORMULARIO.NOVO,e.dia,e.projeto_id,e.cliente_id,e.cliente_nome,e.projeto_atividade_id,e.projeto_nome,e.startDate,e.endDate)}),c.a.ABA.MULTIPLAS)}},{name:"editar_oportunidade",icon:"bulletlist",text:"Editar Oportunidade",onItemClick:e=>{if(0==parseInt(e.oportunidade_id))return!1;c.a.load("oportunidade/detalhes",((a,t)=>{t.onclose=()=>{this.setState({})},t.show(e.oportunidade_id,window.FORMULARIO.EDITAR)}),c.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.oportunidade_id})}}],width:200,target:".dx-scheduler-appointment",onItemClick:e=>{e.itemData.onItemClick(k)},onShowing:e=>{let a=e.component.option("dataSource");for(let t=0;t<a.length;t++){let e=a[t];a[t].visible="CRM"!==k.agenda_tipo_id,"visualizar_atividade"!==e.name&&"realizar_apontamento"!==e.name||!k.cliente_id>0&&(a[t].visible=!1),"editar_oportunidade"===e.name&&(a[t].visible="CRM"==k.agenda_tipo_id&&"undefined"!==typeof k.oportunidade_id&&k.oportunidade_id>0)}e.component.option("dataSource",a)}}),Object(M.jsx)(S.a,{dataSource:[{icon:"fas fa-plus",text:"Novo evento",onItemClick:o=>{L.current&&L.current.instance&&c.a.load("agenda/agenda_evento",((i,s)=>{let n={dia:window.formatDate(o.startDate,!0),hora_inicio:window.formatDateTime(o.startDate,!0).substr(-5),hora_fim:window.formatDateTime(o.endDate,!0).substr(-5)},r=this.getArrUsuario(a.filter((e=>{if(e){return"u_".concat(e)===o.groups.evento_usuario_id}return!1}))[0],null);r||(r=this.getArrUsuario(t.filter((e=>{if(e){return"u_".concat(e)===o.groups.evento_usuario_id}return!1}))[0],null));let d=this.getArrAtivo(e.filter((e=>{if(e){return"a_".concat(e)===o.groups.evento_usuario_id}return!1}))[0],null);const l={evento_id:null,dia:n,usuario_id:null,agenda_ativo_id:null};r?(l.usuario_id=r.usuario_id,l.usuario_nome=r.nome):d&&(l.agenda_ativo_id=d.id,l.usuario_nome=d.nome),l.permissao_manutencao_agenda_ativo=d&&d.permissao_manutencao_agenda_ativo,s.onclose=function(){L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),L.current.instance._dataSource.reload()},s.show(l)}))}},{text:"Colar evento",icon:"paste",onItemClick:e=>{if(N){let a=null,t=null,o="",i="",s=e.groups.evento_usuario_id.split("_"),n=s[0];"u"===n?a=s[1]:"a"===n&&(t=s[1]);const r=new Date(e.startDate);let d=r.getDate().toString().padStart(2,"0"),l=(r.getMonth()+1).toString().padStart(2,"0"),c=r.getFullYear().toString()+"-"+l+"-"+d;if(parseInt(N.usuario_id)>0?o="usuario":parseInt(N.agenda_ativo_id)>0&&(o="ativo"),parseInt(a)>0?i="usuario":parseInt(t)>0&&(i="ativo"),o!==i)return void Object(I.alert)("N\xe3o \xe9 poss\xedvel copiar eventos de usu\xe1rios em ativos e vice-versa","Aviso");u.a.post("agenda_evento/salvar/",{agenda_evento_id:null,usuario_id:a,agenda_ativo_id:t,dia:c,hora_inicio:N.hora_inicio,hora_fim:N.hora_fim,agenda_tipo_id:N.agenda_tipo_id,agenda_local_id:N.agenda_local_id,cliente_id:N.cliente_id,projeto_id:N.projeto_id,projeto_atividade_id:N.projeto_atividade_id,descricao:N.descricao,descricao_detalhada:N.descricao_detalhada,prospect_id:N.prospect_id,empresa_id:N.empresa_id,fornecedor_id:N.fornecedor_id,agenda_evento_origem:N.agenda_evento_origem,evento_pessoal:N.evento_pessoal,arr_convidados:JSON.stringify(N.arr_convidados)},(function(e){L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),L.current.instance._dataSource.reload()}))}else window.alert_info("Nenhum evento copiado")}}],width:200,target:".dx-scheduler-date-table-cell",onItemClick:e=>{e.itemData.onItemClick(F)}})]}):null;let _="border-radius: 5px; margin-right: 5px;";return this.state.dataSourceTipoAgenda.length?Object(M.jsxs)(s.a.Fragment,{children:[Object(M.jsx)("div",{style:{marginTop:5,marginBottom:5},children:Object(M.jsx)(A.ButtonGroup,{stylingMode:"contained",hoverStateEnabled:!1,selectionMode:"none",items:[{icon:"fas fa-plus",hint:"Novo evento",text:"Novo evento",elementAttr:{style:_},onItemClick:()=>{L.current&&L.current.instance&&c.a.load("agenda/agenda_evento",(function(e,a){const t={evento_id:null,dia:{dia:window.formatDate(new Date,!0),hora_inicio:null,hora_fim:null},usuario_id:l.a.sessao.dados.usuario_id,usuario_nome:l.a.sessao.dados.nome};a.onclose=function(){L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(L.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),L.current.instance._dataSource.reload()},a.show(t)}))}},{text:"Filtros",icon:"fas fa-filter",hint:"Exibir/esconder filtros",elementAttr:{style:_},onItemClick:()=>{const e=L.current.instance.element();"hidden"===this.state.filtersState?(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.state.filtros_agenda_usuario),{},{filtersState:""})),this.setState({filtersState:""}),e.addClass("filterOpen")):(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.state.filtros_agenda_usuario),{},{filtersState:"hidden"})),this.setState({filtersState:"hidden"}),e.removeClass("filterOpen"))}},{icon:"fas fa-sync",hint:"Recarregar",elementAttr:{style:_},onItemClick:()=>{L.current&&L.current.instance&&this.setState({})}},{icon:"fas fa-link",hint:"Gerar link ICS",elementAttr:{style:_},onItemClick:()=>{c.a.load("agenda/ics_url_info",(function(e,a){a.show(l.a.sessao.dados.usuario_id)}))}},{icon:"fas fa-envelope",hint:"Enviar agenda por e-mail",elementAttr:{style:_},onItemClick:()=>{c.a.load("agenda/email_cliente",(function(e,a){a.show()}))}}],onItemClick:e=>{"function"===typeof e.itemData.onItemClick&&e.itemData.onItemClick()}})}),Object(M.jsxs)("div",{className:this.state.filtersState,children:[Object(M.jsxs)("div",{className:"col-md-12 col-lg-6",style:{padding:"0px"},children:[Object(M.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(M.jsx)(x,{value:this.state.valorHoraInicio,label:"In\xedcio",labelMode:"floating",height:49,placeholder:"hh:mm",hoursOnly:!0,elementAttr:{class:"dx-theme-background-color"},onValueChanged:e=>{let a=new Date(e.value).time_now();a=Number(a.substring(0,2)),this.calcularIntervaloHoras(a,this.state.filtroHoraFim)}},"hora_inicio")}),Object(M.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(M.jsx)(x,{value:this.state.valorHoraFim,label:"Fim",labelMode:"floating",height:49,placeholder:"hh:mm",hoursOnly:!0,elementAttr:{class:"dx-theme-background-color"},onValueChanged:e=>{let a=new Date(e.value).time_now();a=Number(a.substring(0,2)),a+=1,this.calcularIntervaloHoras(this.state.filtroHoraInicio,a)}},"hora_fim")}),Object(M.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(M.jsx)(P.a,{dataSource:this.state.filtrosIntervaloHoras,displayExpr:"nome",valueExpr:"tempo",value:this.state.intervaloHoras,elementAttr:{class:"dx-theme-background-color"},placeholder:"Intervalo de horas",label:"Intervalos de",labelMode:"floating",height:49,onValueChanged:e=>{window.isEquivalent(this.state.intervaloHoras,e.value)||(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{intervaloHoras:e.value})),this.setState({intervaloHoras:e.value}))}})}),Object(M.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(M.jsxs)("div",{className:"dx-editor-filled dx-tagbox dx-textbox dx-texteditor dx-texteditor-with-floating-label dx-theme-background-color dx-widget",style:{maxHeight:"49px",minWidth:"auto"},children:[Object(M.jsx)(D.Switch,{style:{margin:"20px 10px"},value:"unlimited"===this.state.maxAppointmentsPerCell,onValueChanged:e=>{l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{maxAppointmentsPerCell:e.value?"unlimited":"auto"})),this.setState({maxAppointmentsPerCell:e.value?"unlimited":"auto"})}}),Object(M.jsxs)("div",{className:"dx-texteditor-label",id:"dx-texteditor-label-e6b49a90-6b2e-572d-6742-de78e41a586e",children:[Object(M.jsx)("div",{className:"dx-label-before",style:{width:"0px"}}),Object(M.jsx)("div",{className:"dx-label",style:{maxWidth:"261px"},children:Object(M.jsx)("span",{"data-mark":!0,children:"Exibir tudo"})})]})]})}),(l.a.verifica_permissao(l.a.temp.empresa,"agenda_grupo_usuario")||l.a.verifica_permissao(l.a.temp.empresa,"agenda_todas")||l.a.sessao.dados.admin)&&Object(M.jsx)("div",{className:"col-md-4",style:{padding:"1px"},children:Object(M.jsx)(p.default,{label:"Filtro por grupos de usu\xe1rios",labelMode:"floating",selecionado:this.state.arrGruposUsuariosSelecionados,elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},aoAlterar:e=>{window.isEquivalent(this.state.arrGruposUsuariosSelecionados,e)||this.requestUsuariosPorGrupo(e)},maxDisplayedTags:1,modulo:window.MODULOS.AGENDA})})]}),Object(M.jsxs)("div",{className:"col-md-12 col-lg-6",style:{padding:"0px"},children:[Object(M.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(M.jsx)(y.a,{label:"Filtro por usu\xe1rios",labelMode:"floating",elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},items:this.state.arrUsuarios,value:this.state.arrUsuariosSelecionados,valueExpr:"usuario_id",displayExpr:"nome",showSelectionControls:!0,applyValueMode:"useButtons",maxDisplayedTags:1,noDataText:"Selecione os usu\xe1rios",onValueChanged:e=>{window.isEquivalent(this.state.arrUsuariosSelecionados,e.value)||(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{usuarios:e.value})),this.setState({arrUsuariosSelecionados:e.value}))}},"selecaoUsuarios")}),Object(M.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(M.jsx)(f,{label:"Filtro por grupos de ativos",labelMode:"floating",placeholder:"Selecione ...",selecionado:this.state.arrGruposAtivosSelecionados,elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},aoAlterar:e=>{l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{grupos_ativos:e})),this.requestAtivosPorGrupo(e)},maxDisplayedTags:1})}),Object(M.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(M.jsx)(b.default,{label:"Filtro por ativos",labelMode:"floating",placeholder:"Selecione ...",selecionado:this.state.arrAtivosSelecionados,items:this.state.dataSourceAtivos,elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},aoAlterar:e=>{window.isEquivalent(this.state.arrAtivosSelecionados,e)||(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{ativos:e})),this.setState({arrAtivosSelecionados:e}))},maxDisplayedTags:1,noDataText:"Selecione os grupos de ativos"},this.keySelecaoAtivoCount)}),Object(M.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(M.jsx)(y.a,{label:"Filtro por supervisionados",labelMode:"floating",elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},items:this.state.arrSupervisionados,value:this.state.arrSupervisionadosSelecionados,valueExpr:"supervisionado_id",displayExpr:"supervisionado_nome",showSelectionControls:!0,applyValueMode:"useButtons",maxDisplayedTags:1,onValueChanged:e=>{window.isEquivalent(this.state.arrSupervisionadosSelecionados,e.value)||(l.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},this.filtros_agenda_usuario),{},{supervisionados:e.value})),this.setState({arrSupervisionadosSelecionados:e.value}))}},"selecaoSupervisionados")})]})]}),Object(M.jsx)("div",{style:{marginTop:5},children:h})]}):null}}G.defaultProps={abaTitulo:"Agenda"};a.default=G},1083:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return k}));var o=t(247),i=t.n(o),s=t(395),n=t.n(s),r=t(248),d=t(262),l=t(253);const c=Object.freeze({agendaEvento:1,tarefaCartao:2,chamado:3,documentoAprovacaoAlcada:4,documentoDistribuicaoControlada:5,processoSolicitacaoAtividade:6,projetoAtividade:7,pdcaAtividade:9,crmOportunidade:10,crmOportunidadeOrcamento:11,crmOportunidadeAgenda:12}),u=[{id:c.agendaEvento,descricao:"Agenda Evento"},{id:c.tarefaCartao,descricao:"Tarefa Cart\xe3o"},{id:c.chamado,descricao:"Chamado"},{id:c.documentoAprovacaoAlcada,descricao:"Documento Aprova\xe7\xe3o"},{id:c.documentoDistribuicaoControlada,descricao:"Documento Distribui\xe7\xe3o"},{id:c.processoSolicitacaoAtividade,descricao:"Atividade de Processo"},{id:c.projetoAtividade,descricao:"Atividade de Projeto"},{id:c.pdcaAtividade,descricao:"Atividade de PDCA"},{id:c.crmOportunidade,descricao:"Oportunidade"},{id:c.crmOportunidadeOrcamento,descricao:"Oportunidade Or\xe7amento"},{id:c.crmOportunidadeAgenda,descricao:"Oportunidade Agenda"}],p=Object.freeze({noPrazo:"P",atrasado:"AT"}),m=[{id:p.noPrazo,descricao:"No prazo"},{id:p.atrasado,descricao:"Atrasado"}];let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS;return new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"central_pendencias_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){l.a.get({route:"central_pendencias/listar/",data:Object(r.a)(Object(r.a)({},t),{},{tipo_listagem:e}),func_response:function(e){let t=window.createLoadExtra(e);a(Object(r.a)(Object(r.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){l.a.get({route:"central_pendencias/listar/",data:{central_pendencias_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}})};var _=t(267),f=t(350),b=t(415),v=t(736),g=t(43),w=t.n(g),j=t(553),O=(t(280),t(729)),x=t(254),A=t(447),C=t(730),S=t(244);var I=t(315),E=t(87),P=t(271);class T extends i.a.Component{constructor(e){var a,t,o;super(e),this.state={filtroModulo:null!==(a=this.props.filtroModulo)&&void 0!==a?a:null,filtroEntidade:null!==(t=this.props.filtroEntidade)&&void 0!==t?t:null,cockpitExpandido:null===(o=this.props.cockpitExpandido)||void 0===o||o},this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.handleRowClick=this.handleRowClick.bind(this),this.stateStoring=this.stateStoring.bind(this),this.handleAcessarRegistro=this.handleAcessarRegistro.bind(this);const s=[E.a.sessao.dados.supervisor_agenda,E.a.sessao.dados.supervisor_atendimento_relacionamento,E.a.sessao.dados.supervisor_chamado,E.a.sessao.dados.supervisor_documento,E.a.sessao.dados.supervisor_empenho,E.a.sessao.dados.supervisor_inovacao,E.a.sessao.dados.supervisor_processo,E.a.sessao.dados.supervisor_processo_grupo_usuario,E.a.sessao.dados.supervisor_processo_usuario,E.a.sessao.dados.supervisor_projeto,E.a.sessao.dados.supervisor_rede_social];this.dataGridRef=i.a.createRef(),this.keyCount=0,this.gridStateStoring=this.stateStoring(),this.isSupervisor=s.filter((e=>"S"===e))}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}componentDidMount(){if(this.dataGridRef&&this.dataGridRef.current){let e=this.dataGridRef.current._instance;switch(this.state.filtroEntidade?e.option("filterValue",[[["entidade_codigo","=",this.state.filtroEntidade.codigo],"and",["entidade_tipo","=",this.state.filtroEntidade.tipo]]]):e.option("stateStoring",this.gridStateStoring),+this.state.filtroModulo){case A.a.agenda:e.option("filterValue",["tipo","=",c.agendaEvento]);break;case A.a.tarefas:e.option("filterValue",["tipo","=",c.tarefaCartao]);break;case A.a.chamado:e.option("filterValue",["tipo","=",c.chamado]);break;case A.a.documento:e.option("filterValue",[[["tipo","=",c.documentoAprovacaoAlcada],"or",["tipo","=",c.documentoDistribuicaoControlada]]]);break;case A.a.processo:e.option("filterValue",["tipo","=",c.processoSolicitacaoAtividade]);break;case A.a.projeto:e.option("filterValue",["tipo","=",c.projetoAtividade]);break;case A.a.pdca:e.option("filterValue",["tipo","=",c.pdcaAtividade]);break;case A.a.crm:e.option("filterValue",[[["tipo","=",c.crmOportunidade],"or",["tipo","=",c.crmOportunidadeAgenda],"or",["tipo","=",c.crmOportunidadeOrcamento]]])}}}render(){const e=[Object(S.jsx)(f.a,{dataField:"modulo_id",caption:"M\xf3dulo",width:200,groupIndex:0,children:Object(S.jsx)(x.Lookup,{dataSource:A.b,displayExpr:"descricao",valueExpr:"id"})},"modulo_id"),Object(S.jsx)(f.a,{dataField:"tipo",caption:"Tipo",width:200,children:Object(S.jsx)(x.Lookup,{dataSource:u,displayExpr:"descricao",valueExpr:"id"})},"tipo"),Object(S.jsx)(O.a,{dataField:"entidade_tipo",caption:"Entidade Tipo"},"entidade_tipo"),Object(S.jsx)(j.a,{dataField:"entidade_codigo",caption:"Entidade C\xf3digo"},"entidade_codigo"),Object(S.jsx)(C.a,{dataField:"entidade_nome",caption:"Entidade Nome"},"entidade_nome"),Object(S.jsx)(f.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:200},"descricao"),Object(S.jsx)(b.default,{dataField:"usuario_responsavel_nome",caption:"Respons\xe1vel",dataFieldUsuarioId:"usuario_responsavel_id",width:200},"usuario_responsavel_nome"),Object(S.jsx)(f.a,{dataField:"grupo_responsavel_nome",caption:"Grupo Respons\xe1vel",width:200},"grupo_responsavel_nome"),Object(S.jsx)(v.a,{dataField:"prazo",caption:"Prazo",sortIndex:0,sortOrder:"asc",width:200},"prazo"),Object(S.jsx)(v.a,{dataField:"data_inicio",caption:"Data In\xedcio",sortIndex:0,sortOrder:"asc",width:200},"data_inicio"),Object(S.jsx)(f.a,{dataField:"situacao",caption:"Situa\xe7\xe3o",width:200,cellTemplate:(e,a)=>{let t="",o="";switch(a.data.situacao){case p.atrasado:t="label-danger",o="Atrasado";break;case p.noPrazo:default:t="label-info",o="No prazo"}e.css({textAlign:"center"}).addClass("bg-"+t),w()("<span>").text(o).css({color:"#FFF"}).appendTo(e)},children:Object(S.jsx)(x.Lookup,{dataSource:m,displayExpr:"descricao",valueExpr:"id"},"centralPendenciasSituacao")},"situacao"),Object(S.jsx)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:Object(S.jsx)(I.a,{icon:"fa fa-external-link-square-alt",onClick:e=>this.handleAcessarRegistro(e,e.row.data)})},"buttons")];return Object(S.jsx)("div",{children:Object(S.jsx)(_.default,{ref:this.dataGridRef,style:{height:this.state.cockpitExpandido?"calc(100vh - 285px)":"calc(100vh - 117px)"},dataSource:h(this.props.tipoListagem),onToolbarPreparing:this.onToolbarPreparing,onRowClick:this.handleRowClick,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},width:"100%",children:e},this.getKey())})}getKey(){return this.keyCount++}onToolbarPreparing(e){const a=this;let t=[{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{a.props.listPendencias(a.props.tipoListagem)}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"user",hint:"Minhas Pend\xeancias",text:"Minhas Pend\xeancias",onClick:()=>a.props.listPendencias(window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS),onInitialized(e){a.props.tipoListagem===window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnMinhasPendencias",locateInMenu:"auto"},{widget:"dxButton",visible:this.isSupervisor.length>0,options:{icon:"group",hint:"Pend\xeancias de Supervisionados",text:"Pend\xeancias de Supervisionados",onClick:()=>a.props.listPendencias(window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_SUPERVISIONADOS),onInitialized(e){a.props.tipoListagem===window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_SUPERVISIONADOS&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnPendenciasSupervisionados",locateInMenu:"auto"},{widget:"dxButton",visible:E.a.verifica_permissao(E.a.sessao.dados.empresa_filial_id,"admin_central_pendencias"),options:{icon:"fas fa-users",hint:"Todas Pend\xeancias",text:"Todas Pend\xeancias",onClick:()=>a.props.listPendencias(window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_TODOS),onInitialized(e){a.props.tipoListagem===window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_TODOS&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnMinhasPendencias",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}stateStoring(){return{enabled:!0,type:"custom",customLoad:function(){return E.a.get_parametro_usuario("central_pendencias_grid").datagrid},customSave(e){E.a.set_parametro_usuario("central_pendencias_grid",{datagrid:e})}}}handleRowClick(e){window.onDoubleClick(e,(()=>this.handleAcessarRegistro(e,e.data)))}handleAcessarRegistro(e,a){const t=()=>{this.props.listPendencias(this.props.tipoListagem)};switch(+a.tipo){case c.agendaEvento:P.a.load("agenda/agenda_evento",((e,o)=>{o.onsave=t,o.show({evento_id:a.agenda_evento_id})}));break;case c.tarefaCartao:P.a.load("tarefa/detalhes_cartao",((e,o)=>{o.onclose=t,o.show(a.tarefa_quadro_lista_cartao_id)}),P.a.ABA.SIM,null,null,{cartaoId:a.tarefa_quadro_lista_cartao_id});break;case c.chamado:P.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:a.chamado_id,onClose:t},(function(e,a){}),P.a.ABA.MULTIPLAS);break;case c.documentoAprovacaoAlcada:case c.documentoDistribuicaoControlada:P.a.load("central_documentos/documento",((e,o)=>{o.onclose=t,o.show(a.documento_id,window.FORMULARIO.EDITAR)}),P.a.ABA.SIM);break;case c.processoSolicitacaoAtividade:P.a.load("solicitacao/detalhes",(function(e,t){t.show(a.solicitacao_atividade_id,window.FORMULARIO.EDITAR)}),P.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:a.solicitacao_atividade_id});break;case c.projetoAtividade:let e=null;(function(a,t){l.a.get("projeto/objeto/",{projeto_id:a},(function(a){e=null===a.equipe_toda||0===a.equipe_toda.length?a.equipe:window.object_to_array(a.equipe_toda),"undefined"!==typeof t&&t()}))})(a.projeto_id,(function(){P.a.load("atividade_projeto/detalhes",(function(t,o){o.show(a.projeto_id,a.projeto_atividade_id,window.FORMULARIO.EDITAR,a.projeto_template,e,a.descricao.substr(0,10))}),P.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:a.projeto_atividade_id})}));break;case c.pdcaAtividade:P.a.load("pdca/atividades",(function(e,t){const o={pdca_id:a.pdca_id,numero:a.pdca_numero,objetivo:a.pdca_objetivo,data_inicio:a.pdca_data_inicio,data_fim:a.pdca_data_fim,progresso:a.pdca_progresso,situacao:a.pdca_situacao,situacao_id:a.pdca_situacao_id,dados_atividade:{pdca_atividade_id:a.pdca_atividade_id}};t.show(o,!0)}),P.a.ABA.MULTIPLAS,null,null,{pdcaId:a.pdca_id});break;case c.crmOportunidade:P.a.load("oportunidade/detalhes",((e,o)=>{o.onclose=t,o.show(a.oportunidade_id,window.FORMULARIO.EDITAR)}),P.a.ABA.MULTIPLAS,null,null,{oportunidadeId:a.oportunidade_id});break;case c.crmOportunidadeAgenda:P.a.load("oportunidade/atividade",((e,o)=>{let i=a.usuario_responsavel_id!==E.a.sessao.dados.usuario_id;o.onclose=t,o.show(a.oportunidade_agenda_id,window.FORMULARIO.EDITAR,null,a.oportunidade_id,null,i)}));break;case c.crmOportunidadeOrcamento:l.a.get("oportunidade_orcamento/objeto/",{oportunidade_orcamento_id:a.oportunidade_orcamento_id},(function(e){P.a.load("orcamento/detalhes",((o,i)=>{i.onclose=t,i.show(window.FORMULARIO.VISUALIZAR,a.oportunidade_orcamento_id,e)}),P.a.ABA.MULTIPLAS)}))}}}var y=t(793),R=t(738),D=t(550),M=t.n(D);class k extends i.a.Component{constructor(e){var a,t;super(e),this.listPendencias=async e=>{let a=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS;return await l.a.get("central_pendencias/listar_modulos/",{tipo_listagem:e},null,null,null,null,null,null,null,!0)}(e);this.setState({countModulos:a.count_pendencias,chartModulos:a.chart_pendencias,tipoListagem:e})},this.handleCardClick=this.handleCardClick.bind(this),this.listPendencias=this.listPendencias.bind(this);let o=window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS;this.keyCount=0,this.parametrosUsuario=E.a.get_parametro_usuario("central_pendencias_grid"),this.parametroCockpit=E.a.get_parametro_usuario("central_pendencias_cockpit"),this.parametrosUsuario&&"undefined"!==typeof this.parametrosUsuario.tipoListagem&&null!==this.parametrosUsuario.tipoListagem&&(o=this.parametrosUsuario.tipoListagem),this.state={dataSource:[],countModulos:{},chartModulos:[],filtroModulo:null,filtroEntidade:null!==(a=this.props.filtroEntidade)&&void 0!==a?a:null,tipoListagem:o,cockpitExpandido:null===(t=this.parametroCockpit.cockpitExpandido)||void 0===t||t},this.listPendencias(o)}render(){return Object(S.jsxs)(i.a.Fragment,{children:[Object(S.jsx)(M.a,{dataSource:["Cockpit, clique para expandir/retrair"],collapsible:!0,selectedIndex:this.state.cockpitExpandido?0:-1,onSelectionChanged:e=>{this.setState({cockpitExpandido:e.component.instance().option("selectedItems").length>0}),E.a.set_parametro_usuario("central_pendencias_cockpit",{cockpitExpandido:e.component.instance().option("selectedItems").length>0})},itemRender:()=>Object(S.jsx)(y.default,{data:JSON.stringify(this.state.countModulos),isCentralPendencias:!0,fnHandleCardClick:this.handleCardClick})}),Object(S.jsxs)(n.a,{swipeEnabled:!1,children:[Object(S.jsx)(s.Item,{title:"Lista",icon:"bulletlist",children:Object(S.jsx)(T,{tipoListagem:this.state.tipoListagem,listPendencias:this.listPendencias,filtroModulo:this.state.filtroModulo,filtroEntidade:this.state.filtroEntidade,cockpitExpandido:this.state.cockpitExpandido},"listarPendencias")}),Object(S.jsx)(s.Item,{title:"Gr\xe1ficos",icon:"chart",children:Object(S.jsx)(R.a,{customHeightCalcContainer:this.state.cockpitExpandido?"285px":"117px",customHeightCalcCharts:this.state.cockpitExpandido?"320px":"152px",dataSource:this.state.chartModulos,argumentField:"modulo",series:[{valueField:"atrasado",name:"Atrasado",color:"#b80000"},{valueField:"noPrazo",name:"No Prazo",color:"#699"}],seriesPie:[{argumentField:"desc_situacao",valueField:"qtd_situacao",name:"Situa\xe7\xe3o"}],customizePoint:e=>{let a=null;return"atrasado"===e.data.situacao?a="#b80000":"noPrazo"===e.data.situacao&&(a="#699"),{color:a}},chartTypes:["bar","pie","donut"]})})]},this.getKey())]})}getKey(){return this.keyCount++}handleCardClick(e,a){this.setState({filtroModulo:e})}}k.defaultProps={abaTitulo:"Central de Pend\xeancias"}},1084:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262),l=t(254);var c=[{id:"D",descricao:"Divisor"},{id:"M",descricao:"Multiplicador"}],u=t(244);class p extends l.Column{}p.defaultProps={dataField:"tipo_conversao",caption:"Tipo Convers\xe3o",dataType:"string",width:150,children:Object(u.jsx)(l.Lookup,{dataSource:c,displayExpr:"descricao",valueExpr:"id"})};var m=t(376);const h=e=>Object(u.jsx)(m.a,{tamanho:25,documentoId:e.data.foto_id,imgAlternativa:"assets/img/icones_bp/img.svg"});class _ extends i.a.Component{constructor(e){super(e),this.state={itemLogo:"",itemCodigo:"",itemNickname:"",itemDescricao:"",itemPreco:"",itemPrecoMinimo:"",itemParametros:null},this.getParametrosItem=this.getParametrosItem.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}getParametrosItem(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this;r.a.get("itens/get_parametros/",null,(function(o){t.setState({itemParametros:o},(()=>{a&&e.component.repaint()}))}))}componentDidMount(){this.getParametrosItem()}onToolbarPreparing(e){let a=this;const t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Item",text:"Novo Item",onClick:function(){window.View.load("itens/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)}},location:"after",name:"BtnNovoCliente",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar Itens",text:"Recarregar Itens",onClick:function(){this.listarItens=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("itens/configuracoes",(function(t,o){o.onclose=function(){a.getParametrosItem(e,!0)},o.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}render(){let e={};return e=null!==this.props.modulo_crm?{dx_grid:!0,modulo_crm:this.props.modulo_crm}:{dx_grid:!0},null!==this.state.itemParametros&&Object(u.jsx)(i.a.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(t=e,new d.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"item_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,o)=>{r.a.get({route:"itens/listar/",data:Object(n.a)(Object(n.a)({},a),t),func_response:a=>e(Object(n.a)(Object(n.a)({},window.createLoadExtra(a)),{},{data:a.data})),func_fail:e=>e.validation&&o(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))})}))},byKey:e=>!!e&&new Promise(((a,t)=>{r.a.get({route:"itens/listar/",data:{dx_grid:!0,item_id:e},func_response:e=>a(e.data),func_fail:e=>e.validation&&t(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))})}))})),stateStoring:Object(s.stateStoring)("listarItens"),children:(a=this.props.modulo_crm,[Object(u.jsx)(l.Column,{dataField:"foto_id",caption:"Foto",dataType:"string",allowSearch:!1,allowFiltering:!1,allowGrouping:!1,allowSorting:!1,width:100,minWidth:100,cellRender:h},"foto_id"),Object(u.jsx)(l.Column,{dataField:"codigo",caption:"C\xf3digo",dataType:"string",width:150,minWidth:150},"codigo"),Object(u.jsx)(l.Column,{dataField:"nickname",caption:"Nickname",dataType:"string",width:150,minWidth:150},"nickname"),Object(u.jsx)(l.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string",width:350,minWidth:350},"descricao"),Object(u.jsx)(l.Column,{dataField:"preco",caption:"Pre\xe7o",dataType:"number",allowSearch:!1,allowFiltering:!1,allowGrouping:!1,allowSorting:!1,width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"currency",precision:2})},"preco"),Object(u.jsx)(l.Column,{dataField:"preco_minimo",caption:"Pre\xe7o M\xednimo",dataType:"number",allowSearch:!1,allowFiltering:!1,allowGrouping:!1,allowSorting:!1,width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"currency",precision:2})},"preco_minimo"),Object(u.jsx)(l.Column,{dataField:"desc_unidade_medida",caption:"Unidade",dataType:"string",width:150,minWidth:150},"desc_unidade_medida"),Object(u.jsx)(l.Column,{dataField:"desc_unidade_medida2",caption:"Segunda Unidade",dataType:"string",width:150,minWidth:150},"desc_unidade_medida2"),Object(u.jsx)(l.Column,{dataField:"fator_conversao",caption:"Fator",dataType:"number",width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"fixedPoint",precision:2})},"fator"),Object(u.jsx)(l.Column,{dataField:"comissao",caption:"Comiss\xe3o",dataType:"number",width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"currency",precision:2})},"comissao"),Object(u.jsx)(l.Column,{dataField:"custo",caption:"Custo",dataType:"number",width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"currency",precision:2})},"custo"),Object(u.jsx)(l.Column,{dataField:"peso_bruto",caption:"Peso Bruto",dataType:"number",width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"fixedPoint",precision:2})},"peso_bruto"),Object(u.jsx)(l.Column,{dataField:"peso_liquido",caption:"Peso L\xedquido",dataType:"number",width:150,minWidth:150,children:Object(u.jsx)(l.Format,{type:"fixedPoint",precision:2})},"peso_liquido"),Object(u.jsx)(l.Column,{dataField:"desc_tipo_item",caption:"Tipo",dataType:"string",width:200,minWidth:200},"desc_tipo_item"),Object(u.jsx)(l.Column,{dataField:"desc_grupo_item",caption:"Grupo",dataType:"string",width:200,minWidth:200},"desc_grupo_item"),Object(u.jsx)(l.Column,{dataField:"desc_familia_item",caption:"Fam\xedlia",dataType:"string",width:200,minWidth:200},"desc_familia_item"),Object(u.jsx)(p,{},"tipo_conversao"),Object(u.jsxs)(l.Column,{type:"buttons",children:[Object(u.jsx)(l.Button,{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:e=>{window.View.load("itens/detalhes",((t,o)=>{o.onclose=e.component.refresh,o.show(e.row.data.item_id,window.FORMULARIO.EDITAR,null,a)}),window.View.ABA.MULTIPLAS)}}),Object(u.jsx)(l.Button,{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:e=>{window.View.load("itens/detalhes",((t,o)=>{o.onclose=e.component.refresh,o.show(e.row.data.item_id,window.FORMULARIO.VISUALIZAR,null,a)}),window.View.ABA.MULTIPLAS)}}),Object(u.jsx)(l.Button,{hint:"Alterar foto",icon:"fas fa-image",cssClass:"icon_black",onClick:e=>{window.View.load("itens/alterar_foto",((a,t)=>{t.onclose=e.component.refresh,t.show({item_id:e.row.data.item_id,tipo:window.FORMULARIO.EDITAR})}))}}),Object(u.jsx)(l.Button,{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:e=>{window.View.load("itens/detalhes",((t,o)=>{o.onclose=e.component.refresh,o.show(e.row.data.item_id,window.FORMULARIO.EXCLUIR,null,a)}),window.View.ABA.MULTIPLAS)}})]})])})})})});var a,t}}_.defaultProps={abaTitulo:"Item",modulo_crm:null};a.default=_},1085:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return g}));var o=t(247),i=t(267),s=t(496),n=t(271),r=t(280),d=t(350),l=t(254),c=t(576),u=t(253),p=t(244);const m=e=>[Object(p.jsx)(l.Column,{lookup:{dataSource:{store:{type:"array",data:e,key:"id_usuario_grupo"},pageSize:10,paginate:!0},displayExpr:"nome",valueExpr:"id_usuario_grupo"},dataField:"integrante_id",caption:"Integrante"},"integrante_id"),Object(p.jsx)(l.Column,{lookup:{dataSource:s.b,displayExpr:"descricao",valueExpr:"id"},dataField:"tipo_permissao"},"tipo_permissao")];var h=t(296),_=t(313);var f=function(e){let{cadastro_generico_id:a,abaTitulo:t="Equipe Cadastro Gen\xe9rico",onClose:n}=e;const[r,d]=Object(o.useState)([]),c=Object(o.useRef)(null);Object(o.useEffect)((()=>((async()=>{const e=await u.a.get("usuario/listar_usuarios_grupos/",{equipe_interna:!0,listar_bloqueados:!0,listar_grupos:!0,limite:null},null,null,null,null,null,null,null,!0);d(e)})(),()=>{n&&n()})),[n]);const f=Object(o.useCallback)((e=>{c.current=e.component;const t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar ao cadastro",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(let o of e.toolbarOptions.items)"saveButton"===o.name&&(o.options.onClick=()=>{const t=e.component.getController("data")._items.filter((e=>!e.removed)).map((e=>e.data));Object(s.f)(a,t,(()=>{e.component.saveEditData()}))})}),[a]),b=Object(o.useMemo)((()=>[...m(r),Object(p.jsxs)(l.Column,{type:"buttons",width:110,children:[Object(p.jsx)(h.a,{visible:e=>!e.row.removed&&!e.row.data.padrao,onClick:e=>c.current.deleteRow(e.row.rowIndex)}),Object(p.jsx)(_.a,{visible:e=>e.row.removed,onClick:e=>{c.current.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"buttons")]),[r]);return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(i.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(i.stateStoring)("DataGridCadastrosGenericos"),onToolbarPreparing:f,dataSource:Object(s.a)(a),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:b})})})},b=t(796);const v=()=>[Object(p.jsx)(r.a,{width:700},"nome"),Object(p.jsx)(l.Column,{dataField:"formulario_id",caption:"Formul\xe1rio",calculateDisplayValue:e=>null!==e&&void 0!==e&&e.formulario_id?e.formulario_id+" - "+e.formulario_nome:"",setCellValue:async(e,a)=>{e.formulario_id=a},editCellComponent:e=>{var a,t,o,i,s;const n=null!==(a=null===(t=e.data)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.formulario_id)&&void 0!==a?a:"";return Object(p.jsx)(c.default,{selecionado:String(n),readOnly:!(null===(i=e.data)||void 0===i||null===(s=i.data)||void 0===s||!s.id),aoAlterar:(a,t)=>{e.data.setValue(String(a),a+" - "+t.nome)}})},width:500},"formulario_id"),Object(p.jsx)(d.a,{dataField:"nome_tabela",caption:"Nome da Tabela",width:500,allowGrouping:!1,allowHeaderFiltering:!1,allowEditing:e=>{var a,t;return!(null!==(a=e.row)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.id)},editorOptions:{maxLength:50},setCellValue:(e,a)=>{const t=a.startsWith("c_")?a:"c_".concat(a.substr(0,48));e.nome_tabela=t}},"nome_tabela"),Object(p.jsxs)(l.Column,{type:"buttons",children:[Object(p.jsx)(l.Button,{icon:"contentlayout",hint:"Visualizar Dados",onClick:e=>{var a;const t=null===(a=e.row)||void 0===a?void 0:a.data;n.a.loadReact(b.default,{nome_tabela:t.nome_tabela,formulario_id:t.formulario_id,cadastro_generico_id:t.id,abaTitulo:"Dados de "+t.nome,tipo_permissao:t.tipo_permissao,onClose:()=>e.component.refresh()},(function(e){}),n.a.ABA.SIM)},visible:e=>{var a,t;return!(null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t||!t.id)}}),Object(p.jsx)(l.Button,{icon:"group",hint:"Gerenciar Equipe",onClick:e=>{var a;null===(a=e.row)||void 0===a||a.data;n.a.loadReact(f,{cadastro_generico_id:e.row.data.id,abaTitulo:"Equipe "+e.row.data.nome,onClose:function(){e.component.refresh()}},(function(e){}),n.a.ABA.MULTIPLAS)},visible:e=>{var a,t;return!(null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t||!t.id)&&2==e.row.data.tipo_permissao}}),Object(p.jsx)(l.Button,{name:"delete",visible:e=>2==e.row.data.tipo_permissao})]},"botoes")];function g(e){const{html_id:a}=e,t=Object(o.useRef)(null);return Object(p.jsx)("div",{style:{width:"100%"},children:Object(p.jsx)(i.default,{ref:t,style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(i.stateStoring)("listagemCadastrosGenericos"),dataSource:Object(s.c)(),editing:{mode:"batch",allowUpdating:!0,allowAdding:!0,allowDeleting:!0},onSaving:e=>{e.cancel=!0,e.changes.length&&(e.promise=new Promise(((a,t)=>{Object(s.e)({alteracoes:e.changes,func_response:t=>{a(t),e.component.refresh(!0).done((()=>{e.component.cancelEditData()}))},func_fail:e=>t(e)})})))},onEditorPreparing:e=>{var a,t;"nome_tabela"===e.dataField&&null!==(a=e.row)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.id&&(e.editorOptions.readOnly=!0)},children:v()})})}g.defaultProps={abaTitulo:"Cadastros Gen\xe9ricos"}},1086:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(395),n=t.n(s),r=t(267),d=t(374),l=t.n(d),c=t(253),u=t(87),p=t(713),m=t(330),h=t(493),_=t(244);function f(e){let{card:a,main:t}=e;switch(parseInt(a.situacao_id)){case window.PDCA_SITUACAO.NAO_INICIADO:a.label="danger";break;case window.PDCA_SITUACAO.EM_ANDAMENTO:a.label="info";break;case window.PDCA_SITUACAO.CONCLUIDO:a.label="success";break;default:a.label=""}return Object(_.jsxs)("div",{className:"card dx-card dx-theme-text-color dx-theme-background-color",children:[Object(_.jsx)("div",{className:"card-label card-label-".concat(a.label)}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:["ID: ",a.pdca_id]}),Object(_.jsx)("div",{className:"col-md-8 card-subject",children:a.numero})]}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",style:{paddingRight:"5px"},children:a.objetivo})}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"In\xedcio"}),Object(_.jsxs)("div",{className:"col-md-8",children:[Object(_.jsx)("i",{className:"fas fa-calendar-day"})," ",window.formatar_data_humano(a.data_inicio)]})]}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"Fim"}),Object(_.jsxs)("div",{className:"col-md-8",children:[Object(_.jsx)("i",{className:"fas fa-calendar-day"})," ",window.formatar_data_humano(a.data_fim)]})]}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"Progresso"}),Object(_.jsx)("div",{className:"col-md-8",children:Object(_.jsx)(p.ProgressBar,{min:0,max:100,value:parseInt(a.progresso),onContentReady:e=>{e.component.element().find(".dx-progressbar-container").css("height","10px")}})})]}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"Bot\xf5es"}),Object(_.jsx)("div",{className:"col-md-8",style:{paddingRight:"0px"},children:h.a.buttons.map((e=>{const o={row:{data:a},component:{refresh:()=>{t.requestLists(t.props.arrColumns)}}};return Object(_.jsx)(m.Button,{icon:e.icon,hint:e.hint,onClick:()=>{e.onClick(o)},visible:!e.visible||e.visible(o)},window.md5(Math.random()+new Date))}))})]})]})}var b=t(737),v=t(1034),g=t.n(v);class w extends i.a.Component{constructor(e){super(e),this.requestLists=async function(e){const a=[];for(let o=0;o<e.length;o++){const i=e[o];var t=await this.requestList(i.id);this.props.arrColumns[o].skip=0,a.push(t)}this.setState({lists:a})},this.requestList=async function(e,a){const t=[this.props.columnFilterKey,"=",e],o=this.state.filterValue?[t,"and",this.state.filterValue]:t;return await c.a.get(this.props.route,{dx_grid:!0,skip:a||0,take:this.props.take,requireTotalCount:!0,filter:JSON.stringify(o)},null,null,null,null,null,null,null,!0)},this.keyCount=0,this.getKey=this.getKey.bind(this);const a=this.props.arrColumns;this.state={arrColumns:a,lists:[],filterValue:u.a.get_parametro_usuario("KanbanPdca")?u.a.get_parametro_usuario("KanbanPdca").filtro:null},this.requestLists(a)}getKey(){return this.keyCount++}render(){return Object(_.jsxs)("div",{id:"kanban",className:"dx-theme-background-color",children:[Object(_.jsx)(l.a,{className:"scrollable-board",direction:"horizontal",showScrollbar:"always",children:this.state.lists.map(((e,a)=>{const t=this.state.arrColumns[a];return Object(_.jsx)(j,{title:t.descricao,index:a,cards:e,cardKey:this.props.cardKey,main:this},this.getKey())}))}),Object(_.jsx)(b.default,{fields:h.b,value:this.state.filterValue,onValueChanged:e=>{u.a.set_parametro_usuario("KanbanPdca",{filtro:e},(()=>{this.setState({filterValue:e},(()=>this.requestLists(this.state.arrColumns)))}))}})]})}}function j(e){let{title:a,index:t,cards:o,cardKey:i,main:s}=e;return Object(_.jsxs)("div",{className:"list ".concat(g.a.kanbanList),style:{height:"calc(100vh - 143px)"},children:[Object(_.jsx)("div",{className:"list-title dx-theme-text-color titulo_lista",children:a}),Object(_.jsx)(l.a,{style:{height:"calc(100vh - 174px)"},className:"scrollable-list",direction:"vertical",showScrollbar:"always",onReachBottom:o.data.length<o.totalCount?async e=>{s.props.arrColumns[t].skip+=s.props.take;var a=await s.requestList(s.props.arrColumns[t].id,s.props.arrColumns[t].skip),o=JSON.parse(JSON.stringify(s.state.lists));o[t].data=[...o[t].data,...a.data],o[t].totalCount=a.totalCount,s.setState({lists:o})}:null,onScroll:e=>{s.props.arrColumns[t].scrollOffset=e.scrollOffset},onInitialized:e=>{setTimeout((()=>{e.component.scrollTo(s.props.arrColumns[t].scrollOffset)}))},children:o.data.map((e=>Object(_.jsx)(f,{card:e,main:s},e[i].toString())))})]})}w.defaultProps={take:20,arrColumns:[],listKey:null,route:null};var O=t(738),x=t(271);class A extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo PDCA",text:"Novo PDCA",onClick:function(e){x.a.load("pdca/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),x.a.ABA.SIM)}},location:"after",name:"BtnNovoMotivoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de motivos",text:"Recarregar motivos",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){x.a.load("pdca/configuracoes",(function(e,a){a.show()}))},visible:u.a.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[].concat(h.b);return Object(_.jsx)(i.a.Fragment,{children:Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)(n.a,{swipeEnabled:!1,children:[Object(_.jsx)(s.Item,{title:"Lista",icon:"fas fa-list",children:Object(_.jsx)(r.default,{style:{height:"calc(100vh - 79px)"},stateStoring:Object(r.stateStoring)("DataGridPdca"),groupPanel:{visible:!1},onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(h.c)({dx_grid:!0}),columns:e})}),Object(_.jsx)(s.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(_.jsx)(w,{arrColumns:window.PDCA_SITUACAO_LOOKUP,columnKey:"id",cardKey:"pdca_id",route:"pdca/listar/",columnFilterKey:"situacao_id"})}),Object(_.jsx)(s.Item,{title:"Gr\xe1ficos",icon:"fas fa-chart-bar",children:Object(_.jsx)(O.a,{route:"pdca/listar_contagem/",argumentField:"situacao",series:[{valueField:"qtde_nao_iniciado",name:"N\xe3o Iniciado",color:"#b80000"},{valueField:"qtde_andamento",name:"Em Andamento",color:"#699"},{valueField:"qtde_concluido",name:"Conclu\xeddo",color:"#008a2e"}],seriesPie:[{valueField:"qtde_situacao_id",name:"Situa\xe7\xe3o"}],customizePoint:e=>{let a=null;switch(parseInt(e.data.situacao_id)){case window.PDCA_SITUACAO.NAO_INICIADO:a="#b80000";break;case window.PDCA_SITUACAO.EM_ANDAMENTO:a="#699";break;case window.PDCA_SITUACAO.CONCLUIDO:a="#008a2e";break;default:a="#1cb2f5"}return{color:a}},chartTypes:["bar","pie","donut"]})})]})})})})}}A.defaultProps={abaTitulo:"PDCA - 5W2H"};a.default=A},1087:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(262),d=t(253);var l=t(814),c=t(280),u=t(87),p=t(343),m=t(244);var h=t(254),_=t(296),f=t(313);class b extends i.a.Component{constructor(e){super(e),this.state={dataSource:new r.default({pageSize:20,key:"orcamento_template_word_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{d.a.get({route:"orcamento_template_word/listar/",data:Object(n.a)({},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),oportunidadeOrcamentoId:e.oportunidadeOrcamentoId||null,exibirDownloadDOCX:!e.exibirDownloadDOCX||!1!==e.exibirDownloadDOCX&&"N"!==e.exibirDownloadDOCX,exibirDownloadPDF:!e.exibirDownloadPDF||!1!==e.exibirDownloadPDF&&"N"!==e.exibirDownloadPDF},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}componentDidMount(){if(+this.state.oportunidadeOrcamentoId>0){const e="Gerar word do or\xe7amento #".concat(this.state.oportunidadeOrcamentoId);setTimeout((()=>u.a.titulo_aba(this.props.html_id,e)),1e3)}}render(){var e=(e,a)=>{let t=1;u.a.temp.empresa&&(t=u.a.temp.empresa);((e,t,o)=>{u.a.obter_token_publico((function(i){u.a.download(window.WS_URI+"oportunidade/gerar_word/?empresa_id="+e+"&oportunidade_orcamento_id="+t+"&orcamento_template_word_id="+o+"&tipo_download="+a+"&token_publico="+i)}))})(t,this.state.oportunidadeOrcamentoId,+e.row.data.orcamento_template_word_id)};const a=[Object(m.jsx)(c.a,{},"nome"),Object(m.jsx)(p.a,{allowEditing:!1,dataField:"update_hora",caption:"Ultima Altera\xe7\xe3o"},"update_hora"),Object(m.jsx)(c.a,{allowEditing:!1,dataField:"update_usuario_nome",caption:"Nome do usu\xe1rio"},"update_usuario_nome"),u.a.verifica_permissao(u.a.temp.empresa,"orcamento_template_word")?Object(m.jsx)(l.a,{exibirPrevisao:!1},"input_arquivo"):null,Object(m.jsxs)(h.Column,{type:"buttons",children:[Object(m.jsx)(h.Button,{visible:e=>+this.state.oportunidadeOrcamentoId>0&&+e.row.data.documento_id>0&&this.state.exibirDownloadDOCX,hint:"Download",icon:"fas fa-file-word",text:"Download",onClick:a=>{e(a,"docx")}},"btn_download_word"),Object(m.jsx)(h.Button,{visible:e=>+this.state.oportunidadeOrcamentoId>0&&+e.row.data.documento_id>0&&this.state.exibirDownloadPDF,hint:"Download",icon:"fas fa-file-pdf",text:"Download",onClick:a=>{e(a,"pdf")}},"btn_download_pdf"),Object(m.jsx)(_.a,{visible:e=>!e.row.removed&&u.a.verifica_permissao(u.a.temp.empresa,"orcamento_template_word"),onClick:e=>e.component.deleteRow(e.row.rowIndex)},"btn_apagar"),Object(m.jsx)(f.a,{visible:e=>e.row.removed&&u.a.verifica_permissao(u.a.temp.empresa,"orcamento_template_word"),onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}},"btn_recuperar")]},"buttons")];return Object(m.jsx)("div",{className:"template-word-listagem",children:Object(m.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_template_word"),editing:{mode:"batch",useIcons:!0,allowUpdating:u.a.verifica_permissao(u.a.temp.empresa,"orcamento_template_word")},selection:{mode:"multiple"},onInitNewRow:e=>{e.data={documento_id:0}},children:a},"grid_templates")})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Template Word",text:"Adicionar",visible:u.a.verifica_permissao(u.a.temp.empresa,"orcamento_template_word"),onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-word",hint:"Download do arquivo de exemplo docx",text:"Exemplo DOCX",visible:u.a.verifica_permissao(u.a.temp.empresa,"orcamento_template_word"),onClick:()=>{u.a.download(window.WS_ROOT+"/webservice/manual/docx/OrcamentoTemplateWord.docx")}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{let t={datagrid:e.component.getController("editing").getChanges()};d.a.post("/orcamento_template_word/salvar/",t,(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}),[],null,["datagrid.documento_id"])})}}}b.defaultProps={abaTitulo:"Templates Word de Or\xe7amentos"}},1088:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return f}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(262),d=t(253);var l=t(814),c=t(280),u=t(87),p=t(244);var m=t(254),h=t(296),_=t(313);class f extends i.a.Component{constructor(e){super(e),this.state={dataSource:new r.default({pageSize:20,key:"solicitacao_template_word_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{d.a.get({route:"solicitacao_template_word/listar/",data:Object(n.a)({},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),solicitacaoId:e.solicitacaoId||null,numero:e.numero||null,numero_solicitacao_por_processo:e.numeroSolicitacaoPorProcesso||"N",solicitacaoAtividadeId:e.solicitacaoAtividadeId||null},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}componentDidMount(){if(+this.state.solicitacaoId>0){const e="S"===this.state.numero_solicitacao_por_processo&&+this.state.numero>0?this.state.numero:this.state.solicitacaoId,a="Gerar word da solicita\xe7\xe3o #".concat(e);setTimeout((()=>u.a.titulo_aba(this.props.html_id,a)),1e3)}}render(){var e=(e,a)=>{let t=1;u.a.temp.empresa&&(t=u.a.temp.empresa);var o,i,s,n;o=t,i=this.state.solicitacaoId,s=this.state.solicitacaoAtividadeId,n=+e.row.data.solicitacao_template_word_id,u.a.obter_token_publico((function(e){u.a.download(window.WS_URI+"solicitacao/gerar_word/?empresa_id="+o+"&solicitacao_id="+i+"&solicitacao_atividade_id="+s+"&solicitacao_template_word_id="+n+"&tipo_download="+a+"&token_publico="+e)}))};const a=[Object(p.jsx)(c.a,{},"nome"),u.a.verifica_permissao(u.a.temp.empresa,"solicitacao_template_word")?Object(p.jsx)(l.a,{exibirPrevisao:!1},"input_arquivo"):null,Object(p.jsxs)(m.Column,{type:"buttons",children:[Object(p.jsx)(m.Button,{visible:e=>+this.state.solicitacaoId>0&&+e.row.data.documento_id>0&&(!u.a.verifica_permissao(u.a.temp.empresa,"restringir_solicitacao_pdf")||u.a.sessao.dados.admin),hint:"Download",icon:"fas fa-file-word",text:"Download",onClick:a=>{e(a,"docx")}},"btn_download_word"),Object(p.jsx)(m.Button,{visible:e=>+this.state.solicitacaoId>0&&+e.row.data.documento_id>0,hint:"Download",icon:"fas fa-file-pdf",text:"Download",onClick:a=>{e(a,"pdf")}},"btn_download_pdf"),Object(p.jsx)(h.a,{visible:e=>!e.row.removed&&u.a.verifica_permissao(u.a.temp.empresa,"solicitacao_template_word"),onClick:e=>e.component.deleteRow(e.row.rowIndex)},"btn_apagar"),Object(p.jsx)(_.a,{visible:e=>e.row.removed&&u.a.verifica_permissao(u.a.temp.empresa,"solicitacao_template_word"),onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}},"btn_recuperar")]},"buttons")];return Object(p.jsx)("div",{className:"template-word-listagem",children:Object(p.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_template_word"),editing:{mode:"batch",useIcons:!0,allowUpdating:u.a.verifica_permissao(u.a.temp.empresa,"solicitacao_template_word")},selection:{mode:"multiple"},onInitNewRow:e=>{e.data={documento_id:0}},children:a},"grid_templates")})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Template Word",text:"Adicionar",visible:u.a.verifica_permissao(u.a.temp.empresa,"solicitacao_template_word"),onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-word",hint:"Download do arquivo de exemplo docx",text:"Exemplo DOCX",visible:u.a.verifica_permissao(u.a.temp.empresa,"solicitacao_template_word"),onClick:()=>{u.a.download(window.WS_ROOT+"/webservice/manual/docx/SolicitacaoTemplateWord.docx")}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{let t={datagrid:e.component.getController("editing").getChanges()};d.a.post("/solicitacao_template_word/salvar/",t,(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}),[],null,["datagrid.documento_id"])})}}}f.defaultProps={abaTitulo:"Templates Word de Solicita\xe7\xf5es"}},1089:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return x}));var o=t(247),i=t.n(o),s=t(742),n=t(395),r=t.n(n),d=t(87),l=t(271),c=t(307),u=t.n(c),p=t(786),m=t(244);class h extends i.a.Component{constructor(e){super(e),this.state={favorito:e.favorito},this.favoritar.bind(this)}favoritar(e){window.favoritar_item("solicitacoes",this.props.processo_id,e),this.setState({favorito:e},(()=>{this.props.callbackFavorito&&this.props.callbackFavorito(e)}))}btnFavoritarClick(){this.favoritar(!0)}btnDesfavoritarClick(){this.favoritar(!1)}nova_solicitacao(e,a){l.a.load("solicitacao/nova",((t,o)=>{o.onclose=a,o.show({processo_id:e})}))}cardClick(e){l.a.loadReact(p.a,{processo_id:this.props.processo_id},(function(e){}),l.a.ABA.SIM)}render(){return Object(m.jsx)(i.a.Fragment,{children:Object(m.jsxs)("div",{style:{margin:"5px",backgroundColor:"white",width:"200px",height:"150px",boxSizing:"border-box",boxShadow:"2px 2px 1px rgb(218, 218, 218)",borderRadius:"8px",cursor:"pointer"},onClick:this.cardClick.bind(this),children:[Object(m.jsx)("div",{style:{backgroundColor:this.props.cor,height:"10px",position:"relative",top:"140px",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},children:"\xa0"}),Object(m.jsxs)("div",{style:{display:"block",marginLeft:"20px",marginRight:"20px"},children:[Object(m.jsx)("div",{style:{cursor:"auto"},onClick:e=>e.stopPropagation(),children:Object(m.jsx)(u.a,{children:[Object(m.jsx)(c.Item,{location:"before",locateInMenu:"never",children:Object(m.jsx)("img",{src:"assets/img/icones_bp/processos.svg",width:"16px",alt:""})},"icone"),Object(m.jsx)(c.Item,{location:"after",visible:!this.state.favorito,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Favoritar",hint:"Favoritar",icon:"far fa-star",stylingMode:"text",onClick:this.btnFavoritarClick.bind(this)}},"favoritar"),Object(m.jsx)(c.Item,{location:"after",visible:this.state.favorito,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Desfavoritar",hint:"Desfavoritar",icon:"fas fa-star",stylingMode:"text",onClick:this.btnDesfavoritarClick.bind(this)}},"desfavoritar"),Object(m.jsx)(c.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",visible:this.props.ativo,widget:"dxButton",options:{text:"Nova Solicita\xe7\xe3o",hint:"Nova Solicita\xe7\xe3o",icon:"fa fa-plus",stylingMode:"text",onClick:()=>this.nova_solicitacao(this.props.processo_id)}},"nova_solicitacao")]})}),Object(m.jsx)("div",{style:{fontSize:"12px",marginTop:"5px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",height:"44px"},title:this.props.titulo,children:this.props.titulo}),Object(m.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted",title:this.props.subtitulo,children:this.props.subtitulo}),this.props.ativo?"":Object(m.jsx)("label",{className:"label label-default",children:"Inativo"})]})]})})}}h.defaultProps={titulo:"Lorem ipsum dolor sit amet. Nunc a diam at risus congue cursus eget at justo.",icone:"",cor:"black",subtitulo:"Nulla facilisi. Donec suscipit lectus eget augue ultrices, at ullamcorper turpis efficitur. Praesent bibendum lobortis interdum. Phasellus fermentum congue erat, eget finibus ipsum",favorito:!1,ativo:!1};var _=t(735),f=t(321),b=t.n(f),v=t(484),g=t(396),w=t(357);class j extends i.a.Component{constructor(e){var a;super(e),this.state={lista:e.lista,listaTodosProcessos:!1,info_tipo_listagem:'Listando "Meus Processos"',filtroProcessoNome:null!==(a=null===e||void 0===e?void 0:e.filtroProcessoNome)&&void 0!==a?a:null},this.listar.bind(this)}async componentDidMount(){await this.listar()}async listar(){const e={listaTodosProcessos:this.state.listaTodosProcessos};this.setState({lista:await Object(g.listarProcessosDisponiveis)(e)})}btnListarMeusProcessosClick(){this.setState({listaTodosProcessos:!1,info_tipo_listagem:'Listando "Meus Processos"'}),this.listar()}btnListarTodosProcessosClick(){this.setState({listaTodosProcessos:!0,info_tipo_listagem:'Listando "Todos Processos"'}),this.listar()}processoNomeValueChange(e){this.setState({filtroProcessoNome:e.value})}render(){const e=e=>Object(m.jsx)(h,{processo_id:e.processo_id,titulo:e.nome,subtitulo:e.categoria_processos_nome,cor:e.categoria_processos_cor_fundo,favorito:e.favorito,callbackFavorito:()=>this.listar(),dias_corridos_data_referencia:e.dias_corridos_data_referencia,inicios:e.inicios,ativo:e.ativo},window.elem_key_random()),a=e=>!this.state.filtroProcessoNome||e.nome.toLowerCase().includes(this.state.filtroProcessoNome.toLowerCase())||""!=e.categoria_processos_nome&&e.categoria_processos_nome.toLowerCase().includes(this.state.filtroProcessoNome.toLowerCase());let t=this.state.lista.filter(a).filter((e=>!0===e.favorito)).map(e),o=[],s="",n=[];const r=()=>{o.push(Object(m.jsx)("div",{style:{flexBasis:"100%",height:0}})),o.push(Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)("div",{style:{display:"block",fontSize:"18px",marginLeft:"10px",marginTop:"10px"},children:s}),Object(m.jsx)("div",{style:{display:"inline-flex",flexWrap:"wrap"},children:n})]})),n=[]};this.state.lista.filter(a).forEach((a=>{""!==s&&a.categoria_processos_nome!==s&&r(),s=a.categoria_processos_nome,n.push(e(a))})),r();const p=d.a.verifica_permissao(d.a.temp.empresa,"processo")?Object(m.jsx)(v.Button,{stylingMode:"text",onClick:e=>{l.a.loadReact(_.default,{},(function(e){}),l.a.ABA.SIM)},children:"Criar um processo..."}):null;return Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(u.a,{children:[Object(m.jsx)(c.Item,{location:"before",visible:d.a.sessao.dados.admin||d.a.sessao.dados.tipo==window.USUARIO_TIPO.CLIENTE,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Listar Meus Processos",hint:"Listar Meus Processos",icon:"fa fa-user",stylingMode:"text",onClick:this.btnListarMeusProcessosClick.bind(this)}},"meus_processos"),Object(m.jsx)(c.Item,{location:"before",visible:d.a.sessao.dados.admin||d.a.sessao.dados.tipo==window.USUARIO_TIPO.CLIENTE,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Listar Todos Processos",hint:"Listar Todos Processos",icon:"fa fa-users",stylingMode:"text",onClick:this.btnListarTodosProcessosClick.bind(this)}},"todos_processos"),Object(m.jsx)(c.Item,{location:"before",showText:"always",locateInMenu:"auto",text:this.state.info_tipo_listagem,cssClass:"text-muted"},"info_tipo_listagem"),Object(m.jsx)(c.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",children:Object(m.jsx)(b.a,{width:"160px",label:"Filtro",labelMode:"static",value:this.state.filtroProcessoNome,onValueChanged:this.processoNomeValueChange.bind(this)})},"edtFiltroProcessoNome")]}),Object(m.jsxs)(v.ScrollView,{useNative:!0,style:{height:"calc(100vh - 118px)"},children:[Object(m.jsxs)("div",{style:{display:0===t.length?"none":"block",fontSize:"18px",marginLeft:"10px",marginTop:"10px"},children:[Object(m.jsx)("i",{className:"fas fa-star"})," Favoritos"]}),Object(m.jsx)("div",{style:{display:0===t.length?"none":"inline-flex",flexWrap:"wrap"},children:t}),Object(m.jsx)("div",{children:o}),Object(m.jsx)("div",{style:{display:0===o.length?"flex":"none",justifyContent:"center",alignItems:"center",height:"calc(100vh - 85px)"},children:Object(m.jsxs)("div",{className:"text-muted",style:{padding:"10px",textAlign:"center",minHeight:"140px"},children:[Object(m.jsx)(w.b,{}),Object(m.jsx)("h5",{children:"Ainda n\xe3o h\xe1 processo"}),Object(m.jsx)("p",{children:"Seus processos ser\xe3o exibidos aqui"}),p]})})]})]})}}j.defaultProps={lista:[]};var O=t(808);class x extends i.a.Component{constructor(e){super(e),this.state={tabPanelSelectedIndex:e.filtro_solicitacao_id||e.filtro_solicitacao_numero?1:0}}tabPanelOnSelectionChanged(e){this.setState({tabPanelSelectedIndex:e.selectedIndex})}render(){return Object(m.jsx)(i.a.Fragment,{children:Object(m.jsxs)(r.a,{selectedIndex:this.state.tabPanelSelectedIndex,onSelectionChanged:this.tabPanelOnSelectionChanged.bind(this),swipeEnabled:!1,children:[Object(m.jsx)(n.Item,{title:"Processos",icon:"assets/img/icones_bp/processos.svg",children:Object(m.jsx)(j,{})}),Object(m.jsx)(n.Item,{title:"Minhas Atividades",icon:"fas fa-tasks",children:Object(m.jsxs)(r.a,{onSelectionChanged:this.tabPanelOnSelectionChanged.bind(this),swipeEnabled:!1,children:[Object(m.jsx)(n.Item,{title:"Lista",icon:"fas fa-list-ul",children:Object(m.jsx)(s.a,{filtro_solicitacao_id:this.props.filtro_solicitacao_id,filtro_solicitacao_numero:this.props.filtro_solicitacao_numero,filtro_tipo_listagem:this.props.filtro_tipo_listagem,filtro_solicitante:this.props.filtro_solicitante,filtro_responsavel:this.props.filtro_responsavel,filtro_cliente:this.props.filtro_cliente,subtractHeight:"72px"})}),Object(m.jsx)(n.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(m.jsx)(O.a,{processo_id:-1,subtractHeight:"72px",filtro_tipo:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS})})]})}),Object(m.jsx)(n.Item,{title:"Supervisionados",icon:"fas fa-tasks",visible:"S"===window.App.sessao.dados.supervisor_processo||"S"===window.App.sessao.dados.supervisor_processo_usuario||"S"===window.App.sessao.dados.supervisor_processo_grupo_usuario,children:Object(m.jsxs)(r.a,{onSelectionChanged:this.tabPanelOnSelectionChanged.bind(this),swipeEnabled:!1,children:[Object(m.jsx)(n.Item,{title:"Lista",icon:"fas fa-list-ul",children:Object(m.jsx)(s.a,{filtro_tipo_listagem:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,exibirAlertaFiltrosAdicionais:!1,subtractHeight:"72px"})}),Object(m.jsx)(n.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(m.jsx)(O.a,{processo_id:-1,subtractHeight:"72px",filtro_tipo:window.SOLICITACAO_FILTROS.SUPERVISIONADOS})})]})})]})})}}x.defaultProps={abaTitulo:"Solicita\xe7\xf5es de Processos"}},1090:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return g}));var o=t(248),i=t(247),s=t.n(i),n=t(271),r=t(267),d=t(262),l=t(253);var c=t(254),u=t(349),p=t(280),m=t(442),h=t(749),_=t(564),f=t(750),b=t(244);const v=[Object(b.jsx)(u.a,{dataField:"oportunidade_id"},"oportunidade_id"),Object(b.jsx)(p.a,{dataField:"nome_motivo_perda",caption:"Motivo Perda"},"nome_motivo_perda"),Object(b.jsx)(h.a,{dataField:"valor_negocio",caption:"Valor Neg\xf3cio"},"valor_negocio"),Object(b.jsx)(_.a,{dataField:"tipo_moeda_simbolo",caption:"Moeda"},"tipo_moeda_simbolo"),Object(b.jsx)(f.a,{dataField:"situacao"},"situacao"),Object(b.jsx)(m.a,{dataField:"data_situacao",caption:"Data Situa\xe7\xe3o"},"data_situacao"),Object(b.jsx)(p.a,{},"nome"),Object(b.jsx)(p.a,{dataField:"nome_entidade",caption:"Entidade"},"nome_entidade")];class g extends s.a.Component{constructor(e){var a,t,i;super(e),this.state={motivoPerdaId:e.motivoPerdaId||null,diaInicio:e.diaInicio||null,diaFim:e.diaFim||null},this.state=Object(o.a)(Object(o.a)({},this.state),{},{dataSource:(a=this.state.motivoPerdaId,t=this.state.diaInicio,i=this.state.diaFim,new d.default({pageSize:20,key:"oportunidade_id",load:e=>{let s=window.loadOptionsToActionParams(e);return new Promise(((e,n)=>{l.a.get({route:"motivo_perda_negocio_relatorio/listar/",data:Object(o.a)(Object(o.a)({},s),{},{dx_grid:!0,motivo_perda_id:a,dia_inicio:t,dia_fim:i}),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))}),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...v,Object(b.jsx)(c.Column,{type:"buttons",children:Object(b.jsx)(c.Button,{visible:e=>+e.row.data.oportunidade_id>0,hint:"Visualizar Oportunidade",icon:"fa fa-pencil-alt",text:"Ver oportunidade",onClick:e=>{n.a.load("oportunidade/detalhes",((a,t)=>{t.show(+e.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),n.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.row.data.oportunidade_id})}},"btn_visualizar")},"buttons")];return Object(b.jsx)(r.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,editing:{allowUpdating:!1,allowDeleting:!1,allowAdding:!1},selection:{mode:"none"},children:e},"grid_relatorio")}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}g.defaultProps={abaTitulo:"Relat\xf3rio Motivo de Perda de Neg\xf3cio",motivoPerdaId:null}},1091:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return g}));var o=t(248),i=t(247),s=t.n(i),n=t(271),r=t(267),d=t(262),l=t(253);var c=t(254),u=t(349),p=t(280),m=t(442),h=t(749),_=t(564),f=t(750),b=t(244);const v=[Object(b.jsx)(u.a,{dataField:"oportunidade_id"},"oportunidade_id"),Object(b.jsx)(p.a,{dataField:"nome_origem",caption:"Origem"},"nome_origem"),Object(b.jsx)(h.a,{dataField:"valor_negocio",caption:"Valor Neg\xf3cio"},"valor_negocio"),Object(b.jsx)(_.a,{dataField:"tipo_moeda_simbolo",caption:"Moeda"},"tipo_moeda_simbolo"),Object(b.jsx)(f.a,{dataField:"situacao"},"situacao"),Object(b.jsx)(m.a,{dataField:"data_situacao",caption:"Data Situa\xe7\xe3o"},"data_situacao"),Object(b.jsx)(p.a,{},"nome"),Object(b.jsx)(p.a,{dataField:"nome_entidade",caption:"Entidade"},"nome_entidade")];class g extends s.a.Component{constructor(e){var a,t,i;super(e),this.state={oportunidadeOrigemId:e.oportunidadeOrigemId||null,diaInicio:e.diaInicio||null,diaFim:e.diaFim||null},this.state=Object(o.a)(Object(o.a)({},this.state),{},{dataSource:(a=this.state.oportunidadeOrigemId,t=this.state.diaInicio,i=this.state.diaFim,new d.default({pageSize:20,key:"oportunidade_id",load:e=>{let s=window.loadOptionsToActionParams(e);return new Promise(((e,n)=>{l.a.get({route:"oportunidade_origem_relatorio/listar/",data:Object(o.a)(Object(o.a)({},s),{},{dx_grid:!0,oportunidade_origem_id:+a,dia_inicio:t,dia_fim:i}),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))}),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...v,Object(b.jsx)(c.Column,{type:"buttons",children:Object(b.jsx)(c.Button,{visible:e=>+e.row.data.oportunidade_id>0,hint:"Visualizar Oportunidade",icon:"fa fa-pencil-alt",text:"Ver oportunidade",onClick:e=>{n.a.load("oportunidade/detalhes",((a,t)=>{t.show(+e.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),n.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.row.data.oportunidade_id})}},"btn_visualizar")},"buttons")];return Object(b.jsx)(r.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,editing:{allowUpdating:!1,allowDeleting:!1,allowAdding:!1},selection:{mode:"none"},children:e},"grid_relatorio")}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}g.defaultProps={abaTitulo:"Relat\xf3rio Oportunidades por Origem",oportunidadeOrigemId:null}},1092:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(271),n=t(253),r=t(87),d=t(267),l=t(254),c=t(751),u=t(280);class p extends l.Column{}p.defaultProps={dataField:"consulta_integracao_id",caption:"Consulta Integra\xe7\xe3o"};var m=t(343),h=t(244);var _=t(315),f=t(296),b=t(313),v=t(794),g=t(752);class w extends i.a.Component{constructor(e){super(e),this.getDatasourceConsultaIntegracao=async function(){const e=await n.a.get("consulta_integracao/listar/",null,null,null,null,null,null,null,null,!0);this.setState({datasourceConsultaIntegracao:e})},this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.dataGrid=null,this.state={datasourceConsultaIntegracao:[]},this.getDatasourceConsultaIntegracao()}onToolbarPreparing(e){this.dataGrid=e.component;const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cubo",text:"Adicionar",visible:r.a.verifica_permissao(r.a.temp.empresa,"cricao_cubos"),onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var t=0;t<e.toolbarOptions.items.length;t++){const a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=e.component.getController("editing").getChanges();Object(c.c)(t,(a=>{e.component.saveEditData()}))})}}render(){const e=[...(a=this.state.datasourceConsultaIntegracao,[Object(h.jsx)(u.a,{},"nome"),Object(h.jsx)(p,{lookup:{dataSource:a,displayExpr:"nome",valueExpr:"consulta_id"}},"consulta_id"),Object(h.jsx)(m.a,{allowEditing:!1,dataField:"ultima_execucao",caption:"Ultima Execu\xe7\xe3o",width:180,allowGrouping:!1,allowHeaderFiltering:!1},"ultima_execucao")]),Object(h.jsxs)(l.Column,{type:"buttons",children:[Object(h.jsx)(l.Button,{icon:"event",hint:"Job Scheduler",visible:e=>!e.row.isNewRow&&(r.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE),onClick:e=>{s.a.load("job_scheduler/detalhes",(function(a,t){t.onclose=function(){e.component.refresh()},t.show(e.row.data.job_scheduler_id,e.row.data.job_scheduler_id?window.FORMULARIO.EDITAR:window.FORMULARIO.NOVO,e.row.key)}))}}),Object(h.jsx)(l.Button,{icon:"pulldown",hint:"Executar Job",visible:e=>!e.row.isNewRow&&+e.row.data.situacao===window.JOB_SCHEDULER_SITUACAO.AGUARDANDO&&"S"===e.row.data.ativo&&(r.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE),onClick:e=>{n.a.post("job_scheduler/executar/",{job_scheduler_id:e.row.data.job_scheduler_id},(function(a){e.component.refresh(),window.alert_modal("Valida\xe7\xe3o",window.nl2br(a.log_ultima_execucao))})),window.setTimeout(e.component.refresh())}}),Object(h.jsx)(l.Button,{icon:"group",hint:r.a.lang.tarefa.gerenciar_equipe,visible:e=>!e.row.isNewRow&&(r.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE),onClick:e=>{s.a.loadReact(v.default,{cubo_id:e.row.data.cubo_id,abaTitulo:"Equipe "+e.row.data.nome,onClose:function(){e.component.refresh()}},(function(e){}),s.a.ABA.MULTIPLAS)}}),Object(h.jsx)(_.a,{icon:"dx-icon dx-icon-datafield",hint:"Visualizar Cubo",name:"visualizar_cubo",visible:e=>!e.row.isNewRow,onClick:e=>{s.a.loadReact(g.default,{cubo_id:e.row.data.cubo_id,abaTitulo:e.row.data.nome},(function(e){}),s.a.ABA.SIM)}}),Object(h.jsx)(f.a,{visible:e=>!e.row.removed&&!e.row.data.padrao&&(r.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE),onClick:e=>{this.dataGrid.deleteRow(e.row.rowIndex)}}),Object(h.jsx)(b.a,{visible:e=>e.row.removed&&(r.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE),onClick:e=>{this.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"buttons")];var a;return Object(h.jsx)(i.a.Fragment,{children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsx)(d.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(d.stateStoring)("ListagemDataGridCubo"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(c.b)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:r.a.verifica_permissao(r.a.temp.empresa,"cricao_cubos"),allowAdding:!1,allowDeleting:!1},children:e})})})})}}w.defaultProps={abaTitulo:"Cubo"};a.default=w},1093:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(280),r=t(343),d=t(244);const l=[Object(d.jsx)(n.a,{dataField:"versao",caption:"Vers\xe3o"},"versao"),Object(d.jsx)(r.a,{dataField:"execucao",caption:"Execu\xe7\xe3o",sortIndex:0,sortOrder:"desc"},"execucao")];var c=t(248),u=t(262),p=t(253),m=t(87);class h extends i.a.Component{render(){return Object(d.jsx)(i.a.Fragment,{children:Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-12",children:Object(d.jsx)(s.default,{style:{height:"calc(100vh - 150px)",width:"100%"},dataSource:new u.default({pageSize:20,key:"versao",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{p.a.get({route:"dbu/listar_historico_de_atualizacoes/",data:Object(c.a)({session_id:m.a.sessao},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(c.a)(Object(c.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),searchPanel:!1,groupPanel:!1,selection:{mode:"multiple"},children:l})})})})}}h.defaultProps={abaTitulo:"Hist\xf3rico de Atualiza\xe7\xf5es"};a.default=h},1094:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return O}));var o=t(247),i=t(267),s=t(253),n=t(440);const r=Object.freeze({microsoft:1,rdstation:2,google:3}),d=[{id:r.google,descricao:"Google"},{id:r.microsoft,descricao:"Microsoft"},{id:r.rdstation,descricao:"RD Station"}],l=Object.freeze({desconectado:0,conectado:1,expirado:2}),c=(l.desconectado,l.conectado,l.expirado,e=>{let{dx_grid:a=!0}=e;return Object(n.createStore)({key:"id",loadUrl:"".concat(window.WS_URI,"/oauth_client/listar/"),insertUrl:"".concat(window.WS_URI,"/oauth_client/salvar/"),updateUrl:"".concat(window.WS_URI,"/oauth_client/salvar/"),deleteUrl:"".concat(window.WS_URI,"/oauth_client/salvar/"),onBeforeSend:(e,a)=>{a.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},a.headers=s.a.dxHeaders()}})}),u=e=>{let{alteracoes:a,func_response:t,func_fail:o}=e;if(!a)return!1;s.a.post({route:"oauth_client/salvar/",data:{alteracoes:a},func_response:t,func_fail:o})};var p=t(254),m=t(280),h=t(343),_=t(414),f=t(244);const b={display:"flex"},v={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},g=e=>{let{onRefresh:a=null}=e;const t=(e,a)=>{var t;return!((null===(t=e.data)||void 0===t?void 0:t.provedor)===r.microsoft&&!e.data[a])||(e.rule.message="".concat(e.column.caption," \xe9 de Preenchimento Obrigat\xf3rio"),!1)};return[Object(f.jsx)(m.a,{children:Object(f.jsx)(p.RequiredRule,{})},"nome"),Object(f.jsxs)(p.Column,{dataField:"provedor",caption:"Provedor",width:"150px",children:[Object(f.jsx)(p.Lookup,{dataSource:d,displayExpr:"descricao",valueExpr:"id"}),Object(f.jsx)(p.RequiredRule,{})]},"provedor"),Object(f.jsx)(p.Column,{dataField:"client_id",caption:"Client ID",width:"150px",children:Object(f.jsx)(p.CustomRule,{validationCallback:e=>t(e,"client_id")})},"client_id"),Object(f.jsx)(p.Column,{dataField:"client_secret",caption:"Client Secret",width:"150px",children:Object(f.jsx)(p.CustomRule,{validationCallback:e=>t(e,"client_secret")})},"client_secret"),Object(f.jsx)(p.Column,{dataField:"url_authorize",caption:"URL Authorize",width:"150px",children:Object(f.jsx)(p.CustomRule,{validationCallback:e=>t(e,"url_authorize")})},"url_authorize"),Object(f.jsx)(p.Column,{dataField:"url_access_token",caption:"URL Access Token",width:"150px",children:Object(f.jsx)(p.CustomRule,{validationCallback:e=>t(e,"url_access_token")})},"url_access_token"),Object(f.jsx)(p.Column,{dataField:"scope",caption:"Escopo",width:"150px"},"scope"),Object(f.jsx)(p.Column,{dataField:"redirect_url",caption:"URL de Redirecionamento",width:"150px",allowEditing:!1,cellRender:e=>{var a,t,o,i;return Object(f.jsxs)("div",{style:b,children:[Object(f.jsx)("div",{style:v,children:null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.redirect_url}),Object(f.jsx)(_.default,{style:{padding:"0px"},url:null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.redirect_url,children:Object(f.jsx)("span",{className:"far fa-copy"})})]})}},"redirect_url"),Object(f.jsx)(h.a,{dataField:"expires_in_datetime",caption:"Expira em",width:"150px",allowEditing:!1},"expires_in_datetime"),Object(f.jsxs)(p.Column,{type:"buttons",children:[Object(f.jsx)(p.Button,{icon:"fas fa-plug",hint:"Solicitar Acesso",visible:e=>{var a,t,o,i;return!(null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t||!t.id)&&((null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.situacao)||l.desconectado)==l.desconectado},onClick:e=>{var t,o;if(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(o=t.data)||void 0===o||!o.id)return!1;((e,a)=>{s.a.post({route:"oauth_client/obter_token_acesso/",data:{oauth_client_id:e},func_response:a})})(e.row.data.id,(e=>{window.open(e.authorization_url,"_blank"),window.alertaPopUp("Solicitar Acesso","Para a autentica\xe7\xe3o voc\xea ser\xe1 redirecionado automaticamente para o endere\xe7o do provedor.","Continuar",(()=>{a&&a()}))}))}}),Object(f.jsx)(p.Button,{hint:"Atualizar Token Expirado",visible:e=>{var a,t,o,i;return!(null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t||!t.id)&&((null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.situacao)||l.desconectado)==l.expirado},onClick:e=>{var t,o;if(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(o=t.data)||void 0===o||!o.id)return!1;((e,a)=>{s.a.post({route:"oauth_client/refresh_token/",data:{oauth_client_id:e},func_response:a})})(e.row.data.id,(e=>{a&&a()}))},children:Object(f.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(f.jsx)("span",{className:"fas fa-plug text-muted"}),Object(f.jsx)("span",{className:"fas fa-sync text-primary icon-on-top"})]})}),Object(f.jsx)(p.Button,{icon:"fas fa-sign-out-alt",hint:"Desconectar",visible:e=>{var a,t,o,i;return!(null===(a=e.row)||void 0===a||null===(t=a.data)||void 0===t||!t.id)&&((null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.situacao)||l.desconectado)!==l.desconectado},onClick:e=>{var t,o;if(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(o=t.data)||void 0===o||!o.id)return!1;window.alertaPopUp("Desconectar","Os dados de conex\xe3o ser\xe3o perdidos. Deseja continuar?","Continuar",(()=>{((e,a)=>{s.a.post({route:"oauth_client/desconectar/",data:{oauth_client_id:e},func_response:a})})(e.row.data.id,(e=>{a&&a()}))}),"Cancelar")}}),Object(f.jsx)(p.Button,{name:"delete"})]},"botoes")]};var w=t(330),j=t.n(w);function O(e){const{html_id:a}=e,t=Object(o.useRef)(null),s=()=>{t.current&&t.current.instance.refresh()};return Object(f.jsx)("div",{style:{width:"100%"},children:Object(f.jsxs)(i.default,{ref:t,style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(i.stateStoring)("listagem_oauth_client"),dataSource:c({}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!0,allowDeleting:!0},onEditorPreparing:e=>{var a=e.component,t=e.row&&e.row.rowIndex;if("dataRow"===e.parentType&&"provedor"===e.dataField){var o=e.editorOptions.onValueChanged;e.editorOptions.onValueChanged=i=>{o.call(this,e),e.setValue(i.value),i.value===r.microsoft&&a.cellValue(t,"scope","openid profile email offline_access https://outlook.office.com/IMAP.AccessAsUser.All https://outlook.office.com/SMTP.Send")}}},onSaving:e=>{e.cancel=!0,e.changes.length&&(e.promise=new Promise(((a,t)=>{u({alteracoes:e.changes,func_response:t=>{a(t),e.component.refresh(!0).done((()=>{e.component.cancelEditData()}))},func_fail:e=>t(e)})})))},children:[g({onRefresh:s}),Object(f.jsxs)(p.Toolbar,{children:[Object(f.jsx)(p.Item,{location:"after",name:"addRowButton"}),Object(f.jsx)(p.Item,{location:"after",name:"saveButton"}),Object(f.jsx)(p.Item,{location:"after",name:"revertButton"}),Object(f.jsx)(p.Item,{location:"after",locateInMenu:"auto",children:Object(f.jsx)(j.a,{icon:"refresh",onClick:s})})]})]})})}O.defaultProps={abaTitulo:"Aplicativos Conectados (OAuth Client)"}},1095:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);var l=t(349),c=t(280),u=t(494),p=t(549),m=t(244);const h=[Object(m.jsx)(l.a,{dataField:"tipo_agenda_id"},"Id"),Object(m.jsx)(c.a,{width:""},"Nome"),Object(m.jsx)(u.a,{width:180,disabled:!0,dropDownButtonTemplate:""},"Cor"),Object(m.jsx)(p.a,{dataField:"notificar_antes",caption:"Notificar Antes"},"Notificar Antes")];var _=t(254),f=t(296),b=t(416),v=t(315);class g extends i.a.Component{constructor(e){super(e),this.state={},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Tipo Agenda",text:"Adicionar",onClick:function(){window.View.load("tipo_agenda/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}))}},location:"after",name:"BtnNovoTipoAgenda",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarTipoAgenda=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[...h,Object(m.jsxs)(_.Column,{type:"buttons",children:[Object(m.jsx)(v.a,{onClick:e=>{window.View.load("tipo_agenda/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.tipo_agenda_id,window.FORMULARIO.EDITAR)}))}},"btnEditar"),Object(m.jsx)(b.a,{onClick:e=>{window.View.load("tipo_agenda/detalhes",(function(a,t){t.show(e.row.data.tipo_agenda_id,window.FORMULARIO.VISUALIZAR)}))}},"BtnVisualizar"),Object(m.jsx)(f.a,{onClick:e=>{window.View.load("tipo_agenda/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.tipo_agenda_id,window.FORMULARIO.EXCLUIR)}))}},"BtnApagar")]},"btns")];return Object(m.jsx)(i.a.Fragment,{children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(a={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"tipo_agenda_id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise((function(e,o){r.a.get({route:"tipo_agenda/listar/",data:Object(n.a)(Object(n.a)({},t),a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"tipo_agenda/listar/",data:{dx_grid:!0,tipo_agenda_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),stateStoring:Object(s.stateStoring)("listarTipoAgenda"),groupPanel:{visible:!1},children:e})})})});var a}}g.defaultProps={abaTitulo:"Tipo de Agenda"};a.default=g},1096:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);var l=t(553),c=t(280),u=t(244);const p=[Object(u.jsx)(l.a,{dataField:"codigo"},"Codigo"),Object(u.jsx)(c.a,{width:""},"nome"),Object(u.jsx)(c.a,{width:"",dataField:"agenda_local",caption:"Local da Agenda"},"agenda_local"),Object(u.jsx)(c.a,{width:"",dataField:"agenda_motivo",caption:"Motivo"},"agenda_motivo")];var m=t(254),h=t(296),_=t(416),f=t(315);class b extends i.a.Component{constructor(e){super(e),this.state={},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Agenda de Ativos",text:"Adicionar",onClick:function(){var a={tipo:window.FORMULARIO.NOVO,agenda_ativo_id:null};window.View.load("agenda_ativo/detalhes",(function(t,o){o.show(a),o.onclose=e.component.refresh}),window.View.ABA.SIM)}},location:"after",name:"BtnNovoAtivoAgenda",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarAgendaAtivo=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-cog",hint:"Configurar prefer\xeancias",text:"Configurar prefer\xeancias",onClick:function(){window.View.load("agenda_ativo/configuracoes",(function(e,a){a.show()}),window.View.ABA.NAO)}},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[...p,Object(u.jsxs)(m.Column,{type:"buttons",children:[Object(u.jsx)(f.a,{onClick:e=>{var a={tipo:window.FORMULARIO.EDITAR,agenda_ativo_id:e.row.data.id};window.View.load("agenda_ativo/detalhes",(function(t,o){o.onclose=e.component.refresh,o.show(a)}),window.View.ABA.SIM)}},"btnEditar"),Object(u.jsx)(_.a,{onClick:e=>{var a={tipo:window.FORMULARIO.VISUALIZAR,agenda_ativo_id:e.row.data.id};window.View.load("agenda_ativo/detalhes",(function(e,t){t.show(a)}),window.View.ABA.SIM)}},"BtnVisualizar"),Object(u.jsx)(h.a,{onClick:e=>{var a={tipo:window.FORMULARIO.EXCLUIR,agenda_ativo_id:e.row.data.id};window.View.load("agenda_ativo/detalhes",(function(t,o){o.onclose=e.component.refresh,o.show(a)}),window.View.ABA.SIM)}},"BtnApagar")]},"btns")];return Object(u.jsx)(i.a.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(a={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise((function(e,o){r.a.get({route:"agenda_ativo/listar/",data:Object(n.a)(Object(n.a)({},t),a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"agenda_ativo/listar/",data:{dx_grid:!0,id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),stateStoring:Object(s.stateStoring)("listarAgendaAtivo"),groupPanel:{visible:!1},children:e})})})});var a}}b.defaultProps={abaTitulo:"Agenda de Ativos"};a.default=b},1097:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var o=t(247),i=t.n(o),s=t(267),n=t(281),r=t(556),d=t(296),l=t(313),c=t(489),u=t(248),p=t(262),m=t(253);var h=t(554),_=t(254),f=t(321),b=t(711),v=t(244);function g(e){let{nome:a,tipo:t,id:o}=e;const i="C"===t?"info":"F"===t?"warning":"O"===t?"primary":"danger";return Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"label label-"+i,children:t}),"\xa0",a]})}var w=t(317);class j extends i.a.Component{constructor(e){var a;super(e),this.dataGridRef=i.a.createRef(),this.state={dataSource:(a=this.props.chamado_motivo_id,new p.default({key:"id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise(((e,o)=>{m.a.get({route:"chamado_motivo/listar_entidades_tempo_atendimento/",data:Object(u.a)({dx_grid:!0,chamado_motivo_id:a},t),func_response:a=>{let t=window.createLoadExtra(a);e(Object(u.a)(Object(u.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))},this.getDataSourceCalendariosTrabalho.bind(this)}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}componentDidMount(){"function"===typeof this.props.getDataGridEntidadesMotivo&&this.props.getDataGridEntidadesMotivo(this.dataGridRef)}getDataSourceCalendariosTrabalho(){return new w.default({key:"calendario_trabalho_id",data:this.props.calendarios_trabalho_lista})}render(){return Object(v.jsx)(i.a.Fragment,{children:Object(v.jsxs)(s.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},onToolbarPreparing:this.onToolbarPreparing,editing:{mode:"batch",allowUpdating:!0,useIcons:!0},children:[Object(v.jsx)(_.Column,{caption:"Entidade ID",dataField:"entidade_id",allowEditing:!1,visible:!1},"entidade_id"),Object(v.jsx)(_.Column,{caption:"Prioridade ID",dataField:"chamado_prioridade_id",allowEditing:!1,visible:!1},"chamado_prioridade_id"),Object(v.jsx)(_.Column,{caption:"Resolu\xe7\xe3o Calend\xe1rio Trabalho ID",dataField:"resolucao_calendario_trabalho_id",allowEditing:!1,visible:!1},"resolucao_calendario_trabalho_id"),Object(v.jsx)(_.Column,{caption:"Previs\xe3o Retorno Calend\xe1rio Trabalho ID",dataField:"previsao_retorno_calendario_trabalho_id",allowEditing:!1,visible:!1},"previsao_retorno_calendario_trabalho_id"),Object(v.jsx)(_.Column,{caption:"Tipo",dataField:"entidade_tipo",allowEditing:!1,width:80,visible:!1},"entidade_tipo"),Object(v.jsx)(_.Column,{caption:"Entidade",dataField:"entidade_nome",cellRender:e=>Object(v.jsx)(g,{nome:e.data.entidade_nome,tipo:e.data.entidade_tipo,id:e.data.entidade_id}),editCellRender:e=>Object(v.jsx)(n.default,{dataSource:Object(c.a)(),valueExpr:"id",aoAlterar:(a,t)=>{e.component.cellValue(e.rowIndex,"entidade_id",a.id),e.component.cellValue(e.rowIndex,"entidade_tipo",t.tipo),e.component.cellValue(e.rowIndex,"entidade_nome",t.nome_fantasia?t.nome_fantasia:t.razao_social),e.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome Fantasia",dataField:"nome_fantasia"},{caption:"Raz\xe3o Social",dataField:"razao_social"},{catpion:"Tipo",datafield:"tipo",calculateCellValue:e=>{switch(e.tipo){case"C":return"Cliente";case"O":return"Organiza\xe7\xe3o";case"F":return"Fornecedor";case"E":return"Empresa"}}}]})},"entidade_nome"),Object(v.jsx)(_.Column,{caption:"Prioridade",dataField:"prioridade_nome",editCellRender:e=>Object(v.jsx)(n.default,{dataSource:Object(h.a)({listar_opcao_todas:!0}),valueExpr:"chamado_prioridade_id",aoAlterar:(a,t)=>{e.component.cellValue(e.rowIndex,"chamado_prioridade_id",a),e.component.cellValue(e.rowIndex,"prioridade_nome",t.nome),e.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome",dataField:"nome"}]})},"prioridade_nome"),this.props.utiliza_resolucao_atendimento&&Object(v.jsx)(_.Column,{caption:"Horas Resolu\xe7\xe3o",dataField:"horas_resolucao",calculateCellValue:e=>window.format_time(e.horas_resolucao),allowFiltering:!1,allowHeaderFiltering:!0,editCellRender:e=>Object(v.jsx)(f.TextBox,{mask:Object(r.a)("000:00"),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:function(a){e.component.cellValue(e.rowIndex,e.column.dataField,a.value)},stylingMode:"filled",value:window.format_time(e.value)})},"horas_resolucao"),this.props.utiliza_resolucao_atendimento&&Object(v.jsx)(_.Column,{caption:"Resolu\xe7\xe3o Calend\xe1rio de Trabalho",dataField:"resolucao_calendario_trabalho_nome",editCellRender:e=>Object(v.jsx)(n.default,{dataSource:this.getDataSourceCalendariosTrabalho(),valueExpr:"calendario_trabalho_id",displayExpr:e=>(null===e||void 0===e?void 0:e.nome)||"",aoAlterar:(a,t)=>{e.component.cellValue(e.rowIndex,"resolucao_calendario_trabalho_id",a),e.component.cellValue(e.rowIndex,"resolucao_calendario_trabalho_nome",t?t.nome:null),e.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome",dataField:"nome"}],showClearButton:!0,selecionado:e.data.resolucao_calendario_trabalho_id})},"resolucao_calendario_trabalho_nome"),parseInt(this.props.tipo_tempo_previsao)===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&Object(v.jsx)(_.Column,{caption:"Horas Previs\xe3o Retorno",dataField:"horas_previsao_retorno",calculateCellValue:e=>window.format_time(e.horas_previsao_retorno),allowFiltering:!1,allowHeaderFiltering:!0,editCellRender:e=>Object(v.jsx)(f.TextBox,{mask:Object(r.a)("000:00"),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:function(a){e.component.cellValue(e.rowIndex,e.column.dataField,a.value)},stylingMode:"filled",value:window.format_time(e.value)})},"horas_previsao_retorno"),parseInt(this.props.tipo_tempo_previsao)===window.CHAMADO_MOTIVO_TEMPO.DIAS_CORRIDOS&&Object(v.jsx)(_.Column,{caption:"Dias Previs\xe3o Retorno",dataField:"dias_previsao_retorno",allowFiltering:!1,allowHeaderFiltering:!0,editCellRender:e=>Object(v.jsx)(b.NumberBox,{onValueChanged:function(a){e.component.cellValue(e.rowIndex,e.column.dataField,a.value)},stylingMode:"filled",value:e.value})},"dias_previsao_retorno"),parseInt(this.props.tipo_tempo_previsao)===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&Object(v.jsx)(_.Column,{caption:"Previs\xe3o Retorno Calend\xe1rio de Trabalho",dataField:"previsao_retorno_calendario_trabalho_nome",editCellRender:e=>Object(v.jsx)(n.default,{dataSource:this.getDataSourceCalendariosTrabalho(),valueExpr:"calendario_trabalho_id",displayExpr:e=>(null===e||void 0===e?void 0:e.nome)||"",aoAlterar:(a,t)=>{e.component.cellValue(e.rowIndex,"previsao_retorno_calendario_trabalho_id",a),e.component.cellValue(e.rowIndex,"previsao_retorno_calendario_trabalho_nome",t?t.nome:null),e.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome",dataField:"nome"}],showClearButton:!0,selecionado:e.data.previsao_retorno_calendario_trabalho_id})},"previsao_retorno_calendario_trabalho_nome"),Object(v.jsxs)(_.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(v.jsx)(d.a,{visible:e=>!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(v.jsx)(l.a,{visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"botoes")]},"datagrid_entidades")})}onToolbarPreparing(e){let a=[{template:'<label style="left: -10px; position: relative;">Controle de Tempo de Atendimento por Entidade</label>',location:"before",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Entidade",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnAddEntidade",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var t=0;t<e.toolbarOptions.items.length;t++){var o=e.toolbarOptions.items[t];"saveButton"==o.name&&(o.options.visible=!1)}}}j.defaultProps={chamado_motivo_id:null,utiliza_resolucao_atendimento:!1,tipo_tempo_previsao:null,calendarios_trabalho_lista:null}},1098:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return _}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);let l=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new d.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},load:o=>{let i=window.loadOptionsToActionParams(o);return new Promise((function(o,s){r.a.get({route:"entidade_historico/listar_historico_cadastral/",data:Object(n.a)({entidade_tipo:e,entidade_id:a,data_hora:t},i),func_response:function(e){let a=window.createLoadExtra(e);o(Object(n.a)(Object(n.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var c=t(254),u=t(280),p=t(350),m=t(244);const h=[Object(m.jsx)(u.a,{dataField:"elemento_nome",caption:"Campo"},"elemento_nome"),Object(m.jsx)(p.a,{caption:"Antes",dataField:"valor_anterior",width:150},"valor_anterior"),Object(m.jsx)(p.a,{caption:"Depois",dataField:"valor_atualizado",width:150},"valor_atualizado"),Object(m.jsx)(u.a,{dataField:"grupo_nome",caption:"Grupo"},"grupo_nome"),Object(m.jsx)(u.a,{dataField:"tabela_nome",caption:"Tabela"},"tabela_nome"),Object(m.jsx)(c.Column,{dataField:"tabela_linha",caption:"Linha",width:60},"tabela_linha"),Object(m.jsx)(u.a,{dataField:"id_elemento",caption:"ID Elemento"},"id_elemento"),Object(m.jsx)(u.a,{dataField:"usuario_nome",caption:"Usu\xe1rio"},"usuario_nome")];class _ extends i.a.Component{constructor(e){super(e)}render(){return Object(m.jsx)("div",{children:Object(m.jsx)(s.default,{elementAttr:{style:"max-height: 300px"},dataSource:l(this.props.entidade_tipo,this.props.entidade_id,this.props.data_hora),groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},filterRow:{visible:!1},children:h})})}}_.defaultProps={entidade_tipo:null,entidade_id:null,data_hora:null}},1099:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return w}));var o=t(247),i=t.n(o),s=t(395),n=t.n(s),r=t(248),d=t(267),l=t(308),c=t(807),u=t(254),p=t(315),m=t(271),h=t(87),_=t(314),f=t(262),b=t(763),v=t(244);class g extends i.a.Component{constructor(e){super(e),this.getKey=this.getKey.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.onContextMenuPreparing=this.onContextMenuPreparing.bind(this),this.stateStoring=this.stateStoring.bind(this),this.handleSelectBoxChange=this.handleSelectBoxChange.bind(this),this.onContentReady=this.onContentReady.bind(this),this.onRowClick=this.onRowClick.bind(this),this.dataGridRef=i.a.createRef(),this.keyCount=0,this.parametrosUsuario=h.a.get_parametro_usuario("listagem_chamados"),this.gridStateStoring=this.stateStoring(),this.filtro_tipo_listagem="string"===typeof this.props.filtro_tipo_listagem||"number"===typeof this.props.filtro_tipo_listagem?this.props.filtro_tipo_listagem:null;let a=window.CHAMADO_FILTRO.MEUS_CHAMADOS;this.parametrosUsuario&&"undefined"!==typeof this.parametrosUsuario.tipoListagem&&null!==this.parametrosUsuario.tipoListagem&&(a=this.parametrosUsuario.tipoListagem),null!==this.filtro_tipo_listagem&&(a=this.filtro_tipo_listagem),this.state={dataSource:Object(l.a)(a,null,!0,-1),tipoListagem:a}}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}getKey(){return this.keyCount++}render(){const e=[...Object(c.b)(this.props.html_id),Object(v.jsx)(u.Column,{type:"buttons",children:Object(v.jsx)(p.a,{icon:"fa fa-comments",onClick:e=>this.handleAcessarChamado(e,e.row.data.id)},"btn_acessar_chamado")},"coluna_botoes")];return Object(v.jsx)("div",{children:Object(v.jsx)(d.default,{ref:this.dataGridRef,style:{height:"calc(100vh - 80px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,onContextMenuPreparing:this.onContextMenuPreparing,onContentReady:this.onContentReady,stateStoring:this.gridStateStoring,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},onRowClick:this.onRowClick,onRowPrepared:e=>{if("data"===e.rowType){let a=e.rowElement;e.data.situacao==window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO&&a.css("font-weight","bold")}},exportCustomizeExcelCell:e=>{var a=e.gridCell;if(a&&"data"===a.rowType&&["sla_tempo_reacao","sla_tempo_resolucao","sla_tempo_total","sla_tempo_solicitante","sla_tempo_encerrado","sla_tempo_reacao_real","sla_tempo_resolucao_real","sla_tempo_total_real","sla_tempo_solicitante_real"].includes(a.column.dataField)&&(a.column.dataType="number",e.numberFormat="[h]:mm",e.value)){if(window.fn_converter_horas_para_segundos(e.value)>0){var t=new Date("1900-01-01 00:00:00");t.setSeconds(window.fn_converter_horas_para_segundos(e.value)-86400),e.value=t}}},children:e},this.getKey())})}stateStoring(){return{enabled:!0,type:"custom",customLoad:()=>h.a.get_parametro_usuario("listagem_chamados").datagrid,customSave(e){h.a.set_parametro_usuario("listagem_chamados",{datagrid:e})}}}handleSelectBoxChange(e){if(this.dataGridRef&&this.dataGridRef.current&&this.dataGridRef.current._instance&&e.selectedItem&&+e.selectedItem.id!==+this.state.tipoListagem){const a=a=>{e.component.option("value",a),this.setState({dataSource:Object(l.a)(a,null,!0,-1),tipoListagem:a},(()=>{+this.state.tipoListagem!==window.CHAMADO_FILTRO.TODOS&&h.a.set_parametro_usuario("listagem_chamados",Object(r.a)(Object(r.a)({},this.parametrosUsuario),{},{tipoListagem:this.state.tipoListagem}))}))},t=this.dataGridRef.current._instance;t._resetPageIndex=!0,t._clearSelectedRows=!0;let o=null;switch(e.selectedItem.id){case 1:default:o=window.CHAMADO_FILTRO.MEUS_CHAMADOS,a(o);break;case 2:o=window.CHAMADO_FILTRO.EM_ABERTO,a(o);break;case 3:o=window.CHAMADO_FILTRO.ENCERRADOS,a(o);break;case 8:o=window.CHAMADO_FILTRO.MINHAS_SOLICITACOES_EM_ABERTO,a(o);break;case 9:o=window.CHAMADO_FILTRO.MINHAS_SOLICITACOES_ENCERRADAS,a(o);break;case 10:Object(_.confirm)("Listar todos os Chamados poder\xe1 levar um tempo. Deseja continuar?","Aten\xe7\xe3o").then((e=>{e?(o=window.CHAMADO_FILTRO.TODOS,a(o)):(o=window.CHAMADO_FILTRO.MEUS_CHAMADOS,a(o))}));break;case 11:o=window.CHAMADO_FILTRO.MEUS_RASCUNHOS,a(o);break;case 12:o=window.CHAMADO_FILTRO.CHAMADOS_ACOMPANHAMENTO,a(o);break;case 13:o=window.CHAMADO_FILTRO.MEUS_CHAMADOS_RESPONSAVEL,a(o)}}}onToolbarPreparing(e){const a=this,t=[{id:1,descricao:"Minhas P\xeandencias",categoria:"Meus"},{id:2,descricao:"Chamados em Aberto",categoria:"Geral"},{id:3,descricao:"Chamados Encerrados",categoria:"Geral"},{id:8,descricao:"Meus Chamados em Aberto",categoria:"Meus"},{id:9,descricao:"Meus Chamados Encerrados",categoria:"Meus"},{id:10,descricao:"Todos Chamados",categoria:"Geral"},{id:12,descricao:"Chamados com meu e-mail de acompanhamento",categoria:"Meus",visible:!0===!!h.a.sessao.dados.email},{id:13,descricao:"Meus Chamados como Respons\xe1vel",categoria:"Meus"},{id:11,descricao:"Meus Rascunhos",categoria:"Meus"}];let o=[{widget:"dxTextBox",location:"after",locateInMenu:"auto",options:{width:"140px",placeholder:"N\xba Chamado",buttons:[{location:"before",name:"pesquisar",options:{icon:"search",disabled:!0}}],onEnterKey:e=>{let a=e.component.option("value");if(null!==a&&""!==a.trim()){let e=a.replace(/\r\n/g,"\r").replace(/\n/g,"\r").replace(/\r/g," ").split(" ");for(let a=0;a<e.length;a++)""!==(t=e[a]).trim()&&m.a.loadReact(b.default,{chamadoId:t.trim()},(function(){}),m.a.ABA.MULTIPLAS)}var t}}},{widget:"dxSelectBox",locateInMenu:"auto",options:{dataSource:new f.default({store:t,group:"categoria"}),width:"250px",placeholder:"Filtrar por",valueExpr:"id",displayExpr:"descricao",value:this.state.tipoListagem,grouped:!0,onSelectionChanged:this.handleSelectBoxChange},location:"after"},{widget:"dxButton",options:{icon:"plus",hint:"Novo Chamado",text:"Novo Chamado",onClick:()=>{setTimeout((()=>m.a.loadReact(b.default,{},(function(e,a){}),m.a.ABA.MULTIPLAS)))}},showText:"always",location:"after",name:"BtnNovoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){m.a.load("chamado/configuracoes",(function(e,a){a.show()}))},visible:h.a.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-tasks",hint:"Reclassificar Chamados Selecionados",text:"Reclassificar Chamados Selecionados",onClick:function(){if(a.dataGridRef&&a.dataGridRef.current){let t=a.dataGridRef.current._instance.getSelectedRowsData();new f.default({store:t,pageSize:0}).load().done((function(t){a.handleReclassificarChamado(e,t)}))}},visible:h.a.verifica_permissao(h.a.sessao.dados.empresa_filial_id,"reclassificar_chamado")},showText:"inMenu",location:"after",name:"BtnReclassificarSelecionados",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(o,e.toolbarOptions.items)}onContextMenuPreparing(e){const a=this;"header"===e.target&&Array.isArray(e.items)&&e.items.push(Object(d.itemRestaurarEstadoDasColunas)(e));let t=e.component.getSelectedRowsData();new f.default({store:t,pageSize:0}).load().done((function(t){e.row&&"data"===e.row.rowType&&(e.items=[{text:"Visualizar chamado",onItemClick:function(){a.handleAcessarChamado(e,e.row.data.id)}},{text:"Reclassificar chamado",visible:h.a.verifica_permissao(h.a.sessao.dados.empresa_filial_id,"reclassificar_chamado"),onItemClick:function(){a.handleReclassificarChamado(e,[e.row.data])}},{text:"Visualizar chamados selecionados",visible:t.length,onItemClick:function(){for(var o=0;o<t.length;o++){let i=t[o];a.handleAcessarChamado(e,i.id)}}},{text:"Reclassificar chamados selecionados",visible:h.a.verifica_permissao(h.a.sessao.dados.empresa_filial_id,"reclassificar_chamado")&&t.length,onItemClick:function(){a.handleReclassificarChamado(e,t)}}])}))}onContentReady(e){e.component._clearState&&(e.component.state({}),e.component._clearState=!1),e.component._clearSelectedRows&&(e.component.clearSelection(),e.component._clearSelectedRows=!1),e.component._resetPageIndex&&(e.component.pageIndex(0),e.component._resetPageIndex=!1),setTimeout((()=>e.component.updateDimensions()),100)}handleAcessarChamado(e,a){m.a.loadReact(b.default,{chamadoId:a,onClose:e.component.refresh},(function(e,a){}),m.a.ABA.MULTIPLAS)}handleReclassificarChamado(e,a){if(a.length){let t=!0,o=null;for(let e=0;e<a.length;e++){let i=a[e];o&&+o!==+i.tipo_gestao_tempo?t=!1:o=+i.tipo_gestao_tempo}t?m.a.load("chamado/reprogramar",(function(t,i){i.onclose=()=>{e.component._clearSelectedRows=!0,e.component.refresh()},i.show(a,o)})):Object(_.alert)("Falha ao reclassificar!<br><br>N\xe3o \xe9 poss\xedvel reclassificar chamados de tipo de previs\xe3o de retorno diferentes (horas e dias)","Aviso")}else Object(_.alert)("Nenhum chamado selecionado para reclassifica\xe7\xe3o","Aviso")}onRowClick(e){window.onDoubleClick(e,(()=>{this.handleAcessarChamado(e,e.data.id)}))}}class w extends i.a.Component{componentDidMount(){if(this.props.html_id&&h.a.PE.Chamado_Listagem_show_antes)try{h.a.PE.Chamado_Listagem_show_antes(document.getElementById(this.props.html_id))}catch(e){console.log(e)}}render(){return Object(v.jsx)(i.a.Fragment,{children:Object(v.jsx)(n.a,{swipeEnabled:!1,children:Object(v.jsx)(s.Item,{title:"Chamados",icon:"comment",children:Object(v.jsx)(g,{html_id:this.props.html_id,filtro_tipo_listagem:this.props.filtro_tipo_listagem})})})})}}w.defaultProps={abaTitulo:"Chamados"}},1100:function(e,a,t){"use strict";t.r(a);var o=t(87),i=t(253),s=t(271),n=t(247),r=t.n(n),d=t(307),l=t.n(d),c=t(254),u=t.n(c),p=t(443),m=t(433);const h=[{id:"amarelo",nome:"Amarelo",corPrimaria:"#debb00"},{id:"azul_escuro",nome:"Azul Escuro",corPrimaria:"#002245"},{id:"azul_claro",nome:"Azul Claro",corPrimaria:"#3575e8"},{id:"azul",nome:"Azul",corPrimaria:"#030394"},{id:"cinza",nome:"Cinza",corPrimaria:"#474747"},{id:"laranja_escuro",nome:"Laranja Escuro",corPrimaria:"#944e03"},{id:"laranja",nome:"Laranja",corPrimaria:"#de6f00"},{id:"preto",nome:"Preto",corPrimaria:"#000"},{id:"roxo",nome:"Roxo",corPrimaria:"#4e0394"},{id:"roxo_escuro",nome:"Roxo Escuro",corPrimaria:"#270843"},{id:"verde_claro",nome:"Verde Claro",corPrimaria:"#289403"},{id:"verde_escuro",nome:"Verde Escuro",corPrimaria:"#174308"},{id:"vermelho",nome:"Vermelho",corPrimaria:"#be0101"},{id:"vermelho_escuro",nome:"Vermelho Escuro",corPrimaria:"#6b0606"},{id:"rosa",nome:"Rosa",corPrimaria:"#ff31f5"}];var _=t(244);class f extends r.a.Component{constructor(e){super(e),this.state={temaSelecionadoId:"",temaSelecionadoNome:"",temaSelecionadoCorPrimaria:"",loaderBloqueio:!1,menuLateral:!1,buscaAutomatica:!1},this.tema_inicial="preto",this.menuLateralChanged=this.menuLateralChanged.bind(this),this.loaderBloqueioChanged=this.loaderBloqueioChanged.bind(this),this.buscaAutomaticaChanged=this.buscaAutomaticaChanged.bind(this),this.onSelectionChanged=this.onSelectionChanged.bind(this),this.obterParametros=this.obterParametros.bind(this),this.salvar=this.salvar.bind(this),this.obterParametros()}render(){const e={icon:"fas fa-save",text:"Salvar",onClick:()=>{this.salvar()}},a={icon:"fas fa-times",text:"Cancelar",onClick:()=>{o.a.aplicar_tema(this.tema_inicial),s.a.unload(this.props.html_id)}};return Object(_.jsx)(r.a.Fragment,{children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-6",children:Object(_.jsx)("div",{className:"panel panel-default",children:Object(_.jsxs)(u.a,{dataSource:h,selection:{mode:"single"},selectedRowKeys:[this.state.temaSelecionadoId],showBorders:!0,hoverStateEnabled:!0,keyExpr:"id",onSelectionChanged:this.onSelectionChanged,rowAlternationEnabled:!1,children:[Object(_.jsx)(c.Column,{dataField:"nome",caption:"Nome"}),Object(_.jsx)(c.Column,{dataField:"corPrimaria",caption:"Cor",cellRender:e=>this.renderCorPrimaria(e.data.corPrimaria)})]})})}),Object(_.jsx)("div",{className:"col-md-6",children:Object(_.jsxs)("div",{className:"panel panel-default",children:[Object(_.jsx)("div",{className:"panel-heading",children:Object(_.jsx)("h3",{className:"panel-title",children:"Configura\xe7\xf5es"})}),Object(_.jsxs)("div",{className:"panel-body",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-12",children:["Tema: ",this.state.temaSelecionadoNome]}),Object(_.jsxs)("div",{className:"col-md-12",style:{display:"inline-flex"},children:["Cor prim\xe1ria:\xa0 ",this.renderCorPrimaria(this.state.temaSelecionadoCorPrimaria)]})]}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsx)(p.CheckBox,{value:this.state.menuLateral,onValueChanged:this.menuLateralChanged,text:"Menu Lateral"})})}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsx)(p.CheckBox,{value:this.state.loaderBloqueio,onValueChanged:this.loaderBloqueioChanged,text:"Loader com bloqueio de tela"})})}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsx)(p.CheckBox,{value:this.state.buscaAutomatica,onValueChanged:this.buscaAutomaticaChanged,text:"Busca autom\xe1tica no combobox"})})})]}),Object(_.jsx)("div",{className:"panel-footer",children:Object(_.jsxs)(l.a,{style:{backgroundColor:"transparent"},children:[Object(_.jsx)(d.Item,{location:"before",widget:"dxButton",options:e}),Object(_.jsx)(d.Item,{location:"before",widget:"dxButton",options:a})]})})]})})]})})}renderCorPrimaria(e){return Object(_.jsx)("div",{style:{width:"100px",height:"100%",backgroundColor:e},children:"\xa0"})}obterParametros(){i.a.get("tema/get_parametros/",null,(e=>{this.tema_inicial=e.tema,this.setState({temaSelecionadoId:e.tema,temaSelecionadoNome:h.find((a=>a.id===e.tema)).nome,temaSelecionadoCorPrimaria:h.find((a=>a.id===e.tema)).corPrimaria,loaderBloqueio:"S"===e.loader_bloqueio,menuLateral:"S"===e.menu_lateral,buscaAutomatica:"S"===e.busca_automatica})}))}salvar(){i.a.post("tema/salvar",{tema:this.state.temaSelecionadoId,loader_bloqueio:this.state.loaderBloqueio,menu_lateral:this.state.menuLateral,busca_automatica:this.state.buscaAutomatica},(e=>{Object(m.default)("Tema alterado com sucesso."),s.a.unload(this.props.html_id)}))}menuLateralChanged(e){this.setState({menuLateral:e.value})}loaderBloqueioChanged(e){this.setState({loaderBloqueio:e.value})}buscaAutomaticaChanged(e){this.setState({buscaAutomatica:e.value})}onSelectionChanged(e){let{selectedRowsData:a}=e;if(!a||0===a.length)return!1;const t=a[0];if(!t)return!1;o.a.aplicar_tema(t.id),this.setState({temaSelecionadoId:t.id,temaSelecionadoNome:t.nome,temaSelecionadoCorPrimaria:t.corPrimaria})}}f.defaultProps={abaTitulo:"Temas"};a.default=f},1101:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var o=t(247),i=t(253),s=t(87),n=t(487),r=t.n(n);class d extends r.a{}d.defaultProps={allowSortingBySummary:!1,allowSorting:!1,allowFiltering:!0,showBorders:!0,showColumnTotals:!1,showColumnGrandTotals:!1,showRowTotals:!1,showRowGrandTotals:!1,allowExpandAll:!0};var l=t(486),c=t.n(l),u=t(1025),p=t(1029),m=t(779),h=t(539),_=t(373),f=t.n(_),b=t(330),v=t(1030),g=t.n(v),w=t(244);function j(e){s.a.titulo_aba(e.html_id,"Aloca\xe7\xe3o de executores");const[a,t]=Object(o.useState)([]),[r,_]=Object(o.useState)(null),[v,j]=Object(o.useState)(null),[O,x]=Object(o.useState)(null),[A,C]=Object(o.useState)(null);function S(){i.a.get({route:"/atividade_projeto/relatorio_alocacao_executores/",data:{data_inicio:window.formatDate(O,!0),data_fim:window.formatDate(A,!0)},func_response:function(e){for(let a=0;a<e.length;a++)e[a].dia_alocado=new Date("".concat(e[a].dia_alocado," 23:59:59"));t(e)},func_fail:function(e){}})}Object(o.useEffect)((function(){!function(){let e=new Date,a=e.getDate()-e.getDay(),t=a+6;const o=new Date(new Date(e).setDate(a)),i=new Date(new Date(e).setDate(t));x(o),C(i)}()}),[]),Object(o.useEffect)((function(){O&&A&&S()}),[O,A]),Object(o.useEffect)((function(){r&&v&&(r.bindChart(v,{dataFieldsDisplayMode:"splitPanes",alternateDataFields:!1}),setTimeout((function(){v.refresh(),r._$element.css("height","calc(100vh - 332px)")})))}),[r,v]);const I=new h.default({fields:[{caption:"Executor",dataField:"usuario_executor_nome",area:"row",sortBySummaryField:"HorasAlocadas",width:200,isMeasure:!1},{caption:"Projeto",dataField:"projeto_nome",area:"row"},{caption:"C\xf3digo do Projeto",dataField:"projeto_codigo",area:"row"},{caption:"Horas Alocadas",dataField:"horas_alocadas",dataType:"number",summaryType:"sum",area:"data"},{caption:"Dia Alocado",dataField:"dia_alocado",dataType:"date",area:"column",isMeasure:!1},{groupName:"dia_alocado",groupInterval:"day",visible:!0}],store:a});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:g.a.filtrosData,children:[Object(w.jsx)(f.a,{applyValueMode:"useButtons",value:O,min:new Date(1900,1,1),max:A,onValueChanged:e=>x(e.value)}),Object(w.jsx)(f.a,{applyValueMode:"useButtons",value:A,min:O,max:new Date(2222,12,31),onValueChanged:e=>C(e.value)}),Object(w.jsx)(b.Button,{icon:"refresh",style:{cursor:"pointer"},onClick:()=>S()})]}),Object(w.jsx)("div",{className:g.a.pivotChart,children:Object(w.jsxs)(c.a,{ref:e=>j(e?e.instance:null),children:[Object(w.jsx)(l.Size,{height:200}),Object(w.jsx)(l.Tooltip,{enabled:!0}),Object(w.jsx)(l.CommonSeriesSettings,{type:"bar"}),Object(w.jsx)(l.AdaptiveLayout,{width:450})]})}),Object(w.jsxs)(d,{id:"pivotgrid_alocao_executores",dataSource:I,onExporting:function(e){const a=new u.Workbook,t=a.addWorksheet("Alocacao_Executores");Object(m.exportPivotGrid)({component:e.component,worksheet:t}).then((()=>{a.xlsx.writeBuffer().then((e=>{Object(p.saveAs)(new Blob([e],{type:"application/octet-stream"}),"Alocacao_Executores_".concat(window.formatDate(new Date,!0),".xlsx"))}))})),e.cancel=!0},ref:e=>_(e?e.instance:null),children:[Object(w.jsx)(n.FieldChooser,{enabled:!0}),Object(w.jsx)(n.FieldPanel,{showColumnFields:!1,showDataFields:!1,showFilterFields:!1,showRowFields:!0,allowFieldDragging:!0,visible:!0}),Object(w.jsx)(n.Export,{enabled:!0}),Object(w.jsx)(n.StateStoring,{enabled:!0,type:"custom",customLoad:()=>s.a.get_parametro_usuario("alocacao_executores_pivotgrid"),customSave:e=>s.a.set_parametro_usuario("alocacao_executores_pivotgrid",e)})]})]})}},1102:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);const l={dataField:"logo_id",caption:"Logo",cellTemplate:function(e,a){var t=a.data.logo_id;if(t){var o=window.WS_URI+"documento/midia/?documento_id="+t+"&token_midia="+window.App.sessao.token_midia;e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}else o="assets/img/icones_bp/img.svg",e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}};const c={dataField:"codigo",caption:"C\xf3digo"},u={dataField:"unidade",caption:"Unidade"},p={dataField:"nome_fantasia",caption:"Nome Fantasia"},m={dataField:"razao_social",caption:"Raz\xe3o Social"},h={dataField:"telefone1",caption:"Telefone 1"},_={dataField:"telefone2",caption:"Telefone 2"},f={dataField:"telefone3",caption:"Telefone 3"},b={dataField:"telefone4",caption:"Telefone 4"},v={dataField:"bloqueado",caption:"Bloqueado",visible:!1,width:60},g={enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarFornecedores")},customSave:function(e){window.App.set_parametro_usuario("listarFornecedores",e)}};var w=t(244);class j extends i.a.Component{constructor(e){super(e),this.state={fornecedorLogo:"",fornecedorCodigo:"",fornecedorUnidade:"",fornecedorNomeFantasia:"",fornecedorRazaoSocial:"",fornecedorTelefone1:"",fornecedorTelefone2:"",fornecedorTelefone3:"",fornecedorTelefone4:""}}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo fornecedor",text:"Novo fornecedor",onClick:function(){window.View.load("fornecedor/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")},location:"after",name:"BtnNovoFornecedor",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de fornecedores",text:"Recarregar fornecedores",onClick:function(){this.listarFornecedores=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("fornecedor/configuracoes",(function(e,a){a.onclose=onclose,a.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){return Object(w.jsx)(i.a.Fragment,{children:Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col-md-12",children:Object(w.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"fornecedor_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){r.a.get({route:"fornecedor/listar/",data:Object(n.a)(Object(n.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(n.a)(Object(n.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"fornecedor/listar/",data:{dx_grid:!0,fornecedor_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),stateStoring:g,columns:[l,c,u,p,m,h,_,f,b,v,{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.fornecedor_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")},{hint:"Criar Unidade",icon:"fas fa-plus",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.fornecedor_id,window.FORMULARIO.CRIAR_UNIDADE)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")},{hint:"Hist\xf3rico Entidade",icon:"fas fa-file",cssClass:"icon_black",onClick:function(e){window.View.load("entidade_historico/listar",(function(a,t){t.show(e.row.data.fornecedor_id,"F")}),window.View.ABA.MULTIPLAS)}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(a,t){t.show(e.row.data.fornecedor_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.fornecedor_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")}]}]})})})});var e}}j.defaultProps={abaTitulo:"Fornecedores"};a.default=j},1103:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);const l={dataField:"codigo",caption:"C\xf3digo"},c={dataField:"unidade",caption:"Unidade"},u={dataField:"nome_fantasia",caption:"Nome Fantasia"},p={dataField:"razao_social",caption:"Raz\xe3o Social"},m={dataField:"telefone1",caption:"Telefone 1"},h={dataField:"telefone2",caption:"Telefone 2"},_={dataField:"telefone3",caption:"Telefone 3"},f={dataField:"telefone4",caption:"Telefone 4"},b={dataField:"efetivado",caption:"Efetivado",visible:!0,width:60},v={dataField:"bloqueado",caption:"Bloqueado",visible:!1,width:60},g=function(){var e="icon_black";return{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.prospect_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},{hint:"Criar Unidade",icon:"fas fa-plus",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.prospect_id,window.FORMULARIO.CRIAR_UNIDADE)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},{hint:"Efetivar Organiza\xe7\xe3o",icon:"fas fa-check",cssClass:e,visible:function(e){return"N"===e.row.data.efetivado&&window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},onClick:function(e){var a=new window.Validation;a.add(new window.ValidationMessage(window.Validation.CODES.ERR_FIELD,"Deseja efetivar "+e.row.data.nome_fantasia)),window.alert_modal("Organiza\xe7\xe3o",a,"Efetivar",(function(){r.a.post("prospect/efetivar",{prospect_id:e.row.data.prospect_id},(function(a){window.alert_saved(a.nome_fantasia+" efetivado com sucesso"),e.component.refresh()}))}),!0)}},{hint:"Hist\xf3rico Entidade",icon:"fas fa-file",cssClass:e,onClick:function(e){window.View.load("entidade_historico/listar",(function(a,t){t.show(e.row.data.prospect_id,"O")}),window.View.ABA.MULTIPLAS)}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(a,t){t.show(e.row.data.prospect_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.prospect_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")}]}},w={stateStoring:{enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarProspects")},customSave:function(e){window.App.set_parametro_usuario("listarProspects",e)}},export:{enabled:!0,fileName:"Relat\xf3rio de usu\xe1rios "+window.agora(),allowExportSelectedData:!0}};var j=t(244);class O extends i.a.Component{constructor(e){super(e),this.state={prospectCodigo:"",prospectUnidade:"",prospectNomeFantasia:"",prospectRazaoSocial:"",prospectTelefone1:"",prospectTelefone2:"",prospectTelefone3:"",prospectTelefone4:""}}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Nova organiza\xe7\xe3o",text:"Nova organiza\xe7\xe3o",onClick:function(){window.View.load("prospect/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},location:"after",name:"BtnNovaOrganizacao",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de organiza\xe7\xf5es",text:"Recarregar organiza\xe7\xf5es",onClick:function(){this.listarProspects=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-import",hint:"Importar",onClick:function(){window.View.load("prospect/importar",(function(e,a){a.onclose=onclose,a.show()}))},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},location:"after",name:"BtnImportar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("prospect/configuracoes",(function(e,a){a.onclose=onclose,a.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){return Object(j.jsx)(i.a.Fragment,{children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-12",children:Object(j.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"prospect_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){r.a.get({route:"prospect/listar/",data:Object(n.a)(Object(n.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(n.a)(Object(n.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"prospect/listar/",data:{dx_grid:!0,prospect_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),dataGridConfig:w,columns:[l,c,u,p,m,h,_,f,b,v,g()]})})})});var e}}O.defaultProps={abaTitulo:"Organiza\xe7\xf5es"};a.default=O},1104:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);const l={dataField:"logo_id",caption:"Logo",cellTemplate:function(e,a){var t=a.data.logo_id;if(t){var o=window.WS_URI+"documento/midia/?documento_id="+t+"&token_midia="+window.App.sessao.token_midia;e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}else o="assets/img/icones_bp/img.svg",e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}};const c={dataField:"codigo",caption:"C\xf3digo",width:200},u={dataField:"unidade",caption:"Unidade",width:200},p={dataField:"nome_fantasia",caption:"Nome Fantasia",width:200},m={dataField:"razao_social",caption:"Raz\xe3o Social",width:200},h={dataField:"telefone1",caption:"Telefone 1",width:200},_={dataField:"telefone2",caption:"Telefone 2",width:200},f={dataField:"telefone3",caption:"Telefone 3",width:200},b={dataField:"telefone4",caption:"Telefone 4",width:200},v={dataField:"bloqueado",caption:"Bloqueado",visible:!1,width:60},g={dataField:"possui_restricao",caption:"Possui Restri\xe7\xe3o",visible:!1,width:60},w={dataField:"cep",caption:"CEP",visible:!1,width:200},j={dataField:"endereco",caption:"Endere\xe7o",visible:!1,width:200},O={dataField:"numero",caption:"N\xfamero",visible:!1,width:200},x={dataField:"complemento",caption:"Complemento",visible:!1,width:200},A={dataField:"bairro",caption:"Bairro",visible:!1,width:200},C={dataField:"municipio",caption:"Munic\xedpio",visible:!1,width:200},S={dataField:"uf_sigla",caption:"UF Sigla",visible:!1,width:200},I={dataField:"uf",caption:"UF",visible:!1,width:200},E={dataField:"pais",caption:"Pa\xeds",visible:!1,width:200},P={dataField:"cnpj",caption:"CNPJ",visible:!1,width:200},T={dataField:"inscricao",caption:"Inscri\xe7\xe3o Estadual",visible:!1,width:200},y={dataField:"id_estrangeiro",caption:"ID Estrangeiro",visible:!1,width:200},R={dataField:"inscricao_municipal",caption:"Inscri\xe7\xe3o Municipal",visible:!1,width:200},D={dataField:"site",caption:"Site",visible:!1,width:200},M={dataField:"email_principal",caption:"Email Principal",visible:!1,width:200},k=function(e){return{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.cliente_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS,null,null,{clienteId:e.row.data.cliente_id})},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&e&&"N"===e.somente_consulta_cliente},{hint:"Criar Unidade",icon:"fas fa-plus",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.cliente_id,window.FORMULARIO.CRIAR_UNIDADE)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&e&&"N"===e.somente_consulta_cliente},{hint:"Hist\xf3rico Entidade",icon:"fas fa-file",cssClass:"icon_black",onClick:function(e){window.View.load("entidade_historico/listar",(function(a,t){t.show(e.row.data.cliente_id,"C")}),window.View.ABA.MULTIPLAS)}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(a,t){t.show(e.row.data.cliente_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS,null,null,{clienteId:e.row.data.cliente_id})}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.cliente_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&e&&"N"===e.somente_consulta_cliente}]}},N={enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarClientes")},customSave:function(e){window.App.set_parametro_usuario("listarClientes",e)}};var F=t(244);class L extends i.a.Component{constructor(e){super(e),this.state={clienteLogo:"",clienteCodigo:"",clienteUnidade:"",clienteNomeFantasia:"",clienteRazaoSocial:"",clienteTelefone1:"",clienteTelefone2:"",clienteTelefone3:"",clienteTelefone4:"",clienteParametros:null},this.getParametrosCliente=this.getParametrosCliente.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}getParametrosCliente(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this;r.a.get("cliente/get_parametros/",null,(function(o){t.setState({clienteParametros:o},(()=>{a&&e.component.repaint()}))}))}componentDidMount(){this.getParametrosCliente()}onToolbarPreparing(e){let a=this;const t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo cliente",text:"Novo cliente",onClick:function(){window.View.load("cliente/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&this.state.clienteParametros&&"N"===this.state.clienteParametros.somente_consulta_cliente},location:"after",name:"BtnNovoCliente",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de clientes",text:"Recarregar clientes",onClick:function(){this.listarClientes=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-import",hint:"Importar",onClick:function(){window.View.load("cliente/importar",(function(a,t){t.onclose=e.component.refresh,t.show()}))},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")},location:"after",name:"BtnImportar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("cliente/configuracoes",(function(t,o){o.onclose=function(){a.getParametrosCliente(e,!0)},o.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}render(){return null!==this.state.clienteParametros&&Object(F.jsx)(i.a.Fragment,{children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-md-12",children:Object(F.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(a={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"cliente_id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise((function(e,o){r.a.get({route:"cliente/listar/",data:Object(n.a)(Object(n.a)({},t),a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"cliente/listar/",data:{dx_grid:!0,cliente_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),stateStoring:N,columns:(e=this.state.clienteParametros,[l,c,u,p,m,h,_,f,b,v,g,w,j,O,x,A,C,S,I,E,P,T,y,R,D,M,k(e)])})})})});var e,a}}L.defaultProps={abaTitulo:"Clientes"};a.default=L},1105:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262),l=t(314);const c=[{dataField:"formulario_id",caption:"ID"},{dataField:"nome",caption:"Nome"},{dataField:"tipo_formulario_descritivo",caption:"Tipo Formul\xe1rio"},{type:"buttons",buttons:[{hint:"Editar",icon:"edit",cssClass:"icon_black",onClick:function(e){window.View.load("formulario/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.formulario_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS,null,null,{formularioId:e.row.data.formulario_id})}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("formulario/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.formulario_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Clonar",icon:"copy",cssClass:"icon_black",onClick:function(e){window.View.load("formulario/clonar",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.nome,e.row.data.formulario_id)}))}},{hint:"Exportar",icon:"export",cssClass:"icon_black",onClick:function(e){r.a.get("formulario/objeto/",{formulario_id:e.row.data.formulario_id},(function(a){let t=encodeURIComponent(JSON.stringify(a)),o=document.createElement("a");o.setAttribute("download",e.row.data.nome+".nbpf"),o.setAttribute("href","data:application/json;charset=utf-8,"+t),o.click()}))}},{hint:"Excluir",icon:"trash",cssClass:"icon_black",onClick:function(e){let a=!1,t="",o="";r.a.get("formulario/get_parametros/",null,(function(i){i.formulario_cliente_id===e.row.data.formulario_id&&null!=i.formulario_cliente_id&&(a=!0,o="Cliente"),i.formulario_prospect_id===e.row.data.formulario_id&&null!=i.formulario_prospect_id&&(a=!0,t="Organiza\xe7\xe3o",o=""!==o?o+" e "+t:t),a?Object(l.alert)("Este formul\xe1rio est\xe1 sendo utilizado em cadastros de <strong>"+o+"</strong>. Por gentileza, desfa\xe7a o v\xednculo antes de prosseguir com a exclus\xe3o.","Aviso"):window.View.load("formulario/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.formulario_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)}))}}]}];var u=t(244);class p extends i.a.Component{onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Formul\xe1rio",text:"Novo Formul\xe1rio",onClick:function(){window.View.load("formulario/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS,null,null,{formularioId:null})}},location:"after",name:"BtnNovoFormulario",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-upload",hint:"Importar Formul\xe1rio",text:"Importar",onClick:function(){window.View.load("formulario/importacao",(function(a,t){t.onclose=e.component.refresh,t.show()}))}},location:"after",name:"BtnImportarFormulario",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){return Object(u.jsx)(i.a.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)(s.default,{style:{height:"calc(100vh - 50px)"},dataSource:(e={dx_grid:!0},new d.default({key:"formulario_id",load:a=>{const t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){r.a.get({route:"formulario/listar/",data:Object(n.a)(Object(n.a)({},t),e),func_response:function(e){const t=window.createLoadExtra(e);a(Object(n.a)(Object(n.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),columns:c,pager:{showPageSizeSelector:!0,allowedPageSizes:[25,50,100],showInfo:!0},onToolbarPreparing:this.onToolbarPreparing,export:{enabled:!0,fileName:"Listagem_Formularios_"+window.agora(),allowExportSelectedData:!1},stateStoring:{enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listagemModelagemFormulario")},customSave:function(e){window.App.set_parametro_usuario("listagemModelagemFormulario",e)}}})})})});var e}}p.defaultProps={abaTitulo:"Formul\xe1rios"}},1106:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(247),i=t.n(o),s=t(267),n=t(494),r=t(254),d=t(248),l=t(262),c=t(253);var u=t(244);class p extends i.a.Component{constructor(e){super(e),this.gridRef=i.a.createRef(null)}render(){const e={hint:"Adicionar Categoria de Processos",text:"Adicionar",icon:"plus",onClick:e=>{this.gridRef.current.instance.addRow()}},a={hint:"Recarregar listagem",text:"Recarregar",icon:"refresh",onClick:e=>{this.gridRef.current.instance.refresh()}},t={hint:"Salvar altera\xe7\xf5es",text:"Salvar",icon:"save",onClick:e=>{const a=this.gridRef.current.instance.option("editing.changes");a.length?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};e.length&&c.a.post({route:"/categoria_processos/salvar/",data:{data:window.CircularJSON.stringify(e)},func_response:e=>{e?(window.alert_saved("Altera\xe7\xf5es salvas com sucesso"),"function"===typeof a&&a()):window.alert_fail("Falha ao salvar altera\xe7\xf5es")},func_fail:e=>{window.alert_fail("Falha ao salvar altera\xe7\xf5es"),console.error("Falha ao salvar Categorias de Processos"),console.error(e)}})}(a,(()=>{this.gridRef.current.instance.cancelEditData(),this.gridRef.current.instance.refresh()})):window.alert_info("Nenhuma altera\xe7\xe3o foi realizada")}};return Object(u.jsxs)(s.default,{ref:this.gridRef,dataSource:new l.default({pageSize:20,key:"categoria_processos_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{c.a.get({route:"/categoria_processos/listar/",data:Object(d.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(d.a)(Object(d.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){c.a.get({route:"/categoria_processos/listar/",data:{dx_grid:!0,id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}),style:{height:"calc(100vh - 50px)"},editing:{mode:"batch",allowUpdating:!0},children:[Object(u.jsx)(r.Column,{dataField:"nome",caption:"Nome",dataType:"string"},"column_nome"),Object(u.jsx)(n.a,{caption:"Cor de Fundo",dataField:"cor_fundo"},"cor_fundo"),Object(u.jsxs)(r.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(u.jsx)(r.Button,{icon:"trash",hint:"Marcar para exclus\xe3o",onClick:e=>this.gridRef.current.instance.deleteRow(e.row.rowIndex),visible:e=>!e.row.removed},"btn_delete"),Object(u.jsx)(r.Button,{icon:"revert",hint:"Desmarcar exclus\xe3o",onClick:e=>this.gridRef.current.instance.undeleteRow(e.row.rowIndex),visible:e=>e.row.removed},"btn_restore")]},"column_buttons"),Object(u.jsxs)(r.Toolbar,{children:[Object(u.jsx)(r.Item,{widget:"dxButton",options:a,showText:"inMenu"}),Object(u.jsx)(r.Item,{widget:"dxButton",options:e}),Object(u.jsx)(r.Item,{widget:"dxButton",options:t,showText:"inMenu"}),Object(u.jsx)(r.Item,{name:"revertButton"})]})]})}}p.defaultProps={abaTitulo:"Categoria de Processos"}},1107:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(488),r=t(280),d=t(244);const l=[Object(d.jsx)(r.a,{caption:"Grupo Motivo"})];var c=t(87),u=t(271),p=t(254),m=t(315),h=t(296);class _ extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Grupo de Motivos",text:"Adicionar",onClick:function(){u.a.loadReact(window.views.grupoMotivoChamado.Detalhes.default,{grupoMotivoChamadoId:null,onClose:e.component.refresh},(function(e){}),u.a.ABA.SIM)}},location:"after",name:"BtnNovoMotivoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){if(!c.a.sessao.dados.admin)return window.alert_modal("Valida\xe7\xe3o","Sem permiss\xe3o para alterar as configura\xe7\xf5es!","Ok",(function(){return!1})),!1;u.a.load("grupo_motivo_chamado/configuracao",(function(e,a){a.show()}))},visible:window.App.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[...l,Object(d.jsxs)(p.Column,{type:"buttons",children:[Object(d.jsx)(m.a,{onClick:e=>{u.a.loadReact(window.views.grupoMotivoChamado.Detalhes.default,{grupoMotivoChamadoId:e.row.data.grupo_id,onClose:e.component.refresh},(function(e){}),u.a.ABA.SIM)}}),Object(d.jsx)(h.a,{onClick:e=>{Object(n.d)(e.row.data.grupo_id,(()=>e.component.refresh()),(()=>e.component.refresh()))}})]})];return Object(d.jsx)(i.a.Fragment,{children:Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-12",children:Object(d.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},stateStoring:Object(s.stateStoring)("DataGridGrupoMotivoList"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(n.a)({dx_grid:!0}),children:e})})})})}}_.defaultProps={abaTitulo:"Grupos de Motivos"};a.default=_},1108:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(727),r=t(280),d=t(412),l=t(244);const c=[Object(l.jsx)(r.a,{caption:"Avalia\xe7\xe3o",width:200}),Object(l.jsx)(d.a,{width:200}),Object(l.jsx)(d.a,{dataField:"avaliacao_cliente",caption:"Habilitar para Clientes",width:200}),Object(l.jsx)(d.a,{dataField:"avaliacao_colaborador",caption:"Habilitar para Colaboradores",width:200}),Object(l.jsx)(d.a,{dataField:"avaliacao_fornecedor",caption:"Habilitar para Fornecedores",width:200}),Object(l.jsx)(d.a,{dataField:"avaliacao_organizacao",caption:"Habilitar para Organiza\xe7\xf5es",width:200})];var u=t(271),p=t(254),m=t(296),h=t(313);class _ extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.dataGrid=null}onToolbarPreparing(e){this.dataGrid=e.component;const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Avalia\xe7\xe3o",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){u.a.load("nota_avaliacao/configuracoes",(function(e,a){a.show()}))},visible:window.App.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var t=0;t<e.toolbarOptions.items.length;t++){const a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=e.component.getController("editing").getChanges();Object(n.b)(t,(a=>{e.component.saveEditData()}))})}}render(){const e=[...c,Object(l.jsxs)(p.Column,{type:"buttons",children:[Object(l.jsx)(m.a,{visible:e=>!e.row.removed&&!e.row.data.padrao,onClick:e=>this.dataGrid.deleteRow(e.row.rowIndex)}),Object(l.jsx)(h.a,{visible:e=>e.row.removed,onClick:e=>{this.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(l.jsx)(i.a.Fragment,{children:Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(s.stateStoring)("DataGridNotaAvaliacao"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(n.a)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},onInitNewRow:e=>{e.data.padrao=!1,e.data.avaliacao_cliente=!1,e.data.avaliacao_colaborador=!1,e.data.avaliacao_fornecedor=!1,e.data.avaliacao_organizacao=!1},onCellClick:e=>{if(e.column&&"padrao"===e.column.dataField&&!0===e.value){let a=[];e.row.isNewRow&&(a=e.component.getController("editing").getChanges().map((e=>e.data))),e.component.getDataSource()._items.forEach((e=>a.push(e))),a.forEach(((a,t)=>{if(t!==e.row.rowIndex){!0===e.component.cellValue(t,e.column.dataField)&&e.component.cellValue(t,e.column.dataField,!1)}}))}},children:e})})})})}}_.defaultProps={abaTitulo:"Classifica\xe7\xe3o de Avalia\xe7\xe3o"};a.default=_},1109:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(248),i=t(247),s=t.n(i),n=t(267),r=t(253),d=t(262);var l=t(254),c=t(433),u=t(244);class p extends s.a.Component{constructor(e){super(e),this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState()),this.onReorder=this.onReorder.bind(this)}propsToObjState(){return{dataSource:(e={dx_grid:!0},new d.default({key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,i)=>{r.a.get({route:"menu_personalizado/listar/",data:Object(o.a)(Object(o.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))}})}))}})),allowReordering:!0};var e}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Menu Personalizado",text:"Novo Menu Personalizado",onClick:function(){window.View.load("menu_personalizado/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}))}},location:"after",name:"BtnNovoMenuPersonalizado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}onReorder(e){const a=e.component.getVisibleRows(),t=[...this.state.dataSource._items],o=a[e.fromIndex].data,i=o.ordem,s=t.indexOf(a[e.toIndex].data);r.a.post({route:"/menu_personalizado/alterar_ordem/",data:{menu_personalizado_id:o.id,old_ordem:i,new_ordem:s},func_response:function(a){e.component.refresh(),Object(c.default)("Recarregue a p\xe1gina para que a ordena\xe7\xe3o tenha efeito no Menu Lateral")}})}render(){return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",id:"teste",children:Object(u.jsx)(n.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,stateStoring:{enabled:!0,type:"custom",customLoad:function(){return window.App.get_parametro_usuario("listagem_menu_personalizado")},customSave:function(e){window.App.set_parametro_usuario("listagem_menu_personalizado",e)}},columns:[{caption:"Nome",dataField:"nome",allowHiding:!1,cellTemplate:function(e,a){var t=a.data.nome;if(t){var o=a.data.imagem_id,i=null!==a.data.url_menu_img&&""!==a.data.url_menu_img?a.data.url_menu_img:"assets/img/icones_bp/integracao.svg",s=o?window.WS_URI+"documento/midia/?&tamanho=20&documento_id="+o+"&token_midia="+window.App.sessao.token_midia:i;e.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+s+'"><span style="margin-left: 5px;">'+t+"</span></div>")}}},{caption:"URL",dataField:"url_menu_personalizado"},{caption:"Permiss\xe3o",dataField:"permissao_necessaria"},{caption:"Ativo",dataField:"menu_personalizado_ativo"},{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:function(e){window.View.load("menu_personalizado/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.id,window.FORMULARIO.EDITAR)}))}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("menu_personalizado/detalhes",(function(a,t){t.show(e.row.data.id,window.FORMULARIO.VISUALIZAR)}))}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:function(e){window.View.load("menu_personalizado/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.id,window.FORMULARIO.EXCLUIR)}))}}]}],onToolbarPreparing:this.onToolbarPreparing,groupPanel:{visible:!1},sorting:{mode:"none"},children:Object(u.jsx)(l.RowDragging,{allowReordering:this.state.allowReordering,onReorder:this.onReorder,dropFeedbackMode:"push"})})})})})}}p.defaultProps={abaTitulo:"Menus Personalizados"}},1110:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return f}));var o=t(248),i=t(247),s=t.n(i),n=t(267),r=t(254),d=t(554),l=t(280),c=t(412),u=t(244);const p=[Object(u.jsx)(l.a,{}),Object(u.jsx)(c.a,{})];var m=t(253),h=t(296),_=t(313);class f extends s.a.Component{constructor(e){super(e),this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState()),this.onReorder=this.onReorder.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.listRef=s.a.createRef()}get list(){return this.listRef.current?this.listRef.current.instance:null}propsToObjState(){return{allowReordering:!0,dataSource:Object(d.a)()}}onToolbarPreparing(e){const a=this;let t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Prioridade",text:"Adicionar",onClick:function(){a.setState({allowReordering:!1}),e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(let o=0;o<e.toolbarOptions.items.length;o++){const t=e.toolbarOptions.items[o];"saveButton"===t.name&&(t.options.onClick=function(a){var t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());m.a.post("/chamado_prioridades/salvar_dxdatagrid/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))}),"revertButton"===t.name&&(t.options.onClick=function(t){a.setState({allowReordering:!0}),e.component.cancelEditData()})}}onReorder(e){const a=e.component.getVisibleRows(),t=[...this.state.dataSource._items],o=a[e.fromIndex].data,i=o.ordem;let s=null;s=-1===t.indexOf(a[e.toIndex].data)?t.indexOf(t[e.toIndex])+1:t.indexOf(a[e.toIndex].data)+1,m.a.post({route:"/chamado_prioridades/alterar_ordem/",data:{chamado_prioridade_id:o.chamado_prioridade_id,old_ordem:i,new_ordem:s},func_response:function(a){e.component.refresh()}})}render(){const e=[...p,Object(u.jsxs)(r.Column,{type:"buttons",children:[Object(u.jsx)(h.a,{visible:e=>!e.row.removed&&!1===e.row.data.padrao,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(u.jsx)(_.a,{visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(u.jsx)("div",{children:Object(u.jsxs)(n.default,{ref:this.listRef,style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,columnChooser:{visible:!1},groupPanel:{visible:!1},selection:{mode:"multiple"},stateStoring:Object(d.b)(),editing:{mode:"batch",allowUpdating:!0,useIcons:!0},onCellClick:e=>{if(e.column&&"padrao"===e.column.dataField&&!0===e.value){let a=[];e.row.isNewRow&&(a=e.component.getController("editing").getChanges().map((e=>e.data))),e.component.getDataSource()._items.forEach((e=>a.push(e))),a.forEach(((a,t)=>{if(t!==e.row.rowIndex){!0===e.component.cellValue(t,e.column.dataField)&&e.component.cellValue(t,e.column.dataField,!1)}}))}},onInitNewRow:e=>{e.data.padrao=!1},children:[e,Object(u.jsx)(r.RowDragging,{allowReordering:this.state.allowReordering,onReorder:this.onReorder,dropFeedbackMode:"push"})]})})}}f.defaultProps={abaTitulo:"Prioridades de Chamados"}},1111:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return _}));var o=t(247),i=t.n(o),s=t(267),n=t(739),r=t(349),d=t(350),l=t(244);const c=[Object(l.jsx)(r.a,{dataField:"categoria_pdca_id",caption:"#",allowEditing:!1,fixed:!0,fixedPosition:"left",width:60}),Object(l.jsx)(d.a,{dataField:"nome",caption:"Nome"})];var u=t(254),p=t(296),m=t(313),h=t(253);class _ extends i.a.Component{constructor(e){super(e),this.state={dataSource:Object(n.a)()},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...c,Object(l.jsxs)(u.Column,{type:"buttons",children:[Object(l.jsx)(p.a,{visible:e=>!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(l.jsx)(m.a,{visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(l.jsx)("div",{children:Object(l.jsx)(s.default,{dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},style:{height:"calc(100vh - 45px)"},children:e})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar \xc1rea de PDCA",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());h.a.post("/categoria_pdca/salvar/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}_.defaultProps={abaTitulo:"Categorias de PDCA"}},1112:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var o=t(247),i=t.n(o),s=t(267),n=t(740),r=t(280),d=t(412),l=t(244);const c=[Object(l.jsx)(r.a,{dataField:"descricao"},"descricao"),Object(l.jsx)(d.a,{dataField:"padrao_chamados",caption:"Padr\xe3o Chamados"},"padrao_chamados"),Object(l.jsx)(d.a,{dataField:"padrao_documentos",caption:"Padr\xe3o Documentos"},"padrao_documentos"),Object(l.jsx)(d.a,{dataField:"padrao_processos",caption:"Padr\xe3o Processos"},"padrao_processos"),Object(l.jsx)(d.a,{dataField:"padrao_projeto",caption:"Padr\xe3o Projeto"},"padrao_projeto"),Object(l.jsx)(d.a,{dataField:"padrao_atendimento_relacionamento",caption:"Padr\xe3o CRM"},"padrao_atendimento_relacionamento"),Object(l.jsx)(d.a,{dataField:"padrao_sistema",caption:"Padr\xe3o Sistema"},"padrao_sistema"),Object(l.jsx)(d.a,{dataField:"controle_acessos",caption:"Controle Acessos",allowEditing:!1},"controle_acessos")];var u=t(254),p=t(315),m=t(296),h=t(313),_=t(271),f=t(253);class b extends i.a.Component{constructor(e){super(e),this.state={dataSource:Object(n.a)()},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...c,Object(l.jsxs)(u.Column,{type:"buttons",children:[Object(l.jsx)(p.a,{icon:"fas fa-lock",hint:"Editar permiss\xf5es",name:"editar_permissoes",visible:e=>!e.row.isNewRow&&!("Arquivo ZIP"===e.row.data.descricao),onClick:e=>{_.a.load("assunto/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.assunto_id,window.FORMULARIO.EDITAR)}))}}),Object(l.jsx)(m.a,{visible:e=>!e.row.removed&&!("Arquivo ZIP"===e.row.data.descricao),onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(l.jsx)(h.a,{visible:e=>e.row.removed&&!("Arquivo ZIP"===e.row.data.descricao),onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(l.jsx)("div",{children:Object(l.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_assunto_documento"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},onCellClick:e=>{if(e.column&&["padrao_chamados","padrao_documentos","padrao_processos","padrao_projeto","padrao_atendimento_relacionamento","padrao_sistema"].includes(e.column.dataField)&&!0===e.value){let a=[];e.row.isNewRow&&(a=e.component.getController("editing").getChanges().map((e=>e.data))),e.component.getDataSource()._items.forEach((e=>a.push(e))),a.forEach(((a,t)=>{if(t!==e.row.rowIndex){!0===e.component.cellValue(t,e.column.dataField)&&e.component.cellValue(t,e.column.dataField,!1)}}))}},onInitNewRow:e=>{e.data.padrao_chamados=!1,e.data.padrao_documentos=!1,e.data.padrao_processos=!1,e.data.padrao_projeto=!1,e.data.padrao_atendimento_relacionamento=!1,e.data.padrao_sistema=!1,e.data.controle_acessos=!1},onEditorPreparing:e=>{"dataRow"===e.parentType&&"Arquivo ZIP"===e.row.data.descricao&&(e.editorOptions.disabled=!0)},children:e})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Assunto",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoAssunto",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());f.a.post("/assunto/salvar_dx_grid/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}b.defaultProps={abaTitulo:"Assuntos de Documentos"}},1113:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var o=t(247),i=t.n(o),s=t(267),n=t(741),r=t(280),d=t(412),l=t(244);const c=[Object(l.jsx)(r.a,{}),Object(l.jsx)(d.a,{dataField:"padrao_chamados",caption:"Padr\xe3o Chamados"}),Object(l.jsx)(d.a,{dataField:"padrao_documentos",caption:"Padr\xe3o Documentos"}),Object(l.jsx)(d.a,{dataField:"padrao_processos",caption:"Padr\xe3o Processos"}),Object(l.jsx)(d.a,{dataField:"padrao_projeto",caption:"Padr\xe3o Projeto"}),Object(l.jsx)(d.a,{dataField:"padrao_atendimento_relacionamento",caption:"Padr\xe3o CRM"}),Object(l.jsx)(d.a,{dataField:"padrao_sistema",caption:"Padr\xe3o Sistema"}),Object(l.jsx)(d.a,{dataField:"controle_acessos",caption:"Controle Acessos",allowEditing:!1})];var u=t(254),p=t(315),m=t(296),h=t(313),_=t(271),f=t(253);class b extends i.a.Component{constructor(e){super(e),this.state={dataSource:Object(n.a)()},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...c,Object(l.jsxs)(u.Column,{type:"buttons",children:[Object(l.jsx)(p.a,{icon:"fas fa-lock",hint:"Editar permiss\xf5es",name:"editar_permissoes",visible:e=>!e.row.isNewRow&&!("Arquivo ZIP"===e.row.data.nome),onClick:e=>{_.a.load("tipo_documento/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.tipo_documento_id,window.FORMULARIO.EDITAR)}))}}),Object(l.jsx)(m.a,{visible:e=>!e.row.removed&&!("Arquivo ZIP"===e.row.data.nome),onClick:e=>e.component.deleteRow(e.row.rowIndex)}),Object(l.jsx)(h.a,{visible:e=>e.row.removed&&!("Arquivo ZIP"===e.row.data.nome),onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})];return Object(l.jsx)("div",{children:Object(l.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_tipo_documento"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},onCellClick:e=>{if(e.column&&["padrao_chamados","padrao_documentos","padrao_processos","padrao_projeto","padrao_atendimento_relacionamento","padrao_sistema"].includes(e.column.dataField)&&!0===e.value){let a=[];e.row.isNewRow&&(a=e.component.getController("editing").getChanges().map((e=>e.data))),e.component.getDataSource()._items.forEach((e=>a.push(e))),a.forEach(((a,t)=>{if(t!==e.row.rowIndex){!0===e.component.cellValue(t,e.column.dataField)&&e.component.cellValue(t,e.column.dataField,!1)}}))}},onInitNewRow:e=>{e.data.padrao_chamados=!1,e.data.padrao_documentos=!1,e.data.padrao_processos=!1,e.data.padrao_projeto=!1,e.data.padrao_atendimento_relacionamento=!1,e.data.padrao_sistema=!1,e.data.controle_acessos=!1},onEditorPreparing:e=>{"dataRow"===e.parentType&&"Arquivo ZIP"===e.row.data.nome&&(e.editorOptions.disabled=!0)},children:e})})}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Tipo",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoTipo",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{const t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());f.a.post("/tipo_documento/salvar_dx_grid/",{data:t},(function(a){let t=!0===a?"success":"error",o=!0===a?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,t),!0===a&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}b.defaultProps={abaTitulo:"Tipos de Documentos"}},1114:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var o=t(247),i=t.n(o),s=t(267),n=t(748),r=t(349),d=t(280),l=t(350),c=t(244);const u=[Object(c.jsx)(r.a,{dataField:"consulta_id",caption:"#"}),Object(c.jsx)(d.a,{dataField:"nome",caption:"Nome"}),Object(c.jsx)(l.a,{dataField:"banco_dados_nome",caption:"Tipo"}),Object(c.jsx)(l.a,{dataField:"database_nome",caption:"Database"})];var p=t(254),m=t(315),h=t(296),_=t(416),f=t(271);class b extends i.a.Component{constructor(e){super(e),this.state={dataSource:Object(n.a)()},this.handleAcessarConsultaIntegracao=this.handleAcessarConsultaIntegracao.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}render(){const e=[...u,Object(c.jsxs)(p.Column,{type:"buttons",children:[Object(c.jsx)(_.a,{onClick:e=>this.handleAcessarConsultaIntegracao(e,e.row.data.consulta_id,window.FORMULARIO.VISUALIZAR)}),Object(c.jsx)(m.a,{onClick:e=>this.handleAcessarConsultaIntegracao(e,e.row.data.consulta_id,window.FORMULARIO.EDITAR)}),Object(c.jsx)(h.a,{onClick:e=>this.handleAcessarConsultaIntegracao(e,e.row.data.consulta_id,window.FORMULARIO.EXCLUIR)})]})];return Object(c.jsx)("div",{children:Object(c.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_consulta_integracao"),selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},children:e})})}handleAcessarConsultaIntegracao(e,a,t){f.a.load("consulta_integracao/detalhes",(function(o,i){i.onclose=e.component.refresh,i.show(a,t)}))}onToolbarPreparing(e){let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Consulta de Integra\xe7\xe3o",text:"Adicionar",onClick:e=>this.handleAcessarConsultaIntegracao(e,null,window.FORMULARIO.NOVO)},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}b.defaultProps={abaTitulo:"Consultas de Integra\xe7\xe3o"}},1115:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var o=t(247),i=t.n(o),s=t(267),n=t(280),r=t(412),d=t(721),l=t(350),c=t(442),u=t(43),p=t.n(u),m=t(244);const h=[Object(m.jsx)(n.a,{dataField:"nome_fantasia",caption:"Nome Fantasia"},"nome_fantasia"),Object(m.jsx)(n.a,{dataField:"razao_social",caption:"Raz\xe3o Social"},"razao_social"),Object(m.jsx)(r.a,{dataField:"padrao",caption:"Empresa Padr\xe3o",width:180,calculateCellValue:e=>"S"==e.padrao},"empresa_padrao"),Object(m.jsx)(d.a,{dataField:"cnpj"},"cnpj"),Object(m.jsx)(c.a,{dataField:"vigencia_de",caption:"V\xe1lida De"},"vigencia_de"),Object(m.jsx)(c.a,{dataField:"vigencia_ate",caption:"V\xe1lida At\xe9"},"vigencia_ate"),Object(m.jsx)(l.a,{caption:"Status Licen\xe7a",dataField:"licenca_valida_descricao",cellTemplate:(e,a)=>{let t="",o="";switch(a.data.licenca_valida){case!0:t="label-success",o="V\xe1lida";break;case!1:t="label-danger",o="Inv\xe1lida"}e.css({textAlign:"center"}).addClass("bg-"+t),p()("<label>").text(o).css({color:"#FFF"}).appendTo(e)}},"licenca")];var _=t(254),f=t(315),b=t(296),v=t(271),g=t(253),w=t(87);class j extends i.a.Component{constructor(e){super(e),this.state={dataSource:[]},this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.listar_empresas=this.listar_empresas.bind(this),this.listar_empresas()}listar_empresas(){g.a.get("empresa/listar/",null,(e=>{this.setState({dataSource:e})}))}render(){const e=[...h,Object(m.jsxs)(_.Column,{type:"buttons",children:[Object(m.jsx)(f.a,{onClick:e=>{v.a.load("empresa/detalhes",((a,t)=>{t.onclose=this.listar_empresas,t.show(e.row.data.empresa_id,window.FORMULARIO.EDITAR,e.row.data.licenca_valida)}),v.a.ABA.MULTIPLAS)}}),Object(m.jsx)(b.a,{onClick:e=>{v.a.load("empresa/detalhes",((a,t)=>{t.onclose=this.listar_empresas,t.show(e.row.data.empresa_id,window.FORMULARIO.EXCLUIR,e.row.data.licenca_valida)}),v.a.ABA.MULTIPLAS)}})]})];return Object(m.jsx)("div",{children:Object(m.jsx)(s.default,{style:{height:"calc(100vh - 45px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(s.stateStoring)("listagem_empresa_filial"),selection:{mode:"multiple"},children:e})})}onToolbarPreparing(e){let a=[{widget:"dxDropDownButton",options:{icon:"key",hint:"Renovar Licen\xe7as",text:"Renovar Licen\xe7as",dropDownOptions:{width:322},items:[{text:"Renovar Licen\xe7as Autom\xe1ticamente",icon:"refresh",onClick:e=>{g.a.get("empresa/licenca/renovar/",null,(e=>{let a="";e.log.forEach((e=>a+=e+"<br>")),window.alert_modal("Renova\xe7\xe3o autom\xe1tica",a),this.listar_empresas()}))}},{text:"Testar Comunica\xe7\xe3o Com Servido de Licen\xe7as",icon:"link",onClick(e){g.a.post("empresa/licenca/testar_servidor/",null,(function(e){}))}}]},showText:"inMenu",location:"after",name:"BtnRenovar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Empresa",text:"Adicionar",onClick:()=>{v.a.load("empresa/detalhes",((e,a)=>{a.onclose=this.listar_empresas,a.show(null,window.FORMULARIO.NOVO,!!w.a.temp.empresa)}),v.a.ABA.MULTIPLAS)}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{this.listar_empresas()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}j.defaultProps={abaTitulo:"Empresas"}},1116:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var o=t(247),i=t.n(o),s=t(87),n=(t(253),t(267)),r=t(565),d=t(248),l=t(254),c=t(280),u=t(703),p=t.n(u),m=t(281),h=t(244);const _=e=>Object(h.jsxs)("div",{style:{display:"flex",marginLeft:"-3px"},children:[Object(h.jsx)("div",{style:{backgroundColor:e.value,width:"17px",height:"17px",border:"1px solid",borderColor:"rgba(0, 0, 0, .12)",marginRight:"10px"},children:"\xa0"}),Object(h.jsx)("div",{children:e.value})]}),f=e=>{const a=e.data.pai_id?null:Object(h.jsxs)(i.a.Fragment,{children:[Object(h.jsx)("span",{className:"fa fa-globe"}),"\xa0"]});return Object(h.jsxs)("div",{children:[a,Object(h.jsx)("div",{className:"label",style:{backgroundColor:e.data.cor_fundo,color:e.data.cor_fonte||(t=e.data.cor_fundo,t||(t="#000"),"#"==t.substr(0,1)&&(t=t.substr(1)),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"black":"white")},children:e.data.nome})]});var t},b=e=>{const a=Object(o.useCallback)((a=>{e.data.setValue(a.value)}),[e]);return Object(h.jsx)(p.a,{defaultValue:e.data.value,onValueChanged:a})},v=e=>{let a=[];return Array.isArray(e.value)&&e.value.forEach((e=>{const t=window.USUARIO_TIPO_LOOKUP.filter((a=>a.id==e))[0]||null;t&&a.push(t.descricao)})),a.join(", ")},g=e=>{var a;const t=Object(o.useCallback)(((a,t)=>{e.data.setValue(a)}),[e]);return Object(h.jsx)(m.default,Object(d.a)({},Object(d.a)(Object(d.a)({},e),{},{selecionado:(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.value)||null,dataSource:Object(r.d)(),columns:["descricao"],selectionMode:"multiple",valueExpr:"id",displayExpr:"descricao",aoAlterar:t})))},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return[Object(h.jsx)(c.a,{dataField:"nome",caption:"Etiqueta",cellRender:f,width:"250px",children:Object(h.jsx)(l.RequiredRule,{})},"nome"),Object(h.jsx)(l.Column,{dataField:"cor_fundo",cellRender:_,editCellComponent:b,children:Object(h.jsx)(l.RequiredRule,{})},"cor_fundo"),Object(h.jsx)(l.Column,{dataField:"cor_fonte",cellRender:_,editCellComponent:b,children:Object(h.jsx)(l.RequiredRule,{})},"cor_fonte"),Object(h.jsx)(l.Column,{dataField:"usuario_tipo",cellRender:v,editCellComponent:g,allowHeaderFiltering:!1,allowFiltering:!1,allowSearch:!1,allowSorting:!1,allowGrouping:!1,children:Object(h.jsx)(l.RequiredRule,{})},"usuario_tipo"),Object(h.jsx)(l.Column,{type:"buttons",children:Object(h.jsx)(l.Button,{name:"delete",visible:a=>!e||e===a.row.data.pai_id})},"botoes")]};function j(e){const{html_id:a,titulo:t,pai_tabela:o,pai_id:i}=e;setTimeout((()=>s.a.titulo_aba(a,"Etiquetas: "+(t||o+" - "+i))));return Object(h.jsx)("div",{style:{width:"100%"},children:Object(h.jsx)(n.default,{style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(n.stateStoring)("listagem_etiquetas"),dataSource:Object(r.a)({pai_tabela:o,pai_id:i,dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!0,allowDeleting:!0},onInitNewRow:e=>{e.data.pai_tabela=o,e.data.pai_id=i},onEditingStart:e=>{i>0&&!e.data.pai_id&&(e.cancel=!0)},onSaving:e=>{e.cancel=!0,e.changes.length&&(e.promise=new Promise(((a,t)=>{Object(r.b)({pai_tabela:o,pai_id:i,alteracoes:e.changes,func_response:t=>{a(t),e.component.refresh(!0).done((()=>{e.component.cancelEditData()}))},func_fail:e=>t(e)})})))},children:w(i)})})}j.defaultProps={abaTitulo:"Etiquetas",pai_id:null}},1117:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return v}));var o=t(247),i=t(709),s=t.n(i),n=t(444),r=t.n(n),d=t(254),l=t.n(d),c=t(43),u=t.n(c),p=t(253);const m=async e=>{const a=await p.a.get({route:"/atividade_projeto/listar_todas_atividades_gantt/",data:{projeto_id:e},awaitReturn:!0}),t={tasks:[],dependencies:[],resources:[],resourceAssignments:[]};if(a.length){let e=1;for(let o=0;o<a.length;o++){let i=a[o];const s=i.previsao_inicio?new Date(i.previsao_inicio):null,n=i.prazo?new Date(i.prazo):null,r=i.conclusao?new Date(i.conclusao):null;if(t.tasks.push({id:"P"===i.tipo_atividade?"raiz":+i.id,parentId:"P"===i.tipo_atividade?-1:i.pai_id?+i.pai_id:"raiz",codigo:i.codigo,title:i.atividade_simplificada,start:s instanceof Date&&!isNaN(s)?s:null,end:n instanceof Date&&!isNaN(n)?n:null,conclusao:r instanceof Date&&!isNaN(r)?r:null,progress:i.porcentagem?+i.porcentagem:0,status:+i.status,sequencia:i.sequencia,executores:i.recursos}),i.predecessoras.length)for(let a=0;a<i.predecessoras.length;a++){let o=i.predecessoras[a];t.dependencies.push({id:e,predecessorId:+o.id,successorId:+i.id,type:0}),e++}if(i.recursos)for(let e=0;e<i.recursos.length;e++){const a=i.recursos[e];t.resources.some((e=>e.id===parseInt(a.id)))||t.resources.push({id:parseInt(a.id),nome:a.nome}),t.resourceAssignments.push({id:t.resourceAssignments.length+1,taskId:parseInt(i.id),resourceId:parseInt(a.id)})}}}return t};var h=t(1041),_=t.n(h),f=t(87),b=t(244);function v(e){const a={text:"Legendas",hint:"Legendas",icon:"bulletlist",stylingMode:"text",onClick:e=>{window.alertaPopUp("Legendas",(e=>{let a=u()("<div>"),t=u()("<ul>").appendTo(a),o=["#4796CE","#35B86B","#8B8B8B","#DE6175","#F78119"],i=[" Em andamento"," Conclu\xeddo"," Cancelado"," Atrasado"," N\xe3o Iniciado"];for(let s=0;s<o.length;s++){let e=u()("<li>").appendTo(t);u()("<span>").addClass(_.a.progress).css({backgroundColor:o[s],display:"inline-block",width:50,height:12}).appendTo(e),u()("<span>").text(i[s]).css({fontSize:17}).appendTo(e)}u()(e).append(a)}),"Ok",(()=>{}),null,null,500,250)}},t={hint:"Recarregar",icon:"refresh",stylingMode:"text",onClick:e=>{U()}},n={icon:"fas fa-file-export",hint:"Exportar Gantt",text:"Exportar Gantt",onClick:()=>{f.a.obter_token_publico((a=>{const t=window.WS_URI+"projeto/exportar_gantt_projeto/?token_publico="+a+"&colunas="+p(N).join(",")+"&projeto_id="+e.projeto_id;window.open(t,"_blank")}))}};let c=f.a.get_parametro_usuario("gantt_colunas");"undefined"===typeof c.visiveis&&(c.visiveis=["title","sequencia","codigo","start","end","conclusao","progress"]),"undefined"===typeof c.ordem&&(c.ordem=["title","sequencia","codigo","start","end","conclusao","progress"]);const p=e=>{let a=[];return c.ordem.forEach((t=>{for(let o=0;o<e.length;o++){const i=e[o];if("string"===typeof i&&i===t||i.id===t){a.push(i);break}}})),e.forEach((e=>{c.ordem.includes("string"===typeof e?e:e.id)||a.push(e)})),a},h="Nome",v="Sequ\xeancia",g="C\xf3digo",w="Previs\xe3o In\xedcio",j="Prazo",O="Data Conclus\xe3o",x="Porc. Conclus\xe3o",[A,C]=Object(o.useState)([]),[S,I]=Object(o.useState)([]),[E,P]=Object(o.useState)([]),[T,y]=Object(o.useState)([]),[R,D]=Object(o.useState)("days"),[M,k]=Object(o.useState)(0),[N,F]=Object(o.useState)(c.visiveis),[L,B]=Object(o.useState)(p([{id:"title",nome:h},{id:"sequencia",nome:v},{id:"codigo",nome:g},{id:"start",nome:w},{id:"end",nome:j},{id:"conclusao",nome:O},{id:"progress",nome:x}]));async function U(){const a=await m(e.projeto_id);C(a.tasks.length?a.tasks:[]),I(a.dependencies.length?a.dependencies:[]),P(a.resources.length?a.resources:[]),y(a.resourceAssignments.length?a.resourceAssignments:[])}function V(e,a){const t=u()("<div>"),o=u()("<span>").text(a.data.title+" ").appendTo(t);"raiz"===a.data.id||a.data.start||a.data.end||(e.parent().css({backgroundColor:"#FFABAB"}).attr("title","A atividade n\xe3o possui Previs\xe3o de In\xedcio e Prazo definidos."),u()("<i>").addClass("fas fa-exclamation-triangle").css({color:"#CC6600"}).appendTo(o)),e.append(t)}function z(e){return"".concat(e.progress,"%")}function G(e){var a;let t=null!==(a=e.sequencia)&&void 0!==a?a:"",o=String(t).split(".");return t="",o.forEach((e=>{t+=window.pad(e,10)+"."})),t}Object(o.useEffect)((()=>{U()}),[]),Object(o.useEffect)((()=>{k(M+1)}),[A,S,E,T]);return Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsxs)(s.a,{taskListWidth:900,scaleType:R,scaleTypeRange:{max:"years",min:"minutes"},rootValue:-1,height:"calc(100vh - 50px)",filterRow:{visible:!0},headerFilter:{visible:!0},onOptionChanged:function(e){"scaleType"===e.name&&D(e.value)},taskContentRender:function(e){let{taskData:a,taskSize:t,taskResources:o}=e,i="#3498DB";const s=o.map((e=>e.text)).join(", ");if("raiz"===a.id)switch(a.status){case window.PROJETO_STATUS.CONCLUIDO:i="#35B86B";break;case window.PROJETO_STATUS.NAO_INICIADO:i="#F78119";break;case window.PROJETO_STATUS.CANCELADO:i="#8B8B8B";break;default:i="#4796CE"}else switch(a.status){case window.PROJETO_STATUS_ATIVIDADES.PROGRAMADO:i="#D3D3D3";break;case window.PROJETO_STATUS_ATIVIDADES.NAO_INICIADO:i="#F78119";break;case window.PROJETO_STATUS_ATIVIDADES.CONCLUIDO:i="#35B86B";break;case window.PROJETO_STATUS_ATIVIDADES.ATRASADO:i="#DE6175";break;case window.PROJETO_STATUS_ATIVIDADES.CANCELADA:i="#8B8B8B";break;default:i="#4796CE"}return Object(b.jsxs)("div",{className:"div-custom-task",style:{width:"".concat(t.width,"px"),background:"".concat(i)},children:[Object(b.jsxs)("div",{className:_.a.taskWrapper,children:[Object(b.jsx)("div",{className:_.a.taskTitle,children:a.title}),Object(b.jsx)("div",{className:_.a.taskRow,children:"".concat(s)})]}),Object(b.jsx)("div",{className:_.a.progress,style:{width:"".concat(a.progress,"%")}})]})},taskTooltipContentTemplate:e=>{const a=e=>new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(",",""),t=u()(document.createElement("div")).addClass("custom-task-edit-tooltip").css({"background-color":"rgba(0, 0, 0, 0.65)",color:"#fff",padding:"10px","border-radius":"5px","max-width":"250px","font-family":"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif","font-size":"12px"});u()(document.createElement("div")).addClass("custom-tooltip-title").text(e.title).css({"font-size":"13px","font-weight":"bold","margin-bottom":"5px"}).appendTo(t),u()(document.createElement("div")).addClass("custom-tooltip-row").html("<strong>Iniciar:</strong> ".concat(a(e.start))).css({"margin-bottom":"2px"}).appendTo(t),u()(document.createElement("div")).addClass("custom-tooltip-row").html("<strong>Encerrar:</strong> ".concat(a(e.end))).css({"margin-bottom":"2px"}).appendTo(t),u()(document.createElement("div")).addClass("custom-tooltip-row").html("<strong>Progresso:</strong> ".concat(e.progress,"%")).appendTo(t);const o=T.filter((a=>a.taskId==e.id)).map((e=>{const a=E.find((a=>a.id==e.resourceId));return a?a.nome:null})).filter((e=>null!==e));return o.length>0&&u()(document.createElement("div")).addClass("custom-tooltip-row").html("<strong>Executores:</strong> ".concat(o.join(", "))).appendTo(t),t},children:[Object(b.jsxs)(i.Toolbar,{children:[Object(b.jsx)(i.Item,{name:"collapseAll"}),Object(b.jsx)(i.Item,{name:"expandAll"}),Object(b.jsx)(i.Item,{name:"separator"}),Object(b.jsx)(i.Item,{name:"zoomIn"}),Object(b.jsx)(i.Item,{name:"zoomOut"}),Object(b.jsx)(i.Item,{name:"separator"}),Object(b.jsx)(i.Item,{children:Object(b.jsx)(r.a,{dataSource:L,value:N,keyExpr:"id",valueExpr:"id",deferRendering:!1,displayExpr:"nome",placeholder:"Colunas",onValueChanged:e=>{f.a.set_parametro_usuario("gantt_colunas",e.value||[]),F({visiveis:e.value||[]})},dropDownOptions:{width:300},dropDownButtonRender:e=>Object(b.jsx)("i",{className:"dx-icon dx-icon-column-chooser",style:{maxHeight:"100%",maxWidth:"100%",fontSize:"16px",marginTop:"6px"}}),contentRender:()=>Object(b.jsxs)(l.a,{height:345,keyExpr:"id",dataSource:L,hoverStateEnabled:!0,selectedRowKeys:N,onSelectionChanged:e=>{f.a.set_parametro_usuario("gantt_colunas",{visiveis:e.selectedRowKeys.length&&e.selectedRowKeys||[]}),F(e.selectedRowKeys.length&&e.selectedRowKeys||[])},rowDragging:{allowReordering:!0,onReorder(e){const a=e.component.getVisibleRows(),t=L.findIndex((t=>t.id===a[e.toIndex].data.id)),o=L.findIndex((a=>a.id===e.itemData.id));let i=L;i.splice(o,1),i.splice(t,0,e.itemData),B(i);const s=L.map((e=>e.id));f.a.set_parametro_usuario("gantt_colunas",{ordem:s}),e.component.refresh(),U()}},children:[Object(b.jsx)(d.Column,{caption:"Coluna",dataField:"nome"}),Object(b.jsx)(d.Selection,{mode:"multiple"}),Object(b.jsx)(d.Scrolling,{mode:"virtual"})]})})}),Object(b.jsx)(i.Item,{name:"separator"}),Object(b.jsx)(i.Item,{widget:"dxButton",options:a}),Object(b.jsx)(i.Item,{widget:"dxButton",options:t}),Object(b.jsx)(i.Item,{name:"separator"}),Object(b.jsx)(i.Item,{widget:"dxButton",showText:"always",options:n})]}),Object(b.jsx)(i.Tasks,{keyExpr:"id",dataSource:A}),Object(b.jsx)(i.Dependencies,{keyExpr:"id",dataSource:S}),(()=>{let e=[];return L.forEach((a=>{switch(a.id){case"title":e.push(Object(b.jsx)(i.Column,{dataField:"title",caption:h,width:200,cellTemplate:V,visible:N.includes("title")}));break;case"sequencia":e.push(Object(b.jsx)(i.Column,{dataField:"sequencia",caption:v,width:100,visible:N.includes("sequencia"),calculateSortValue:G}));break;case"codigo":e.push(Object(b.jsx)(i.Column,{dataField:"codigo",caption:g,width:100,visible:N.includes("codigo")}));break;case"start":e.push(Object(b.jsx)(i.Column,{dataField:"start",caption:w,width:150,visible:N.includes("start"),allowHeaderFiltering:!1}));break;case"end":e.push(Object(b.jsx)(i.Column,{dataField:"end",caption:j,width:150,visible:N.includes("end"),allowHeaderFiltering:!1}));break;case"conclusao":e.push(Object(b.jsx)(i.Column,{dataField:"conclusao",caption:O,width:150,visible:N.includes("conclusao"),allowHeaderFiltering:!1}));break;case"progress":e.push(Object(b.jsx)(i.Column,{dataField:"progress",caption:x,width:150,visible:N.includes("progress"),alignment:"left",calculateDisplayValue:z}))}})),e.push(Object(b.jsx)(i.Column,{dataField:"status",caption:"Status",width:150,visible:!1})),e})()]},M)})})}v.defaultProps={abaTitulo:"Projeto Gantt"}},1118:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var o=t(247),i=t.n(o),s=t(267),n=t(254),r=t(248),d=t(262),l=t(253);var c=t(244);class u extends i.a.Component{constructor(e){super(e),this.dxGridRef=i.a.createRef(null)}render(){const e={icon:"refresh",hint:"Recarregar",onClick:function(e){this.dxGridRef.current.instance.refresh()}.bind(this)};return this.props.projeto_id&&Object(c.jsx)(i.a.Fragment,{children:Object(c.jsxs)(s.default,{ref:this.dxGridRef,dataSource:(a=this.props.projeto_id,new d.default({pageSize:20,key:"id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise(((e,o)=>{l.a.get({route:"/projeto/listar_historico_baseline/",data:Object(r.a)({projeto_id:a,dx_grid:!0},t),func_response:a=>{let t=window.createLoadExtra(a);e(Object(r.a)(Object(r.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){l.a.get({route:"/projeto/listar_historico_baseline/",data:{dx_grid:!0,historico_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),style:{height:"calc(100vh - 50px)"},children:[Object(c.jsx)(n.Column,{width:100,dataField:"id",caption:"#",dataType:"number",alignment:"left",fixed:!0,fixedPosition:"left"}),Object(c.jsx)(n.Column,{dataField:"insert_hora",caption:"Criado em",dataType:"datetime",allowHeaderFiltering:!1}),Object(c.jsx)(n.Column,{dataField:"insert_usuario_nome",caption:"Criado por",dataType:"string"}),Object(c.jsx)(n.Column,{dataField:"sequencia",caption:"Sequ\xeancia",dataType:"number",alignment:"left"}),Object(c.jsx)(n.Column,{type:"buttons",children:Object(c.jsx)(n.Button,{icon:"fas fa-trash",hint:"Excluir Baseline",onClick:function(e){!function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};window.alertaPopUp("Excluir baseline","Deseja excluir a <strong>Baseline #".concat(e,"</strong>?<br><br>Todos registros desse hist\xf3rico ser\xe3o perdidos com a exclus\xe3o."),"Sim, excluir",(function(){l.a.post("/projeto/excluir_historico_baseline/",{historico_id:e},(e=>{window.alert_saved("Baseline exclu\xedda com sucesso."),"function"===typeof a&&a()}))}),"N\xe3o, cancelar")}(e.row.data.id,this.dxGridRef.current.instance.refresh)}.bind(this)})}),Object(c.jsxs)(n.Toolbar,{children:[Object(c.jsx)(n.Item,{name:"exportButton",location:"after"}),Object(c.jsx)(n.Item,{location:"after",widget:"dxButton",options:e})]})]},"baseline_projeto_".concat(this.props.projeto_id))});var a}}u.defaultProps={abaTitulo:"Baseline Projeto"}},1119:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return f}));var o=t(247),i=t.n(o),s=t(374),n=t.n(s),r=t(307),d=t.n(r),l=t(248),c=t(376),u=t(271),p=t(244);function m(e){let{card:a,projetoDetalhesOnclose:t}=e,o="",i="bg-label-info";switch(+a.status_id){case window.PROJETO_STATUS_ATIVIDADES.ANDAMENTO:o="Andamento",i="bg-label-info";break;case window.PROJETO_STATUS_ATIVIDADES.CONCLUIDO:o="Conclu\xeddo",i="bg-label-success";break;case window.PROJETO_STATUS_ATIVIDADES.NAO_INICIADO:o="N\xe3o Iniciado",i="bg-label-warning";break;case window.PROJETO_STATUS_ATIVIDADES.ATRASADO:o="Atrasado",i="bg-label-danger";break;case window.PROJETO_STATUS_ATIVIDADES.CANCELADA:o="Cancelada",i="bg-label-default"}const s=a.inicio?window.formatar_data_humano(a.inicio):null,n=s?"Inicio em "+s:null,m=s?"fa fa-clock":"",h=a.prazo?window.formatar_data_humano(a.prazo):null,_=h?"Prazo em "+h:null,f=h?"fa fa-clock":"",b=a.porcentagem?parseInt(a.porcentagem,10)+"%":"0%",v="Conclus\xe3o  "+b,g=a.horas_trabalhadas&&"00:00:00"!=a.horas_trabalhadas?a.horas_trabalhadas.split(":")[0]+":"+a.horas_trabalhadas.split(":")[1]:"00:00",w="Horas trabalhada(s)  "+g,j=a.saldo_horas&&"00:00:00"!=a.saldo_horas?a.saldo_horas.split(":")[0]+":"+a.saldo_horas.split(":")[1]:"00:00",O="Saldo de Horas "+j;let x=[],A="";if(Array.isArray(a.executores))for(let r=0;r<a.executores.length;r++){const e=a.executores[r];if(!(r<3)){Array.isArray(a.executores)&&(A=a.executores.slice(3).map((e=>e.nome)).join(", ")),x.push(Object(p.jsx)(c.a,{tamanho:"28",titulo:"Executores: "+A,nome:"+ "+(a.executores.length-r),margemFlutuante:!0},window.elem_key_random()));break}A+=e.nome,x.push(Object(p.jsx)(c.a,{tamanho:"28",usuarioId:e.usuario_id,titulo:"Executor: ",nome:e.nome,margemFlutuante:!0},window.elem_key_random()))}const C=+a.status_id==window.PROJETO_STATUS_ATIVIDADES.ATRASADO?"text-danger":"text-info";return Object(p.jsxs)("div",{className:"card dx-card dx-theme-text-color dx-theme-background-color ",style:{minHeight:"110px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"12px"},onClick:e=>{u.a.load("atividade_projeto/detalhes",(function(e,o){var i={projeto_atividade_id:a.id,tipo:window.FORMULARIO.EDITAR};o.onclose=t,o.show(i)}),u.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:a.id})},children:[Object(p.jsxs)("div",{style:Object(l.a)({},{marginTop:"-10px",paddingLeft:"10px",paddingRight:"10px"}),children:[Object(p.jsx)(d.a,{style:{marginBottom:"12px"},children:[Object(p.jsx)(r.Item,{location:"before",children:Object(p.jsx)("div",{children:Object(p.jsx)("div",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},title:a.atividade_simplificada,children:a.atividade_simplificada})})},"nome_atividade")]}),Object(p.jsx)(d.a,{children:[Object(p.jsx)(r.Item,{location:"before",children:Object(p.jsx)("div",{style:{display:"flex"},children:x})},"cliente_executor"),Object(p.jsx)(r.Item,{location:"after",children:Object(p.jsxs)("div",{className:"text-right",children:[Object(p.jsxs)("div",{title:n,className:"small "+C,children:[Object(p.jsx)("i",{className:m,"aria-hidden":"true"}),"\xa0",s]}),Object(p.jsxs)("div",{title:_,className:"text-muted small mt-2",children:[Object(p.jsx)("i",{className:f,"aria-hidden":"true"}),"\xa0",h]}),Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px"},children:[Object(p.jsx)("div",{className:"text-muted small mt-2",title:v,children:b}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{title:w,className:"text-muted small mt-2",children:[Object(p.jsx)("i",{className:"fa fa-clock","aria-hidden":"true"}),"\xa0",g]})}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{title:O,className:"text-muted small mt-2",children:[Object(p.jsx)("i",{className:"fa fa-clock","aria-hidden":"true"}),"\xa0",j]})})]})]})},"atividades_horas")]})]}),Object(p.jsx)("div",{style:{height:"10px",position:"absolute",bottom:"-2px",width:"100%"},className:i,title:o,children:"\xa0"})]})}var h=t(559),_=t(87);class f extends i.a.Component{constructor(e){super(e),this.state={list:[],atividade_descricao:"",responsavel_nome:""},this.listar.bind(this)}async componentDidMount(){await this.listar()}async listar(){let e={projeto_id:this.props.projeto_id,atividade_descricao:this.state.atividade_descricao,responsavel_nome:this.state.responsavel_nome},a=await Object(h.b)(e);this.setState({list:a})}onListUpdated(e){this.setState({list:e})}render(){var e;const a=(null!==(e=Object.values(this.state.list))&&void 0!==e?e:[]).map(((e,a)=>Object(p.jsx)(v,{title:e.descricao_status,index:a,cards:e.itens,main:this,onListUpdated:this.onListUpdated.bind(this),projetoDetalhesOnclose:e=>this.listar()},e.nome_projeto+"_"+e.itens.data.length+"_"+Math.random()))),t=Object(p.jsx)(i.a.Fragment,{children:Object(p.jsx)("div",{className:"dx_kanban",children:Object(p.jsx)(n.a,{className:"scrollable-board",direction:"horizontal",showScrollbar:"always",style:{overflow:"scroll"},children:a})})});return _.a.titulo_aba(this.props.html_id,this.props.projeto_nome),Object(p.jsxs)("div",{children:[Object(p.jsx)(b,{projeto_id:this.props.projeto_id,nome_projeto:this.props.projeto_nome,atividadeDescricaoValue:this.state.atividade_descricao,atividadeDescricaoOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({atividade_descricao:a},(()=>{this.listar()}))},responsavelNomeValue:this.state.responsavel_nome,responsavelNomeOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({responsavel_nome:a},(()=>{this.listar()}))},recarregarOnClick:e=>{this.listar()}}),t]})}}function b(e){let{atividadeDescricaoValue:a,atividadeDescricaoOnEnterKey:t,responsavelNomeValue:o,responsavelNomeOnEnterKey:i,recarregarOnClick:s}=e;return Object(p.jsxs)(d.a,{children:[Object(p.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Recarregar",hint:"Recarregar",icon:"refresh",stylingMode:"text",onClick:s}}),Object(p.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Descri\xe7\xe3o da Atividade",labelMode:"static",value:a,onEnterKey:t}}),Object(p.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Respons\xe1vel",labelMode:"static",value:o,onEnterKey:i}})]})}function v(e){let{title:a,index:t,cards:o,main:i,onListUpdated:s,projetoDetalhesOnclose:r}=e;const d=i.state.list[t].itens.data?i.state.list[t].itens.totalCount:0,l=i.state.responsavel_nome,c=i.state.list.length,u=10*c+60;return Object(p.jsxs)("div",{className:"list ",style:{height:"calc(100vh - 100px)",minWidth:"265px",width:"calc((100vw - "+u+"px) / "+c+")"},children:[Object(p.jsx)("div",{className:"pull-right",style:{marginRight:"10px",marginTop:"8px"},children:Object(p.jsx)("div",{className:"label label-default",children:d})}),Object(p.jsx)("div",{className:"list-title dx-theme-text-color titulo_lista",title:a,children:a}),Object(p.jsx)(n.a,{style:{height:"calc(100vh - 138px)",width:"100%"},className:"scrollable-list",direction:"vertical",showScrollbar:"always",onReachBottom:o.data.length>0&&o.data.length<o.totalCount&&!l?async e=>{let a=parseInt(i.state.list[t].skip||0)+parseInt(i.props.take),o=[...i.state.list],n={projeto_id:i.props.projeto_id,indice_listagem:t,skip:a},r=await Object(h.b)(n);r.itens&&r.itens.data&&Array.isArray(r.itens.data)&&(o[t].itens.data=[...o[t].itens.data,...r.itens.data],o[t].itens.totalCount=r.itens.totalCount,o[t].skip=a,s(o))}:null,onScroll:e=>{i.state.list[t].itens.scrollOffset=e.scrollOffset},onInitialized:e=>{setTimeout((()=>{var a,o,s,n;null!==i&&void 0!==i&&null!==(a=i.state)&&void 0!==a&&null!==(o=a.list)&&void 0!==o&&null!==(s=o[t])&&void 0!==s&&null!==(n=s.itens)&&void 0!==n&&n.scrollOffset&&e.component.scrollTo(i.state.list[t].itens.scrollOffset)}))},children:o&&o.data&&Array.isArray(o.data)&&o.data.map((e=>Object(p.jsx)(m,{card:e,projetoDetalhesOnclose:r})))})]})}f.defaultProps={abaTitulo:"Kanban",take:20,arrColumns:[],listKey:null,route:null}},1120:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(746),r=t(280),d=t(244);const l=[Object(d.jsx)(r.a,{width:"100%"},"Nome")];var c=t(254),u=t(296),p=t(416),m=t(315);class h extends i.a.Component{constructor(e){super(e),this.state={},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Grupo de Usu\xe1rios",text:"Adicionar",onClick:function(){window.View.load("grupo_usuarios/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}))}},location:"after",name:"BtnNovoGrupoUsuario",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarGrupoUsuarios=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[...l,Object(d.jsxs)(c.Column,{type:"buttons",children:[Object(d.jsx)(m.a,{visible:e=>parseInt(e.row.data.tipo_grupo_usuario)===window.TIPO_GRUPO_USUARIO.GRUPO_PERSONALIZADO,onClick:e=>{window.View.load("grupo_usuarios/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.grupo_usuarios_id,window.FORMULARIO.EDITAR)}))}},"btnEditar"),Object(d.jsx)(c.Button,{name:"permissoes",hint:"Permissoes",icon:"fas fa-lock",onClick:e=>{window.View.load("usuario/permissoes",(function(a,t){t.onclose=onclose,t.show(null,window.FORMULARIO.EDITAR,null,null,e.row.data.grupo_usuarios_id)}))}},"BtnPermissoes"),Object(d.jsx)(c.Button,{name:"clonar",hint:"Clonar",icon:"fas fa-clone",onClick:e=>{window.View.load("grupo_usuarios/clonar",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.nome,e.row.data.grupo_usuarios_id)}))}},"BtnClonar"),Object(d.jsx)(p.a,{onClick:e=>{window.View.load("grupo_usuarios/detalhes",(function(a,t){t.show(e.row.data.grupo_usuarios_id,window.FORMULARIO.VISUALIZAR)}))}},"BtnVisualizar"),Object(d.jsx)(u.a,{visible:e=>parseInt(e.row.data.tipo_grupo_usuario)===window.TIPO_GRUPO_USUARIO.GRUPO_PERSONALIZADO,onClick:e=>{window.View.load("grupo_usuarios/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.grupo_usuarios_id,window.FORMULARIO.EXCLUIR)}))}},"BtnApagar")]},"btns")];return Object(d.jsx)(i.a.Fragment,{children:Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-12",children:Object(d.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(n.a)(null,null,!0,!0),stateStoring:Object(s.stateStoring)("listarGrupoUsuarios"),groupPanel:{visible:!1},children:e})})})})}}h.defaultProps={abaTitulo:"Grupo de Usu\xe1rios"};a.default=h},1121:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262);var l=t(254),c=t(296),u=t(416),p=t(315),m=t(280),h=t(244);class _ extends i.a.Component{constructor(e){super(e),this.state={},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Grupo de Ativos",text:"Adicionar",onClick:function(){var a={tipo:window.FORMULARIO.NOVO,grupo_ativos_id:null};window.View.load("grupo_ativos/detalhes",(function(t,o){o.show(a),o.onclose=e.component.refresh}),window.View.ABA.SIM)}},location:"after",name:"BtnNovoGrupoativos",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarGrupoativos=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){const e=[Object(h.jsx)(m.a,{width:""},"nome"),Object(h.jsxs)(l.Column,{type:"buttons",children:[Object(h.jsx)(p.a,{onClick:e=>{var a={tipo:window.FORMULARIO.EDITAR,grupo_ativos_id:e.row.data.id};window.View.load("grupo_ativos/detalhes",(function(t,o){o.onclose=e.component.refresh,o.show(a)}),window.View.ABA.SIM)}},"btnEditar"),Object(h.jsx)(u.a,{onClick:e=>{var a={tipo:window.FORMULARIO.VISUALIZAR,grupo_ativos_id:e.row.data.id};window.View.load("grupo_ativos/detalhes",(function(e,t){t.show(a)}),window.View.ABA.SIM)}},"BtnVisualizar"),Object(h.jsx)(c.a,{onClick:e=>{var a={tipo:window.FORMULARIO.EXCLUIR,grupo_ativos_id:e.row.data.id};window.View.load("grupo_ativos/detalhes",(function(t,o){o.onclose=e.component.refresh,o.show(a)}),window.View.ABA.SIM)}},"BtnApagar")]},"btns")];return Object(h.jsx)(i.a.Fragment,{children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsx)(s.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(a={dx_grid:!0},new d.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise((function(e,o){r.a.get({route:"grupo_ativos/listar/",data:Object(n.a)(Object(n.a)({},t),a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){r.a.get({route:"grupo_ativos/listar/",data:{dx_grid:!0,id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),stateStoring:Object(s.stateStoring)("listarGrupoAtivos"),groupPanel:{visible:!1},children:e})})})});var a}}_.defaultProps={abaTitulo:"Grupos de Agenda de Ativos"};a.default=_},1122:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(253),d=t(262),l=t(254),c=t(43),u=t.n(c),p=t(244);let m=(e,a)=>{0==e.situacao&&"S"===e.ativo?r.a.post("job_scheduler/executar/",{job_scheduler_id:e.job_scheduler_id},(function(e){window.alert_modal("Valida\xe7\xe3o",window.nl2br(e.log_ultima_execucao)),a&&"function"===typeof a.reload&&a.reload()})):window.alert_modal("Aviso","Job inativo ou j\xe1 em execu\xe7\xe3o.")};class h extends i.a.Component{constructor(e){var a,t;super(e),this.state={semaforo_status:!1},this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.dataSourceJobs=(a={},t=e=>{const a=e&&e.length>0;this.state.semaforo_status!==a&&this.setState({semaforo_status:a})},new d.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"job_scheduler_id",load:e=>{let o=window.loadOptionsToActionParams(e);return new Promise(((e,i)=>{r.a.get({route:"job_scheduler/listar/",data:Object(n.a)(Object(n.a)({},o),a),func_response:a=>{null===t||void 0===t||t(a.semaforo),e(Object(n.a)(Object(n.a)({},window.createLoadExtra(a)),{},{data:a.lista.data,semaforo:a.semaforo}))},func_fail:e=>e.validation&&i(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))})}))},byKey:e=>!!e&&new Promise(((a,o)=>{r.a.get({route:"job_scheduler/listar/",data:{dx_grid:!0,job_scheduler_id:e},func_response:e=>{null===t||void 0===t||t(e.semaforo),a(e.data)},func_fail:e=>e.validation&&o(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))})}))}))}onToolbarPreparing(e){const{semaforo_status:a}=this.state,t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Job",text:"Novo Job",onClick:()=>{window.View.load("job_scheduler/detalhes",((a,t)=>{t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),!1)}},location:"after",name:"BtnNovoJob",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar Jobs",text:"Recarregar Jobs",onClick:()=>{this.dataSourceJobs.reload()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-traffic-light",hint:"Limpar Sem\xe1foro",onClick:()=>{var e;e=this.dataSourceJobs,r.a.post("job_scheduler/limpar_semaforo/",null,(()=>{e&&"function"===typeof e.reload&&(window.alert_modal("Aviso","Sem\xe1foro limpo com sucesso."),e.reload())}))}},visible:a,location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}render(){return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:this.dataSourceJobs,stateStoring:Object(s.stateStoring)("listarJobs"),children:[Object(p.jsx)(l.Column,{dataField:"script",caption:"Job Script",dataType:"string",width:500,minWidth:500},"script"),Object(p.jsx)(l.Column,{dataField:"ativo",caption:"Ativo",dataType:"string",width:150,minWidth:150,cellTemplate:(e,a)=>{let t="",o="";"S"==a.data.ativo?(t="label-success",o="Sim"):(t="label-default",o="N\xe3o"),e.css({textAlign:"center"}).addClass("bg-"+t),u()("<span>").text(o).css({color:"#FFF"}).appendTo(e)},children:Object(p.jsx)(l.Lookup,{dataSource:[{id:"S",descricao:"Sim"},{id:"N",descricao:"N\xe3o"}],valueExpr:"id",displayExpr:"descricao"})},"ativo"),Object(p.jsx)(l.Column,{dataField:"minuto",caption:"Minuto",dataType:"string",width:150,minWidth:150},"minuto"),Object(p.jsx)(l.Column,{dataField:"hora",caption:"Hora",dataType:"string",width:150,minWidth:150},"hora"),Object(p.jsx)(l.Column,{dataField:"dia",caption:"Dia",dataType:"string",width:150,minWidth:150},"dia"),Object(p.jsx)(l.Column,{dataField:"mes",caption:"M\xeas",dataType:"string",width:150,minWidth:150},"mes"),Object(p.jsx)(l.Column,{dataField:"dia_semana",caption:"Dia Semana",dataType:"string",width:150,minWidth:150},"dia_semana"),Object(p.jsx)(l.Column,{dataField:"ultima_execucao",caption:"\xdaltima Execu\xe7\xe3o",dataType:"datetime",width:150,minWidth:150},"ultima_execucao"),Object(p.jsx)(l.Column,{dataField:"situacao",caption:"Situa\xe7\xe3o",dataType:"string",width:200,minWidth:200,cellTemplate:(e,a)=>{let t="",o="";0==+a.data.situacao?(t="label-default",o="Aguardando"):1==+a.data.situacao&&(t="label-warning",o="Em execu\xe7\xe3o"),e.css({textAlign:"center"}).addClass("bg-"+t),u()("<span>").text(o).css({color:"#FFF"}).appendTo(e)},children:Object(p.jsx)(l.Lookup,{dataSource:[{id:0,descricao:"Aguardando"},{id:1,descricao:"Em execu\xe7\xe3o"}],valueExpr:"id",displayExpr:"descricao"})},"situacao"),Object(p.jsxs)(l.Column,{type:"buttons",children:[Object(p.jsx)(l.Button,{hint:"Executar",icon:"fas fa-play-circle",cssClass:"icon_black",onClick:e=>m(e.row.data,e.component.getDataSource())}),Object(p.jsx)(l.Button,{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:e=>{window.View.load("job_scheduler/detalhes",((a,t)=>{t.onclose=e.component.refresh,t.show(e.row.data.job_scheduler_id,window.FORMULARIO.EDITAR,null)}),!1)}}),Object(p.jsx)(l.Button,{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:e=>{window.View.load("job_scheduler/detalhes",((a,t)=>{t.onclose=e.component.refresh,t.show(e.row.data.job_scheduler_id,window.FORMULARIO.VISUALIZAR,null)}),!1)}}),Object(p.jsx)(l.Button,{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:e=>{window.View.load("job_scheduler/detalhes",((a,t)=>{t.onclose=e.component.refresh,t.show(e.row.data.job_scheduler_id,window.FORMULARIO.EXCLUIR,null)}),!1)}})]})]})})})}}h.defaultProps={abaTitulo:"Job Scheduler"};a.default=h},1123:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var o=t(247),i=t(267),s=t(254),n=t(248),r=t(253),d=t(262);const l=e=>new d.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){r.a.get({route:"parametro_usuario/listar/",data:Object(n.a)(Object(n.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(n.a)(Object(n.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){r.a.get({route:"parametro_usuario/listar/",data:{dx_grid:!0,id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),c=e=>{let{alteracoes:a,func_response:t,func_fail:o}=e;if(!a)return!1;r.a.post({route:"parametro_usuario/excluir/",data:{alteracoes:a},func_response:t,func_fail:o})};var u=t(414),p=t(244);function m(e){const a=Object(o.useRef)(null),t={display:"flex"},n={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return Object(p.jsx)("div",{style:{width:"100%"},children:Object(p.jsxs)(i.default,{ref:a,style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(i.stateStoring)("listagemParametroUsuarios"),columnAutoWidth:!1,dataSource:l(),editing:{mode:"batch",allowUpdating:!1,allowAdding:!1,allowDeleting:!0},onSaving:e=>{e.cancel=!0,e.changes.length&&(e.promise=new Promise(((a,t)=>{c({alteracoes:e.changes,func_response:t=>{a(t),e.component.refresh(!0).done((()=>{e.component.cancelEditData()}))},func_fail:e=>t(e)})})))},children:[Object(p.jsx)(s.Column,{dataField:"usuario_id",caption:"ID do Usu\xe1rio",visible:!1}),Object(p.jsx)(s.Column,{dataField:"usuario_nome",caption:"Nome do Usu\xe1rio"}),Object(p.jsx)(s.Column,{dataField:"parametro_nome",caption:"Par\xe2metro"}),Object(p.jsx)(s.Column,{dataField:"valor",caption:"Conte\xfado",cellRender:e=>{var a,o,i,s;return Object(p.jsxs)("div",{style:t,children:[Object(p.jsx)("div",{style:n,children:null===(a=e.row)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.valor}),Object(p.jsx)(u.default,{style:{padding:"0px"},title:"Copiado para a \xe1rea de transfer\xeancia.",url:null===(i=e.row)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.valor,children:Object(p.jsx)("span",{className:"far fa-copy"})})]})}})]})})}m.defaultProps={abaTitulo:"Par\xe2metros de Usu\xe1rios"}},1124:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var o=t(247),i=t(267),s=t(254),n=t(248),r=t(253),d=t(262);const l=e=>new d.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){r.a.get({route:"fila_evento/listar/",data:Object(n.a)(Object(n.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(n.a)(Object(n.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){r.a.get({route:"fila_evento/listar/",data:{dx_grid:!0,id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),c=e=>{let{alteracoes:a,func_response:t,func_fail:o}=e;if(!a)return!1;r.a.post({route:"fila_evento/excluir/",data:{alteracoes:a},func_response:t,func_fail:o})};var u=t(414),p=t(343),m=t(244);function h(e){const a=Object(o.useRef)(null),t={display:"flex"},n={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};return Object(m.jsx)("div",{style:{width:"100%"},children:Object(m.jsxs)(i.default,{ref:a,style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(i.stateStoring)("listagemFilaEvento"),columnAutoWidth:!1,dataSource:l(),editing:{mode:"batch",allowUpdating:!1,allowAdding:!1,allowDeleting:!0},onSaving:e=>{e.cancel=!0,e.changes.length&&(e.promise=new Promise(((a,t)=>{c({alteracoes:e.changes,func_response:t=>{a(t),e.component.refresh(!0).done((()=>{e.component.cancelEditData()}))},func_fail:e=>t(e)})})))},children:[Object(m.jsx)(s.Column,{dataField:"id",caption:"Id",visible:!1}),Object(m.jsx)(p.a,{dataField:"insert_hora",caption:"Inclus\xe3o",sortIndex:0,sortOrder:"asc"}),Object(m.jsx)(s.Column,{dataField:"evento",caption:"Evento"}),Object(m.jsx)(s.Column,{dataField:"parametros",caption:"Par\xe2metros",cellRender:e=>{var a,o,i,s;return Object(m.jsxs)("div",{style:t,children:[Object(m.jsx)("div",{style:n,children:null===(a=e.row)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.parametros}),Object(m.jsx)(u.default,{style:{padding:"0px"},title:"Copiado para a \xe1rea de transfer\xeancia.",url:null===(i=e.row)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.parametros,children:Object(m.jsx)("span",{className:"far fa-copy"})})]})}})]})})}h.defaultProps={abaTitulo:"Fila de Eventos"}},1125:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));var o=t(248),i=t(281),s=t(253),n=t(262);const r=()=>new n.default({key:"chave",load:e=>{window.loadOptionsToActionParams(e);return new Promise(((e,a)=>{s.a.get({route:"permissoes/todas/",data:null,func_response:a=>{e(a)},func_fail:e=>{e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>({chave:e})});var d=t(244);function l(e){var a;return Object(d.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:r(),dropDownContainer:null!==(a=e.dropDownContainer)&&void 0!==a?a:void 0,remoteOperations:!1})))}l.defaultProps={columns:[{dataField:"alias",caption:"Nome"},{dataField:"modulo",caption:"M\xf3dulo",groupIndex:0},{dataField:"chave",caption:"Chave"}],displayExpr:e=>e&&e.chave,placeholder:"Permiss\xe3o necess\xe1ria",agrupaColunas:!0,dataGridRemoteOperations:!1}},1126:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(262),d=t(253),l=t(440);var c=t(244);class u extends i.a.Component{constructor(e){var a;super(e),this.dataGridRef=i.a.createRef(),this.meta_id=this.props.meta_id,this.state={dataSource:(a=this.meta_id,new r.default({pageSize:20,key:"registro_id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise(((e,o)=>{d.a.get({route:"metas_vendas/listar_metas_eventos/",data:Object(n.a)({dx_grid:!0,metas_vendas_id:a},t),func_response:a=>{let t=window.createLoadExtra(a);e(Object(n.a)(Object(n.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),columns:[{dataField:"representante_id",caption:"Representante",lookup:{dataSource:Object(l.createStore)({key:"representante_id",loadUrl:window.WS_URI+"representante/listar/",onBeforeSend:function(e,a){a.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},a.headers=d.a.dxHeaders(),a.data.dx_grid=!0,a.data=window.spread(a.data)}}),displayExpr:"nome_fantasia",valueExpr:"representante_id"}},{dataField:"tipo_agenda_oportunidade_id",caption:"Tipo Evento",lookup:{dataSource:Object(l.createStore)({key:"tipo_agenda_oportunidade_id",loadUrl:window.WS_URI+"tipo_agenda_oportunidade/listar/",onBeforeSend:function(e,a){a.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},a.headers=d.a.dxHeaders(),a.data.dx_grid=!0,a.data=window.spread(a.data)}}),displayExpr:"descricao",valueExpr:"tipo_agenda_oportunidade_id"}},{dataField:"quantidade",caption:"Quantidade",dataType:"number",align:"left"},{type:"buttons",buttons:[{hint:"Excluir",icon:"trash",visible:e=>!e.row.removed,onClick:e=>e.component.deleteRow(e.row.rowIndex)},{hint:"Recuperar",icon:"revert",visible:e=>e.row.removed,onClick:e=>{e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}}]}]},this.onToolbarPreparing=this.onToolbarPreparing.bind(this)}componentDidMount(){"function"===typeof this.props.getDataGridRef&&this.props.getDataGridRef(this.dataGridRef)}render(){return Object(c.jsx)("div",{children:Object(c.jsx)(s.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,columns:this.state.columns,onToolbarPreparing:this.onToolbarPreparing,selection:{mode:"multiple"},stateStoring:this.meta_id>0?Object(s.stateStoring)("ListagemMetaEventos_meta_".concat(this.meta_id)):null,editing:{mode:"batch",allowUpdating:!0,useIcons:!0}})})}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}onToolbarPreparing(e){console.log(this.dataGridRef);let a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Meta de Evento",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(let t=0;t<e.toolbarOptions.items.length;t++){let a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.visible=!1)}}}},1127:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));var o=t(248),i=t(281),s=t(262),n=t(253);const r=()=>new s.default({paginate:!0,pageSize:20,key:"documento_pasta_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{n.a.get({route:"documento_pasta/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){n.a.get({route:"documento_pasta/listar/",data:{dx_grid:!0,documento_pasta_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});var d=t(244);function l(e){return Object(d.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:r()})))}l.defaultProps={placeholder:"Selecionar Pasta",valueExpr:"documento_pasta_id",displayExpr:"path",dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,columns:[{dataField:"nome",caption:"Nome",dataType:"string",allowHeaderFiltering:!1,selectedFilterOperation:"contains"},{dataField:"path",caption:"Caminho",dataType:"string",allowHeaderFiltering:!1,sortIndex:0,sortOrder:"asc"}]}},1128:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(247),i=t.n(o),s=t(267),n=t(254),r=t(248),d=t(262),l=t(253);var c=t(87),u=t(244);class p extends i.a.Component{constructor(e){super(e),this.cellRender=e=>{let a=null;if(e.data.foto_id){let t=window.WS_URI+"documento/midia/?&tamanho=28&documento_id="+e.data.foto_id+"&token_midia="+c.a.sessao.token_midia;a=Object(u.jsx)("img",{alt:"avatar",style:{height:"28px",width:"28px",borderRadius:"25em",margin:"0 0 0 4px"},src:t,title:e.data.nome})}else a=Object(u.jsx)("div",{style:{width:"28px",height:"28px",backgroundColor:"#dfe1e6",borderRadius:"25em",color:"#172b4d",lineHeight:"28px",textAlign:"center",display:"inlineBlock",margin:"0 0 0 4px",verticalAlign:"middle"},children:Object(u.jsx)("span",{style:{fontWeight:600},title:e.data.nome,children:window.obter_iniciais(e.data.nome)})});var t=function(e){return e===window.getDateNow(!0)?"hoje - "+window.dia_semana(window.format_ToDate(e).getDay()):e===window.formatDate(window.getDateNow().addDay(1),!0)?"amanh\xe3 - "+window.dia_semana(window.format_ToDate(e).getDay()):window.formatar_data_humano(e)+" - "+window.dia_semana(window.format_ToDate(e).getDay())};let o=null,i=null;return parseInt(e.data.tipo_aniversario)===window.TIPO_ANIVERSARIO.NASCIMENTO?(o=Object(u.jsxs)("div",{style:{marginLeft:"10px"},children:[e.data.nome," da \xc1rea ",e.data.area_nome," ",Object(u.jsx)("br",{})," Aniversariante ",t(e.data.data_aniversario)]}),i=Object(u.jsx)("i",{style:{marginLeft:"15px",fontSize:"24px"},className:"fas fa-birthday-cake text-primary"})):parseInt(e.data.tipo_aniversario)===window.TIPO_ANIVERSARIO.EMPRESA&&(o=Object(u.jsxs)("div",{style:{marginLeft:"10px"},children:[e.data.nome," da \xc1rea ",e.data.area_nome," ",Object(u.jsx)("br",{})," Completa ",e.data.qtde_anos," Ano(s) de empresa ",t(e.data.data_aniversario)]}),i=Object(u.jsx)("i",{style:{marginLeft:"15px",fontSize:"24px"},className:"fas fa-briefcase text-primary"})),Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[a,o,i]})},this.dataGridRef=i.a.createRef(),this.cellRender=this.cellRender.bind(this)}render(){return Object(u.jsx)("div",{children:Object(u.jsx)(s.default,{pager:{showPageSizeSelector:!1},elementAttr:{style:"max-height: 300px"},ref:this.dataGridRef,dataSource:new d.default({pageSize:20,load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{l.a.get({route:"aniversariantes/listar/",data:Object(r.a)({},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(r.a)(Object(r.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},filterRow:{visible:!1},showColumnHeaders:!1,noDataText:"Parece que n\xe3o tem ningu\xe9m fazendo anivers\xe1rio nos pr\xf3ximos 30 dias",onInitialized:e=>{setTimeout((function(){e.component.element().find(".dx-datagrid").css("border-radius","10px"),e.component.element().find(".dx-datagrid-rowsview").css("border","none")}))},children:Object(u.jsx)(n.Column,{cellRender:this.cellRender})})})}}},1129:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var o=t(247),i=t.n(o),s=t(444),n=t.n(s),r=t(254),d=t.n(r),l=t(248),c=t(262),u=t(253);const p=e=>new c.default({pageSize:20,key:"chave",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,o)=>{u.a.get({route:"/projeto/listar_executores_projetos_devextreme/",data:Object(l.a)({projeto_id:e},t),func_response:e=>{let t=window.createLoadExtra(e);a(Object(l.a)(Object(l.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:a=>{if(!a)return!1;return new Promise((function(t,o){u.a.get({route:"/projeto/listar_executores_projetos_devextreme/",data:{chave:a,projeto_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});var m=t(244);class h extends i.a.Component{constructor(e){super(e),this.dataGridRef=i.a.createRef(null),this.dropDownBoxRef=i.a.createRef(null),this.dataGridRender=this.dataGridRender.bind(this)}componentDidMount(){"function"===typeof this.props.aoIniciarComponente&&this.props.aoIniciarComponente(this)}render(){return Object(m.jsx)(i.a.Fragment,{children:Object(m.jsx)(n.a,{ref:this.dropDownBoxRef,dataSource:p(this.props.projeto_id),valueExpr:"chave",displayExpr:"nome",placeholder:"Selecione os executores da atividade",contentRender:this.dataGridRender})})}dataGridRender(){return Object(m.jsx)(d.a,{ref:this.dataGridRef,dataSource:p(this.props.projeto_id),hoverStateEnabled:!0,selection:{mode:"multiple"},remoteOperations:!0,filterRow:{visible:!0},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},columns:[{dataField:"nome",caption:"Nome",dataType:"string"},{dataField:"tipo_executor",caption:"Tipo",dataType:"string",allowFiltering:!1,calculateCellValue:e=>"usuario"===e.tipo_executor?"[U] Usu\xe1rio":"grupo_usuarios"===e.tipo_executor?"[G] Grupo de Usu\xe1rios":void 0}],children:Object(m.jsx)(r.Toolbar,{children:Object(m.jsx)(r.Item,{name:"btnConfirmarSelecao",location:"before",widget:"dxButton",options:{hint:"Confirmar",text:"Confirmar",icon:"fas fa-check",onClick:()=>{if(this.dataGridRef.current&&this.dropDownBoxRef.current&&"function"===typeof this.props.aoConfirmarSelecao){const e=this.dataGridRef.current.instance,a=this.dropDownBoxRef.current.instance;this.props.aoConfirmarSelecao(e,a)}}}})})})}}},1130:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var o=t(247),i=t.n(o),s=t(267),n=t(248),r=t(262),d=t(253);const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new r.default({pageSize:20,key:"log_id",load:t=>{let o=window.loadOptionsToActionParams(t);return new Promise(((t,i)=>{d.a.get({route:"/documento/listar_historico/",data:Object(n.a)({documento_id:e,documento_pasta_id:a,dx_grid:!0},o),func_response:e=>{let a=window.createLoadExtra(e);t(Object(n.a)(Object(n.a)({},a),{},{data:e.data}))},func_fail:e=>{e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:t=>{if(!t)return!1;return new Promise((function(o,i){d.a.get({route:"/documento/listar_historico/",data:{documento_id:e,documento_pasta_id:a,dx_grid:!0,log_documento_id:t},func_response:function(e){o(e.data)},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var c=t(244);class u extends i.a.Component{constructor(e){super(e)}render(){return Object(c.jsx)(i.a.Fragment,{children:Object(c.jsx)(s.default,{dataSource:l(this.props.documento_id,this.props.documento_pasta_id),style:{height:"calc(100vh - 205px)"},columns:[{dataField:"usuario_nome",caption:"Usu\xe1rio",dataType:"string"},{dataField:"acao",caption:"A\xe7\xe3o",dataType:"string",allowFiltering:!1,allowHeaderFiltering:!0,lookup:{valueExpr:"id",displayExpr:"descricao",dataSource:[{id:"0",descricao:"Inclus\xe3o"},{id:"1",descricao:"Altera\xe7\xe3o"},{id:"2",descricao:"Exclus\xe3o"},{id:"3",descricao:"Movido"},{id:"4",descricao:"Envio de Vers\xe3o"},{id:"5",descricao:"Visualiza\xe7\xe3o"},{id:"6",descricao:"Aprovado"},{id:"7",descricao:"Reprovado"},{id:"8",descricao:"Download"},{id:"9",descricao:"Vers\xe3o Ativada"},{id:"10",descricao:"Vers\xe3o Exclu\xedda"},{id:"11",descricao:"Aprova\xe7\xe3o Estornada"},{id:"12",descricao:"Reprova\xe7\xe3o Estornada"},{id:"13",descricao:"Bloqueio"},{id:"14",descricao:"Desbloqueio"},{id:"15",descricao:"Substitu\xeddo"},{id:"16",descricao:"Download por URL"},{id:"17",descricao:"Novo link para download"},{id:"18",descricao:"Restaurado"}]}},{dataField:"quando",caption:"Realizado em",dataType:"datetime",format:"dd/MM/yyyy HH:mm",allowHeaderFiltering:!1,sortOrder:"desc"},{dataField:"detalhes",caption:"Detalhes",dataType:"string"}]},"grid_historico_documentos")})}}},1131:function(e,a,t){"use strict";t.r(a),t.d(a,"periodicidade",(function(){return b})),t.d(a,"dataSourcePeriodicidade",(function(){return v})),t.d(a,"default",(function(){return g}));var o=t(247),i=t.n(o),s=t(267),n=t(254),r=t(262),d=t(413),l=t.n(d),c=t(271),u=(t(307),t(43)),p=t.n(u),m=t(253),h=t(87),_=t(244);function f(e){let{html_id:a,formularioId:t=null,valoresIniciais:s=[],aoConfirmar:n=null,aoCancelar:r=null}=e;const d=i.a.createRef();let l={};l.html=p()('<div class="scrollview aba_personalizado" style="background-color: #ffffff;"><div class="titulo_formulario">Campos Personalizados</div><div class="form-editor"><div class="form-grupos panel-body" style="padding: 0px;"></div><div class="form-grupo" template-grupo template-ref="" style="display: none;"><div><h3 class="text-primary lbl_grupo_nome"></h3></div></div><div class="form-grupo-campo" template-campo template-ref="" style="display: none;"><div class="div_campo form-group"><span class="lbl_obrigatorio text-danger">* </span><label class="lbl_nome">{Nome}</label><div class="div_input"></div></div></div></div></div>'),l.html_id=a,l.aba_personalizado=l.html,l.titulo_formulario=l.html.find(".titulo_formulario"),l.form_editor=l.html.find(".form-editor"),l.form_grupos=l.html.find(".form-grupos"),l.template_grupo=l.html.find("[template-grupo]"),l.template_campo=l.html.find("[template-campo]"),l.campos_personalizados=[],l.lbl_nome=l.html.find(".lbl_nome");Object(o.useEffect)((()=>{window.require(["./assets/view/formulario/util"],(e=>{m.a.get("formulario/objeto/",{formulario_id:t},(a=>{l.formulario=a,Array.isArray(s)&&s.forEach((e=>{l.formulario.grupos.forEach((a=>{a.elementos.forEach((a=>{e.id_elemento===a.id_elemento&&(a.valor=e.valor)}))}))})),(new e).render_previsao({div_formulario:l,template_campo:l.template_campo,template_grupo:l.template_grupo,obj_formulario:l.formulario,disabled_all:!1,liberar_campos:!0}),p()(d.current).html(l.form_editor[0])}))})),h.a.titulo_aba(a,"Valores Iniciais")}),[]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-12",children:[Object(_.jsxs)("div",{className:"pull-right",children:[Object(_.jsx)("button",{type:"button",className:"btn btn-default",onClick:()=>{c.a.unload(a),r&&r()},children:"Cancelar"}),Object(_.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{c.a.unload(a);let e=[];l.formulario.grupos.forEach((a=>{a.elementos.forEach((a=>{if(a.valor){if(Array.isArray(a.valor)&&0===a.valor.length)return;e.push({id_elemento:a.id_elemento,valor:a.valor})}}))})),n&&n(e)},children:"Confirmar"})]}),Object(_.jsx)("span",{children:"Valores Iniciais"})]})}),Object(_.jsx)("div",{ref:d,className:"scrollview",style:{backgroundColor:"#ffffff"}})]})}const b=[{ID:1,descricao:"Primeiro dia de cada m\xeas",categoria:"Dias do m\xeas"},{ID:2,descricao:"Dia 2 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:3,descricao:"Dia 3 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:4,descricao:"Dia 4 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:5,descricao:"Dia 5 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:6,descricao:"Dia 6 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:7,descricao:"Dia 7 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:8,descricao:"Dia 8 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:9,descricao:"Dia 9 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:10,descricao:"Dia 10 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:12,descricao:"Dia 12 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:13,descricao:"Dia 13 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:14,descricao:"Dia 14 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:15,descricao:"Dia 15 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:16,descricao:"Dia 16 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:17,descricao:"Dia 17 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:18,descricao:"Dia 18 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:19,descricao:"Dia 19 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:20,descricao:"Dia 20 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:21,descricao:"Dia 21 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:22,descricao:"Dia 22 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:23,descricao:"Dia 23 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:24,descricao:"Dia 24 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:25,descricao:"Dia 25 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:26,descricao:"Dia 26 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:27,descricao:"Dia 27 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:28,descricao:"Dia 28 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:29,descricao:"Dia 29 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:30,descricao:"Dia 30 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:31,descricao:"Dia 31 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:32,descricao:"\xdaltimo dia de cada m\xeas",categoria:"Dias do m\xeas"},{ID:33,descricao:"Todo Domingo",categoria:"Dias da semana"},{ID:34,descricao:"Toda Segunda-feira",categoria:"Dias da semana"},{ID:35,descricao:"Toda Ter\xe7a-feira",categoria:"Dias da semana"},{ID:36,descricao:"Toda Quarta-feira",categoria:"Dias da semana"},{ID:37,descricao:"Toda Quinta-feira",categoria:"Dias da semana"},{ID:38,descricao:"Toda Sexta-feira",categoria:"Dias da semana"},{ID:39,descricao:"Todo S\xe1bado",categoria:"Dias da semana"}],v=new r.default({store:b,group:"categoria"});function g(e){let{processoId:a=null,formularioId:t=null,data:o=[],html_id:r=null,onRowRemoved:d=null,onRowInserted:u=null}=e;const p=i.a.createRef();return Object(_.jsxs)(s.default,{ref:p,style:{width:"100%"},dataSource:o,keyExpr:"id",remoteOperations:!1,onInitNewRow:e=>{e.data.id="n_"+window.random_hash(),e.data.ativo="N",e.data.quantidade=1,e.data.formulario_valores_iniciais=[]},headerFilter:{visible:!1},filterPanel:{visible:!1},filterRow:{visible:!1},sorting:{mode:"none"},groupPanel:{visible:!1},searchPanel:{visible:!1},columnChooser:{enabled:!1},export:{enabled:!1},onRowRemoved:d,onRowInserted:u,onSaved:e=>console.log(e),children:[Object(_.jsx)(n.Editing,{mode:"row",allowUpdating:!0,allowDeleting:!0,allowAdding:!0}),Object(_.jsx)(n.Column,{dataField:"ativo",dataType:"boolean",calculateCellValue:e=>"S"===e.ativo||!0===e.ativo,trueText:"S",falseText:"N",width:"80px",caption:"Ativo"}),Object(_.jsx)(n.Column,{dataField:"dias",width:"220px",caption:"Iniciar solicita\xe7\xf5es automaticamente em",editCellComponent:e=>Object(_.jsx)(l.a,{dataSource:v,defaultValue:"string"===typeof e.data.value?JSON.parse(e.data.value):e.data.value||[],valueExpr:"ID",displayExpr:"descricao",grouped:!0,showSelectionControls:!0,maxDisplayedTags:2,showMultiTagOnly:!1,applyValueMode:"useButtons",onValueChanged:a=>{e.data.setValue(a.value)},onSelectionChanged:a=>{e.data.component.updateDimensions()}}),cellTemplate:(e,a)=>{const t=("string"===typeof a.value?JSON.parse(a.value):a.value||[]).map((e=>{for(let a=0;a<b.length;a++){const t=b[a];if(t.ID==e)return t.descricao}})).join(", ");e.append(t||"\xa0")},children:Object(_.jsx)(n.RequiredRule,{})}),Object(_.jsx)(n.Column,{dataField:"hora_abertura",dataType:"datetime",format:"HH:mm",editorOptions:{displayFormat:"HH:mm",useMaskBehavior:!0,type:"time"},width:"100px",caption:"Hora abertura",children:Object(_.jsx)(n.RequiredRule,{})}),Object(_.jsxs)(n.Column,{dataField:"quantidade",dataType:"number",editorOptions:{type:"fixedPoint"},width:"90px",caption:"Qtde por solicitante",children:[Object(_.jsx)(n.RequiredRule,{}),Object(_.jsx)(n.Format,{type:"fixedPoint"})]}),Object(_.jsx)(n.Column,{dataField:"enviar_automaticamente",dataType:"boolean",calculateCellValue:e=>"S"===e.enviar_automaticamente||!0===e.enviar_automaticamente,trueText:"S",falseText:"N",width:"80px",caption:"Enviar automaticamente"}),Object(_.jsx)(n.Column,{dataField:"ultima_execucao",dataType:"datetime",width:"150px",caption:"\xdaltima execu\xe7\xe3o",allowEditing:!1}),Object(_.jsxs)(n.Column,{type:"buttons",children:[Object(_.jsx)(n.Button,{name:"edit"}),Object(_.jsx)(n.Button,{name:"delete"}),Object(_.jsx)(n.Button,{hint:"Valores Iniciais",icon:"fas fa-list-alt",visible:e=>!!e.row.data.id,onClick:e=>{const a=e.row.data.formulario_valores_iniciais?[..."string"===typeof e.row.data.formulario_valores_iniciais?JSON.parse(e.row.data.formulario_valores_iniciais):e.row.data.formulario_valores_iniciais||[]]:null;c.a.loadReact(f,{formularioId:t,valoresIniciais:a,aoConfirmar:a=>{p.current&&p.current.instance.getDataSource().store().update(e.row.key,{formulario_valores_iniciais:a})}},(function(e){}),c.a.ABA.SIM)}})]})]})}},1132:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var o=t(248),i=t(281),s=t(262),n=t(253);const r=()=>new s.default({pageSize:20,key:"contato_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{n.a.get({route:"contato/listar_para_selecao/",data:a,func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){n.a.get({route:"contato/listar_para_selecao/",data:{contato_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});var d=t(280),l=t(719),c=t(720),u=t(87),p=t(244);function m(e){return Object(p.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:r(),dataGridOnToolbarPreparing:a=>{const t=[{widget:"dxButton",options:{icon:"plus",hint:"Novo Contato",text:"Novo Contato",visible:u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"contatos")&&!!e.entidadeTipo&&!!e.entidadeId,onClick:t=>{window.View.load("contato/detalhes",(function(t,o){o.onsave=()=>a.component.instance().refresh(),o.show(null,window.FORMULARIO.NOVO,null,"",e.entidadeTipo,e.entidadeId)}),window.View.ABA.MULTIPLAS)}},showText:"always",location:"after",name:"btnNovoContato",locateInMenu:"auto"}];a.toolbarOptions.items=window.add_botao_dx_toolbar(t,a.toolbarOptions.items)}})))}m.defaultProps={displayExpr:"descricao",valueExpr:"contato_id",children:[Object(p.jsx)(d.a,{width:"30%"},"nome"),Object(p.jsx)(l.a,{},"email"),Object(p.jsx)(c.a,{dataField:"telefone1",caption:"Telefone 1"},"telefone1"),Object(p.jsx)(c.a,{dataField:"telefone2",caption:"Telefone 2"},"telefone2"),Object(p.jsx)(c.a,{dataField:"telefone3",caption:"Telefone 3"},"telefone3"),Object(p.jsx)(c.a,{dataField:"telefone4",caption:"Telefone 4"},"telefone4")]}},1133:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));var o=t(248);const i=Object.freeze({usuario:0,grupoUsuarios:1}),s=[{id:i.usuario,descricao:"Usu\xe1rio"},{id:i.grupoUsuarios,descricao:"Grupo de Usu\xe1rio"}];var n=t(375),r=t.n(n),d=t(244);function l(e){return Object(d.jsx)(r.a,Object(o.a)(Object(o.a)({},e),{},{dataSource:s,valueExpr:"id",displayExpr:"descricao",searchEnabled:!0}))}},1145:function(e,a,t){window.views={},window.views.agenda={},window.views.agenda.ListagemEventosRecorrentes=t(962),window.views.chamado={},window.views.chamado.Detalhes=t(763),window.views.chamado.Listagem=t(1099),window.views.temas={},window.views.temas.SelecionarTema=t(1100),window.views.alocacaoExecutoresProjeto={},window.views.alocacaoExecutoresProjeto.ListagemAlocacoes=t(1101),window.views.fornecedores={},window.views.fornecedores.Listagem=t(1102),window.views.prospects={},window.views.prospects.Listagem=t(1103),window.views.clientes={},window.views.clientes.Listagem=t(1104),window.views.modelagemFormulario={},window.views.modelagemFormulario.Listagem=t(1105),window.views.processos={},window.views.processos.Listagem=t(735),window.views.processos.ListagemCategoriaProcessos=t(1106),window.views.motivo_chamados={},window.views.motivo_chamados.Listagem=t(1077),window.views.grupoMotivoChamado={},window.views.grupoMotivoChamado.Listagem=t(1107),window.views.grupoMotivoChamado.Detalhes=t(1031),window.views.nota_avaliacao={},window.views.nota_avaliacao.Listagem=t(1108),window.views.agendaContatos={},window.views.agendaContatos.Listagem=t(1032),window.views.menuPersonalizado={},window.views.menuPersonalizado.ListagemMenuPersonalizado=t(1109),window.views.ChamadoPrioridade={},window.views.ChamadoPrioridade.ChamadoPrioridadeListagem=t(1110),window.views.ChamadoCorPercentualConclusao={},window.views.ChamadoCorPercentualConclusao.ChamadoCorPercentualConclusaoListagem=t(1079),window.views.LixeiraDocumentos={},window.views.LixeiraDocumentos.ListagemLixeiraDocumentos=t(1080),window.views.ChamadoClassificacao={},window.views.ChamadoClassificacao.Listagem=t(1033),window.views.pdca={},window.views.pdca.Listagem=t(1086),window.views.pdca.ListagemCategoriasPDCA=t(1111),window.views.assunto_documento={},window.views.assunto_documento.AssuntoDocumentoListagem=t(1112),window.views.tipo_documento={},window.views.tipo_documento.TipoDocumentoListagem=t(1113),window.views.orcamento_template_word={},window.views.orcamento_template_word.OrcamentoTemplateWordListagem=t(1087),window.views.solicitacao_template_word={},window.views.solicitacao_template_word.SolicitacaoTemplateWordListagem=t(1088),window.views.solicitacao_processo={},window.views.solicitacao_processo.Listagem=t(1089),window.views.solicitacao_processo.ListagemAtividadesMasterDetail=t(561),window.views.formulario={},window.views.formulario.TextoHistorico=t(1037),window.views.tipo_moeda={},window.views.tipo_moeda.Listagem=t(1038),window.views.agendaEvento={},window.views.agendaEvento.Listagem=t(1081),window.views.central_pendencias={},window.views.central_pendencias.Listagem=t(1083),window.views.consulta_integracao={},window.views.consulta_integracao.Listagem=t(1114),window.views.motivo_perda_negocio={},window.views.motivo_perda_negocio.Relatorio=t(1090),window.views.oportunidade_origem={},window.views.oportunidade_origem.Relatorio=t(1091),window.views.cubo={},window.views.cubo.Listagem=t(1092),window.views.cubo.Detalhes=t(752),window.views.cubo.ListagemEquipe=t(794),window.views.admin={},window.views.admin.AtualizacaoHistorico=t(1093),window.views.empresa={},window.views.empresa.Listagem=t(1115),window.views.etiqueta={},window.views.etiqueta.Listagem=t(1116),window.views.projeto={},window.views.projeto.ProjetoGantt=t(1117),window.views.projeto.HistoricoBaseline=t(1118),window.views.projeto.ProjetoKanban=t(1119),window.views.apontamento_simples={},window.views.apontamento_simples.Listagem=t(1042),window.views.cargo={},window.views.cargo.ListagemCargo=t(1043),window.views.permissoes={},window.views.permissoes.DataGridPermissoes=t(1044),window.views.documentos={},window.views.documentos.Listagem=t(756),window.views.ClassificacaoMovimentacaoFinanceira={},window.views.ClassificacaoMovimentacaoFinanceira.ListagemClassificacaoMovimentacaoFinanceira=t(1046),window.views.Referencias={},window.views.Referencias.ReferenciasQuadroTarefas=t(1047),window.views.Referencias.ReferenciasPDCA=t(1048),window.views.oauth_client={},window.views.oauth_client.Listagem=t(1094),window.views.grupo_usuarios={},window.views.grupo_usuarios.Listagem=t(1120),window.views.tipo_agenda={},window.views.tipo_agenda.Listagem=t(1095),window.views.agenda_ativo={},window.views.agenda_ativo.Listagem=t(1096),window.views.grupo_ativos={},window.views.grupo_ativos.Listagem=t(1121),window.views.entidade={},window.views.entidade.EntidadeCard=t(491),window.views.tarefas={},window.views.tarefas.DuplicarQuadro=t(1049),window.views.itens={},window.views.itens.Listagem=t(1084),window.views.job_scheduler={},window.views.job_scheduler.Listagem=t(1122),window.views.parametros_usuarios={},window.views.parametros_usuarios.Listagem=t(1123),window.views.fila_evento={},window.views.fila_evento.Listagem=t(1124),window.views.rd_station_webhook_mkt={},window.views.rd_station_webhook_mkt.Listagem=t(1078),window.views.cadastros_genericos={},window.views.cadastros_genericos.Listagem=t(1085),window.views.cadastros_genericos.ListagemDados=t(796),window.views.cadastros_genericos.FormularioCadastroGenerico=t(566),window.components={},window.components.DataGridPadrao=t(267),window.components.SelecaoPadrao=t(281),window.components.SelecaoUsuario=t(1051),window.components.Referencias=t(497),window.components.MovimentacaoFinanceira=t(1052),window.components.SelecaoGrupoUsuarios=t(745),window.components.Cockpit=t(793),window.components.Filtro=t(737),window.components.Favoritos=t(797),window.components.ListagemPermissoes=t(1125),window.components.FormularioPersonalizado=t(446),window.components.CardNotas=t(798),window.components.HomeDrawerRight=t(1055),window.components.MetasEventoCRM=t(1126),window.components.SelecaoFormulario=t(576),window.components.SelecaoTipoMoeda=t(1056),window.components.TextBoxCPFCNPJ=t(1057),window.components.SelecaoEmails=t(1058),window.components.SelecaoChamadoMotivo=t(716),window.components.MotivoChamadoEntidades=t(1097),window.components.SelecaoCategoriaPDCA=t(1059),window.components.SelecaoProjeto=t(728),window.components.SelecaoPasta=t(1127),window.components.NovaVotacao=t(1060),window.components.Votacao=t(1061),window.components.Aniversariantes=t(1128),window.components.EntidadeHistoricoCadastral=t(1098),window.components.ProcessoDrawerRight=t(1062),window.components.ProcessoDiagram=t(1063),window.components.SelecaoEntidade=t(718),window.components.SelecaoProjetoAtividadeExecutor=t(1129),window.components.SelecaoCargo=t(1064),window.components.DocumentoHistorico=t(1130),window.components.DropDownVisoes=t(795),window.components.VisualizarPDFAba=t(1065),window.components.VisualizarImagemAba=t(1066),window.components.VisualizarVideoAba=t(1067),window.components.DropDownEtiquetas=t(1068),window.components.ExtensoesCampoAnexo=t(1069),window.components.DataGridProcessoRecorrencia=t(1131),window.components.SelecaoConsultaIntegracao=t(1070),window.components.SelecaoAtivos=t(747),window.components.SelecaoContato=t(1132),window.components.SelecaoTipoUsuarioGrupo=t(1133),window.components.SelecaoFormularioCampo=t(1071),window.components.CopiarLink=t(414),window.components.TextBoxHora=t(1072),window.components.ColunaUsuario=t(415),window.components.ListagemProcessoHistorico=t(1073),window.components.SelecaoGrupoMotivoChamado=t(1074),window.components.SelecaoTecnico=t(753),window.functions={},window.functions.CNPJ=t(759),window.datasource={},window.datasource.defaultProcessoAtividade=t(396).defaultProcessoAtividade,window.datasource.defaultProcessoGateway=t(396).defaultProcessoGateway,window.datasource.oportunidade=t(560)},253:function(e,a,t){"use strict";a.a="undefined"!==typeof window.WS?window.WS:{}},267:function(e,a,t){"use strict";t.r(a),t.d(a,"removeColunasNaoExistentes",(function(){return u})),t.d(a,"stateStoring",(function(){return p})),t.d(a,"itemRestaurarEstadoDasColunas",(function(){return m}));var o=t(248),i=t(247),s=t.n(i),n=t(254),r=t.n(n),d=t(87),l=t(244);const c=s.a.forwardRef(((e,a)=>{var t;return Object(l.jsx)(r.a,Object(o.a)(Object(o.a)({export:{enabled:!0,fileName:"Exportacao_"+window.agora(),allowExportSelectedData:e.selection&&"multiple"===e.selection.mode,customizeExcelCell:null!==(t=e.exportCustomizeExcelCell)&&void 0!==t?t:null}},e),{},{ref:a}))})),u=(e,a)=>{const t=e=>{if(Array.isArray(e)){if(e.length>1&&"string"===typeof e[0]&&"string"===typeof e[1]&&!a.includes(e[0]))return window.alert_warning('Coluna "'+e[0]+'" n\xe3o existe e foi removida dos filtros.'),void e.splice(0,e.length);for(let a=e.length-1;a>=0;a--){const o=e[a];Array.isArray(o)&&(t(o),0===o.length&&(e.splice(a,1),"string"===typeof e[a-1]?(e.splice(a-1,1),a--):"string"===typeof e[a]&&e.splice(a,1)))}}};e.filterValue&&t(e.filterValue);var o;return e.columns&&(e.columns=(o=e.columns,Array.isArray(o)?o.filter((e=>e.dataField&&a.includes(e.dataField))):o)),e},p=function(e,a){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{enabled:!0,type:"custom",customLoad:()=>{if(!e)return!1;let i=d.a.get_parametro_usuario(e);return a&&(i=u(i,a)),t||(i.searchText=null),Object(o.a)({},i)},customSave:a=>{if(!e)return!1;d.a.set_parametro_usuario(e,a,null,!1)}}},m=e=>({text:"Restaurar estado das colunas",visible:!0,beginGroup:!0,onItemClick:function(a){window.DevExpress.ui.dialog.confirm("Os filtros, ordena\xe7\xf5es, agrupamentos, posi\xe7\xe3o, tamanho, sele\xe7\xe3o e visibilidade das colunas desta listagem ser\xe3o restauradas ao estado padr\xe3o. <b>Deseja continuar?</b>","Restaurar estado das colunas").done((function(a){a&&(e.component._clearState=!0,e.component._clearSelectedRows=!0,e.component.refresh())}))}});c.defaultProps={selection:{mode:"single"},showBorders:!0,hoverStateEnabled:!0,rowAlternationEnabled:!0,remoteOperations:!0,pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},filterPanel:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!0},columnFixing:{enabled:!0},searchPanel:{visible:!window.detectmob(),width:200,placeholder:"Pesquisa geral"},allowColumnReordering:!0,allowColumnResizing:!0,columnResizingMode:"widget",columnChooser:{enabled:!0,allowSearch:!0,mode:window.detectmob()?"select":"dragAndDrop"},onContextMenuPreparing:function(e){"header"===e.target&&Array.isArray(e.items)&&e.items.push(m(e))},onContentReady:function(e){e.component._clearState&&(e.component.state({}),e.component._clearState=!1),setTimeout((()=>e.component.updateDimensions()),100)}},a.default=c},271:function(e,a,t){"use strict";a.a="undefined"!==typeof window.View?window.View:{}},280:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"nome",caption:"Nome",width:150}},281:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return c}));var o=t(248),i=t(247),s=t.n(i),n=t(267),r=t(444),d=t.n(r),l=t(244);class c extends s.a.Component{constructor(e){super(e),this.state={selecionado:e.selecionado?Array.isArray(e.selecionado)?e.selecionado:[e.selecionado]:null,selecionadoPropriedades:null},this.filterEditorElement=void 0,this.dropDownBoxRef=s.a.createRef(),this.dataGridRef=s.a.createRef(),this.syncDataGridSelection=this.syncDataGridSelection.bind(this),this.dataGrid_onSelectionChanged=this.dataGrid_onSelectionChanged.bind(this),this.onOpened=this.onOpened.bind(this),this.ajustarTamanhoJanela=this.ajustarTamanhoJanela.bind(this),this.dataGridRender=this.dataGridRender.bind(this)}get dropDownBox(){return this.dropDownBoxRef.current?this.dropDownBoxRef.current.instance:null}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}componentDidMount(){"function"===typeof this.props.getDropDownRef&&this.props.getDropDownRef(this.dropDownBoxRef)}componentDidUpdate(e){this.props.atualizarValorAutomaticamente&&e.selecionado!=this.props.selecionado&&this.setState({selecionado:this.props.selecionado})}render(){var e;return Object(l.jsx)(d.a,{ref:this.dropDownBoxRef,dataSource:this.props.dataSource,value:this.state.selecionado,deferRendering:null===(e=this.props.deferRendering)||void 0===e||e,valueExpr:this.props.valueExpr,displayExpr:this.props.displayExpr,placeholder:this.props.placeholder,showClearButton:this.props.showClearButton,onValueChanged:this.syncDataGridSelection,contentRender:this.dataGridRender,onOpened:this.onOpened,stylingMode:this.props.stylingMode,fieldRender:this.props.fieldRender,readOnly:this.props.readOnly,visible:"boolean"!==typeof this.props.visible||this.props.visible,width:this.props.width,dropDownOptions:{resizeEnabled:!0,container:this.props.dropDownContainer,width:this.props.dataGridWidth||"100%"},style:this.props.dropDownBoxStyle})}dataGridRender(){const e={visible:!window.detectmob()&&this.props.dataGridSearchPanelEnabled,width:200,placeholder:"Pesquisa Geral"},a={enabled:this.props.dataGridExportEnabled,fileName:"Exportacao_"+window.agora(),allowExportSelectedData:!0},t={enabled:this.props.dataGridColumnChooserEnabled,allowSearch:!0,mode:window.detectmob()?"select":"dragAndDrop"};let i={};this.props.columns&&(i.columns=this.props.columns);return Object(l.jsx)(n.default,Object(o.a)(Object(o.a)({ref:this.dataGridRef,dataSource:this.props.dataSource,stateStoring:this.props.stateStoring,hoverStateEnabled:!0,selectedRowKeys:this.state.selecionado,onSelectionChanged:this.dataGrid_onSelectionChanged,searchPanel:e,groupPanel:{visible:this.props.agrupaColunas}},i),{},{selection:{mode:this.props.selectionMode?this.props.selectionMode:"single"},keyExpr:this.props.keyExpr,export:a,columnChooser:t,onToolbarPreparing:this.props.dataGridOnToolbarPreparing,remoteOperations:this.props.dataGridRemoteOperations,onCellPrepared:e=>{if("filter"===e.rowType&&0===e.columnIndex){var a=e.cellElement;this.filterEditorElement=a.find(".dx-texteditor-input")}},children:this.props.children}))}syncDataGridSelection(e){if(null===e.value)this.setState({selecionado:null,selecionadoPropriedades:null}),this.props.aoAlterar(null,null,this.dataGridRef.current?this.dataGridRef.current._instance:null,this.dropDownBoxRef.current?this.dropDownBoxRef.current._instance:null);else if(!window.isEquivalent(e.previousValue,e.value)&&this.props.aoAlterar){let e=this.state.selecionado&&this.state.selecionado.length>0?this.state.selecionado[0]:null,a=this.state.selecionado&&this.state.selecionadoPropriedades&&this.state.selecionadoPropriedades.length>0?this.state.selecionadoPropriedades[0]:null;this.props.aoAlterar(e,a,this.dataGridRef.current?this.dataGridRef.current._instance:null,this.dropDownBoxRef.current?this.dropDownBoxRef.current._instance:null)}}async dataGrid_onSelectionChanged(e){if("single"===this.props.selectionMode){if(0===e.selectedRowKeys.length)return;this.dropDownBox&&this.dropDownBox.close(),this.setState({selecionado:e.selectedRowKeys,selecionadoPropriedades:e.selectedRowsData})}else if("multiple"===this.props.selectionMode){let a=e.selectedRowKeys,t=e.selectedRowsData;e.component.option("value",a),this.setState({selecionado:a,selecionadoPropriedades:t}),this.props.aoAlterar&&this.props.aoAlterar(a,t)}}ajustarTamanhoJanela(e,a){var t=window.App.get_parametro_usuario(this.props.parametroFullScreen);t.fullScreen!==e.component._popup.option("fullScreen")&&(window.App.set_parametro_usuario(this.props.parametroFullScreen,{fullScreen:e.component._popup.option("fullScreen")}),a?e.component._popup.option("fullScreen",t.fullScreen):e.component._popup.option("fullScreen",e.component._popup.option("fullScreen"))),e.component._popup.option("fullScreen")?(e.component._popup.content().parents(".dx-popup-fullscreen").css("max-height","none").css("overflow-y","scroll"),e.component._popup.content().parents(".dx-popup-wrapper").css("width","100%").css("max-height","100vh").css("height","100%"),e.component._popup.content().css("overflow","")):(e.component._popup.content().css("overflow","auto"),e.component._popup.option("width","50vw")),e.component._popup.content().children().on("dxmousewheel",(function(e){e.stopPropagation()})),this.dataGrid&&this.dataGrid.refresh()}onOpened(e){const a=this;e.component._popup.option("toolbarItems",[{widget:"dxButton",location:"after",options:{icon:"fa fa-window-restore",onClick:function(t){e.component._popup.option("fullScreen",!e.component._popup.option("fullScreen")),a.ajustarTamanhoJanela(e,!1)}}},{widget:"dxButton",location:"after",options:{icon:"fa fa-times ",onClick:function(a){e.component._popup.hide()}}}]),e.component._popup.option("showTitle",!0),this.ajustarTamanhoJanela(e,!0),setTimeout((()=>{if(this.props.columnFilterFocus){const a=this.dataGridRef.current.instance.getVisibleColumnIndex(this.props.columnFilterFocus),t=e.component._popup.content().find(".dx-datagrid-headers .dx-texteditor-input");t.length>0&&t[a].focus()}else e.component._popup.content().find(".dx-toolbar .dx-texteditor-input").focus()}),500)}}c.defaultProps={columns:null,dataSource:null,placeholder:"Pesquisar",aoAlterar:null,valueExpr:null,keyExpr:null,displayExpr:null,stylingMode:"filled",showClearButton:!1,readOnly:!1,stateStoring:null,fieldRender:null,visible:!0,width:null,agrupaColunas:!1,parametroFullScreen:null,selectionMode:"single",getDropDownRef:null,dropDownContainer:void 0,dropDownBoxStyle:{},dataGridSearchPanelEnabled:!0,dataGridExportEnabled:!0,dataGridColumnChooserEnabled:!0,dataGridOnToolbarPreparing:void 0,dataGridRemoteOperations:!0,dataGridWidth:void 0,columnFilterFocus:null}},296:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Button{}i.defaultProps={name:"excluir",hint:"Excluir",icon:"trash"}},308:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"d",(function(){return r})),t.d(a,"e",(function(){return d})),t.d(a,"b",(function(){return l})),t.d(a,"c",(function(){return c})),t.d(a,"f",(function(){return u})),t.d(a,"g",(function(){return p}));var o=t(248),i=(t(87),t(253)),s=(t(271),t(262));let n=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:s=>{let r=window.loadOptionsToActionParams(s);return new Promise((function(s,d){i.a.get({route:"chamado/listar/",data:Object(o.a)({dx_grid:!0,situacao:e,numero_chamado:a,sla:t?"S":"N",tempo_inativo:t?"S":"N",limite:n},r),func_response:function(e){let a=window.createLoadExtra(e);s(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&d(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado/listar/",data:{dx_grid:!0,situacao:window.CHAMADO_FILTRO.TODOS,numero_chamado:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},r=(e,a,t)=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"usuario_id",load:s=>{let n=window.loadOptionsToActionParams(s);return new Promise((function(s,r){i.a.get({route:"chamado/listar_solicitantes_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e,entidade_tipo:a,entidade_id:t},n),func_response:function(e){let a=window.createLoadExtra(e);s(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&r(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado/listar_solicitantes_para_selecao/",data:{dx_grid:!0,usuario_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});const d={dataField:"nome",caption:"Nome"};let l=(e,a,t,n)=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"usuario_id",load:s=>{let r=window.loadOptionsToActionParams(s);return new Promise((function(s,d){i.a.get({route:"chamado/listar_responsaveis_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e,entidade_tipo:a,entidade_id:t,motivo_id:n},r),func_response:function(e){let a=window.createLoadExtra(e);s(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&d(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado/listar_responsaveis_para_selecao/",data:{dx_grid:!0,usuario_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),c=e=>new s.default({key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"chamado/listar_situacao_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado/listar_situacao_para_selecao/",data:{dx_grid:!0,situacao_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),u=(e,a,t)=>{i.a.post({route:"chamado/salvar",data:e,func_response:e=>{!0===e.chamado.rascunho?window.alert_info("Rascunho salvo com sucesso"):window.alert_saved("Reclassifica\xe7\xe3o salva com sucesso"),a&&a(e)},func_fail:e=>{window.alert_fail("Falhou"),t&&t(e)}})},p=(e,a,t,o)=>{i.a.post({route:"mensagem/salvar_horas_trabalhadas",data:{mensagem_id:e,horas_trabalhadas:a},func_response:e=>{window.alert_info("Horas trabalhadas salva com sucesso"),t&&t(e)},func_fail:e=>{window.alert_fail("Falhou"),o&&o(e)}})}},313:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Button{}i.defaultProps={name:"recuperar",hint:"Recuperar",icon:"revert"}},315:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Button{}i.defaultProps={name:"editar",hint:"Editar",icon:"edit"}},343:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"datahora",caption:"Data",dataType:"date",format:"dd/MM/yyyy HH:mm",width:150}},349:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"id",caption:"#",width:90}},350:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataType:"string"}},357:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return r}));var o=t(247),i=t.n(o),s=t(244);class n extends i.a.Component{render(){return Object(s.jsx)("div",{style:{height:"10px"}})}}class r extends i.a.Component{render(){return Object(s.jsx)("div",{style:{width:"10px"}})}}},376:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var o=t(247),i=t.n(o),s=t(87),n=t(244);function r(e){var a,t,o;let i={width:(null!==(a=e.tamanho)&&void 0!==a?a:"28")+"px",height:(null!==(t=e.tamanho)&&void 0!==t?t:"28")+"px",backgroundColor:"#dfe1e6",borderRadius:"25em",color:"#172b4d",lineHeight:(null!==(o=e.tamanho)&&void 0!==o?o:"28")+"px",textAlign:"center",display:"inline-block",verticalAlign:"middle"};return!0===e.margemFlutuante&&(i.marginLeft="-"+d.defaultProps.margemFlutuantePx+"px"),Object(n.jsx)("div",{style:i,children:Object(n.jsx)("span",{style:{fontWeight:"600"},title:(s=e.titulo||"",r=e.nome||"",((s||"")+" "+(r||"")).trim()),children:window.obter_iniciais(e.nome||e.titulo)})});var s,r}class d extends i.a.Component{constructor(e){super(e),this.ref=i.a.createRef()}thumbUrl(e){return e.documentoId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&documento_id="+e.documentoId+"&token_midia="+s.a.sessao.token_midia:e.documentoRevisaoId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&documento_revisao_id="+e.documentoRevisaoId+"&token_midia="+s.a.sessao.token_midia:e.usuarioId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&usuario_id="+e.usuarioId+"&token_midia="+s.a.sessao.token_midia:e.clienteId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&cliente_id="+e.clienteId+"&token_midia="+s.a.sessao.token_midia:e.imgAlternativa?e.imgAlternativa:void 0}render(){const e=((this.props.titulo||"")+" "+(this.props.nome||"")).trim(),a=this.thumbUrl(this.props);let t={borderRadius:"25em",display:"none"};return!0===this.props.margemFlutuante&&(t.marginLeft="-"+this.props.margemFlutuantePx+"px"),Object(n.jsxs)("div",{ref:this.ref,title:e,children:[Object(n.jsx)(r,{nome:this.props.nome,titulo:this.props.titulo,margemFlutuante:this.props.margemFlutuante,tamanho:this.props.tamanho}),Object(n.jsx)("img",{src:a,height:this.props.tamanho,width:this.props.tamanho,style:t,title:e,onLoad:e=>{this.ref.current.getElementsByTagName("img").item(0).style.display="block",this.ref.current.getElementsByTagName("div").item(0).style.display="none"},onError:e=>{e.target.onerror=null,this.props.imgAlternativa&&(e.target.src=this.props.imgAlternativa)}})]})}}d.defaultProps={tamanho:28,titulo:"",margemFlutuante:!1,margemFlutuantePx:8}},396:function(e,a,t){"use strict";t.r(a),t.d(a,"defaultProcessoAtividade",(function(){return d})),t.d(a,"defaultProcessoGateway",(function(){return l})),t.d(a,"colunaProcessoId",(function(){return c})),t.d(a,"colunaProcessoNome",(function(){return u})),t.d(a,"colunaProcessoCategoria",(function(){return p})),t.d(a,"colunaProcessoAtivo",(function(){return m})),t.d(a,"colunaProcessoVersao",(function(){return h})),t.d(a,"colunaProcessoPublicacao",(function(){return _})),t.d(a,"colunaProcessoSolicitacoes",(function(){return f})),t.d(a,"processoBotoes",(function(){return b})),t.d(a,"processoColunas",(function(){return v})),t.d(a,"stateStoring",(function(){return g})),t.d(a,"listarProcessos",(function(){return w})),t.d(a,"listarProcessosDisponiveis",(function(){return j})),t.d(a,"listarProcessosQuadroAtividades",(function(){return O})),t.d(a,"objetoProcesso",(function(){return x}));var o=t(248),i=t(253),s=t(271),n=t(262),r=t(87);const d={id:0,elemento_tipo:window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE,descricao:"",instrucao_trabalho:"",tipo:window.PROCESSO_ATIVIDADE_TIPO.INICIO,usuarios_responsaveis:[],grupos_usuarios_responsaveis:[],responsavel_obrigatorio:!1,grupo_usuarios_responsaveis_obrigatorio:!1,notifica_solicitante:!0,notifica_responsavel:!0,emails_notificacao:"",email_terceiros:!1,email_terceiros_entrega:!1,tempo_prazo_execucao:null,permite_reprogramar:!0,dias_limite_reprogramacao:null,informar_motivo_reprogramacao:!1,notificar_reprogramacao_solicitante:!1,notificar_reprogramacao_responsavel:!1,notificar_reprogramacao_supervisores:!1,notificar_altresponsavel_solicitante:!1,notificar_altresponsavel_responsavel:!1,notificar_altresponsavel_supervisores:!1,acumular_tempo:!1,notifica_vencto_horas_antes:null,notifica_vencto_solicitante:!1,notifica_vencto_responsavel:!1,emails_notificacao_vencto:"",acao_projeto_template:!1,destinos:[],permissoes_formulario:[],removido:!1,notifica_senha:!1,notifica_formulario:!1,envia_anexos_inicio:!1,envia_anexos:!1,tipo_prazo_execucao:0,dias_prazo_execucao:null,acao_projeto_template_conclusao:null,notifica_formulario_entrega:!1,notifica_solicitante_entrega:!0,notifica_responsavel_entrega:!0,emails_notificacao_entrega:"",data_referencia:null,ocultar_numero_no_inicio:!1,ocultar_numero_na_entrega:!1,solicitante_responsavel:!1,enviar_obs:!1,enviar_obs_predecessora:!1,notifica_corpo_formulario:!1,notifica_corpo_formulario_entrega:!1,atividade_responsavel_automatico_id:!1,atividade_responsavel_automatico_elem_key:null,atividade_superior_imediato_responsavel_id:null,atividade_superior_imediato_responsavel_elem_key:null,multiplos_responsaveis:!1,tornar_superior_imediato_responsavel:!1,responsavel_anonimo:!1,permissao_altera_responsavel:!1,permissao_vincula_responsabilidade:!1,permissao_cancela_solicitacao:!1,executor_responsavel_automatico:!1,alterado:!1},l={id:0,elemento_tipo:window.PROCESSO_ELEMENTO_TIPO.GATEWAY,descricao:"",tipo:0,destinos:[],permissoes_formulario:[],removido:!1,evento_enviar:null,bloqueio_decisao:!1,filtro_evento_enviar:null,tipo_automacao:null,alterado:!1},c={dataField:"processo_id",caption:"Id"},u={dataField:"nome",caption:"Nome"},p={dataField:"categoria_processos_nome",caption:"Categoria"},m={dataField:"ativo",caption:"Ativo"},h={dataField:"versao_processo",caption:"Vers\xe3o"},_={dataField:"versao_publicacao",caption:"Publica\xe7\xe3o"},f={dataField:"sequencia_solicitacoes",caption:"Solicita\xe7\xf5es"},b=function(){var e="icon_black";return{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:e,visible:r.a.verifica_permissao(r.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.processo_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS,null,null,{processoId:e.row.data.processo_id})}},{hint:"Etiquetas",icon:"fas fa-tags",cssClass:e,visible:r.a.verifica_permissao(r.a.temp.empresa,"etiqueta_processo"),onClick:e=>{s.a.loadReact(window.views.etiqueta.Listagem.default,{pai_tabela:"processo",pai_id:e.row.data.processo_id,titulo:e.row.data.nome},(e=>{}),s.a.ABA.MULTIPLAS)}},{hint:"Clonar processo",icon:"copy",cssClass:e,visible:r.a.verifica_permissao(r.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/clonar",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.nome,e.row.data.processo_id)}),window.View.ABA.MULTIPLAS)}},{hint:"Exportar",icon:"export",cssClass:e,visible:r.a.verifica_permissao(r.a.temp.empresa,"processo"),onClick:function(e){i.a.get("processo/objeto/",{processo_id:e.row.data.processo_id,exportacao:!0},(function(a){let t=encodeURIComponent(JSON.stringify(a)),o=document.createElement("a");o.setAttribute("download",e.row.data.nome+".nbpm"),o.setAttribute("href","data:application/json;charset=utf-8,"+t),o.click()}))}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:e,visible:r.a.verifica_permissao(r.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/detalhes",(function(a,t){t.show(e.row.data.processo_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:e,visible:r.a.verifica_permissao(r.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data.processo_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)}}]}};let v=()=>[c,u,p,m,h,_,f,b()];const g={enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarProcessos")},customSave:function(e){window.App.set_parametro_usuario("listarProcessos",e)}};let w=e=>new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"processo_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"processo/listar/",data:Object(o.a)(Object(o.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"processo/listar/",data:{dx_grid:!0,processo_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),j=async e=>await i.a.get({route:"/solicitacao/listar_processos/",data:e,awaitReturn:!0}),O=async e=>{let{processo_id:a,filtro_status:t=null,filtro_tipo:o,solicitacao_codigo:s=null,solicitacao_descricao:n=null,cliente_nome:r=null,solicitante_nome:d=null,responsavel_nome:l=null,etiqueta_nome:c=null,processo_atividade_id:u=null,skip:p=0}=e;return 0===parseInt(a)?[]:await i.a.get({route:"/solicitacao/processo_quadro_atividades/",data:{processo_id:a,filtro_status:t,filtro_tipo:o,solicitacao_codigo:s,solicitacao_descricao:n,cliente_nome:r,solicitante_nome:d,responsavel_nome:l,etiqueta_nome:c,processo_atividade_id:u,skip:p},awaitReturn:!0})},x=async e=>0===parseInt(e)?[]:await i.a.get({route:"/processo/objeto/",data:{processo_id:e},awaitReturn:!0})},412:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={caption:"Padr\xe3o",dataField:"padrao",dataType:"boolean",alignment:"center"}},414:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return n}));var o=t(247),i=t.n(o),s=t(244);class n extends i.a.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(){let e=this.props.url;if("#"===this.props.url.trim().substr(0,1)){let a=document.URL,t=document.URL.indexOf("#");t>=0&&(a=document.URL.substr(0,t)),e=a+this.props.url}window.copyToClipboard(e)}render(){return Object(s.jsx)("button",{onClick:this.onClick,className:"btn btn-link",style:this.props.style,title:"Copiar link para \xe1rea de transfer\xeancia",children:this.props.children})}}n.defaultProps={url:"about:blank",children:"Copiar Link"}},415:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return s})),t.d(a,"cellRender",(function(){return n}));var o=t(254),i=t(244);class s extends o.Column{}const n=e=>{var a;let t="assets/img/icones_bp/imagem_usuario_padrao.svg",o=null!==(a=null===e||void 0===e?void 0:e.marginTop)&&void 0!==a?a:"3px";if(e.column.dataFieldUsuarioId&&e.data[e.column.dataFieldUsuarioId]){const a=+e.data[e.column.dataFieldUsuarioId];a>0&&(t=window.WS_URI+"documento/midia/?&tamanho=20&usuario_id="+a+"&token_midia="+window.App.sessao.token_midia)}const s=e.text;return s?Object(i.jsxs)("div",{style:{marginTop:o},children:[Object(i.jsx)("img",{style:{height:"20px",width:"20px",borderRadius:"25em"},className:"imagem_responsavel",src:t,onError:function(e){e.target.onerror=null,e.target.src="assets/img/icones_bp/imagem_usuario_padrao.svg"},alt:s}),Object(i.jsx)("span",{style:{marginLeft:"5px"},children:s})]}):null};s.defaultProps={dataField:"usuario_id",dataType:"string",caption:"Usu\xe1rio",width:120,cellRender:n}},416:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Button{}i.defaultProps={name:"visualizar",hint:"Visualizar",icon:"fas fa-eye"}},442:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"data",caption:"Data",dataType:"date",format:"dd/MM/yyyy",width:150}},446:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return c}));var o=t(248),i=t(253),s=t(247),n=t.n(s),r=t(43),d=t.n(r),l=t(244);class c extends n.a.Component{constructor(e){var a,t,o,i;super(e),this.state=this.propsToObjState(),this.main=null!==(a=this.props.main)&&void 0!==a?a:{},this.abaFormularioPersonalizado=null!==(t=this.props.abaFormularioPersonalizado)&&void 0!==t?t:null,this.callbackGetPostParams=null!==(o=this.props.callbackGetPostParams)&&void 0!==o?o:null,this.callbackValidar=null!==(i=this.props.callbackValidar)&&void 0!==i?i:null,this.formularioRef=n.a.createRef(),this.renderFormulario=this.renderFormulario.bind(this)}propsToObjState(){var e,a,t;return{readOnly:null!==(e=this.props.readOnly)&&void 0!==e&&e,urlGet:null!==(a=this.props.urlGet)&&void 0!==a?a:null,urlGetParams:null!==(t=this.props.urlGetParams)&&void 0!==t?t:{}}}componentDidMount(){this.renderFormulario(),null!==this.callbackGetPostParams&&"function"===typeof this.callbackGetPostParams&&this.callbackGetPostParams(this.getPostParams.bind(this)),null!==this.callbackValidar&&"function"===typeof this.callbackValidar&&this.callbackValidar(this.validar.bind(this))}componentDidUpdate(e,a){e.readOnly===this.props.readOnly&&e.urlGet===this.props.urlGet&&window.isEquivalent(e.urlGetParams,this.props.urlGetParams)||(this.setState(this.propsToObjState()),this.formularioRef&&this.renderFormulario())}render(){return Object(l.jsx)("div",{ref:this.formularioRef})}renderFormulario(){let e=this.main,a=this.abaFormularioPersonalizado;e.html=d()('<div class="aba_personalizado"><div class="titulo_formulario">Campos Personalizados</div><div class="form-editor"><div class="form-grupos panel-body" style="padding: 0px;"></div><div class="form-grupo" template-grupo template-ref="" style="display: none;"><div><h3 class="text-primary lbl_grupo_nome"></h3></div></div><div class="form-grupo-campo" template-campo template-ref="" style="display: none;"><div class="div_campo form-group"><span class="lbl_obrigatorio text-danger">* </span><label class="lbl_nome">{Nome}</label><div class="div_input"></div></div></div></div></div>'),e.html_id="html_id",e.aba_personalizado=e.html,e.titulo_formulario=e.html.find(".titulo_formulario"),e.form_editor=e.html.find(".form-editor"),e.form_grupos=e.html.find(".form-grupos"),e.template_grupo=e.html.find("[template-grupo]"),e.template_campo=e.html.find("[template-campo]"),e.lbl_nome=e.html.find(".lbl_nome"),i.a.get(this.state.urlGet+"/",this.state.urlGetParams,(t=>{t||(e.titulo_formulario.html(""),d()(this.formularioRef.current).html("")),a&&(t?a.text(t.nome):a.addClass("hidden")),e[this.props.paramCamposPersonalizados]=Object(o.a)(Object(o.a)({},t),this.state.urlGetParams),e.titulo_formulario.html(t.nome),e[this.props.paramCamposPersonalizados].registros&&d.a.each(e[this.props.paramCamposPersonalizados].registros,(function(a,t){"campo_anexo"===a?t&&d.a.each(t,(function(a,t){if(t){var o=t.split(";"),i=parseInt(o[0]),s=o[1];d.a.each(e[this.props.paramCamposPersonalizados].grupos,(function(e,t){d.a.each(t.elementos,(function(e,t){a===t.id_elemento&&(t.valor=i,t.documento_revisao={},t.documento_revisao.nome_arquivo=s,t.documento_revisao.mime_type=window.extensao_to_mimetype(s.substring(s.lastIndexOf(".")+1,s.length)))}))}))}})):"selecao_documento"===a?d.a.each(t,(function(a,t){d.a.each(e[this.props.paramCamposPersonalizados].grupos,(function(e,o){d.a.each(o.elementos,(function(e,o){a===o.id_elemento&&(o.valor=t)}))}))})):"campo_tabela"===a&&d.a.each(t,(function(a,t){if("string"===typeof t)try{t=JSON.parse(t.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}catch(o){console.warn(t,t.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}t&&d.a.each(e[this.props.paramCamposPersonalizados].grupos,(function(e,o){d.a.each(o.elementos,(function(e,o){a===o.id_elemento&&(o.tamanho_render=t.tamanho_render,o.valor=t.valor,"undefined"!==typeof o.valor&&d.a.each(o.valor,(function(e,a){if(null!=a.revisao){var t=a.revisao.split(";"),o=parseInt(t[0]),i=t[1];a.valor=o,a.documento_revisao={},a.documento_revisao.nome_arquivo=i,a.documento_revisao.mime_type=window.extensao_to_mimetype(i.substring(i.lastIndexOf(".")+1,i.length))}})))}))}))}))})),window.require(["./assets/view/formulario/util"],(a=>{(new a).render_previsao({div_formulario:e,template_campo:e.template_campo,template_grupo:e.template_grupo,obj_formulario:e[this.props.paramCamposPersonalizados],disabled_all:this.state.readOnly,liberar_campos:!this.state.readOnly}),t.registros&&d.a.each(t.registros,(function(a,o){"campo_geral"===a?Object.keys(t.registros.campo_geral).map((function(a,o){return e.aba_personalizado.find("[id_elemento="+a+"]").val(t.registros.campo_geral[a]),e.aba_personalizado.find("[id_elemento="+a+"]").change(),e.aba_personalizado.find("[id_elemento="+a+"]").blur(),a})):"campo_decimal"===a?Object.keys(t.registros.campo_decimal).map((function(a,o){return t.registros.campo_decimal[a]&&(e.aba_personalizado.find("[id_elemento="+a+"]").val(t.registros.campo_decimal[a].replace(".",",")),e.aba_personalizado.find("[id_elemento="+a+"]").change(),e.aba_personalizado.find("[id_elemento="+a+"]").blur()),a})):"lista_opcoes"===a?Object.keys(t.registros.lista_opcoes).map((function(a,o){var i=e.aba_personalizado.find("[id_elemento="+a+"]").find("option"),s=t.registros.lista_opcoes[a];null!=s&&(s=s.split(";"));var n=0;return i&&s&&d.a.each(i,(function(e,a){d.a.each(s,(function(e,t){a.value===t&&(a.selected=!0,d()(a).change(),d()(a).blur(),n=d()(a).index(),d()(a).parent().parent().find("[data-original-index='"+n+"']").addClass("selected"))}))})),a})):"radio"===a?Object.keys(t.registros.radio).map((function(a,o){var i=e.aba_personalizado.find("[id_elemento="+a+"]");return i.parent().find("input[value='"+t.registros.radio[a]+"']").prop("checked",!0),i.parent().find("input[value='"+t.registros.radio[a]+"']").change(),a})):"checkbox"===a?Object.keys(t.registros.checkbox).map((function(a,o){var i=t.registros.checkbox[a];null!=i&&(i=i.split(";"));var s=e.aba_personalizado.find("[id_elemento="+a+"]");return i&&d.a.each(i,(function(e,a){s.parent().find("input[value='"+a+"']").prop("checked",!0)})),a})):"'caixa_verificacao'"===a?d.a.each(t.registros.caixa_verificacao,(function(a,t){"S"===t&&e.aba_personalizado.find("[id_elemento="+a+"]").prop("checked",!0)})):"editor_texto"===a?setTimeout((function(){Object.keys(t.registros.editor_texto).map((function(a,o){return window.tinyMCE.get(e.aba_personalizado.find("[id_elemento="+a+"]").attr("id")).setContent(t.registros.editor_texto[a]),a}))}),500):"campo_integracao"===a&&Object.keys(t.registros.campo_integracao).map((function(a,o){return e.aba_personalizado.find("[id_elemento="+a+"]").find(".dx-dropdownbox").dxDropDownBox("instance").option("value",t.registros.campo_integracao[a]),a}))})),d()(this.formularioRef.current).html(e.form_editor[0])}))}))}getAnexosParams(){let e={};return this.props.main&&this.props.main[this.props.paramCamposPersonalizados]?(d()(this.props.main[this.props.paramCamposPersonalizados].grupos).each((function(a,t){d()(t.elementos).each((function(a,t){+t.tipo===window.ELEMENTO_TIPO.ANEXO&&t.anexo?e[t.elem_key]=t.anexo:+t.tipo===window.ELEMENTO_TIPO.TABELA&&t.valor&&d()(t).each((function(a,t){t.valor&&d()(t.valor).each((function(a,t){e[t.elem_key+"_linha_"+t.linha]=t.anexo}))}))}))})),e):e}getPostParams(){return Object(o.a)(Object(o.a)({},this.getAnexosParams()),{},{[this.props.paramCamposPersonalizados]:JSON.stringify(this.main[this.props.paramCamposPersonalizados])})}validarCamposObrigatorios(){if(!this.props.main||!this.props.main.form_editor)return!0;var e="";return this.props.main.form_editor.find("[required]").not(".selectpicker").each(((a,t)=>{var o=d()(t);"text"===o.attr("type")&&"undefined"==typeof o.attr("maskmoney")?"undefined"==typeof o.attr("readonly")&&"none"!==d()(t).css("display")||d()(t).hasClass("input_consulta_integracao")?"undefined"!==typeof o.attr("maskmoney")?""!==t.value.trim()&&0!==o.maskMoney("unmasked")[0]||(e+=this.formGetElementoById(d()(t).attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(o)):""===t.value.trim()&&(e+=this.formGetElementoById(d()(t).attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(o)):o.tooltip("destroy"):"undefined"==typeof o.attr("disabled")&&"none"!==d()(t).css("display")?"undefined"!==typeof o.attr("maskmoney")||"date"===o.attr("type")&&"undefined"==typeof o.attr("disabled")&&"undefined"==typeof o.attr("readonly")?""===t.value.trim()&&(e+=this.formGetElementoById(d()(t).attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(o)):""===t.value.trim()&&"date"!==o.attr("type")&&(e+=this.formGetElementoById(d()(t).attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(o)):o.tooltip("destroy")})),this.props.main.form_editor.find(".input_consulta_integracao").each(((a,t)=>{const o=d()(t),i=o.children().dxValidator("instance").option("validationRules"),s=o.children().dxDropDownBox("instance").option("readOnly");let n=!1;for(let e=0;e<i.length;e++){if("required"===i[e].type){n=!0;break}}if(!s&&n&&"none"!==o.css("display")){var r=o.find(".dx-texteditor-input").val(),l=o.parent().find(".lbl_nome");""===r.trim()?(e+=this.formGetElementoById(d()(t).attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(l)):l.tooltip("destroy")}})),this.props.main.form_editor.find(".vld_lista_check").each(((a,t)=>{var o=d()(t);if(!o[0].children[0].disabled&&"none"!==o[0].children[0].style.display){var i=o.find("input:checked"),s=o.parent().find(".lbl_nome");i&&0!==i.length?s.tooltip("destroy"):(e+=this.formGetElementoById(d()(t).find("input:first").attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(s))}})),this.props.main.form_editor.find(".vld_lista_radio").each(((a,t)=>{var o=d()(t);if(!o[0].children[0].disabled&&"none"!==o[0].children[0].style.display){var i=o.find("input:checked"),s=o.parent().find(".lbl_nome");i&&0!==i.length?s.tooltip("destroy"):(e+=this.formGetElementoById(d()(t).find("input:first").attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(s))}})),this.props.main.form_editor.find("select.selectpicker[required]").each(((a,t)=>{var o=d()(t);if(!o[0].disabled&&"none"!==o[0].style.display){var i=o.val(),s=o.closest(".div_campo").find(".lbl_nome");i&&0!==i.length?s.tooltip("destroy"):(e+=this.formGetElementoById(d()(t).attr("id_elemento")).nome+"<br />",this.alertaCampoObrigatorio(s))}})),""===e||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Campos Obrigat\xf3rios !'," Por gentileza, preencha os campos abaixo: <br /><br /> "+e),!1)}alertaCampoObrigatorio(e,a){e.tooltip({title:"Campo obrigatorio",placement:"undefined"!=typeof a?a:"auto"}),e.tooltip("show")}validarDataForm(){if(!this.props.main||!this.props.main.form_editor)return!0;var e=new Date,a=("0"+e.getDate()).slice(-2),t=("0"+(e.getMonth()+1)).slice(-2),o=e.getFullYear()+"-"+t+"-"+a,i="";return this.props.main.form_editor.find('[type="date"]').each((function(e,a){var t=d()(a);"undefined"==typeof(t.attr("disabled")||t.attr("readonly"))&&"none"!==d()(a).css("display")&&""!==a.value&&null!=a.value&&("S"===t.attr("data_retroativa")&&(window.get_datepicker(t)<o?(t.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),t.tooltip("show"),i+=this.formGetElementoById(d()(a).attr("id_elemento")).nome+"<br />"):t.tooltip("destroy")),"S"===t.attr("data_retroativa_igual")&&(window.get_datepicker(t)<=o?(t.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),t.tooltip("show"),i+=this.formGetElementoById(d()(a).attr("id_elemento")).nome+"<br />"):t.tooltip("destroy")))})),""===i||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Data Inv\xe1lida !'," Data informada fora do per\xedodo v\xe1lido, informe corretamente para os campos abaixo: <br /><br /> "+i),!1)}validar(){return!!(!this.main[this.props.paramCamposPersonalizados]||this.validarCamposObrigatorios()&&this.validarDataForm())}formGetElementoById(e){var a={};return this.props.main&&this.props.main[this.props.paramCamposPersonalizados]&&d()(this.props.main[this.props.paramCamposPersonalizados].grupos).each((function(t,o){if(Array.isArray(o.elementos))for(let i=0;i<o.elementos.length;i++){const t=o.elementos[i];if(t.id_elemento===e){a=t;break}if(t.tipo===window.ELEMENTO_TIPO.TABELA)for(let o=0;o<t.campos.length;o++){const i=t.campos[o];if(i.id_elemento===e){a=i;break}}}})),a=window.spread({nome:""},a)}}c.defaultProps={paramCamposPersonalizados:"campos_personalizados"}},447:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return i}));const o=Object.freeze({chamado:1,processo:2,projeto:3,documento:4,crm:5,relacionamento:5,agenda:6,social:7,empenho:8,inovacao:9,pdca:10,tarefas:11}),i=[{id:o.chamado,descricao:"Chamados"},{id:o.processo,descricao:"Processos"},{id:o.projeto,descricao:"Projetos"},{id:o.documento,descricao:"Documentos"},{id:o.crm,descricao:"CRM"},{id:o.agenda,descricao:"Agenda"},{id:o.social,descricao:"Social"},{id:o.empenho,descricao:"Empenho"},{id:o.inovacao,descricao:"Inova\xe7\xe3o"},{id:o.pdca,descricao:"PDCA"},{id:o.tarefas,descricao:"Tarefas"}]},488:function(e,a,t){"use strict";t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return d})),t.d(a,"d",(function(){return l})),t.d(a,"e",(function(){return c}));var o=t(248),i=t(253),s=t(262);let n=e=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"grupo_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"grupo_motivo_chamado/listar_grupo_motivo_usuario/",data:Object(o.a)({dx_grid:!0,chamado_id:e},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"grupo_motivo_chamado/listar_grupo_motivo_usuario/",data:{dx_grid:!0,grupo_motivo_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});const r=()=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"grupo_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(t,s){i.a.get({route:"grupo_motivo_chamado/listar/",data:Object(o.a)({dx_grid:!0,nome:e.searchValue},a),func_response:function(e){let a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),d=(e,a)=>{i.a.get("grupo_motivo_chamado/objeto/",{grupo_id:e},a)};let l=(e,a,t)=>{const o=e=>{window.alert_saved("Grupo de motivos exclu\xeddo com sucesso"),a&&a(e)},s=e=>{window.alert_fail("Falhou"),t&&t(e)};window.alertaPopUp("Exclus\xe3o","Deseja continuar? Este <b>grupo de motivo</b> ser\xe1 <b>exclu\xeddo</b> permanentemente.","Sim, excluir",(()=>{i.a.post({route:"grupo_motivo_chamado/excluir",data:{grupo_id:e},func_response:o,func_fail:s})}),"N\xe3o",(()=>{}),null,"200px")},c=(e,a,t)=>{i.a.post({route:"grupo_motivo_chamado/salvar",data:Object(o.a)({},e),func_response:e=>{window.alert_saved("Grupo de motivos salvo com sucesso"),a&&a(e)},func_fail:e=>{window.alert_fail("Falhou"),t&&t(e)}})}},489:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"a",(function(){return d}));var o=t(248),i=t(253),s=t(262);const n=Object.freeze({cliente:"C",organizacao:"O",empresa:"E",fornecedor:"F"}),r=[{id:n.cliente,descricao:"Cliente"},{id:n.organizacao,descricao:"Organiza\xe7\xe3o"},{id:n.empresa,descricao:"Empresa"},{id:n.fornecedor,descricao:"Fornecedor"}];let d=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new s.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:["tipo","id"],load:t=>{let s=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"agenda_contatos/listar/",data:Object(o.a)({dx_grid:!0,desconsiderar_contato:e,entidade_tipo:a},s),func_response:function(e){let a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;let a=e.id,t=e.tipo;return!(!a&&!t)&&new Promise((function(e,o){i.a.get({route:"agenda_contatos/listar/",data:{dx_grid:!0,entidade_id:a,entidade_tipo:t},func_response:function(a){e(a.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},490:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"d",(function(){return d})),t.d(a,"b",(function(){return l})),t.d(a,"c",(function(){return c}));var o=t(248),i=t(253),s=t(262);const n={dataField:"nome",caption:"Nome",dataType:"string"},r={dataField:"usuario_tipo",caption:"Tipo de Usu\xe1rio",dataType:"number",lookup:{dataSource:window.USUARIO_TIPO_LOOKUP,valueExpr:"id",displayExpr:"descricao"}},d=[n,{dataField:"email",caption:"E-mail",dataType:"string"},r];let l=e=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"usuario_id",load:a=>{let t=window.loadOptionsToActionParams(a);return t.usuario=a.searchValue,new Promise((function(a,s){i.a.get({route:"usuario/listar_usuarios_email/",data:Object(o.a)(Object(o.a)({dx_grid:!0},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),c=e=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id_usuario_grupo",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"usuario/listar_usuarios_grupos/",data:Object(o.a)(Object(o.a)({},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"usuario/listar_usuarios_grupos/",data:{dx_grid:!0,id_usuario_grupo:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},491:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return c}));var o=t(247),i=t.n(o),s=t(87),n=t(271),r=t(357),d=t(376),l=t(244);class c extends i.a.Component{render(){var e;let a=!1;switch(this.props.tipo){case window.TIPO_ENTIDADE.CLIENTE:a=!0===s.a.sessao.dados.admin||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"cliente")||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"cliente_somente_leitura");break;case window.TIPO_ENTIDADE.EMPRESA:a=!0===s.a.sessao.dados.admin;break;case window.TIPO_ENTIDADE.FORNECEDOR:a=!0===s.a.sessao.dados.admin||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"fornecedor")||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"fornecedor_somente_leitura");break;case window.TIPO_ENTIDADE.ORGANIZACAO:a=!0===s.a.sessao.dados.admin||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"prospect")||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"prospect_somente_leitura")}let t=a?Object(l.jsx)("div",{onClick:a?e=>{let a=null;switch(this.props.tipo){case window.TIPO_ENTIDADE.CLIENTE:a=!0===s.a.sessao.dados.admin||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"cliente")?window.FORMULARIO.EDITAR:window.FORMULARIO.VISUALIZAR,n.a.load("cliente/detalhes",((e,t)=>{t.show(this.props.id,a)}),window.View.ABA.MULTIPLAS,null,null,{clienteId:this.props.id});break;case window.TIPO_ENTIDADE.EMPRESA:!0===s.a.sessao.dados.admin&&n.a.load("empresa/detalhes",((e,a)=>{a.show(this.props.id,window.FORMULARIO.VISUALIZAR)}),n.a.ABA.MULTIPLAS);break;case window.TIPO_ENTIDADE.FORNECEDOR:a=!0===s.a.sessao.dados.admin||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"fornecedor")?window.FORMULARIO.EDITAR:window.FORMULARIO.VISUALIZAR,n.a.load("fornecedor/detalhes",((e,t)=>{t.show(this.props.id,a)}),window.View.ABA.MULTIPLAS);break;case window.TIPO_ENTIDADE.ORGANIZACAO:a=!0===s.a.sessao.dados.admin||s.a.verifica_permissao(s.a.sessao.dados.empresa_filial_id,"prospect")?window.FORMULARIO.EDITAR:window.FORMULARIO.VISUALIZAR,n.a.load("prospect/detalhes",((e,t)=>{t.show(this.props.id,a)}),window.View.ABA.MULTIPLAS)}}:null,style:{cursor:"pointer",textDecoration:"underline"},children:this.props.nome}):Object(l.jsx)("div",{children:this.props.nome});return Object(l.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(l.jsx)(d.a,{tamanho:null!==(e=this.props.tamanho)&&void 0!==e?e:28,documentoId:this.props.logoId,imgAlternativa:"assets/img/icones_bp/imagem_empresa_padrao.svg",titulo:window.DescricaoTipoEntidade(this.props.tipo),nome:this.props.nome}),Object(l.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(l.jsx)(r.a,{}),t,Object(l.jsx)(r.a,{})]})]})}}},492:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return d}));var o=t(248),i=t(253),s=t(262);const n=Object.freeze({concluida:1,cancelada:2,andamento:3,atrasada:4}),r=[{id:n.andamento,descricao:"Andamento"},{id:n.concluida,descricao:"Conclu\xedda"},{id:n.cancelada,descricao:"Cancelada"},{id:n.atrasada,descricao:"Atrasada"}];let d=e=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"solicitacao/listar/",data:Object(o.a)({dx_grid:!0,id_solicitacao:e},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"solicitacao/listar/",data:{solicitacao_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},493:function(e,a,t){"use strict";t.d(a,"a",(function(){return p})),t.d(a,"b",(function(){return m})),t.d(a,"c",(function(){return h}));var o=t(248),i=t(253),s=t(262),n=t(271),r=t(87),d=t(43),l=t.n(d);const c={caption:"Progresso",dataField:"progresso",width:100,cellTemplate:function(e,a){l()("<div />").attr({class:"cls","data-key":a.key}).dxProgressBar({min:0,max:100,value:a.data.progresso,hint:a.data.progresso+"%",statusFormat:e=>"Progresso: ".concat(100*e,"%")}).appendTo(e),e.find(".dx-progressbar-container").css("height","10px")}},u={caption:"Situa\xe7\xe3o",dataField:"situacao_id",allowFiltering:!1,allowHeaderFiltering:!0,alignment:"center",width:120,cellTemplate:function(e,a){var t="";switch(a.data.situacao){case"N\xe3o Iniciado":default:t="label-danger";break;case"Em Andamento":t="label-info";break;case"Conclu\xeddo":t="label-success"}e.addClass("bg-"+t),l()("<span class='label "+t+"'>"+a.data.situacao+"</span>").appendTo(e)},headerFilter:{dataSource:[{text:"N\xe3o Iniciado",value:["situacao_id","=",0]},{text:"Em Andamento",value:["situacao_id","=",1]},{text:"Conclu\xeddo",value:["situacao_id","=",2]}]}},p={type:"buttons",buttons:[{hint:"Atividades",icon:"folder",cssClass:"icon_black",onClick:function(e){n.a.load("pdca/atividades",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data)}),n.a.ABA.MULTIPLAS,null,null,{pdcaId:e.row.data.pdca_id})}},{hint:"Editar",icon:"edit",cssClass:"icon_black",onClick:function(e){n.a.load("pdca/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data,window.FORMULARIO.EDITAR)}),n.a.ABA.MULTIPLAS,null,null,{pdcaId:e.row.data.pdca_id})},visible:function(e){return _(e.row.data.equipe)}},{hint:"Refer\xeancias",icon:"fas fa-link",cssClass:"icon_black",onClick(e){n.a.loadReact(window.views.Referencias.ReferenciasPDCA.default,{pdca_id:e.row.data.pdca_id,abaTitulo:"Refer\xeancias - PDCA #".concat(e.row.data.pdca_id)})}},{hint:"Favoritar",icon:"far fa-star",cssClass:"icon_black",visible:function(e){return!window.verifica_favorito("pdcas",e.row.data.pdca_id)},onClick:function(e){f(e,!0)}},{hint:"Desfavoritar",icon:"fas fa-star",cssClass:"icon_black",visible:function(e){return window.verifica_favorito("pdcas",e.row.data.pdca_id)},onClick:function(e){f(e,!1)}},{hint:"Excluir",icon:"fa fa-trash",cssClass:"icon_black",onClick:function(e){n.a.load("pdca/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(e.row.data,window.FORMULARIO.EXCLUIR)}),n.a.ABA.SIM)},visible:function(e){return _(e.row.data.equipe)}}]},m=[{caption:"ID",dataField:"pdca_id",width:60,dataType:"number"},{dataField:"numero",caption:"C\xf3digo",width:90},{caption:"Objetivo",dataField:"objetivo"},{caption:"Categoria",dataField:"categoria_pdca_nome"},{dataField:"data_inicio",caption:"Data In\xedcio",dataType:"date",format:"dd/MM/yyyy",width:90},{dataField:"data_fim",caption:"Data Fim",dataType:"date",format:"dd/MM/yyyy",width:90},c,u,p];const h=()=>new s.default({pageSize:20,key:"pdca_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(e,t){i.a.get({route:"/pdca/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise(((a,t)=>{i.a.get({route:"/pdca/listar/",data:{dx_grid:!0,pdca_id:e},func_response(e){a(e.data)},func_fail(e){t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),_=e=>{if(!0===r.a.sessao.dados.admin)return!0;var a=!1;return l()(e).each((function(e,t){r.a.sessao.dados.usuario_id===Number(t.usuario_id)&&"S"===t.gerente&&(a=!0)})),a},f=(e,a)=>{window.favoritar_item("pdcas",e.row.data.pdca_id,a),e.component.refresh()}},494:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(254),i=t(43),s=t.n(i);class n extends o.Column{}n.defaultProps={dataField:"cor",caption:"Cor",cellTemplate:(e,a)=>{let t=!1,o="dropDownButton";null!==a.column.disabled&&""!==a.column.disabled&&"boolean"===typeof a.column.disabled&&(t=a.column.disabled),null!==a.column.dropDownButtonTemplate&&"string"===typeof a.column.dropDownButtonTemplate&&(o=a.column.dropDownButtonTemplate),s()("<div>").dxColorBox({onInitialized:function(e){e.component.option("value",a.data[a.column.dataField])},onValueChanged:e=>{a.component.cellValue(a.rowIndex,a.column.dataField,e.value)},disabled:t,dropDownButtonTemplate:o}).appendTo(e)},alignment:"center",allowEditing:!1}},495:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var o=t(247),i=t.n(o),s=t(413),n=t.n(s),r=t(244);class d extends i.a.Component{constructor(e){var a,t,o,s;super(e),this.state={selecionado:e.selecionado?[e.selecionado]:null,placeholder:null!==(a=e.placeholder)&&void 0!==a?a:"",readOnly:null!==(t=e.readOnly)&&void 0!==t&&t,displayExpr:null!==(o=e.displayExpr)&&void 0!==o?o:null,valueExpr:null!==(s=e.valueExpr)&&void 0!==s?s:null},this.tagBoxRef=i.a.createRef(),this.onValueChanged=this.onValueChanged.bind(this)}get tagBox(){return this.tagBoxRef.current?this.tagBoxRef.current.instance:null}render(){var e,a,t,o,i,s,d,l,c;return Object(r.jsx)(n.a,{elementAttr:this.state.elementAttr,showSelectionControls:!0,applyValueMode:"useButtons",ref:this.tagBoxRef,dataSource:null!==(e=this.props.dataSource)&&void 0!==e?e:null!==(a=this.state.dataSource)&&void 0!==a?a:null,items:null!==(t=this.props.items)&&void 0!==t?t:null,displayExpr:this.state.displayExpr,valueExpr:this.state.valueExpr,value:this.state.selecionado,placeholder:this.props.placeholder,readOnly:this.state.readOnly,onValueChanged:this.onValueChanged,deferRendering:!1,maxDisplayedTags:null!==(o=this.props.maxDisplayedTags)&&void 0!==o?o:void 0,searchEnabled:null!==(i=this.props.searchEnabled)&&void 0!==i&&i,noDataText:null!==(s=this.props.noDataText)&&void 0!==s?s:"Sem dados",label:null!==(d=this.props.label)&&void 0!==d?d:null,labelMode:null!==(l=this.props.labelMode)&&void 0!==l?l:null,multiline:null!==(c=this.props.multiline)&&void 0!==c&&c})}onValueChanged(e){if(e.previousValue===e.value)return!1;this.setState({selecionado:e.value},(()=>{if(this.props.aoAlterar){var e;const a=null!==(e=this.state.selecionado)&&void 0!==e?e:null;this.props.aoAlterar(a)}}))}}d.defaultProps={dataSource:null,items:null,placeholder:"Pesquisar",displayExpr:null,readOnly:!1,aoAlterar:null,searchEnabled:!1}},496:function(e,a,t){"use strict";t.d(a,"b",(function(){return l})),t.d(a,"c",(function(){return c})),t.d(a,"e",(function(){return u})),t.d(a,"d",(function(){return p})),t.d(a,"a",(function(){return m})),t.d(a,"f",(function(){return h}));var o=t(1050),i=t(248),s=t(253),n=t(262);const r=["onCamposRecebidos","nome_tabela","formulario_id","cadastro_generico_id"],d=Object.freeze({consulta:1,edicao:2}),l=[{id:d.consulta,descricao:"Somente Consulta"},{id:d.edicao,descricao:"Consulta e Edi\xe7\xe3o"}];let c=e=>new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,o)=>{s.a.get({route:"cadastro_generico/listar/",data:Object(i.a)(Object(i.a)({},t),e),func_response:e=>a(Object(i.a)(Object(i.a)({},window.createLoadExtra(e)),{},{data:e.data})),func_fail:e=>e.validation&&o(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))})}))},byKey:e=>!!e&&new Promise(((a,t)=>{s.a.get({route:"cadastro_generico/listar/",data:{dx_grid:!0,id:e},func_response:e=>a(e.data),func_fail:e=>e.validation&&t(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))})}))});const u=e=>{let{alteracoes:a,func_response:t,func_fail:o}=e;if(!a||!a.length)return!1;s.a.post({route:"cadastro_generico/salvar/",data:{alteracoes:a},func_response:t,func_fail:o})};let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCamposRecebidos:a,nome_tabela:t,formulario_id:d,cadastro_generico_id:l}=e,c=Object(o.a)(e,r);return new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:e=>{const o=window.loadOptionsToActionParams(e);return new Promise(((e,n)=>{s.a.get({route:"cadastro_generico/listar_dados/",data:Object(i.a)(Object(i.a)(Object(i.a)({},o),c),{},{nome_tabela:t,formulario_id:d,cadastro_generico_id:l}),func_response:t=>{"function"===typeof a&&t.campos&&a(t.campos),e(Object(i.a)(Object(i.a)({},window.createLoadExtra(t)),{},{data:t.data}))},func_fail:e=>{e.validation&&n(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise(((a,o)=>{s.a.get({route:"cadastro_generico/listar_dados/",data:{dx_grid:!0,id:e,nome_tabela:t,formulario_id:d,cadastro_generico_id:l},func_response:e=>a(e.data),func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((e=>e.message)).join("<br/>")))}})}))})},m=e=>new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"integrante_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,o){s.a.get({route:"cadastro_generico/listar_equipe/",data:Object(i.a)({cadastro_generico_id:e,dx_grid:!0},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(i.a)(Object(i.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}}),h=(e,a,t)=>{s.a.post("cadastro_generico/salvar_equipe",{cadastro_generico_id:e,arr_equipe:window.CircularJSON.stringify(a)},(function(e){window.alert_tooltip("Salvo com sucesso!","success",500),t&&t(a)}))}},497:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return je}));var o=t(248),i=t(247),s=t.n(i),n=t(380),r=t.n(n),d=t(267),l=t(87),c=t(253);const u=[{id:0,descricao:"Interno"},{id:1,descricao:"Externo"}];var p=t(254),m=t(271),h=t(357),_=t(321),f=t.n(_),b=t(375),v=t.n(b),g=t(550),w=t.n(g),j=t(330),O=t(307),x=t.n(O),A=t(281),C=t(308),S=t(244);function I(e){return Object(S.jsx)(A.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(C.a)(window.CHAMADO_FILTRO.TODOS)})))}I.defaultProps={placeholder:"Pesquisar Chamado",displayExpr:e=>e&&e.id+" "+e.assunto,visible:!0,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1};var E=t(262);let P=e=>[{dataField:"S"===e?"numero":"solicitacao_id",dataType:"number",caption:"#",width:100},{dataField:"processo_nome",caption:"Processo",minWidth:100},{dataField:"atividade_descricao",caption:"Atividade",minWidth:100},{dataField:"usuario_solicitacao_nome",caption:"Solicitante",cellTemplate:function(e,a){var t=a.data.usuario_solicitante_foto_id,o=t?window.WS_URI+"documento/midia/?&tamanho=20&documento_id="+t+"&token_midia="+l.a.sessao.token_midia:"assets/img/icones_bp/imagem_usuario_padrao.svg",i=a.data.usuario_solicitacao_nome;e.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+o+'"><span style="margin-left: 5px;">'+i+"</span></div>")},width:100},{dataField:"usuario_responsavel_nome",dataType:"string",caption:"Respons\xe1vel",width:100},{dataField:"data",caption:"In\xedcio Atividade",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.data)return e.data.format_date_time()}},{dataField:"prazo_execucao",caption:"Prazo",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.prazo_execucao)return e.prazo_execucao.format_date_time()}},{dataField:"situacao",caption:"Situa\xe7\xe3o da Atividade",minWidth:120,lookup:{dataSource:[{id:"1",descricao:"Conclu\xedda"},{id:"5",descricao:"Retornada"},{id:"9",descricao:"Cancelada"},{id:"4",descricao:"N\xe3o entregue"},{id:"0",descricao:"Andamento"},{id:"3",descricao:"Atrasada"}],displayExpr:"descricao",valueExpr:"id"}}],T=e=>({hint:"Visualizar Atividade",icon:"fas fa-edit",visible:function(e){return!0===l.a.sessao.dados.admin||!0===e.row.data.acesso_supervisor||!0===e.row.data.permissao_acesso},onClick:function(a){e&&e(),m.a.load("solicitacao/detalhes",(function(e,t){t.show(a.row.data.solicitacao_atividade_id,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:a.row.data.solicitacao_atividade_id})}});T();var y=t(557),R=t(558),D=t(492),M=t(349),k=t(343),N=t(280);class F extends p.Column{}F.defaultProps={dataField:"solicitacao_situacao",caption:"Situa\xe7\xe3o",width:100,cellRender:e=>{let a="label-default",t="n/a";switch(+e.value){case D.b.andamento:a="label-info",t="Andamento";break;case D.b.concluida:a="label-success",t="Conclu\xedda";break;case D.b.cancelada:a="label-danger",t="Cancelada";break;case D.b.atrasada:a="label-danger",t="Atrasada"}return Object(S.jsx)("span",{className:"label ".concat(a),children:t})},children:Object(S.jsx)(p.Lookup,{dataSource:D.c,displayExpr:"descricao",valueExpr:"id"})};var L=t(415);const B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"N";return[Object(S.jsx)(M.a,{dataField:"S"===e?"numero":"id"}),Object(S.jsx)(k.a,{dataField:"data_solicitacao",caption:"Data Solicita\xe7\xe3o"}),Object(S.jsx)(k.a,{dataField:"data_finalizacao",caption:"Data Finaliza\xe7\xe3o"}),Object(S.jsx)(N.a,{dataField:"descricao",caption:"Descri\xe7\xe3o"}),Object(S.jsx)(N.a,{dataField:"processo_nome",caption:"Processo"}),Object(S.jsx)(F,{}),Object(S.jsx)(L.default,{dataField:"usuario_nome",dataFieldUsuarioId:"usuario_id",caption:"Solicitante"})]};function U(e){return Object(S.jsx)(A.default,Object(o.a)(Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(D.a)()})),{},{children:B(l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo)}))}function V(e){return Object(S.jsx)(A.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:(a=window.SOLICITACAO_FILTROS.TODAS,new E.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"solicitacao_atividade_id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise((function(e,i){c.a.get({route:"solicitacao/listar_todas/",data:Object(o.a)({dx_grid:!0,situacao:a},t),func_response:function(a){let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){c.a.get({route:"solicitacao/listar_todas/",data:{dx_grid:!0,situacao:window.SOLICITACAO_FILTROS.TODAS,solicitacao_atividade_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))})),columns:P(l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo)})));var a}U.defaultProps={placeholder:"Pesquisar Solicita\xe7\xe3o",displayExpr:e=>e&&("S"===l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.id)+" "+e.processo_nome,visible:!0,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1};V.defaultProps={placeholder:"Pesquisar Solicita\xe7\xe3o Atividade",displayExpr:e=>e&&("S"===l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.solicitacao_id)+" "+e.atividade_descricao,visible:!0};var z=t(728),G=t(43),H=t.n(G);class q extends s.a.Component{constructor(e){super(e),this.preencherAtividadeProjeto=function(e){window.require(["react","react-dom","./assets/view/atividade_projeto/ListarAtividadeProjeto"],((a,t,o)=>{var i;this.divComponenteAtividades&&t.unmountComponentAtNode(this.divComponenteAtividades),this.listarAtividadeProjeto=a.createElement(o,null,null),t.render(this.listarAtividadeProjeto,this.divComponenteAtividades),this.listarAtividadeProjeto.props.setParams({div:H()(this.divComponenteAtividades),data:e,dropdown:!0,dropdown_disabled:!1,somente_leitura:!0,atividade_selecionada:null!==(i=this.state.selecionado)&&void 0!==i?i:null,ao_selecionar:e=>{this.setState({selecionado:e}),this.props.aoAlterar&&this.props.aoAlterar(this.state.selecionado)},parametro_usuario:"atividade_projeto_referencias"})}))},this.obterAtividadesProjeto=function(e){c.a.get({route:"atividade_projeto/listar/",data:{projeto_id:null!==e&&void 0!==e?e:this.state.projetoId},func_response:e=>{e.atividades.push({atividade_simplificada:e.projeto.nome,id:"raiz",projeto_atividade_sintetica_pai_id:null,tipo_atividade:"P",marco:!1,horas_previstas:"000:00"}),this.preencherAtividadeProjeto(e)}})},this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState()),this.listarAtividadeProjeto=null,this.divComponenteAtividadesRef=s.a.createRef(),this.preencherAtividadeProjeto=this.preencherAtividadeProjeto.bind(this),this.obterAtividadesProjeto=this.obterAtividadesProjeto.bind(this)}get divComponenteAtividades(){var e;return null!==(e=this.divComponenteAtividadesRef.current)&&void 0!==e?e:null}propsToObjState(){var e,a,t;return{selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,projetoId:null!==(a=this.props.projetoId)&&void 0!==a?a:null,dropDownContainer:null!==(t=this.props.dropDownContainer)&&void 0!==t?t:void 0}}componentDidMount(){this.state.projetoId&&this.obterAtividadesProjeto()}componentDidUpdate(e,a){e.projetoId===this.props.projetoId&&e.projetoAtividadeId===this.props.projetoAtividadeId&&e.selecionado===this.props.selecionado&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState()),e.projetoId!==this.props.projetoId&&this.obterAtividadesProjeto(this.props.projetoId)}componentWillUnmount(){this.desmontarListarAtividadeProjeto()}desmontarListarAtividadeProjeto(){window.require(["react-dom"],(e=>{this.divComponenteAtividades&&e.unmountComponentAtNode(this.divComponenteAtividades)}))}render(){return Object(S.jsx)("div",{ref:this.divComponenteAtividadesRef})}}q.defaultProps={placeholder:"Pesquisar Atividade de Projeto",columns:y.d,visible:!0,key:window.random_hash()};class W extends p.Column{}W.defaultProps={dataField:"referencia_nivel",caption:"N\xedvel",width:130,groupIndex:0,children:Object(S.jsx)(p.Lookup,{dataSource:u,displayExpr:"descricao",valueExpr:"id"})};var K=t(807);class J extends p.Button{}J.defaultProps={dataField:"solicitacao_id",text:"Visualizar Solicita\xe7\xe3o",icon:"fas fa-project-diagram",onClick:e=>{const a=e.column.buttons.filter((e=>"SolicitacaoBotaoVisualizar"===e.btnNome));if(0===a.length)return!1;const t=a[0];t.callbackBtns&&t.callbackBtns(),m.a.loadReact(window.views.solicitacao_processo.Listagem.default,{filtro_solicitacao_numero:"S"!==l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.row.data[t.dataField]:e.row.data[t.dataFieldNumero]},(function(e){}),m.a.ABA.SIM_E_RECARREGAR_SE_ESTIVER_ABERTA)},btnNome:"SolicitacaoBotaoVisualizar"};class Q extends p.Button{}Q.defaultProps={dataField:"id",text:"Visualizar chamado",icon:"fas fa-edit",onClick:e=>{const a=e.column.buttons.filter((e=>"ChamadoBotaoVisualizar"===e.btnNome));if(0===a.length)return!1;const t=a[0];t.callbackBtns&&t.callbackBtns(),m.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:e.row.data.id},(function(e,a){}),m.a.ABA.MULTIPLAS)},btnNome:"ChamadoBotaoVisualizar"};var Z=t(731);function X(e){var a,t,o;const i=e.selecionado?[e.selecionado]:null,s=null!==(a=e.readOnly)&&void 0!==a?a:null,n="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},r=null!==(t=e.width)&&void 0!==t?t:null,d=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(S.jsx)(A.default,{dataSource:Object(Z.b)(),valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,children:Y,aoAlterar:n,selecionado:i,readOnly:s,width:r,dataGridWidth:d,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})}const Y=[Object(S.jsx)(p.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string",width:120},"descricao"),Object(S.jsx)(p.Column,{dataField:"usuario_nome",caption:"Usu\xe1rio",dataType:"string"},"usuario_nome"),Object(S.jsx)(p.Column,{dataField:"dia",caption:"Dia",dataType:"date",allowHeaderFiltering:!1},"dia"),Object(S.jsx)(p.Column,{dataField:"hora_inicio",caption:"In\xedcio",dataType:"string"},"hora_inicio"),Object(S.jsx)(p.Column,{dataField:"hora_fim",caption:"Fim",dataType:"string"},"hora_fim"),Object(S.jsx)(p.Column,{dataField:"agenda_tipo_nome",caption:"Tipo",dataType:"string"},"agenda_tipo_nome"),Object(S.jsx)(p.Column,{dataField:"agenda_local_nome",caption:"Local",dataType:"string"},"agenda_local_nome"),Object(S.jsx)(p.Column,{dataField:"realizado",caption:"Realizado",dataType:"string",calculateCellValue:e=>"S"===e.realizado?"Sim":"N\xe3o"},"realizado")];X.defaultProps={valueExpr:"agenda_evento_id",displayExpr:"descricao",placeholder:"Selecione o Evento",columns:Y};var $=t(560);function ee(e){var a,t,o;const i=e.selecionado?[e.selecionado]:null,n=null!==(a=e.readOnly)&&void 0!==a?a:null,r="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},d=null!==(t=e.width)&&void 0!==t?t:null,l=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(A.default,{dataSource:Object($.listarParaSelecionar)(),valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,columns:e.columns,aoAlterar:r,selecionado:i,readOnly:n,width:d,dataGridWidth:l,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})})}const ae=e=>{switch(e){case window.OPORTUNIDADE_SITUACAO.ABERTA:return"Aberta";case window.OPORTUNIDADE_SITUACAO.ATRASADA:return"Atrasada";case window.OPORTUNIDADE_SITUACAO.ESTAGNADA:return"Estagnada";case window.OPORTUNIDADE_SITUACAO.GANHA:return"Ganha";case window.OPORTUNIDADE_SITUACAO.PERDIDA:return"Perdida";default:return"N/D"}},te=[{dataField:"oportunidade_id",caption:"#",dataType:"number",alignment:"left"},{dataField:"oportunidade_nome",caption:"Nome",dataType:"string"},{dataField:"oportunidade_situacao",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:e=>ae(e.oportunidade_situacao)},{dataField:"representante_nome",caption:"Representante",dataType:"string"},{dataField:"cliente_nome",caption:"Cliente",dataType:"string"},{dataField:"prospect_nome",caption:"Prospect",dataType:"string"}];ee.defaultProps={valueExpr:"oportunidade_id",displayExpr:e=>e&&e.oportunidade_nome,placeholder:"Selecione a Oportunidade",columns:te};const oe=e=>new E.default({pageSize:20,key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,i)=>{c.a.get({route:"/tarefa_quadro_lista/listar/",data:Object(o.a)(Object(o.a)({},t),{},{tarefa_quadro_id:e}),func_response:e=>{let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:a=>{if(!a)return!1;return new Promise((function(t,o){c.a.get({route:"/tarefa_quadro_lista/listar/",data:{tarefa_quadro_id:e,lista_id:a},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});function ie(e){var a,t,s;const[n]=Object(i.useState)((()=>new E.default({pageSize:20,key:"id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{c.a.get({route:"tarefa_quadro/listar/",data:Object(o.a)({},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!!e&&new Promise((function(a,t){c.a.get({route:"tarefa_quadro/listar/",data:{quadro_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}))),r=e.selecionado?[e.selecionado]:null,d=null!==(a=e.readOnly)&&void 0!==a&&a,l="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},u=null!==(t=e.width)&&void 0!==t?t:null,p=null!==(s=e.dataGridWidth)&&void 0!==s?s:null;return Object(S.jsx)(A.default,{dataSource:n,valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,children:se,aoAlterar:l,selecionado:r,readOnly:d,width:u,dataGridWidth:p,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})}const se=[Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"},"nome")];ie.defaultProps={valueExpr:"id",displayExpr:"nome",placeholder:"Selecione o Quadro",columns:se};const ne=e=>new E.default({pageSize:20,key:"id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,i)=>{c.a.get({route:"/tarefa_quadro_lista_cartao/listar_para_selecao/",data:Object(o.a)({tarefa_quadro_id:e},t),func_response:e=>{let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:a=>{if(!a)return!1;return new Promise((function(t,o){c.a.get({route:"/tarefa_quadro_lista_cartao/listar_para_selecao/",data:{tarefa_quadro_id:e,cartao_id:a},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});function re(e){var a,t,o;const[s,n]=Object(i.useState)((()=>ne(e.quadro_id)));Object(i.useEffect)((()=>{n(ne(e.quadro_id))}),[e.quadro_id]);const r=e.selecionado?[e.selecionado]:null,d=null!==(a=e.readOnly)&&void 0!==a?a:null,l="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},c=null!==(t=e.width)&&void 0!==t?t:null,u=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(S.jsx)(A.default,{dataSource:s,valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,children:de,aoAlterar:l,selecionado:r,readOnly:d,width:c,dataGridWidth:u,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})}const de=[Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"},"nome")];re.defaultProps={valueExpr:"id",displayExpr:"nome",placeholder:"Selecione o Cart\xe3o",columns:de};var le=t(493);function ce(e){var a,t,o;const i=e.selecionado?[e.selecionado]:null,s=null!==(a=e.readOnly)&&void 0!==a?a:null,n="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},r=null!==(t=e.width)&&void 0!==t?t:null,d=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(S.jsx)(A.default,{dataSource:Object(le.c)(),valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,children:ue,aoAlterar:n,selecionado:i,readOnly:s,width:r,dataGridWidth:d,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})}const ue=[Object(S.jsx)(p.Column,{dataField:"pdca_id",caption:"#",dataType:"number",alignment:"left"},"pdca_id"),Object(S.jsx)(p.Column,{dataField:"numero",caption:"C\xf3digo",dataType:"string"},"numero"),Object(S.jsx)(p.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date"},"data_inicio"),Object(S.jsx)(p.Column,{dataField:"data_fim",caption:"Fim",dataType:"date"},"data_fim"),Object(S.jsx)(p.Column,{dataField:"situacao_id",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:e=>{switch(+e.situacao_id){case window.PDCA_SITUACAO.NAO_INICIADO:return"N\xe3o Iniciado";case window.PDCA_SITUACAO.EM_ANDAMENTO:return"Em Andamento";case window.PDCA_SITUACAO.CONCLUIDO:return"Conclu\xeddo";default:return"Desconhecido"}}},"situacao_id")];ce.defaultProps={valueExpr:"pdca_id",displayExpr:"numero",placeholder:"Selecione o PDCA",columns:ue};const pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new E.default({pageSize:20,key:"pdca_atividade_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise(((a,i)=>{c.a.get({route:"/pdca_atividade/listar/",data:Object(o.a)({dx_grid:!0,pdca_id:e},t),func_response:e=>{let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:e=>{e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:a=>{if(!a)return!1;return new Promise((function(t,o){c.a.get({route:"/pdca_atividade/listar/",data:{dx_grid:!0,pdca_id:e,pdca_atividade_id:a},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};function me(e){var a,t,o;const[s,n]=Object(i.useState)((()=>pe(e.pdca_id)));Object(i.useEffect)((()=>{n(pe(e.pdca_id))}),[e.pdca_id]);const r=e.selecionado?[e.selecionado]:null,d=null!==(a=e.readOnly)&&void 0!==a?a:null,l="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},c=null!==(t=e.width)&&void 0!==t?t:null,u=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(S.jsx)(A.default,{dataSource:s,valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,children:he,aoAlterar:l,selecionado:r,readOnly:d,width:c,dataGridWidth:u,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})}const he=[Object(S.jsx)(p.Column,{dataField:"que",caption:"O Qu\xea",dataType:"string"},"que"),Object(S.jsx)(p.Column,{dataField:"porque",caption:"Por qu\xea",dataType:"string"},"porque"),Object(S.jsx)(p.Column,{dataField:"quem_nome",caption:"Quem",dataType:"string"},"quem_nome"),Object(S.jsx)(p.Column,{dataField:"onde",caption:"Onde",dataType:"string"},"onde"),Object(S.jsx)(p.Column,{dataField:"como",caption:"Como",dataType:"string"},"como"),Object(S.jsx)(p.Column,{dataField:"quanto",caption:"Quanto",dataType:"number",format:{type:"currency",precision:2},allowHeaderFiltering:!1},"quanto"),Object(S.jsx)(p.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date",allowHeaderFiltering:!1},"data_inicio"),Object(S.jsx)(p.Column,{dataField:"data_fim",caption:"Fim",dataType:"date",allowHeaderFiltering:!1},"data_fim"),Object(S.jsx)(p.Column,{dataField:"data_conclusao",caption:"Conclus\xe3o",dataType:"date",allowHeaderFiltering:!1},"data_conclusao")];function _e(e){var a,t,o;const i=e.selecionado?[e.selecionado]:null,s=null!==(a=e.readOnly)&&void 0!==a?a:null,n="function"===typeof e.aoAlterar?e.aoAlterar:()=>{},r=null!==(t=e.width)&&void 0!==t?t:null,d=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(S.jsx)(A.default,{dataSource:Object(R.b)(),valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,children:e.columns,aoAlterar:n,selecionado:i,readOnly:s,width:r,dataGridWidth:d,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})}me.defaultProps={valueExpr:"pdca_atividade_id",displayExpr:"que",placeholder:"Selecione a atividade do PDCA",columns:he};const fe=[Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"},"nome"),Object(S.jsx)(p.Column,{dataField:"assunto_descricao",caption:"Assunto",dataType:"string"},"assunto_descricao"),Object(S.jsx)(p.Column,{dataField:"tipo_documento_nome",caption:"Tipo",dataType:"string"},"tipo_documento_nome"),Object(S.jsx)(p.Column,{dataField:"pasta",caption:"Pasta",dataType:"string"},"pasta")];_e.defaultProps={valueExpr:"documento_id",displayExpr:"nome",placeholder:"Selecione o documento",columns:fe};var be=t(445),ve=t.n(be),ge=t(576);function we(e){let{key:a="",title:t="",visible:n=!1,popupWidth:r="80vw",popupHeight:d,popupContent:l=null,tipoPredefinido:u=null,parametrosAdicionaisSalvar:p={},aoEsconder:h=()=>{},aoSalvar:_=()=>{}}=e;const b=Object(i.useRef)(null),g=Object(i.useRef)(null),w=Object(i.useRef)(null),j=Object(i.useRef)(null),O=Object(i.useRef)(null),x=Object(i.useRef)(null);Object(i.useEffect)((()=>{"boolean"===typeof n&&C(n)}),[n]);const[A,C]=Object(i.useState)(null!==n&&void 0!==n&&n),[I,E]=Object(i.useState)(function(){if(null!==u&&""!==u)switch(u){case"novoTarefaQuadro":return function(){const e={text:"Salvar",onClick:()=>{var e,a,t,i,s;const n=b.current.instance,r=g.current.dropDownBoxRef.current.instance,d=w.current.instance,l=j.current.instance;let u=null!==(e=n.option("value"))&&void 0!==e?e:null,h=null!==(a=(null!==(t=r.option("value"))&&void 0!==t?t:[])[0])&&void 0!==a?a:null,f=null!==(i=d.option("value"))&&void 0!==i?i:null,v=null!==(s=l.option("value"))&&void 0!==s?s:null;if(u){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.a.post({route:"/tarefa_quadro/salvar/",data:{data:JSON.stringify(e),defaultSave:!0},func_response(e){window.alert_saved("Quadro de Tarefas cadastrado com sucesso"),P();const a="function"===typeof _?_:()=>{};a(),m.a.load("tarefa/detalhes",((t,o)=>{o.onclose=a,o.show(e)}),m.a.ABA.SIM)},func_fail(){window.alert_fail("Falha ao cadastrar Quadro de Tarefas")}})}(Object(o.a)(Object(o.a)({},p),{},{nome:u,formulario_tarefa_quadro_lista_cartao_id:h,redimensionar_colunas:f,particular:v}))}else window.alertaPopUp("Valida\xe7\xe3o","O nome do Quadro \xe9 obrigat\xf3rio.")}},a={text:"Cancelar",onClick:()=>{P()}};return[Object(S.jsx)(be.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"after",showText:"always",options:e}),Object(S.jsx)(be.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"before",showText:"always",options:a})]}();case"novoTarefaCartao":return function(){const e={text:"Salvar",onClick:()=>{var e,a;const t=x.current.instance;let i=null!==(e=O.current.instance.option("value"))&&void 0!==e?e:null,s=null!==(a=t.option("value"))&&void 0!==a?a:null;if(i)if(s){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.a.post({route:"/tarefa_quadro_lista_cartao/salvar/",data:Object(o.a)({},e),func_response(e){window.alert_saved("Cart\xe3o cadastrado com sucesso"),P();const a="function"===typeof _?_:()=>{};a(),m.a.load("tarefa/detalhes_cartao",(function(t,o){o.onclose=a,o.show(e.id)}),m.a.ABA.SIM,null,null,{cartaoId:e.id})},func_fail(){window.alert_fail("Falha ao cadastrar Cart\xe3o")}})}(Object(o.a)(Object(o.a)({},p),{},{nome:s,tarefa_quadro_lista_id:i}))}else window.alertaPopUp("Valida\xe7\xe3o","O nome do Cart\xe3o \xe9 obrigat\xf3rio.");else window.alertaPopUp("Valida\xe7\xe3o","A Lista \xe9 obrigat\xf3ria para o cadastro do Cart\xe3o.")}},a={text:"Cancelar",onClick:()=>{P()}};return[Object(S.jsx)(be.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"after",showText:"always",options:e}),Object(S.jsx)(be.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"before",showText:"always",options:a})]}();default:return T()}return T()}());return Object(S.jsx)("div",{className:"DxPopup",children:Object(S.jsx)(ve.a,{id:"popup_".concat(a||Math.random()),title:null!==t&&void 0!==t?t:"",visible:A,contentRender:function(){if(null===u||""===u)return null!==l&&""!==l?l:y();switch(u){case"novoTarefaQuadro":return function(){const e={display:"flex",flexDirection:"column",gap:16},a={display:"block"},t=[{descricao:"Sim",valor:"S"},{descricao:"N\xe3o",valor:"N"}];return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsxs)("div",{style:e,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{style:a,children:"Nome"}),Object(S.jsx)(f.a,{ref:b,placeholder:"Digite o nome do Quadro"})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{style:a,children:"Formul\xe1rio Vinculado"}),Object(S.jsx)(ge.default,{ref:g})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{style:a,children:"Redimensionar Colunas"}),Object(S.jsx)(v.a,{ref:w,dataSource:t,displayExpr:"descricao",valueExpr:"valor",defaultValue:"N"})]})]})})}();case"novoTarefaCartao":return function(){const e={display:"flex",flexDirection:"column",gap:16},a={display:"block"};return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsxs)("div",{style:e,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{children:"Lista"}),Object(S.jsx)(v.a,{ref:O,dataSource:oe(p.tarefa_quadro_id),valueExpr:"id",displayExpr:"nome"})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{style:a,children:"Nome"}),Object(S.jsx)(f.a,{ref:x,placeholder:"Digite o nome do Cart\xe3o"})]})]})})}();default:y()}},dragEnabled:!1,hideOnOutsideClick:!1,showCloseButton:!0,onHiding:P,width:r,height:d,children:I},"key_".concat(a||Math.random()))});function P(){C(!A),"function"===typeof h&&h()}function T(){const e={text:"Ok",onClick(){P()}};return Object(S.jsx)(be.ToolbarItem,{widget:"dxButton",toolbar:"bottom",showText:"always",options:e})}function y(){return Object(S.jsx)("p",{children:"..."})}}t(561);class je extends s.a.Component{constructor(e){super(e),this.state=Object(o.a)({isComponenteCarregado:!1,relacionamentos:[],selectedItemKeys:[],salvando:!1,exibirSelecionarTarefaCartao:!1,selecaoCartaoQuadroId:null,exibirSelecionarAtividadeProjeto:!1,exibirSelecionarAtividadeProjetoId:null,popupNovoQuadroVisible:!1,popupNovoCartaoVisible:!1,exibirSelecionarPDCAAtividade:!1,PDCASelecionadoId:null},this.propsToObjState()),this.aoAlterarVisualizacaoTabela=this.aoAlterarVisualizacaoTabela.bind(this),this.aoAlterarVisualizacaoId=this.aoAlterarVisualizacaoId.bind(this),this.aoAlterarVinculoId=this.aoAlterarVinculoId.bind(this),this.aoSelecionarAgenda=this.aoSelecionarAgenda.bind(this),this.aoSelecionarTarefaQuadro=this.aoSelecionarTarefaQuadro.bind(this),this.aoSelecionarTarefaCartao=this.aoSelecionarTarefaCartao.bind(this),this.aoSelecionarChamado=this.aoSelecionarChamado.bind(this),this.aoSelecionarSolicitacao=this.aoSelecionarSolicitacao.bind(this),this.aoSelecionarSolicitacaoAtividade=this.aoSelecionarSolicitacaoAtividade.bind(this),this.aoSelecionarProjeto=this.aoSelecionarProjeto.bind(this),this.aoSelecionarProjetoAtividade=this.aoSelecionarProjetoAtividade.bind(this),this.aoSelecionarPDCA=this.aoSelecionarPDCA.bind(this),this.aoSelecionarPDCAComAtividade=this.aoSelecionarPDCAComAtividade.bind(this),this.aoSelecionarPDCAAtividade=this.aoSelecionarPDCAAtividade.bind(this),this.aoSelecionarOportunidade=this.aoSelecionarOportunidade.bind(this),this.aoSelecionarDocumento=this.aoSelecionarDocumento.bind(this),this.aoAlterarVinculoTabela=this.aoAlterarVinculoTabela.bind(this),this.confirmarVinculo=this.confirmarVinculo.bind(this),this.reiniciar=this.reiniciar.bind(this),this.callbackBtns=this.callbackBtns.bind(this),this.onClickRemoverReferencia=this.onClickRemoverReferencia.bind(this),this.onClickCancelar=this.onClickCancelar.bind(this),this.onClickExpandir=this.onClickExpandir.bind(this),this.onClickRetrair=this.onClickRetrair.bind(this),this.onClickRefresh=this.onClickRefresh.bind(this),this.onClickNovoEvento=this.onClickNovoEvento.bind(this),this.onClickNovoChamado=this.onClickNovoChamado.bind(this),this.onClickNovaSolicitacao=this.onClickNovaSolicitacao.bind(this),this.onClickNovoDocumento=this.onClickNovoDocumento.bind(this),this.onClickNovoDocumentoMultiplo=this.onClickNovoDocumentoMultiplo.bind(this),this.onClickNovoProjeto=this.onClickNovoProjeto.bind(this),this.onClickNovoQuadro=this.onClickNovoQuadro.bind(this),this.onClickNovoTarefaCartao=this.onClickNovoTarefaCartao.bind(this),this.onClickNovoPDCA=this.onClickNovoPDCA.bind(this),this.onClickNovoPDCAAtividade=this.onClickNovoPDCAAtividade.bind(this),this.obterReferencias=this.obterReferencias.bind(this),this.aoAlterarAcordeaoSelecionado=this.aoAlterarAcordeaoSelecionado.bind(this),this.renderTitulo=this.renderTitulo.bind(this),this.renderDataGrid=this.renderDataGrid.bind(this)}propsToObjState(){var e,a,t,o,i,s,n,r;return{tabela:null!==(e=this.props.tabela)&&void 0!==e?e:null,id:null!==(a=this.props.id)&&void 0!==a?a:null,callbackBtns:null!==(t=this.props.callbackBtns)&&void 0!==t?t:null,documentoPastaId:null!==(o=this.props.documentoPastaId)&&void 0!==o?o:null,entidadeId:null!==(i=this.props.entidadeId)&&void 0!==i?i:null,entidadeTipo:null!==(s=this.props.entidadeTipo)&&void 0!==s?s:null,adicionais:null!==(n=this.props.adicionais)&&void 0!==n?n:null,dropDownContainer:null!==(r=this.props.dropDownContainer)&&void 0!==r?r:void 0}}componentDidUpdate(e,a){e.tabela===this.props.tabela&&e.id===this.props.id||this.setState(this.propsToObjState())}componentDidMount(){this.obterReferencias()}obterReferencias(e){var a,t;this.state.tabela&&this.state.id>0&&(a=this.state.tabela,t=this.state.id,new Promise((function(e,o){c.a.get({route:"referencia/listar/",data:{tabela:a,id:t},func_response:function(a){e(a)}})}))).then((a=>{let t={};e&&(t={vincularId:null,referenciarTabela:null,salvando:!1}),this.setState(Object(o.a)({relacionamentos:a,selectedItemKeys:this.state.selectedItemKeys,isComponenteCarregado:!0},t))}))}aoAlterarVisualizacaoTabela(e){this.setState({tabela:e.value},(()=>this.obterReferencias()))}aoAlterarVisualizacaoId(e){this.setState({id:e.value},(()=>this.obterReferencias()))}aoAlterarVinculoTabela(e){this.setState({referenciarTabela:e.value})}aoAlterarVinculoId(e){this.setState({vincularId:e.value})}aoSelecionarAgenda(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarTarefaQuadro(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.setState({vincularId:e},(()=>this.confirmarVinculo())):this.setState({exibirSelecionarTarefaCartao:!0,selecaoCartaoQuadroId:e})}aoSelecionarTarefaCartao(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarChamado(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarSolicitacao(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarSolicitacaoAtividade(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarProjeto(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.setState({vincularId:e},(()=>this.confirmarVinculo())):this.setState({exibirSelecionarAtividadeProjeto:!0,exibirSelecionarAtividadeProjetoId:e})}aoSelecionarProjetoAtividade(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarPDCA(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarPDCAComAtividade(e){this.setState({exibirSelecionarPDCAAtividade:!0,PDCASelecionadoId:e})}aoSelecionarPDCAAtividade(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarOportunidade(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}aoSelecionarDocumento(e){this.setState({vincularId:e},(()=>this.confirmarVinculo()))}confirmarVinculo(){if(this.state.referenciarTabela&&""!==this.state.referenciarTabela&&this.state.vincularId&&""!==this.state.vincularId){const o=()=>{this.obterReferencias(!0)},i=()=>{this.reiniciar()};this.setState({salvando:!0,exibirSelecionarAtividadeProjeto:!1}),e={tabela_a:this.state.tabela,id_a:this.state.id,tabela_b:this.state.referenciarTabela,id_b:this.state.vincularId},a=o,t=i,c.a.post({route:"referencia/salvar",data:e,func_response:e=>{window.alert_saved("Relacionamento salvo com sucesso"),a&&a(e)},func_fail:e=>{window.alert_fail("Falhou"),t&&t(e)}})}var e,a,t}aoAlterarAcordeaoSelecionado(e){let a=[...this.state.selectedItemKeys];e.removedItems.forEach((e=>{let t=a.indexOf(e.tabela);t>=0&&a.splice(t,1)})),e.addedItems.length&&(a=[...a,e.addedItems[0].tabela]),this.setState({selectedItemKeys:a})}renderTitulo(e){let a=Object(S.jsx)("div",{children:e.registros.map(((e,a)=>10===a?Object(S.jsx)("button",{type:"button",className:"btn btn-link",style:{paddingLeft:0,paddingRight:10,paddingTop:0,paddingBottom:0},children:"..."},e.referencia_id):a>10?null:Object(S.jsx)("button",{type:"button",className:"btn btn-link referencia_titulo_link",style:{padding:"2px 6px",marginRight:10,display:"inline-block",textDecoration:"underline",background:"transparent",border:"none",color:"#007bff",cursor:"pointer",maxWidth:"190px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"10px"},title:this.labelTituloLinkReferencia(e),onClick:a=>this.abrirTituloLinkReferencia(e,a),children:this.labelTituloLinkReferencia(e)},e.referencia_id)))}),t=e.tabela,o=je.tabelas.filter((a=>a.id===e.tabela));return o&&o.length>0&&(t=o[0].descricao),Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)("div",{className:"pull-right",style:{paddingRight:"25px"},children:Object(S.jsx)("span",{className:"badge",children:e.registros.length})}),Object(S.jsxs)("div",{style:{display:"flex",alignSelf:"center"},children:[Object(S.jsx)("div",{children:t}),Object(S.jsx)(h.a,{}),Object(S.jsx)("div",{children:a})]})]})}renderDataGrid(e){switch(e.tabela){case"chamado":return this.renderDataGridChamado(e.registros);case"oportunidade":return this.renderDataGridOportunidade(e.registros);case"solicitacao":return this.renderDataGridSolicitacao(e.registros);case"solicitacao_atividade":return this.renderDataGridSolicitacaoAtividade(e.registros);case"projeto":return this.renderDataGridProjeto(e.registros);case"projeto_atividade":return this.renderDataGridProjetoAtividade(e.registros);case"documento":return this.renderDataGridDocumento(e.registros);case"agenda_evento":return this.renderDataGridAgendaEvento(e.registros);case"pdca":return this.renderDataGridPdca(e.registros);case"pdca_atividade":return this.renderDataGridPdcaAtividade(e.registros);case"tarefa_quadro":return this.renderDataGridTarefaQuadro(e.registros);case"tarefa_quadro_lista_cartao":return this.renderDataGridTarefaQuadroListaCartao(e.registros)}}callbackBtns(){"function"===typeof this.state.callbackBtns&&this.state.callbackBtns()}onClickRemoverReferencia(e){const a=()=>{this.obterReferencias()};window.DevExpress.ui.dialog.confirm("A refer\xeancia ser\xe1 removida. <b>Deseja continuar?</b>","Remover refer\xeancia").done((t=>{var o,i,s;t&&(o={tabela_a:this.state.tabela,id_a:this.state.id,tabela_b:e.row.data.referencia_tabela,id_b:e.row.data.referencia_id},i=a,c.a.post({route:"referencia/excluir",data:o,func_response:e=>{window.alert_saved("Relacionamento exclu\xeddo com sucesso"),i&&i(e)},func_fail:e=>{window.alert_fail("Falhou"),s&&s(e)}}))}))}reiniciar(){this.setState({vincularId:null,referenciarTabela:null,salvando:!1})}onClickCancelar(e){this.reiniciar()}onClickRefresh(e){this.obterReferencias()}onClickExpandir(e){this.setState({selectedItemKeys:this.state.relacionamentos.map((e=>e.tabela))})}onClickRetrair(e){this.setState({selectedItemKeys:[]})}onClickNovoEvento(e){let a=()=>{this.obterReferencias()};this.callbackBtns();const t={evento_id:null,dia:{dia:window.formatDate(new Date,!0),hora_inicio:null,hora_fim:null},usuario_id:l.a.sessao.dados.usuario_id,usuario_nome:l.a.sessao.dados.nome,referencia_tabela:this.state.tabela,referencia_id:this.state.id};m.a.load("agenda/agenda_evento",((e,o)=>{o.onclose=a,o.show(t)}))}onClickNovoQuadro(e){const a="undefined"===typeof e||e;this.setState({popupNovoQuadroVisible:a})}onClickNovoTarefaCartao(e){const a="undefined"===typeof e||e;this.setState({popupNovoCartaoVisible:a})}onClickNovoChamado(e){var a,t,i,s;this.callbackBtns();let n={};if("pdca_atividade"===this.state.tabela)n={pdcaAtividadeId:this.state.id,pdcaId:null!==(a=null===(t=this.state.adicionais)||void 0===t?void 0:t.pdca_id)&&void 0!==a?a:null,assunto:"PDCA #"+(null!==(i=null===(s=this.state.adicionais)||void 0===s?void 0:s.pdca_id)&&void 0!==i?i:"")+" | Atividade #"+this.state.id};m.a.loadReact(window.views.chamado.Detalhes.default,Object(o.a)({referenciaTabela:this.state.tabela,referenciaId:this.state.id,entidadeId:this.state.entidadeId,entidadeTipo:this.state.entidadeTipo,onClose:()=>{this.obterReferencias()}},n),((e,a)=>{}),m.a.ABA.MULTIPLAS),this.reiniciar()}onClickNovaSolicitacao(e){this.callbackBtns(),m.a.load("solicitacao/nova",((e,a)=>{a.onclose=()=>{this.obterReferencias()},a.referencia_tabela=this.state.tabela,a.referencia_id=this.state.id,a.show()})),this.reiniciar()}onClickNovoDocumento(e){this.callbackBtns(),m.a.load("central_documentos/documento",((e,a)=>{a.onclose=()=>{this.obterReferencias()},a.referencia_tabela=this.state.tabela,a.referencia_id=this.state.id,a.show(null,window.FORMULARIO.NOVO,this.state.documentoPastaId,null,null,null,null,null,null)}),m.a.ABA.MULTIPLAS),this.reiniciar()}onClickNovoDocumentoMultiplo(e){this.callbackBtns(),m.a.load("upload/envio_multiplo",((e,a)=>{a.onclose=()=>{this.obterReferencias()},a.referencia_tabela=this.state.tabela,a.referencia_id=this.state.id,a.show(this.state.documentoPastaId)}),m.a.ABA.SIM),this.reiniciar()}onClickNovoProjeto(e){let a=()=>{this.obterReferencias()};this.callbackBtns(),m.a.load("projeto/detalhes",((e,t)=>{t.onclose=a,t.show({referencia:{referencia_tabela:this.state.tabela,referencia_id:this.state.id}},window.FORMULARIO.NOVO)}),m.a.ABA.MULTIPLAS)}onClickNovoPDCA(e){m.a.load("pdca/detalhes",((e,a)=>{a.onclose=()=>{this.obterReferencias()},a.show(null,window.FORMULARIO.NOVO,{referencia_tabela:this.state.tabela,referencia_id:this.state.id})}),m.a.ABA.SIM)}onClickNovoPDCAAtividade(e){m.a.load("pdca/atividades",((e,a)=>{a.onclose=()=>{this.obterReferencias()},a.show({pdca_id:this.state.PDCASelecionadoId},!1,{referencia_tabela:this.state.tabela,referencia_id:this.state.id})}),m.a.ABA.SIM)}acessarAgendaEvento(e){m.a.load("agenda/agenda_evento",((a,t)=>{t.onclose=this.onClickRefresh,t.show({evento_id:e})}))}acessarTarefaQuadro(e){m.a.load("tarefa/detalhes",((a,t)=>{t.onclose=this.onClickRefresh,t.show({id:e})}),m.a.ABA.SIM,null,null,{tarefaQuadroId:e})}acessarTarefaQuadroCartao(e){m.a.load("tarefa/detalhes_cartao",((a,t)=>{t.onclose=this.onClickRefresh,t.show(e)}),m.a.ABA.SIM,null,null,{cartaoId:e})}acessarChamado(e){m.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:e},(function(e,a){}),m.a.ABA.MULTIPLAS)}acessarProjeto(e){m.a.load("projeto/detalhes",((a,t)=>{t.onclose=this.onClickRefresh,t.show(e,window.FORMULARIO.EDITAR)}),m.a.ABA.SIM)}acessarSolicitacao(e){m.a.loadReact(window.views.solicitacao_processo.Listagem.default,{filtro_solicitacao_numero:e},(function(e){}),m.a.ABA.SIM_E_RECARREGAR_SE_ESTIVER_ABERTA)}acessarSolicitacaoAtividade(e){m.a.load("solicitacao/detalhes",(function(a,t){t.show(e,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:e})}acessarDocumento(e){m.a.load("central_documentos/documento",((a,t)=>{t.show(e,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS)}acessarProjetoAtividade(e,a){m.a.load("atividade_projeto/detalhes",((t,o)=>{o.show(e,a,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:a})}acessarPDCA(e){m.a.load("pdca/detalhes",((a,t)=>{t.onclose=this.onClickRefresh,t.show({pdca_id:e},window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{pdcaId:e})}acessarPDCAAtividade(e,a){m.a.load("pdca/atividades",((t,o)=>{o.onclose=this.onClickRefresh,o.show({pdca_id:e,pdca_atividade_id:a})}),m.a.ABA.MULTIPLAS,null,null,{pdcaId:e})}acessarOportunidade(e,a){m.a.load("oportunidade/detalhes",(function(e,t){t.show(a,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{oportunidadeId:a})}abrirTituloLinkReferencia(e,a){switch(this.callbackBtns(),e.referencia_tabela){case"agenda_evento":this.acessarAgendaEvento(e.agenda_evento_id);break;case"tarefa_quadro":this.acessarTarefaQuadro(e.id);break;case"tarefa_quadro_lista_cartao":this.acessarTarefaQuadroCartao(e.id);break;case"chamado":this.acessarChamado(e.id);break;case"solicitacao":this.acessarSolicitacao(e.id);break;case"solicitacao_atividade":this.acessarSolicitacaoAtividade(e.solicitacao_atividade_id);break;case"documento":this.acessarDocumento(e.documento_id);break;case"projeto":this.acessarProjeto(e.id);break;case"projeto_atividade":this.acessarProjetoAtividade(e.projeto_id,e.id);break;case"oportunidade":this.acessarOportunidade(e.funil_vendas_id,e.oportunidade_id);break;case"pdca":this.acessarPDCA(e.pdca_id);break;case"pdca_atividade":this.acessarPDCAAtividade(e.pdca_id,e.pdca_atividade_id)}}labelTituloLinkReferencia(e){switch(e.referencia_tabela){case"agenda_evento":return"".concat(e.dia.format_date()," ").concat(e.agenda_tipo_nome);case"chamado":return"#".concat(e.id," ").concat(e.assunto);case"solicitacao":{const a="S"===l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.id;return"#".concat(a," ").concat(e.processo_nome)}case"solicitacao_atividade":{const a="S"===l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.solicitacao_id;return"#".concat(a," ").concat(e.atividade_descricao)}case"documento":return e.nome;case"projeto":return"#".concat(e.codigo," ").concat(e.nome);case"projeto_atividade":return"#".concat(e.codigo," ").concat(e.atividade_simplificada);case"tarefa_quadro":return"#".concat(e.id," ").concat(e.nome);case"tarefa_quadro_lista_cartao":return"".concat(e.nome," (").concat(e.quadro_nome,")");case"oportunidade":return"#".concat(e.oportunidade_id," (").concat(e.nome," / ").concat(e.funil,")");case"pdca":return"#".concat(e.numero," ").concat(e.objetivo);case"pdca_atividade":return"#".concat(e.pdca_numero," ").concat(e.que||e.porque||e.quem_nome||e.como);default:return""}}renderDataGridChamado(e){const a=[Object(S.jsx)(W,{}),...Object(K.a)(this.props.html_id),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(Q,{dataField:"chamado_id",callbackBtns:this.callbackBtns}),Object(S.jsx)(p.Button,{text:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO})]})];return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(d.default,{dataSource:e,remoteOperations:!1,children:a}),Object(S.jsx)(h.b,{})]})}renderDataGridSolicitacao(e){const a=[Object(S.jsx)(W,{}),...B(window.App.sessao.dados.parametro_processo.numero_solicitacao_por_processo),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(J,{dataField:"id",dataFieldNumero:"numero",callbackBtns:this.callbackBtns}),Object(S.jsx)(p.Button,{text:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO})]})];return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsxs)(d.default,{width:"100%",dataSource:e,remoteOperations:!1,onRowPrepared:e=>{"data"===e.rowType&&setTimeout((()=>{var a=e.component.getCellElement(e.rowIndex,"solicitacao_situacao");if(a){var t=a.text();if(t.trim().length){a.css("color","#FFF").css("text-align","center");var o="Andamento"===t?"#669999":"Conclu\xedda"===t?"#008A2E":"N\xe3o entregue"===t?"#E68A00":"Retornada"===t||"Cancelada"===t||"Atrasada"===t?"#B80000":"#000000DE";a.css("background",o)}}}))},children:[a,Object(S.jsx)(p.MasterDetail,{enabled:!0,template:async(e,a)=>{r.a.render(s.a.createElement(window.views.solicitacao_processo.ListagemAtividadesMasterDetail.default,{data:a.data}),e[0])}})]}),Object(S.jsx)(h.b,{})]})}renderDataGridSolicitacaoAtividade(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(d.default,{dataSource:e,remoteOperations:!1,columns:[this.colunaReferenciaNivel,...P(l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo),{type:"buttons",fixed:!0,fixedPosition:"right",buttons:[T(this.callbackBtns),{hint:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO}]}],onRowPrepared:e=>{"data"===e.rowType&&setTimeout((()=>{var a=e.component.getCellElement(e.rowIndex,"situacao");if(a){var t=a.text();if(t.trim().length){a.css("color","#FFF").css("text-align","center");var o="Andamento"===t?"#669999":"Conclu\xedda"===t?"#008A2E":"N\xe3o entregue"===t?"#E68A00":"Retornada"===t||"Cancelada"===t||"Atrasada"===t?"#B80000":"#000000DE";a.css("background",o)}}}))}}),Object(S.jsx)(h.b,{})]})}renderDataGridProjeto(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"codigo",caption:"C\xf3digo",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"cliente_nome",caption:"Cliente",dataType:"string",calculateCellValue:e=>e.cliente_nome||e.cliente_razao_social}),Object(S.jsx)(p.Column,{dataField:"status_nome",caption:"Status",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"inicio",caption:"In\xedcio",dataType:"date",allowHeaderFiltering:!1}),Object(S.jsx)(p.Column,{dataField:"fim",caption:"Fim",dataType:"date",allowHeaderFiltering:!1}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar Projeto",onClick:e=>{this.acessarProjeto(e.row.data.id)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]}),Object(S.jsx)(h.b,{})]})}renderDataGridProjetoAtividade(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(d.default,{dataSource:e,remoteOperations:!1,columns:[this.colunaReferenciaNivel,...y.d,{type:"buttons",fixed:!0,fixedPosition:"right",buttons:[Object(y.c)(this.callbackBtns),{hint:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO}]}],onRowPrepared:e=>{"data"===e.rowType&&setTimeout((()=>{var a=e.component.getCellElement(e.rowIndex,"status");if(a){var t=a.text();if(t.trim().length){let e="Cancelada"===t?"default":"Andamento"===t?"info":"Conclu\xeddo"===t?"success":"N\xe3o iniciado"===t?"warning":"danger";a.html('<span class="label label-'+e+'">'+t+"</span>")}}}))}}),Object(S.jsx)(h.b,{})]})}renderDataGridDocumento(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"assunto_descricao",caption:"Assunto",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"tipo_documento_nome",caption:"Tipo",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"pasta",caption:"Pasta",dataType:"string"}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar documento",onClick:e=>{m.a.load("central_documentos/documento",((a,t)=>{t.onclose=this.onClickRefresh,t.show(e.row.data.documento_id,window.FORMULARIO.EDITAR,e.row.data.documento_pasta_id)}),m.a.ABA.SIM)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]}),Object(S.jsx)(h.b,{})]})}renderDataGridOportunidade(e){return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"oportunidade_id",caption:"#",dataType:"number",alignment:"left"}),Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"situacao",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:e=>ae(e.situacao)}),Object(S.jsx)(p.Column,{dataField:"representante_nome",caption:"Representante",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"entidade_nome",caption:"Entidade"}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar Oportunidade",onClick:e=>{m.a.load("oportunidade/detalhes",((a,t)=>{t.onclose=this.onClickRefresh,t.show(e.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.row.data.oportunidade_id})}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]})})}renderDataGridAgendaEvento(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"usuario_nome",caption:"Usu\xe1rio",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"dia",caption:"Dia",dataType:"date",allowHeaderFiltering:!1}),Object(S.jsx)(p.Column,{dataField:"hora_inicio",caption:"In\xedcio",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"hora_fim",caption:"Fim",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"agenda_tipo_nome",caption:"Tipo",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"agenda_local_nome",caption:"Local",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"realizado",caption:"Realizado",dataType:"string",calculateCellValue:e=>"S"===e.realizado?"Sim":"N\xe3o"}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar evento",onClick:e=>{const a=e.row.data;this.acessarAgendaEvento(a.agenda_evento_id)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]}),Object(S.jsx)(h.b,{})]})}renderDataGridPdca(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"pdca_id",caption:"#",dataType:"number",alignment:"left"}),Object(S.jsx)(p.Column,{dataField:"numero",caption:"C\xf3digo",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date"}),Object(S.jsx)(p.Column,{dataField:"data_fim",caption:"Fim",dataType:"date"}),Object(S.jsx)(p.Column,{dataField:"situacao_id",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:e=>{switch(+e.situacao_id){case window.PDCA_SITUACAO.NAO_INICIADO:return"N\xe3o Iniciado";case window.PDCA_SITUACAO.EM_ANDAMENTO:return"Em Andamento";case window.PDCA_SITUACAO.CONCLUIDO:return"Conclu\xeddo"}}}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar PDCA",onClick:e=>{this.acessarPDCA(e.row.data.pdca_id)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]}),Object(S.jsx)(h.b,{})]})}renderDataGridPdcaAtividade(e){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"que",caption:"O Qu\xea",dataType:"string"},"que"),Object(S.jsx)(p.Column,{dataField:"porque",caption:"Por qu\xea",dataType:"string"},"porque"),Object(S.jsx)(p.Column,{dataField:"quem_nome",caption:"Quem",dataType:"string"},"quem_nome"),Object(S.jsx)(p.Column,{dataField:"onde",caption:"Onde",dataType:"string"},"onde"),Object(S.jsx)(p.Column,{dataField:"como",caption:"Como",dataType:"string"},"como"),Object(S.jsx)(p.Column,{dataField:"quanto",caption:"Quanto",dataType:"number",format:{type:"currency",precision:2},allowHeaderFiltering:!1},"quanto"),Object(S.jsx)(p.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date",allowHeaderFiltering:!1},"data_inicio"),Object(S.jsx)(p.Column,{dataField:"data_fim",caption:"Fim",dataType:"date",allowHeaderFiltering:!1},"data_fim"),Object(S.jsx)(p.Column,{dataField:"data_conclusao",caption:"Conclus\xe3o",dataType:"date",allowHeaderFiltering:!1},"data_conclusao"),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar atividades",onClick:e=>{this.acessarPDCAAtividade(e.row.data.pdca_id,e.row.data.pdca_atividade_id)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]}),Object(S.jsx)(h.b,{})]})}renderDataGridTarefaQuadro(e){return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar quadro",onClick:e=>{this.acessarTarefaQuadro(e.row.data.id)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]})})}renderDataGridTarefaQuadroListaCartao(e){return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsxs)(d.default,{dataSource:e,remoteOperations:!1,children:[Object(S.jsx)(p.Column,{dataField:"quadro_nome",caption:"Quadro",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"nome",caption:"Cart\xe3o",dataType:"string"}),Object(S.jsx)(p.Column,{dataField:"data_prazo",caption:"Prazo",dataType:"datetime",allowHeaderFiltering:!1}),Object(S.jsx)(p.Column,{dataField:"data_conclusao",caption:"Conclus\xe3o",dataType:"datetime",allowHeaderFiltering:!1}),Object(S.jsxs)(p.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(S.jsx)(p.Button,{icon:"fas fa-edit",hint:"Visualizar cart\xe3o",onClick:e=>{this.acessarTarefaQuadroCartao(e.row.data.id)}}),Object(S.jsx)(p.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:e=>e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO,onClick:this.onClickRemoverReferencia})]})]})})}render(){return this.state.isComponenteCarregado?Object(S.jsx)("div",{className:"panel",children:Object(S.jsxs)("div",{className:"panel-body",children:[this.props.tabela||this.props.id?null:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-xs-12",children:[Object(S.jsx)("div",{children:"Visualizar refer\xeancias de:"}),Object(S.jsxs)("div",{style:{display:"flex",alignSelf:"center"},children:[Object(S.jsx)(v.a,{items:je.tabelas,displayExpr:"descricao",valueExpr:"id",value:this.state.tabela,onValueChanged:this.aoAlterarVisualizacaoTabela}),Object(S.jsx)(f.a,{value:this.state.id,onValueChanged:this.aoAlterarVisualizacaoId})]}),Object(S.jsx)(h.b,{})]})}),Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-xs-12",children:Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.Item,{location:"before",children:Object(S.jsxs)("div",{style:{display:"flex",alignSelf:"center"},children:[Object(S.jsx)(v.a,{items:je.tabelas.filter((e=>e.selecaoVisivel)),displayExpr:"descricao",valueExpr:"id",value:this.state.referenciarTabela,onValueChanged:this.aoAlterarVinculoTabela,placeholder:"Adicionar refer\xeancia interna",disabled:this.state.salvando,width:250}),Object(S.jsx)(h.a,{}),"agenda_evento"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(X,{aoAlterar:this.aoSelecionarAgenda,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{type:"default",text:"Novo Evento",disabled:this.state.salvando,onClick:this.onClickNovoEvento})]}):null,"tarefa_quadro"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(ie,{aoAlterar:e=>{this.aoSelecionarTarefaQuadro(e,!0)},readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{type:"default",text:"Novo Quadro",disabled:this.state.salvando,onClick:()=>{this.onClickNovoQuadro(!0)}}),Object(S.jsx)(we,{title:"Novo Quadro de Tarefas",tipoPredefinido:"novoTarefaQuadro",visible:this.state.popupNovoQuadroVisible,popupWidth:500,aoEsconder:()=>{this.onClickNovoQuadro(!1)},parametrosAdicionaisSalvar:{referencia_tabela:this.state.tabela,referencia_id:this.state.id},aoSalvar:this.obterReferencias},"tarefas_quadro")]}):null,"tarefa_quadro_lista_cartao"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(ie,{aoAlterar:e=>{this.aoSelecionarTarefaQuadro(e,!1)},readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),this.state.exibirSelecionarTarefaCartao&&this.state.selecaoCartaoQuadroId&&Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(re,{quadro_id:this.state.selecaoCartaoQuadroId,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800,aoAlterar:this.aoSelecionarTarefaCartao}),Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{type:"default",text:"Novo Cart\xe3o",disabled:this.state.salvando,onClick:()=>{this.onClickNovoTarefaCartao(!0)}}),Object(S.jsx)(we,{title:"Novo Cart\xe3o de Tarefas",tipoPredefinido:"novoTarefaCartao",visible:this.state.popupNovoCartaoVisible,popupWidth:500,aoEsconder:()=>{this.onClickNovoTarefaCartao(!1)},parametrosAdicionaisSalvar:{referencia_tabela:this.state.tabela,referencia_id:this.state.id,tarefa_quadro_id:this.state.selecaoCartaoQuadroId},aoSalvar:this.obterReferencias},"tarefas_cartao")]})]}):null,"chamado"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(I,{aoAlterar:this.aoSelecionarChamado,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer,children:Object(K.a)(this.props.html_id,[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE])}),Object(S.jsx)(j.Button,{type:"default",text:"Novo Chamado",disabled:this.state.salvando,onClick:this.onClickNovoChamado})]}):null,"solicitacao"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(U,{aoAlterar:this.aoSelecionarSolicitacao,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}),Object(S.jsx)(j.Button,{type:"default",text:"Nova Solicita\xe7\xe3o",disabled:this.state.salvando,onClick:this.onClickNovaSolicitacao})]}):null,"solicitacao_atividade"===this.state.referenciarTabela?Object(S.jsx)(V,{aoAlterar:this.aoSelecionarSolicitacaoAtividade,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}):null,"projeto"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(z.default,{aoAlterar:e=>{this.aoSelecionarProjeto(e,!0)},readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}),Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{type:"default",text:"Novo Projeto",disabled:this.state.salvando,onClick:this.onClickNovoProjeto})]}):null,"projeto_atividade"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(z.default,{aoAlterar:e=>{this.aoSelecionarProjeto(e,!1)},readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}),!0===this.state.exibirSelecionarAtividadeProjeto?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(q,{projetoId:this.state.exibirSelecionarAtividadeProjetoId,aoAlterar:this.aoSelecionarProjetoAtividade,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer})]}):null]}):null,"documento"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(_e,{aoAlterar:this.aoSelecionarDocumento,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer,dataGridWidth:800}),Object(S.jsx)(j.Button,{type:"default",text:"Novo Documento",disabled:this.state.salvando,onClick:this.onClickNovoDocumento}),Object(S.jsx)(j.Button,{stylingMode:"text",text:"Envio M\xfaltiplo",disabled:this.state.salvando,onClick:this.onClickNovoDocumentoMultiplo})]}):null,"pdca"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(ce,{aoAlterar:this.aoSelecionarPDCA,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{type:"default",text:"Novo PDCA",disabled:this.state.salvando,onClick:this.onClickNovoPDCA})]}):null,"pdca_atividade"===this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(ce,{aoAlterar:this.aoSelecionarPDCAComAtividade,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(S.jsx)(h.a,{}),this.state.exibirSelecionarPDCAAtividade&&this.state.PDCASelecionadoId&&Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(me,{aoAlterar:this.aoSelecionarPDCAAtividade,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800,pdca_id:this.state.PDCASelecionadoId}),Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{type:"default",text:"Cadastrar Atividades",disabled:this.state.salvando,onClick:this.onClickNovoPDCAAtividade})]})]}):null,"oportunidade"===this.state.referenciarTabela?Object(S.jsx)(s.a.Fragment,{children:Object(S.jsx)(ee,{aoAlterar:this.aoSelecionarOportunidade,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800})}):null,this.state.referenciarTabela?Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(j.Button,{text:"Cancelar",disabled:this.state.salvando,stylingMode:"text",onClick:this.onClickCancelar})]}):null]})}),Object(S.jsxs)(O.Item,{location:"after",children:[Object(S.jsx)(j.Button,{onClick:this.onClickExpandir,hint:"Expandir",icon:"fas fa-expand-alt",stylingMode:"text"}),Object(S.jsx)(j.Button,{onClick:this.onClickRetrair,hint:"Retrair",icon:"fas fa-compress-alt",stylingMode:"text"}),Object(S.jsx)(j.Button,{onClick:this.onClickRefresh,hint:"Recarregar",icon:"fas fa-sync-alt",stylingMode:"text"})]})]})})}),Object(S.jsx)(h.b,{}),Object(S.jsx)(w.a,{dataSource:this.state.relacionamentos,collapsible:!0,multiple:!0,itemTitleRender:this.renderTitulo,selectedItemKeys:this.state.selectedItemKeys,onSelectionChanged:this.aoAlterarAcordeaoSelecionado,itemRender:this.renderDataGrid,keyExpr:"tabela",noDataText:"N\xe3o existe nenhuma refer\xeancia com este registro.",onItemTitleClick:e=>{var a,t;"referencia_titulo_link"==(null===e||void 0===e||null===(a=e.event)||void 0===a||null===(t=a.target)||void 0===t?void 0:t.className)&&e.event&&e.event.stopPropagation()}})]})}):Object(S.jsx)("div",{children:"Carregando..."})}}je.tabelas=[{id:"agenda_evento",descricao:"Agenda",selecaoVisivel:!0},{id:"tarefa_quadro",descricao:"Quadro de Tarefa",selecaoVisivel:!0},{id:"tarefa_quadro_lista_cartao",descricao:"Cart\xe3o de Tarefa",selecaoVisivel:!0},{id:"chamado",descricao:"Chamado",selecaoVisivel:!0},{id:"documento",descricao:"Documento",selecaoVisivel:!0},{id:"solicitacao",descricao:"Solicita\xe7\xe3o de Processo",selecaoVisivel:!0},{id:"solicitacao_atividade",descricao:"Atividade de Processo",selecaoVisivel:!0},{id:"projeto",descricao:"Projeto",selecaoVisivel:!0},{id:"projeto_atividade",descricao:"Atividade de Projeto",selecaoVisivel:!0},{id:"pdca",descricao:"PDCA",selecaoVisivel:!0},{id:"pdca_atividade",descricao:"Atividade de PDCA",selecaoVisivel:!0},{id:"oportunidade",descricao:"Oportunidade",selecaoVisivel:!0}]},549:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"hora",caption:"Hora",dataType:"datetime",format:"HH:mm",width:100}},553:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"codigo",dataType:"string",caption:"C\xf3digo",width:100}},554:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return r}));var o=t(248),i=t(253),s=t(262);const n=function(){return{enabled:!0,type:"custom",customLoad:function(){return window.App.get_parametro_usuario("listagem_chamado_prioridade")},customSave:function(e){window.App.set_parametro_usuario("listagem_chamado_prioridade",e)}}};let r=e=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"chamado_prioridade_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"chamado_prioridades/listar_para_selecao/",data:Object(o.a)(Object(o.a)({dx_grid:!0},t),e),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado_prioridades/listar_para_selecao/",data:{dx_grid:!0,chamado_prioridade_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},555:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var o=t(247),i=t.n(o),s=t(482),n=t.n(s),r=t(244);class d extends i.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.dataEnvioClick=this.dataEnvioClick.bind(this)}propsToObjState(){var e;return{dataEnvio:this.props.dataEnvio,dataEnvioFromNow:n()(this.props.dataEnvio).fromNow(),extenso:null!==(e=this.props.extenso)&&void 0!==e&&e}}componentDidUpdate(e,a){e.extenso!==this.props.extenso&&this.setState(this.propsToObjState())}componentDidMount(){this.timer=setInterval((()=>{this.setState(this.propsToObjState())}),3e4)}componentWillUnmount(){this.timer&&clearInterval(this.timer)}dataEnvioClick(){this.props.aoAlterarTipoExibicao&&this.props.aoAlterarTipoExibicao(!this.state.extenso)}render(){return Object(r.jsx)("div",{className:"text-muted small",title:this.state.dataEnvio.format_date_time(),children:Object(r.jsx)("span",{onClick:this.dataEnvioClick,style:{cursor:"pointer"},children:this.state.extenso?this.state.dataEnvio.format_date_time():this.state.dataEnvioFromNow})})}}},556:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));let o=e=>"00:00"===e?"00:X0":"000:X0"},557:function(e,a,t){"use strict";t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return n})),t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return d}));var o=t(271),i=t(253);let s=e=>({hint:"Visualizar Atividade",icon:"fa fa-edit",onClick:function(a){e&&e(),o.a.load("atividade_projeto/detalhes",(function(e,t){t.show(a.row.data.projeto_id,a.row.data.id,window.FORMULARIO.EDITAR)}),o.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:a.row.data.id})}});s();const n=[{dataField:"projeto_codigo",dataType:"number",caption:"Projeto",width:100},{dataField:"projeto_nome",caption:"Projeto Nome",minWidth:100},{dataField:"codigo",caption:"C\xf3d. Ativ.",minWidth:100},{dataField:"atividade_simplificada",caption:"Atividade"},{dataField:"assunto",caption:"Assunto",minWidth:100},{dataField:"responsavel_nome",caption:"Respons\xe1vel",minWidth:100},{dataField:"prazo",caption:"Prazo",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.prazo)return e.prazo.format_date_time()}},{dataField:"conclusao",caption:"Conclus\xe3o",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.conclusao)return e.conclusao.format_date_time()}},{dataField:"status",caption:"Status",minWidth:120,lookup:{dataSource:[{ID:"1",Status:"Programado"},{ID:"2",Status:"Andamento"},{ID:"3",Status:"Conclu\xeddo"},{ID:"4",Status:"N\xe3o iniciado"},{ID:"5",Status:"Atrasado"},{ID:"6",Status:"Cancelada"}],displayExpr:"Status",valueExpr:"ID"}}];let r=async e=>await i.a.get("projeto/listar_movimentacao_financeira/",{projeto_atividade_id:e},null,null,null,null,null,null,null,!0);const d=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.a.get({route:"atividade_projeto/listar/",data:{projeto_id:e},func_response:e=>{e.atividades.push({atividade_simplificada:e.projeto.nome,id:"raiz",projeto_atividade_sintetica_pai_id:null,tipo_atividade:"P",marco:!1,horas_previstas:"000:00"}),a&&a(e)}})}},558:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var o=t(248),i=t(262),s=(t(271),t(253));const n=async e=>await s.a.get({route:"documento/listar/",data:{raiz:!e.documentoPastaID,documento_pasta_id:e.documentoPastaID,data_inicio:e.dataInicio,data_inicio_pasta:e.dataInicio,data_fim:e.dataFim,data_fim_pasta:e.dataFim,documento_nome:e.pesquisa,assunto_id:e.assuntoId,tipo_id:e.tipoDocumentoId,limite:e.limite,tipo_periodo:window.DOCUMENTO_FILTRO.PERIODO_TODOS,tipo_periodo_pasta:window.DOCUMENTO_FILTRO.PERIODO_TODOS,listar_bloqueados:e.exibirBloqueados,listar_expirados:e.exibirExpirados,listar_ativos:e.exibirAtivos,order_by_nome:e.orderByNome,order_by_asc:e.orderByAsc},awaitReturn:!0}),r=()=>new i.default({pageSize:20,key:"documento_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"/documento/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"/documento/listar/",data:{dx_grid:!0,documento_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},559:function(e,a,t){"use strict";t.d(a,"c",(function(){return r})),t.d(a,"d",(function(){return d})),t.d(a,"a",(function(){return l})),t.d(a,"e",(function(){return c})),t.d(a,"f",(function(){return u})),t.d(a,"b",(function(){return p}));var o=t(248),i=t(253),s=(t(271),t(262));const n=[{id:"1",descricao:"Programado"},{id:"2",descricao:"Andamento"},{id:"3",descricao:"Conclu\xeddo"},{id:"4",descricao:"N\xe3o iniciado"},{id:"5",descricao:"Atrasado"}];let r=()=>[{dataField:"codigo",width:"100px"},{dataField:"nome",caption:"Nome do projeto",width:"100px"},{dataField:"categoria",caption:"Categoria",groupIndex:0},{dataField:"status_nome",caption:"Status",width:"100px"},{dataField:"status_atividades",dataType:"number",format:"fixedPoint",precision:0,lookup:{dataSource:n,displayExpr:"descricao",valueExpr:"id"},width:"100px"},{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",width:"100px"},{dataField:"inicio",caption:"\xcdnicio Previsto",dataType:"date",format:"dd/MM/yyyy",width:"100px"},{dataField:"fim",caption:"T\xe9rmino Previsto",dataType:"date",format:"dd/MM/yyyy",width:"100px"},{dataField:"horas_previstas",calculateSortValue:function(e){return e.horas_previstas?window.fn_converter_horas_para_segundos(e.horas_previstas):null},allowFiltering:!1,width:"80px"},{dataField:"horas_trabalhadas",calculateSortValue:function(e){return e.horas_trabalhadas?window.fn_converter_horas_para_segundos(e.horas_trabalhadas):null},allowFiltering:!1,width:"80px"},{dataField:"saldo_horas",calculateSortValue:function(e){return e.saldo_horas?window.fn_converter_horas_para_segundos(e.saldo_horas):null},allowFiltering:!1,width:"80px"},{dataField:"percentual_horas_trabalhadas",caption:"% Trabalhado",dataType:"number",calculateSortValue:function(e){return e.percentual_horas_trabalhadas?parseInt(e.percentual_horas_trabalhadas):null},calculateDisplayValue:function(e){return e.percentual_horas_trabalhadas?e.percentual_horas_trabalhadas+" %":null},allowFiltering:!1,width:"80px"},{dataField:"percentual_saldo_horas",caption:"% Saldo",dataType:"number",calculateSortValue:function(e){return e.percentual_saldo_horas?parseInt(e.percentual_saldo_horas):null},calculateDisplayValue:function(e){return e.percentual_saldo_horas?e.percentual_saldo_horas+" %":null},allowFiltering:!1,width:"80px"},{dataField:"porcentagem_concluido",caption:"% Conclus\xe3o",dataType:"number",calculateSortValue:function(e){return e.porcentagem_concluido?parseInt(e.porcentagem_concluido):null},calculateDisplayValue:function(e){return e.porcentagem_concluido?e.porcentagem_concluido+" %":null},allowFiltering:!1,width:"80px"},{dataField:"percentual_estimado",caption:"% Estimado",dataType:"number",calculateSortValue:function(e){return e.percentual_estimado?parseInt(e.percentual_estimado):null},calculateDisplayValue:function(e){return e.percentual_estimado?e.percentual_estimado+" %":null},allowFiltering:!1,width:"80px"},{dataField:"cliente_nome",caption:"Cliente",width:"100px"},{dataField:"tipo_nome",caption:"Tipo Projeto",width:"80px"}],d=(e,a)=>new s.default({paginate:!0,pageSize:20,key:"projeto_id",load:t=>{let s=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"projeto/listar/",data:Object(o.a)({template:"N",projeto_id:e,cliente_id:a,retorno_obj:!1,dx_grid:!0},s),func_response:function(e){let a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"projeto/listar/",data:{template:"N",projeto_id:e,retorno_obj:!1,dx_grid:!0},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),l=async e=>await i.a.get("projeto/listar_movimentacao_financeira/",{projeto_id:e},null,null,null,null,null,null,null,!0),c=()=>new s.default({paginate:!0,pageSize:20,key:"id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(e,t){i.a.get({route:"projeto/listar_movimentacao_financeira/",data:Object(o.a)({},a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>!1});const u=[{id:"1",descricao:"Entrada Manual"},{id:"2",descricao:"Sa\xedda Manual"},{id:"3",descricao:"Horas Alocadas"},{id:"4",descricao:"Apontamento de Horas"},{id:"5",descricao:"Apontamento de Despesas"}];let p=async e=>{let{projeto_id:a,atividade_descricao:t,responsavel_nome:o,skip:s=0,indice_listagem:n}=e;return 0===parseInt(a)?[]:await i.a.get({route:"/atividade_projeto/listar_projeto_quadro_atividades/",data:{projeto_id:a,atividade_descricao:t,responsavel_nome:o,skip:s,indice_listagem:n},awaitReturn:!0})}},560:function(e,a,t){"use strict";t.r(a),t.d(a,"oportunidadeSituacaoDataSource",(function(){return r})),t.d(a,"oportunidadeSituacao",(function(){return d})),t.d(a,"oportunidadeSituacoes",(function(){return l})),t.d(a,"oportunidadeColunaButtonVisualizar",(function(){return c})),t.d(a,"oportunidadeColunaButtons",(function(){return u})),t.d(a,"oportunidadeColunas",(function(){return p})),t.d(a,"listarParaSelecionar",(function(){return m}));var o=t(248),i=t(271),s=t(253),n=t(262);const r=()=>new n.default({store:l,key:"id"}),d=Object.freeze({ganho:"G",perdido:"P",aberto:"A",atrasado:"AT",estagnado:"E"}),l=[{id:d.ganho,descricao:"Ganho"},{id:d.perdido,descricao:"Perdido"},{id:d.aberto,descricao:"Aberto"},{id:d.atrasado,descricao:"Atrasado"},{id:d.estagnado,descricao:"Estagnado"}];let c=e=>({hint:"Visualizar Oportunidade",icon:"fa fa-pencil-alt",onClick:function(a){e&&e(),i.a.load("oportunidade/detalhes",(function(e,t){t.show(a.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),i.a.ABA.MULTIPLAS,null,null,{oportunidadeId:a.row.data.oportunidade_id})}});const u={type:"buttons",buttons:[c()]},p=[{dataField:"id",caption:"#",dataType:"number",alignment:"right",width:80},{dataField:"funil_vendas_etapa_nome",caption:"Etapa do Funil",dataType:"string"},{dataField:"nome",caption:"Nome",dataType:"string"},{dataField:"data_abertura",caption:"Data de inclus\xe3o",dataType:"datetime"},{caption:"Tipo de Entidade",dataType:"string",calculateCellValue:function(e){var a="";switch(e.entidade_tipo){case"C":a="Cliente";break;case"O":a="Organiza\xe7\xe3o"}return a}},{dataField:"entidade_nome",caption:"Entidade",dataType:"string"},{dataField:"representante_nome",caption:"Representante",dataType:"string"},{dataField:"status",caption:"Status",dataType:"string"},{caption:"Valor do Neg\xf3cio R$",dataType:"string",calculateCellValue:function(e){}},{dataField:"situacao",caption:"Situa\xe7\xe3o da Oportunidade",dataType:"string",calculateCellValue:function(e){var a="";switch(e.situacao){case"G":a="Ganho";break;case"P":a="Perdido";break;case"A":a="Aberto";break;case"AT":a="Atrasado";break;case"E":a="Estagnado"}return a}},{dataField:"situacao_ultimo_orcamento",caption:"Situa\xe7\xe3o do Or\xe7amento",dataType:"string",calculateCellValue:function(e){var a="";if(e.situacao_ultimo_orcamento)switch(e.situacao_ultimo_orcamento){case"0":a="Or\xe7amento Aguardando Aprova\xe7\xe3o";break;case"1":a="Or\xe7amento Aprovado";break;case"2":a="Or\xe7amento Reprovado";break;case"4":a="Or\xe7amento Aprovado / Aguardando E-Mail";break;default:a="Or\xe7amento Em An\xe1lise"}return a}}],m=()=>new n.default({pageSize:20,key:"oportunidade_id",load(e){const a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"/oportunidade/listar_selecao/",data:Object(o.a)({},a),func_response(a){const t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey(e){if(!e)return!1;return new Promise(((a,t)=>{s.a.get({route:"/oportunidade/listar_selecao/",data:{oportunidade_id:e},func_response(e){a({data:e.data})},func_fail(e){t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},561:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var o=t(247),i=t.n(o),s=t(267),n=t(492),r=t(562),d=t(732),l=t(254),c=t(315),u=t(87),p=t(271),m=t(244);class h extends i.a.Component{constructor(e){if(super(e),this.getKey=this.getKey.bind(this),this.handleBtnEditarClick=this.handleBtnEditarClick.bind(this),this.solicitacao_id=null,this.solicitacao_numero=null,this.processo_nome=null,this.modo_teste=!1,this.modo_teste_responsavel_id=0,this.modo_teste_responsavel_nome="",this.keyCount=0,e.data){const a=e.data;this.solicitacao_id=a.solicitacao_id||a.id||null,this.solicitacao_numero=a.numero,this.processo_nome=a.processo_nome}const a=u.a.get_parametro_usuario("solicitacoesProcesso");a.obj_param&&(this.modo_teste=a.obj_param.modo_teste,this.modo_teste_responsavel_id=a.obj_param.modo_teste_responsavel_id,this.modo_teste_responsavel_nome=a.obj_param.modo_teste_responsavel_nome),this.state={dataSource:Object(r.a)(window.SOLICITACAO_FILTROS.TODAS,this.solicitacao_id,this.modo_teste,this.modo_teste_responsavel_id)}}getKey(){return this.keyCount++}render(){const e=e=>this.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,this.modo_teste_responsavel_nome,this.modo_teste),a=[...Object(d.b)(this.solicitacao_id),Object(m.jsxs)(l.Column,{type:"buttons",children:[Object(m.jsx)(c.a,{hint:"Visualizar Atividade",visible:e=>![n.b.andamento,n.b.atrasada].includes(+e.row.data.solicitacao_situacao)||![window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao),icon:"fas fa-list-alt",onClick:e}),",",Object(m.jsx)(c.a,{hint:"Atividade Pendente",visible:e=>[n.b.andamento,n.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO].includes(+e.row.data.situacao),onClick:e,children:Object(m.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(m.jsx)("span",{className:"far fa-list-alt"}),Object(m.jsx)("span",{className:"fas fa-circle icon-on-top text-info",style:{opacity:"75%"}})]})}),",",Object(m.jsx)(c.a,{hint:"Atividade Atrasada",visible:e=>[n.b.andamento,n.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao),onClick:e,children:Object(m.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(m.jsx)("span",{className:"far fa-list-alt"}),Object(m.jsx)("span",{className:"fas fa-circle icon-on-top text-danger",style:{opacity:"75%"}})]})}),","]},"buttons_".concat(this.solicitacao_id))],t="S"===u.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?this.solicitacao_numero:this.solicitacao_id;return Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)("div",{style:{padding:"0 0 5px 10px",fontSize:14,fontWeight:"bold"},children:"Atividades da Solicita\xe7\xe3o #".concat(t,": ").concat(this.processo_nome)}),Object(m.jsx)(s.default,{dataSource:this.state.dataSource,style:{width:"100%",border:"2px solid #D0D0D0"},selection:{mode:"none"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},filterPanel:{visible:!1},columnChooser:{enabled:!1},export:{enabled:!1},groupPanel:{visible:!1},searchPanel:{visible:!1},rowAlternationEnabled:!1,showBorders:!0,children:a},this.getKey())]})}handleBtnEditarClick(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=a==window.FORMULARIO.EDITAR?{solicitacaoAtividadeId:e.row.data.solicitacao_atividade_id}:{solicitacaoId:e.row.data.solicitacao_id};p.a.load("solicitacao/detalhes",((i,s)=>{s.onclose=e.component.refresh,s.show(e.row.data.solicitacao_atividade_id,a,t,o)}),p.a.ABA.MULTIPLAS,null,null,i)}}},562:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"c",(function(){return d})),t.d(a,"b",(function(){return l}));var o=t(248),i=t(262),s=t(253),n=t(440);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return new i.default({pageSize:20,key:"solicitacao_atividade_id",load:i=>{let p=window.loadOptionsToActionParams(i);return new Promise(((i,m)=>{s.a.post({route:"solicitacao/listar_todas/",data:Object(o.a)({dx_grid:!0,tipo_listagem:e,solicitacao_id:a,codigo:t,modo_teste:n,modo_teste_responsavel_id:r,solicitante_id:d,responsavel_id:l,cliente_id:c,processo_id:u,tela_listagem:window.TIPO_LISTAGEM_PROCESSO.ATIVIDADES},p),func_response:e=>{let a=window.createLoadExtra(e);i(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:e=>{e.validation&&m(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new i.default({pageSize:20,key:"solicitacao_id",load:i=>{let l=window.loadOptionsToActionParams(i);return new Promise(((i,c)=>{s.a.post({route:"solicitacao/listar_todas/",data:Object(o.a)({dx_grid:!0,agrupar_atividades:!0,modo_teste:a,modo_teste_responsavel_id:t,tipo_listagem:e,solicitacao_id:n,codigo:r,processo_id:d,tela_listagem:window.TIPO_LISTAGEM_PROCESSO.SOLICITACAO},l),func_response:e=>{let a=window.createLoadExtra(e);i(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:e=>{e.validation&&c(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},l=()=>Object(n.createStore)({key:"id",loadUrl:window.WS_URI+"usuario/listar_usuarios_grupos/",onBeforeSend:function(e,a){a.data.dx_grid=!0,a.data.limite=null,a.xhrFields={withCredentials:!1},a.headers=s.a.dxHeaders()}})},563:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(244);function i(e){let{nome:a,cor_fonte:t="black",cor_fundo:i="white"}=e;return Object(o.jsx)("div",{className:"label",style:{background:i,color:t,maxWidth:"212px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a})}},564:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"simbolo",width:150}},565:function(e,a,t){"use strict";t.d(a,"a",(function(){return d})),t.d(a,"b",(function(){return l})),t.d(a,"c",(function(){return c})),t.d(a,"d",(function(){return u}));var o=t(248),i=t(253),s=t(262),n=t(440),r=t(317);const d=e=>{let{pai_tabela:a,pai_id:t,dx_grid:o=!0}=e;return Object(n.createStore)({key:"id",loadUrl:"".concat(window.WS_URI,"/etiqueta/listar/").concat(a,"/").concat(t,"/"),insertUrl:"".concat(window.WS_URI,"/etiqueta/salvar/").concat(a,"/").concat(t,"/"),updateUrl:"".concat(window.WS_URI,"/etiqueta/salvar/").concat(a,"/").concat(t,"/"),deleteUrl:"".concat(window.WS_URI,"/etiqueta/salvar/").concat(a,"/").concat(t,"/"),onBeforeSend:(e,a)=>{a.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},a.headers=i.a.dxHeaders()}})},l=e=>{let{pai_tabela:a,pai_id:t,alteracoes:o,func_response:s,func_fail:n}=e;if(!a)return!1;i.a.post({route:"etiqueta/salvar/".concat(a,"/").concat(t,"/"),data:{pai_tabela:a,pai_id:t,alteracoes:o},func_response:s,func_fail:n})},c=e=>{let{pai_tabela:a,pai_id:t,dx_grid:n=!0}=e;return new s.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:["id"],load:e=>{let s=window.loadOptionsToActionParams(e);return new Promise((function(r,d){i.a.get({route:"etiqueta/listar_para_selecao/",data:Object(o.a)({pai_tabela:a,pai_id:t,search_value:e.searchValue},s),func_response:function(e){let a=window.createLoadExtra(e);r(n?Object(o.a)(Object(o.a)({},a),{},{data:e.data}):e.data)},func_fail:function(e){e.validation&&d(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>null})},u=()=>new r.default({key:"id",data:window.USUARIO_TIPO_LOOKUP.filter((e=>[window.USUARIO_TIPO.COLABORADOR,window.USUARIO_TIPO.CLIENTE,window.USUARIO_TIPO.FORNECEDOR].includes(e.id))).map((e=>{let a=window.clone_obj(e);return a.id=a.id.toString(),a}))})},566:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var o=t(248),i=t(247),s=t.n(i),n=t(253),r=t(271),d=t(446),l=t(307),c=t.n(l),u=t(330),p=t(244);function m(e){const{html_id:a,cadastro_generico_id:t,cadastro_id:m,formulario_id:h,nome_tabela:_,dataGridRef:f,tipo_permissao:b}=e,v=Object(i.useRef)(null),[g,w]=Object(i.useState)(!1);return Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsxs)(c.a,{visible:!g,children:[Object(p.jsx)(l.Item,{location:"after",children:Object(p.jsx)(u.Button,{onClick:()=>{var e;if(null===(e=v.current)||void 0===e||!e.validar())return;const i=Object(o.a)(Object(o.a)({cadastro_generico_id:t,cadastro_id:m,formulario_id:h,nome_tabela:_},v.current.getPostParams()),v.current.getAnexosParams());n.a.post({route:"formulario_cadastro_generico/salvar",data:i,func_response:()=>{var e;window.alert_saved("Formul\xe1rio salvo com sucesso."),r.a.unload(a),null===f||void 0===f||null===(e=f.instance)||void 0===e||e.refresh()},func_fail:()=>{window.alert_fail("Falhou, tente novamente.")},data_files:!0})},text:"Salvar",icon:"fas fa-check",stylingMode:"contained",type:"default",visible:2==b})}),Object(p.jsx)(l.Item,{location:"after",children:Object(p.jsx)(u.Button,{onClick:()=>{r.a.unload(a)},text:"Cancelar",stylingMode:"text"})})]})})}),Object(p.jsx)("div",{className:"panel panel-default",style:{padding:"10px"},children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(d.default,{ref:v,urlGet:"formulario_cadastro_generico/get_formulario",urlGetParams:{cadastro_generico_id:t,formulario_id:h,nome_tabela:_,cadastro_id:m},readOnly:1==b})})})})]})}},576:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(248),i=t(281),s=t(253),n=t(262);let r=e=>new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"formulario_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,i){s.a.get({route:"formulario/listar/",data:Object(o.a)({dx_grid:!0,tipo_formulario:e},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"formulario/objeto/",data:{formulario_id:e},func_response:function(e){e.formulario_id=e.id.toString(),a(e)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}});var d=t(349),l=t(280),c=t(244);const u=(d.a,Object(c.jsx)(l.a,{caption:"Nome do Formul\xe1rio",width:"100%"}));function p(e){return Object(c.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:r(window.TIPO_FORMULARIO.CADASTRO_PERSONALIZADO)})))}p.defaultProps={placeholder:"Pesquisar Formul\xe1rio",displayExpr:e=>e&&e.id+" - "+e.nome,children:u}},716:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=t(281),s=t(717),n=t(244);function r(e){return Object(n.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.b)(e.chamadoId,e.grupoMotivoId,e.motivoVinculadoId,e.apenasMotivosSLA)})))}r.defaultProps={chamadoId:null,grupoMotivoId:null,motivoVinculadoId:null,apenasMotivosSLA:!1,displayExpr:e=>e&&e.nome,columns:s.a,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"}},717:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var o=t(248),i=t(253),s=t(262);const n=[{dataField:"nome",caption:"Motivo",sortIndex:0,sortOrder:"asc"}];let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"chamado_motivo_id",load:s=>{let r=window.loadOptionsToActionParams(s);return new Promise((function(s,d){i.a.get({route:"chamado_motivo/listar/",data:Object(o.a)({dx_grid:!0,chamado_id:e,grupo_motivo_id:a,desconsidera_bloqueado:!0,motivo_vinculado_id:t,apenas_motivos_sla:n},r),func_response:function(e){let a=window.createLoadExtra(e);s(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&d(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado_motivo/listar/",data:{dx_grid:!0,chamado_motivo_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},718:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));var o=t(248),i=t(281),s=t(489),n=t(267),r=t(778),d=t(244);function l(e){return Object(d.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.a)(!0,e.entidade_tipo)})))}l.defaultProps={placeholder:"Pesquisar por nome/cnpj",aoAlterar:null,stateStoring:Object(n.stateStoring)("DataGridSelecaoEntidade",null,!0),displayExpr:e=>e&&(""===e.nome_fantasia||null===e.nome_fantasia?e.razao_social.trim():e.nome_fantasia.trim()),children:r.a,parametroFullScreen:"fullScreenSelecaoEntidade",dataGridSearchPanelEnabled:!0,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome_fantasia"}},719:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var o=t(254),i=t(244);class s extends o.Column{}s.defaultProps={dataField:"email",caption:"E-mail",width:150,cellRender:e=>{const a=window.string_to_array(e.text);for(let t=0;t<a.length;t++){const e="mailto:"+a[t].toLowerCase(),o=a[t].toLowerCase();return Object(i.jsxs)("span",{"data-placement":"bottom",children:[Object(i.jsx)("a",{target:"_blank",href:e,children:o}),"; "]})}}}},720:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var o=t(254),i=t(244);class s extends o.Column{}s.defaultProps={dataField:"telefone",caption:"Telefone",width:120,cellRender:e=>{const a="tel:"+e.text;return Object(i.jsxs)("span",{"data-placement":"bottom",children:[Object(i.jsx)("a",{target:"_blank",href:a,children:e.text})," "]})}}},721:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"cnpj",caption:"CNPJ",width:150}},722:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var o=t(248),i=t(253),s=t(262);let n=()=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"classificacao_chamado_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(e,t){i.a.get({route:"chamado_classificacao/listar_para_selecao/",data:Object(o.a)({dx_grid:!0},a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"chamado_classificacao/listar_para_selecao/",data:{dx_grid:!0,classificacao_chamado_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}}),r=(e,a)=>{i.a.post("chamado_classificacao/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(t){window.alert_tooltip("Salvo com sucesso!","success",500),a&&a(e)}))}},723:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var o=t(280),i=t(244);const s=[Object(i.jsx)(o.a,{width:"100%",caption:"Classifica\xe7\xe3o"},"classificacao")]},724:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var o=t(248),i=t(247),s=t.n(i),n=t(244);class r extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState()}componentDidMount(){this.state.autoUpdate&&(this.timer=setInterval((()=>{this.atualiza_dados_sla()}),3e4))}componentWillUnmount(){this.destruirTimer&&this.destruirTimer()}propsToObjState(){var e,a,t,i,s;const n=null!==(e=this.props.detalhes)&&void 0!==e?e:null,r=n?n.id:null,d=n?n.sla_excedido:null,l=n?n.tempo_sem_resposta:null,c=n?n.percentual_tempo_sem_resposta:null,u=n?n.cor_percentual_sla:null,p=n?n.tempo_restante_resolucao:null;return Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({detalhes:null!==(a=this.props.detalhes)&&void 0!==a?a:null,chamado_id:r,sla_excedido:d,sla_percentual_tempo_sem_resposta:c,sla_cor_percentual:u,sla_tempo_restante_resolucao:p,sla_tempo_sem_resposta:l},this.state_label_sla(d)),this.state_tempo_aguardando_resolucao(l,c)),this.state_tempo_restante_resolucao(p)),{},{styleWidth:null!==(t=this.props.styleWidth)&&void 0!==t?t:null,alinhamento:null!==(i=this.props.alinhamento)&&void 0!==i?i:null,autoUpdate:null!==(s=this.props.autoUpdate)&&void 0!==s?s:null})}componentDidUpdate(e,a){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState()),this.state.autoUpdate||this.destruirTimer()}destruirTimer(){this.timer&&clearInterval(this.timer)}atualiza_dados_sla(){if(!this.state.detalhes)return null;window.chamado_fila_sla(this.state.chamado_id,this.props.viewHtmlId,(e=>{e&&this.setState(Object(o.a)(Object(o.a)(Object(o.a)({sla_excedido:e.sla_excedido,sla_percentual_tempo_sem_resposta:e.percentual_tempo_sem_resposta,sla_cor_percentual:e.cor_percentual_sla,sla_tempo_restante_resolucao:e.tempo_restante_resolucao,sla_tempo_sem_resposta:e.tempo_sem_resposta},this.state_label_sla(e.sla_excedido)),this.state_tempo_aguardando_resolucao(e.tempo_sem_resposta,e.percentual_tempo_sem_resposta)),this.state_tempo_restante_resolucao(e.tempo_restante_resolucao)))}))}state_label_sla(e){let a=window.str_sla(e);return{sla_class:a.classe,sla_text:a.texto}}state_tempo_aguardando_resolucao(e,a){let t={};return t={txt_tempo_aguardando_resolucao:window.format_time(e)},parseInt(a,10)>100&&(t=Object(o.a)(Object(o.a)({},t),{},{class_tempo_aguardando_resolucao:"text-danger",class_bar_progress_aguardando:"progress-bar-danger"})),t}state_tempo_restante_resolucao(e){return{txt_tempo_restante_resolucao:window.format_time(e)}}render(){if("S"!==this.state.detalhes.utiliza_resolucao_atendimento)return null;let e={fontWeight:"bold",paddingLeft:"0px",paddingRight:"0px"};"left"===this.state.alinhamento&&(e.paddingRight="10px"),"right"===this.state.alinhamento&&(e.paddingLeft="10px");let a=parseInt(this.state.sla_percentual_tempo_sem_resposta,10)<100?Object(n.jsx)("span",{style:e,"data-toggle":"tooltip",title:"Tempo Restante",children:window.format_time(this.state.sla_tempo_restante_resolucao)}):null,t=null;return"right"===this.state.alinhamento&&(t="row-reverse"),Object(n.jsxs)("div",{style:{width:this.state.styleWidth},children:[Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"right"===this.state.alinhamento?"text-right":"text-left",style:{whiteSpace:"nowrap"},children:Object(n.jsx)("span",{className:this.state.sla_class,children:this.state.sla_text})})}),Object(n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexFlow:t},children:[a,Object(n.jsx)("div",{className:"text-left",children:Object(n.jsx)("span",{style:{marginRight:5},className:this.state.class_tempo_aguardando_resolucao,"data-toggle":"tooltip",title:"Tempo em andamento",children:this.state.txt_tempo_aguardando_resolucao})})]}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"progress",style:{marginBottom:0,height:12},children:Object(n.jsx)("div",{className:["progress-bar",this.state.class_bar_progress_aguardando].join(" "),style:{width:parseInt(this.state.sla_percentual_tempo_sem_resposta,10)<100?parseInt(this.state.sla_percentual_tempo_sem_resposta,10)+"%":"100%",backgroundColor:this.state.sla_cor_percentual,fontSize:"xx-small"},children:Object(n.jsx)("div",{style:{marginTop:-3,backgroundColor:this.state.sla_cor_percentual},children:Math.round(this.state.sla_percentual_tempo_sem_resposta)<100?Math.round(this.state.sla_percentual_tempo_sem_resposta)+"%":"100%"})})})})]})}}r.defaultProps={autoUpdate:!1,styleWidth:"120px",alinhamento:"left"}},725:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var o=t(248),i=t(247),s=t.n(i),n=t(244);class r extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState()}componentDidMount(){this.timer=setInterval((()=>{this.setState(this.processarDados(this.state.DataPrazo,this.state.CalendarioTrabalhoId,this.state.TipoGestaoTempo,this.state.HorasEstimadas,this.state.DiasEstimados))}),6e4)}componentWillUnmount(){clearInterval(this.timer)}propsToObjState(){var e,a,t,i,s,n,r,d,l,c,u,p,m,h,_,f;const b=null!==(e=this.props.TipoGestaoTempo)&&void 0!==e?e:null,v=null!==(a=this.props.HorasEstimadas)&&void 0!==a?a:null,g=null!==(t=this.props.DataPrazo)&&void 0!==t?t:null,w=null!==(i=this.props.CalendarioTrabalhoId)&&void 0!==i?i:null,j=null!==(s=this.props.DiasEstimados)&&void 0!==s?s:null;return Object(o.a)({TipoGestaoTempo:b,HorasEstimadas:v,DiasEstimados:j,DataPrazo:g,CalendarioTrabalhoId:w,Concluido:null!==(n=this.props.Concluido)&&void 0!==n?n:null,TituloDataPrazo:null!==(r=this.props.TituloDataPrazo)&&void 0!==r?r:null,LabelExcedente:null!==(d=this.props.LabelExcedente)&&void 0!==d?d:null,LabelRestante:null!==(l=this.props.LabelRestante)&&void 0!==l?l:null,ExibirDataPrazo:null!==(c=this.props.ExibirDataPrazo)&&void 0!==c?c:null,TituloDataPrazoClassName:null!==(u=this.props.TituloDataPrazoClassName)&&void 0!==u?u:null,ExibirTituloDataPrazo:null!==(p=this.props.ExibirTituloDataPrazo)&&void 0!==p?p:null,ExibirBarraProgresso:null!==(m=this.props.ExibirBarraProgresso)&&void 0!==m?m:null,ExibirDiferencaHorasUteis:null!==(h=this.props.ExibirDiferencaHorasUteis)&&void 0!==h?h:null,Alinhamento:null!==(_=this.props.Alinhamento)&&void 0!==_?_:null,StyleWidth:null!==(f=this.props.StyleWidth)&&void 0!==f?f:null},this.processarDados(g,w,b,v,j))}componentDidUpdate(e,a){e.TipoGestaoTempo===this.props.TipoGestaoTempo&&e.HorasEstimadas===this.props.HorasEstimadas&&e.DataPrazo===this.props.DataPrazo&&e.CalendarioTrabalhoId===this.props.CalendarioTrabalhoId&&e.ExibirTituloDataPrazo===this.props.ExibirTituloDataPrazo&&e.TituloDataPrazo===this.props.TituloDataPrazo||this.setState(this.propsToObjState())}processarDados(e,a,t,o,i){if(!e)return null;let s=new Date,n=s.now(),r={DiferencaHorasUteis:"00:00",DiferencaDias:0,DiferencaHorasUteisSegundos:0,PrazoEstourado:!1,Percentual:0,DataPrazoSemHora:0};n>e&&(r.PrazoEstourado=!0);let d=0;if(r.PrazoEstourado)d=window.fn_segundos_uteis(a,e,n);else{e.substring(0,4)-n.substring(0,4)>20?(d=0,r.ExibirBarraProgresso=!1,r.ExibirDiferencaHorasUteis=!1):d=window.fn_segundos_uteis(a,n,e)}if(r.DiferencaHorasUteis=window.fn_converter_segundos_para_horas(d),r.DataPrazoSemHora=window.date_create(e),r.DataPrazoSemHora.setMilliseconds(0),r.DataPrazoSemHora.setSeconds(0),r.DataPrazoSemHora.setMinutes(0),r.DataPrazoSemHora.setHours(0),s.setMilliseconds(0),s.setSeconds(0),s.setMinutes(0),s.setHours(0),r.DiferencaDias=window.date_diff(r.DataPrazoSemHora,s.getTime()),r.PrazoEstourado)r.Percentual=100;else if(+t===window.GESTAO_TEMPO.HORAS_UTEIS&&o&&"00:00:00"!==o){let e=window.fn_converter_horas_para_segundos(o);r.Percentual=(e-d)/e*100}else+t===window.GESTAO_TEMPO.DIAS_CORRIDOS&&e&&i&&(r.Percentual=(+i-r.DiferencaDias)/+i*100);return r.Percentual>100&&(r.Percentual=100),r.Percentual<0&&(r.Percentual=0),r}renderTitulo(){if(this.state.ExibirTituloDataPrazo){let e=this.state.TituloDataPrazoClassName+("right"===this.state.Alinhamento?" text-right":"");return Object(n.jsx)("div",{style:{whiteSpace:"nowrap"},className:e,children:this.state.TituloDataPrazo})}return null}renderDataPrazo(){let e=null;return+this.state.TipoGestaoTempo===window.GESTAO_TEMPO.DIAS_CORRIDOS?e=Object(n.jsx)("div",{style:{whiteSpace:"nowrap"},className:"right"===this.state.Alinhamento?"text-right":"",title:this.state.TituloDataPrazo,children:this.state.DataPrazo?this.state.DataPrazo.format_date():""}):+this.state.TipoGestaoTempo===window.GESTAO_TEMPO.HORAS_UTEIS&&(e=Object(n.jsx)("div",{style:{whiteSpace:"nowrap"},className:"right"===this.state.Alinhamento?"text-right":"",title:this.state.TituloDataPrazo,children:this.state.DataPrazo?this.state.DataPrazo.format_date_time():""})),Object(n.jsx)("div",{children:e})}renderDiferencaHorasUteis(){let e=null,a=this.state.PrazoEstourado||0===this.state.DiferencaDias?"text-danger":"text-default",t={font:"inherit",width:"100%",whiteSpace:"nowrap"},o={fontWeight:"bold",paddingLeft:"0px",paddingRight:"0px"};switch("left"===this.state.Alinhamento&&(o.paddingRight="10px"),"right"===this.state.Alinhamento&&(o.paddingLeft="10px"),+this.state.TipoGestaoTempo){case window.GESTAO_TEMPO.DIAS_CORRIDOS:e=Object(n.jsx)("div",{style:t,className:"text "+a,title:this.state.TituloDataPrazo,children:window.dia_contador_str(this.state.DiferencaDias,this.state.PrazoEstourado)});break;case window.GESTAO_TEMPO.HORAS_UTEIS:e=Object(n.jsx)("div",{style:t,className:"text "+a,title:this.state.PrazoEstourado?this.state.LabelExcedente:this.state.LabelRestante,children:window.format_time(this.state.DiferencaHorasUteis)})}return Object(n.jsx)("div",{style:o,children:e})}renderBarraProgresso(){if(+this.state.TipoGestaoTempo===window.GESTAO_TEMPO.DIAS_CORRIDOS&&this.state.DataPrazo&&!this.state.DiasEstimados)return null;let e=this.state.PrazoEstourado?"progress-bar-danger":"progress-bar-default";return Object(n.jsx)("div",{className:"progress div_progress",style:{marginBottom:"0px",height:"12px"},children:Object(n.jsx)("div",{className:"progress-bar "+e,style:{width:this.state.Percentual+"%"},children:Object(n.jsx)("div",{style:{marginTop:-3,backgroundColor:"transparent",fontSize:"xx-small"},children:Math.round(this.state.Percentual)+"%"})})})}render(){if(this.state.Concluido)return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)("span",{children:"-"})});{let e=null;this.state.ExibirDataPrazo&&(e=this.renderDataPrazo());let a=null;this.state.ExibirDiferencaHorasUteis&&(a=this.renderDiferencaHorasUteis());let t=null;this.state.ExibirBarraProgresso&&(t=this.renderBarraProgresso());let o=null,i=null;return"right"===this.state.Alinhamento&&(o="row-reverse",i="end"),Object(n.jsxs)("div",{style:{width:this.state.StyleWidth},children:[this.renderTitulo(),Object(n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexFlow:o,justifyContent:i},children:[a,e]}),Object(n.jsx)("div",{style:{},children:t})]})}}}r.defaultProps={TipoGestaoTempo:window.GESTAO_TEMPO.HORAS_UTEIS,HorasEstimadas:null,DiasEstimados:null,DataPrazo:"",CalendarioTrabalhoId:null,Alinhamento:"left",StyleWidth:"160px",LabelExcedente:"Atrasado",LabelRestante:"Tempo Restante",TituloDataPrazo:"Prazo",ExibirTituloDataPrazo:!1,TituloDataPrazoClassName:"text-muted",ExibirDataPrazo:!0,ExibirBarraProgresso:!0,ExibirDiferencaHorasUteis:!0,IntervalId:0,Concluido:!1}},726:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t(247);var o=t(244);function i(e){return Object(o.jsx)("div",{style:{fontWeight:"bold"},children:e.nome})}},727:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var o=t(248),i=t(253),s=t(262);let n=e=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"nota_avaliacao_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"nota_avaliacao/listar_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"nota_avaliacao/listar_para_selecao/",data:{dx_grid:!0,nota_avaliacao_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}}),r=(e,a)=>{i.a.post("nota_avaliacao/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(t){window.alert_tooltip("Salvo com sucesso!","success",500),a&&a(e)}))}},728:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=t(281),s=t(559),n=t(244);function r(e){var a;return Object(n.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.d)(e.projeto_id,e.cliente_id),columns:null!==(a=e.columns)&&void 0!==a?a:Object(s.c)()})))}r.defaultProps={placeholder:"Pesquisar Projeto",displayExpr:e=>e&&e.codigo+" "+e.nome,visible:!0,key:window.random_hash()}},729:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(254),i=t(489),s=t(244);class n extends o.Column{}n.defaultProps={dataField:"tipo",dataType:"string",caption:"Tipo",width:80,children:Object(s.jsx)(o.Lookup,{dataSource:i.b,displayExpr:"descricao",valueExpr:"id"})}},730:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(254),i=t(491),s=t(244);class n extends o.Column{}n.defaultProps={cellRender:e=>{var a,t,o,n;return null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.entidade_id?Object(s.jsx)(i.default,{tipo:null!==(n=e.data.entidade_tipo)&&void 0!==n?n:e.data.tipo,id:e.data.entidade_id,nome:e.data.entidade_nome,logoId:e.data.entidade_logo_id,tamanho:20}):null!==(t=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.entidade_nome)&&void 0!==t?t:""},dataType:"string",width:"160px"}},731:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"c",(function(){return d})),t.d(a,"b",(function(){return l}));var o=t(248),i=t(253),s=t(262),n=t(87);const r=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return new s.default({load:async o=>{const s=o.filter[0][0][0][2],r=o.filter[0][0][1][2],d=window.formatDate(o.filter[0][0][0][2],!0);s.getMonth()!=r.getMonth()&&o.filter[0][0][1][2].setDate(o.filter[0][0][1][2].getDate()-1);const l=window.formatDate(o.filter[0][0][1][2],!0);if(n.a.temp.agenda_data_inicio!=d&&n.a.temp.agenda_data_fim!=l){n.a.temp.agenda_data_inicio=d,n.a.temp.agenda_data_fim=l,t.schedulerRef.current._instance._dataSource.reload();const e=new Date;return s.getMonth()!=e.getMonth()?t.schedulerRef.current._instance.scrollTo(s):t.schedulerRef.current._instance.scrollTo(e),[]}{n.a.temp.agenda_data_inicio=d,n.a.temp.agenda_data_fim=l;let t=await i.a.post("agenda_evento/agenda_calendario/",{devextreme:!0,data_inicio:d,data_fim:l,tipo_agenda:2,qtd_dias:window.dateDiff(l,d,!0),usuarios_id:JSON.stringify(e),ativos_id:JSON.stringify(a)},null,null,null,null,null,null,null,null,!0);for(let e=0;e<t.data.length;e++)t.data[e].startDate=new Date(t.data[e].startDate),t.data[e].endDate=new Date(t.data[e].endDate);return t}}})},d=async()=>await i.a.get("tipo_agenda/listar/",null,null,null,null,null,null,null,null,!0),l=()=>new s.default({pageSize:20,key:"agenda_evento_id",load:e=>{const a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{i.a.get({route:"/agenda_evento/listar/",data:Object(o.a)(Object(o.a)({},a),{},{dx_grid:!0}),func_response(a){const t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise(((a,t)=>{i.a.get({route:"/agenda_evento/listar/",data:{dx_grid:!0,agenda_evento_id:e},func_response(e){a(e.data)},func_fail(e){t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},732:function(e,a,t){"use strict";t.d(a,"a",(function(){return v})),t.d(a,"b",(function(){return g}));var o=t(248),i=t(349),s=t(280),n=t(415),r=t(343),d=t(350),l=t(43),c=t.n(l),u=t(733),p=t(563),m=t(254),h=t(244);const _=[{id:"0",descricao:"Andamento"},{id:"1",descricao:"Conclu\xedda"},{id:"3",descricao:"Atrasada"},{id:"4",descricao:"N\xe3o entregue"},{id:"5",descricao:"Retornada"},{id:"9",descricao:"Cancelada"}],f=[{id:"1",descricao:"Conclu\xedda"},{id:"2",descricao:"Cancelada"},{id:"3",descricao:"Andamento"},{id:"4",descricao:"Atrasada"}],b=e=>e.data.etiquetas&&Array.isArray(e.data.etiquetas)?e.data.etiquetas.map((e=>Object(h.jsx)(p.a,Object(o.a)({},e)))):"",v=e=>[Object(h.jsx)(i.a,{dataField:"S"===e?"numero":"solicitacao_id",allowGrouping:!1,caption:"#",sortIndex:0,sortOrder:"desc",width:100,dataType:"number"},"numero_solicitacao_por_processo"),Object(h.jsx)(s.a,{dataField:"processo_nome",caption:"Processo",sortIndex:1,sortOrder:"asc",width:180},"processo_nome"),Object(h.jsx)(s.a,{dataField:"atividade_descricao",caption:"Atividade",width:180,allowGrouping:!1},"atividade_descricao"),Object(h.jsx)(s.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:250,allowGrouping:!1},"descricao"),Object(h.jsx)(m.Column,{dataField:"etiquetas",caption:"Etiquetas",width:180,allowGrouping:!1,allowFiltering:!1,allowSorting:!1,cellRender:b},"etiquetas"),Object(h.jsx)(n.default,{dataField:"usuario_solicitacao_nome",caption:"Solicitante",width:180,dataFieldUsuarioId:"usuario_solicitacao_id"},"usuario_solicitacao_nome"),Object(h.jsx)(n.default,{dataField:"usuario_responsavel_nome",caption:"Respons\xe1vel",width:180},"usuario_responsavel_nome"),Object(h.jsx)(n.default,{dataField:"nome_executor",caption:"Executor",width:180,defaultVisible:!1},"usuario_executor_nome"),Object(h.jsx)(u.a,{dataField:"cliente_nome",caption:"Cliente",width:180},"cliente"),Object(h.jsx)(r.a,{dataField:"data",caption:"In\xedcio Solicita\xe7\xe3o",width:150,allowGrouping:!1,allowHeaderFiltering:!1},"data"),Object(h.jsx)(r.a,{dataField:"data_inicio_atividade",caption:"In\xedcio Atividade",width:150,allowGrouping:!1,allowHeaderFiltering:!1,sortIndex:2,sortOrder:"desc"},"data_inicio_atividade"),Object(h.jsx)(r.a,{dataField:"prazo_execucao",caption:"Prazo Atividade",width:150,allowGrouping:!1,allowHeaderFiltering:!1},"prazo_execucao"),Object(h.jsx)(r.a,{dataField:"entrega",caption:"Entrega",width:150,allowGrouping:!1,allowHeaderFiltering:!1},"entrega"),Object(h.jsx)(d.a,{dataField:"solicitacao_situacao",caption:"Situa\xe7\xe3o Solicita\xe7\xe3o",width:150,lookup:{dataSource:f,displayExpr:"descricao",valueExpr:"id"},cellTemplate:(e,a)=>{let t="",o="";switch(+a.data.solicitacao_situacao){case 1:t="label-success",o="Conclu\xedda";break;case 2:t="label-danger",o="Cancelada";break;case 3:t="label-info",o="Em Andamento";break;case 4:t="label-danger",o="Atrasada"}e.css({textAlign:"center"}).addClass("bg-"+t),c()("<span>").text(o).css({color:"#FFF"}).appendTo(e)}},"solicitacao_situacao"),Object(h.jsx)(d.a,{dataField:"situacao",caption:"Situa\xe7\xe3o Atividade",width:150,lookup:{dataSource:_,displayExpr:"descricao",valueExpr:"id"},cellTemplate:(e,a)=>{let t="",o="text-default";switch(+a.data.situacao){case 0:t="Em Andamento";break;case 1:t="Concluida",o="text-success";break;case 3:t="Atrasada",o="text-danger";break;case 4:t="N\xe3o Entregue",o="text-warning";break;case 5:t="Retornada";break;case 9:t="Cancelada"}e.css({textAlign:"center"}),c()("<span>").text(t).addClass(o).appendTo(e)}},"situacao")],g=e=>[Object(h.jsx)(s.a,{dataField:"atividade_descricao",caption:"Atividade",width:180,allowGrouping:!1},"atividade_descricao_".concat(e)),Object(h.jsx)(s.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:700,allowGrouping:!1,visible:!1},"descricao_".concat(e)),Object(h.jsx)(n.default,{dataField:"usuario_responsavel_nome",caption:"Respons\xe1vel",width:200},"usuario_responsavel_nome_".concat(e)),Object(h.jsx)(n.default,{dataField:"nome_executor",caption:"Executor",width:160},"usuario_executor_nome"),Object(h.jsx)(r.a,{dataField:"data_inicio_atividade",caption:"In\xedcio Atividade",width:180,allowGrouping:!1,allowHeaderFiltering:!1},"data_inicio_atividade_".concat(e)),Object(h.jsx)(r.a,{dataField:"prazo_execucao",caption:"Prazo Atividade",allowGrouping:!1,allowHeaderFiltering:!1},"prazo_execucao_".concat(e)),Object(h.jsx)(d.a,{dataField:"situacao",caption:"Situa\xe7\xe3o Atividade",width:150,lookup:{dataSource:_,displayExpr:"descricao",valueExpr:"id"},cellTemplate:(e,a)=>{let t="",o="text-default";switch(+a.data.situacao){case 0:t="Em Andamento";break;case 1:t="Concluida",o="text-success";break;case 3:t="Atrasada",o="text-danger";break;case 4:t="N\xe3o Entregue",o="text-warning";break;case 5:t="Retornada";break;case 9:t="Cancelada"}c()("<span>").text(t).addClass(o).appendTo(e)}},"situacao_".concat(e))]},733:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(254),i=t(491),s=t(244);class n extends o.Column{}n.defaultProps={cellRender:e=>{var a,t,o;return null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.cliente_id?Object(s.jsx)(i.default,{tipo:"C",id:e.data.cliente_id,nome:e.data.cliente_nome,logoId:e.data.cliente_logo_id,tamanho:20}):null!==(t=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.cliente_nome)&&void 0!==t?t:""},dataType:"string",width:"160px"}},735:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(267),n=t(396),r=t(244);class d extends i.a.Component{constructor(e){super(e),this.state={processoId:"",processoNome:"",processoCategoria:"",processoAtivo:"",processoVersao:"",processoPublicacao:"",processoSolicitacoes:""}}onToolbarPreparing(e){const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo processo",text:"Novo processo",onClick:function(){window.View.load("processo/detalhes",(function(a,t){t.onclose=e.component.refresh,t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS,null,null,{processoId:null})}},location:"after",name:"BtnNovoProcesso",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-upload",hint:"Importar Processo",onClick:function(){window.View.load("processo/importacao",(function(a,t){t.onclose=e.component.refresh,t.show()}))}},location:"after",name:"BtnImportarProcesso",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de processos",text:"Recarregar processos",onClick:function(){this.listarProcessos=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("processo/configuracoes",(function(e,a){a.onclose=onclose,a.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}render(){return Object(r.jsx)(i.a.Fragment,{children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)(s.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(n.listarProcessos)({dx_grid:!0}),stateStoring:n.stateStoring,columns:Object(n.processoColunas)(),export:{enabled:!0,fileName:"Listagem_Processos_"+window.agora(),allowExportSelectedData:!1}})})})})}}d.defaultProps={abaTitulo:"Processos"},a.default=d},736:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"data",caption:"Data",dataType:"datetime",format:"dd/MM/yyyy HH:mm",allowGrouping:!1,allowHeaderFiltering:!1}},737:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));var o=t(247),i=t.n(o),s=t(445),n=t(708),r=t.n(n),d=t(244);class l extends i.a.Component{constructor(e){super(e),this.state={builderValue:Array.isArray(this.props.value)?this.props.value:null,value:Array.isArray(this.props.value)?this.props.value:null,popupVisible:!1}}caption(){if(null===this.state.value)return"Criar filtro";const e=a=>{let t="";return Array.isArray(a)&&a.forEach((a=>{Array.isArray(a)?(t+="( ",t+=e(a),t+=" ) "):t+=a+" "})),t};return e(this.state.value)}limpar(){if(Array.isArray(this.state.value))return Object(d.jsx)("div",{className:"dx-datagrid-filter-panel-clear-filter",tabIndex:"0",onClick:e=>{this.setState({builderValue:null,value:null},(()=>{this.props.onValueChanged&&this.props.onValueChanged(this.state.value)}))},children:"Limpar"})}filterValueChanged(e){this.setState({builderValue:e.value})}onFilterBuilderOKClick(e){this.setState({value:this.state.builderValue,popupVisible:!1},(()=>{this.props.onValueChanged&&this.props.onValueChanged(this.state.value)}))}onFilterBuilderCancelarClick(e){this.setState({builderValue:this.state.value,popupVisible:!1})}render(){return Object(d.jsxs)(i.a.Fragment,{children:[Object(d.jsxs)(s.Popup,{visible:this.state.popupVisible,onHiding:this.onFilterBuilderCancelarClick.bind(this),dragEnabled:!1,hideOnOutsideClick:!1,hideOnParentScroll:!1,showCloseButton:!0,showTitle:!0,title:"Construtor de filtro",width:"80vw",height:"80vh",children:[Object(d.jsx)(r.a,{fields:this.props.fields,onValueChanged:this.filterValueChanged.bind(this),value:this.state.builderValue}),Object(d.jsx)(s.ToolbarItem,{widget:"dxButton",toolbar:"bottom",locateInMenu:"auto",location:"after",options:{text:"OK",onClick:this.onFilterBuilderOKClick.bind(this)}}),Object(d.jsx)(s.ToolbarItem,{widget:"dxButton",toolbar:"bottom",locateInMenu:"auto",location:"after",options:{text:"Cancelar",onClick:this.onFilterBuilderCancelarClick.bind(this)}})]}),Object(d.jsxs)("div",{className:"dx-datagrid-filter-panel",children:[Object(d.jsxs)("div",{className:"dx-datagrid-filter-panel-left",children:[Object(d.jsx)("div",{className:"dx-icon-filter",tabIndex:"0"}),Object(d.jsx)("div",{className:"dx-datagrid-filter-panel-text",tabIndex:"0",onClick:e=>this.setState({popupVisible:!0}),children:this.caption()})]}),this.limpar()]})]})}}},738:function(e,a,t){"use strict";t.d(a,"a",(function(){return h}));var o=t(247),i=t.n(o),s=t(374),n=t.n(s),r=t(375),d=t.n(r),l=t(486),c=t(712),u=t.n(c),p=t(253),m=t(244);class h extends i.a.Component{constructor(e){super(e),this.requestCount=async function(){var e=await p.a.get(this.props.route,null,null,null,null,null,null,null,null,!0);this.setState({dataSource:e})},this.keyCount=0,this.getKey=this.getKey.bind(this);const a=this.props.dataSource;this.state={dataSource:a,chartType:this.props.chartTypes[0],previousChartType:null},this.props.route&&this.requestCount(),this.handleChange=this.handleChange.bind(this),this.pointClickHandler=this.pointClickHandler.bind(this),this.legendClickHandler=this.legendClickHandler.bind(this)}handleChange(e){this.setState({chartType:e.value,previousChartType:e.previousValue})}pointClickHandler(e){this.toggleVisibility(e.target)}legendClickHandler(e){const a=e.target,t=e.component.getAllSeries()[0].getPointsByArg(a)[0];this.toggleVisibility(t)}toggleVisibility(e){e.isVisible()?e.hide():e.show()}getKey(){return++this.keyCount}render(){const e=Object(m.jsx)(l.CommonSeriesSettings,{argumentField:this.props.argumentField,type:this.state.chartType,ignoreEmptyPoints:!0}),a=e=>{let a="120px";this.props.customHeightCalcCharts&&(a=this.props.customHeightCalcCharts);let t={height:"calc(100vh - ".concat(a,")")};e.component.element().css(t),e.component.refresh()},t="pie"===this.state.chartType||"donut"===this.state.chartType?Object(m.jsxs)(u.a,{dataSource:this.state.dataSource,onInitialized:a,customizePoint:this.props.customizePoint,onPointClick:this.pointClickHandler,onLegendClick:this.legendClickHandler,children:[Object(m.jsx)(l.Export,{enabled:!0}),e,this.props.seriesPie.map(((e,a)=>Object(m.jsx)(l.Series,{argumentField:e.argumentField,valueField:e.valueField,name:e.name,children:Object(m.jsx)(l.Label,{visible:!0,children:Object(m.jsx)(l.Connector,{visible:!0,width:1})})},a)))]}):Object(m.jsxs)(l.Chart,{dataSource:this.state.dataSource,onInitialized:a,children:[Object(m.jsx)(l.Export,{enabled:!0}),e,this.props.series.map(((e,a)=>Object(m.jsx)(l.Series,{valueField:e.valueField,name:e.name,color:e.color,children:Object(m.jsx)(l.Label,{visible:!0})},a)))]}),o=("pie"===this.state.previousChartType||"donut"===this.state.previousChartType)!==("pie"===this.state.chartType||"donut"===this.state.chartType)?this.getKey():this.keyCount;let i=JSON.parse(JSON.stringify(window.TIPO_GRAFICO_LOOKUP));for(let n=0;n<i.length;n++){const e=i[n];this.props.chartTypes.includes(e.id)||delete i[n]}i=i.filter((function(e){return null!=e}));let s="79px";this.props.customHeightCalcContainer&&(s=this.props.customHeightCalcContainer);let r={height:"calc(100vh - ".concat(s,")")};return Object(m.jsx)("div",{className:"dx-theme-background-color",style:r,children:Object(m.jsxs)(n.a,{className:"scrollable-board",showScrollbar:"always",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"pull-right col-md-3",children:Object(m.jsx)(d.a,{width:"auto",dataSource:i,value:this.state.chartType,onValueChanged:this.handleChange,valueExpr:"id",displayExpr:"descricao"})})}),t]})},o)}}h.defaultProps={dataSource:[],route:null,argumentField:null,series:null,seriesPie:null,chartTypes:["bar","area","fullstackedarea","fullstackedbar","fullstackedline","fullstackedspline","fullstackedsplinearea","line","scatter","spline","splinearea","stackedarea","stackedbar","stackedline","stackedspline","stackedsplinearea","steparea","stepline","pie","donut"],customizePoint:null}},739:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({key:"categoria_pdca_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"/categoria_pdca/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"/categoria_pdca/listar/",data:{dx_grid:!0,categoria_pdca_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},740:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({pageSize:20,key:"assunto_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"assunto/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},741:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({pageSize:20,key:"tipo_documento_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"tipo_documento/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},742:function(e,a,t){"use strict";t.d(a,"a",(function(){return w}));var o=t(248),i=t(247),s=t.n(i),n=t(267),r=t(492),d=t(562),l=t(732),c=t(254),u=t(315),p=t(271),m=t(87),h=t(253),_=t(314),f=t(262),b=t(43),v=t.n(b),g=t(244);class w extends s.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.stateStoring=this.stateStoring.bind(this),this.onContextMenuPreparing=this.onContextMenuPreparing.bind(this),this.onContentReady=this.onContentReady.bind(this),this.handleSelectBoxChange=this.handleSelectBoxChange.bind(this),this.exibirFiltrosAdicionais=this.exibirFiltrosAdicionais.bind(this),this.onRowClick=this.onRowClick.bind(this),this.onRowPrepared=this.onRowPrepared.bind(this),this.filtro_solicitacao_id=this.props.filtro_solicitacao_id>0?this.props.filtro_solicitacao_id:null,this.filtro_solicitacao_numero=this.props.filtro_solicitacao_numero>0?this.props.filtro_solicitacao_numero:this.filtro_solicitacao_id>0?"id:".concat(this.filtro_solicitacao_id):null,this.filtro_tipo_listagem="string"===typeof this.props.filtro_tipo_listagem||"number"===typeof this.props.filtro_tipo_listagem?this.props.filtro_tipo_listagem:null,this.filtro_solicitante="string"===typeof this.props.filtro_solicitante||"number"===typeof this.props.filtro_solicitante?this.props.filtro_solicitante:null,this.filtro_responsavel="string"===typeof this.props.filtro_responsavel||"number"===typeof this.props.filtro_responsavel?this.props.filtro_responsavel:null,this.filtro_cliente="string"===typeof this.props.filtro_cliente||"number"===typeof this.props.filtro_cliente?this.props.filtro_cliente:null,this.hasFilters=this.props.exibirAlertaFiltrosAdicionais&&(null!==this.filtro_solicitacao_numero||null!==this.filtro_tipo_listagem||null!==this.filtro_cliente||null!==this.filtro_solicitante||null!==this.filtro_responsavel),this.dataGridRef=s.a.createRef(),this.gridStateStoring=this.stateStoring(),this.parametrosUsuario=m.a.get_parametro_usuario("solicitacao"),this.listResponsaveisModoTeste=Object(d.b)();let a=window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,t=!1,o=0,i="";this.parametrosUsuario&&("undefined"!==typeof this.parametrosUsuario.tipoListagem&&null!==this.parametrosUsuario.tipoListagem&&""!==this.parametrosUsuario.tipoListagem&&+this.parametrosUsuario.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&(a=+this.parametrosUsuario.tipoListagem),this.props.processo_id||a==window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS||a==window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_CONCLUIDA||a==window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_EM_ABERTO||a==window.SOLICITACAO_FILTROS.MINHAS_ATIVIDADES_EXECUTADAS||(a=window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS),this.parametrosUsuario.obj_param?(t="undefined"!==typeof this.parametrosUsuario.obj_param.modo_teste&&this.parametrosUsuario.obj_param.modo_teste,o="undefined"!==typeof this.parametrosUsuario.obj_param.modo_teste_responsavel_id?this.parametrosUsuario.obj_param.modo_teste_responsavel_id:0,i="undefined"!==typeof this.parametrosUsuario.obj_param.modo_teste_responsavel_nome?this.parametrosUsuario.obj_param.modo_teste_responsavel_nome:""):this.parametrosUsuario.obj_param={}),null!==this.filtro_solicitacao_numero&&(a=window.SOLICITACAO_FILTROS.TODAS),null!==this.filtro_tipo_listagem&&(a=this.filtro_tipo_listagem),this.state={dataSource:Object(d.a)(+a,null,this.filtro_solicitacao_numero,t,o,this.filtro_solicitante,this.filtro_responsavel,this.filtro_cliente,this.props.processo_id),tipoListagem:+a,modo_teste:t,modo_teste_responsavel_id:o,modo_teste_responsavel_nome:i,filtro_solicitacao_numero:this.filtro_solicitacao_numero}}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}render(){var e;const a=e=>this.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,this.state.modo_teste_responsavel_nome,this.state.modo_teste),t=[...Object(l.a)(m.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo),Object(g.jsxs)(c.Column,{type:"buttons",children:[Object(g.jsx)(u.a,{hint:"Visualizar Atividade",visible:e=>![r.b.andamento,r.b.atrasada].includes(+e.row.data.solicitacao_situacao)||![window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao),icon:"fas fa-list-alt",onClick:a}),",",Object(g.jsx)(u.a,{hint:"Atividade Pendente",visible:e=>[r.b.andamento,r.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO].includes(+e.row.data.situacao),onClick:a,children:Object(g.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(g.jsx)("span",{className:"far fa-list-alt"}),Object(g.jsx)("span",{className:"fas fa-circle icon-on-top text-info",style:{opacity:"75%"}})]})}),",",Object(g.jsx)(u.a,{hint:"Atividade Atrasada",visible:e=>[r.b.andamento,r.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao),onClick:a,children:Object(g.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(g.jsx)("span",{className:"far fa-list-alt"}),Object(g.jsx)("span",{className:"fas fa-circle icon-on-top text-danger",style:{opacity:"75%"}})]})}),",",Object(g.jsx)(u.a,{hint:"Visualizar Solicita\xe7\xe3o",icon:"fas fa-sitemap",onClick:e=>this.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,this.state.modo_teste_responsavel_nome,this.state.modo_teste),visible:e=>!0===m.a.sessao.dados.admin||!0===e.row.data.acesso_supervisor}),","]},"buttonsAtividade")],o=null!==(e=this.props.subtractHeight)&&void 0!==e?e:"0px",i=this.hasFilters?"38px":"0px",d={height:"calc(100vh - 46px - ".concat(o," - ").concat(i,")"),width:"100%"};return Object(g.jsxs)(s.a.Fragment,{children:[this.hasFilters&&Object(g.jsxs)("div",{className:"text-warning dx-theme-background-color",style:{padding:10,fontWeight:"bold",fontSize:14},children:[Object(g.jsx)("i",{className:"fas fa-info-circle"}),"\xa0",Object(g.jsx)("span",{children:"Filtros externos aplicados"}),"\xa0",Object(g.jsxs)("small",{children:["( ",Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:this.exibirFiltrosAdicionais,children:"visualizar"})," )"]})]}),Object(g.jsx)(n.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,style:d,stateStoring:this.gridStateStoring,onToolbarPreparing:this.onToolbarPreparing,onContextMenuPreparing:this.onContextMenuPreparing,onContentReady:this.onContentReady,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},onRowClick:this.onRowClick,onRowPrepared:this.onRowPrepared,children:t})]})}handleBtnEditarClick(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null;e.row?i=e.row.data:e.data&&(i=e.data);const s=a==window.FORMULARIO.EDITAR?{solicitacaoAtividadeId:i.solicitacao_atividade_id}:{solicitacaoId:i.solicitacao_id};p.a.load("solicitacao/detalhes",((s,n)=>{n.onclose=e.component.refresh,n.show(i.solicitacao_atividade_id,a,t,o)}),p.a.ABA.MULTIPLAS,null,null,s)}handleSelectBoxChange(e){if(this.dataGridRef&&this.dataGridRef.current&&e.selectedItem&&+e.selectedItem.id!==+this.state.tipoListagem){const a=a=>{e.component.option("value",+a),this.setState({dataSource:Object(d.a)(a,null,this.state.filtro_solicitacao_numero,this.state.modo_teste,this.state.modo_teste_responsavel_id,null,null,null,this.props.processo_id),tipoListagem:+a},(async()=>{+this.state.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&(this.parametrosUsuario=await m.a.get_parametro_usuario("solicitacao"),m.a.set_parametro_usuario("solicitacao",Object(o.a)(Object(o.a)({},this.parametrosUsuario),{},{tipoListagem:+this.state.tipoListagem})))}))},t=this.dataGridRef.current._instance;if(t._resetPageIndex=!0,t._clearSelectedRows=!0,+e.selectedItem.id===window.SOLICITACAO_FILTROS.TODAS){Object(_.confirm)("Listar todas as Solicita\xe7\xf5es poder\xe1 levar um tempo. Deseja continuar?","Aten\xe7\xe3o").then((e=>{a(e?window.SOLICITACAO_FILTROS.TODAS:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS)}))}else a(+e.selectedItem.id)}}stateStoring(){return{enabled:!this.hasFilters,type:"custom",customLoad:async()=>(await m.a.get_parametro_usuario("solicitacao")).datagrid,customSave:e=>m.a.set_parametro_usuario("solicitacao",{datagrid:e})}}onToolbarPreparing(e){if(!this.props.processo_id&&this.state.tipoListagem===window.SOLICITACAO_FILTROS.SUPERVISIONADOS)return;let a=[{id:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,descricao:"Minhas Pend\xeancias",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_CONCLUIDA,descricao:"Minhas Solicita\xe7\xf5es Conclu\xeddas",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_EM_ABERTO,descricao:"Minhas Solicita\xe7\xf5es em Andamento",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_ATIVIDADES_EXECUTADAS,descricao:"Minhas Atividades Executadas",categoria:"Minhas"}];this.props.processo_id&&a.push({id:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,descricao:"Processos Supervisionados",categoria:"Geral",visible:"S"===m.a.sessao.dados.supervisor_processo||"S"===m.a.sessao.dados.supervisor_processo_usuario||"S"===m.a.sessao.dados.supervisor_processo_grupo_usuario},{id:window.SOLICITACAO_FILTROS.ATRASADAS,descricao:"Atividades Atrasadas",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS,descricao:"Todas Atividades",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS_ANDAMENTO,descricao:"Solicita\xe7\xf5es em Andamento",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CANCELADAS,descricao:"Solicita\xe7\xf5es Canceladas",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CONCLUIDAS,descricao:"Solicita\xe7\xf5es Conclu\xeddas",categoria:"Situa\xe7\xe3o"});let t=[{widget:"dxTextBox",location:"after",locateInMenu:"auto",options:{width:"140px",placeholder:"N\xba Solicita\xe7\xe3o",value:this.state.filtro_solicitacao_numero,buttons:[{location:"before",name:"pesquisar",options:{icon:"search",disabled:!0}}],onEnterKey:e=>{let a=e.component.option("value");null!==a&&""!==a.trim()?this.setState({dataSource:Object(d.a)(window.SOLICITACAO_FILTROS.TODAS,null,a.trim(),this.state.modo_teste,this.state.modo_teste_responsavel_id,null,null,null,this.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.TODAS,filtro_solicitacao_numero:a}):this.setState({dataSource:Object(d.a)(window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,null,null,this.state.modo_teste,this.state.modo_teste_responsavel_id,null,null,null,this.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,filtro_solicitacao_numero:null})}}},{widget:"dxSelectBox",visible:!0===this.state.modo_teste,name:"selectResponsavelTeste",locateInMenu:"auto",options:{dataSource:new f.default({store:this.listResponsaveisModoTeste,paginate:!0,pageSize:10}),valueExpr:"id",displayExpr:"nome",searchEnabled:!0,searchModeOption:"contains",searchExprOption:"nome",width:"250px",placeholder:"Respons\xe1vel (Modo Teste)",value:this.state.modo_teste_responsavel_id,onValueChanged:e=>{const a=e.value,t=e.component.option("text");this.setState({modo_teste_responsavel_id:a,modo_teste_responsavel_nome:t,dataSource:Object(d.a)(this.state.tipoListagem,null,this.state.filtro_solicitacao_numero,this.state.modo_teste,a,null,null,null,this.props.processo_id)},(async()=>{this.parametrosUsuario=await m.a.get_parametro_usuario("solicitacao"),m.a.set_parametro_usuario("solicitacao",Object(o.a)(Object(o.a)({},this.parametrosUsuario),{},{obj_param:Object(o.a)(Object(o.a)({},this.parametrosUsuario.obj_param),{},{modo_teste_responsavel_id:a,modo_teste_responsavel_nome:t})}))}))}}},{widget:"dxSelectBox",locateInMenu:"auto",options:{dataSource:new f.default({store:a,group:"categoria"}),width:"250px",placeholder:"Filtrar por",valueExpr:"id",displayExpr:"descricao",value:+this.state.tipoListagem,grouped:!0,onSelectionChanged:this.handleSelectBoxChange},location:"after"},{widget:"dxButton",options:{icon:"plus",hint:"Nova Solicita\xe7\xe3o",text:"Nova Solicita\xe7\xe3o",onClick:()=>{p.a.load("solicitacao/nova",((a,t)=>{t.onclose=e.component.refresh,t.show(null,null,null,null,null,null,null,null,this.state.modo_teste,this.state.modo_teste_responsavel_id,!1,this.state.modo_teste_responsavel_nome)}))}},location:"after",name:"BtnNovaSolicitacao",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-flask",hint:"Habilitar Modo Teste",text:"Habilitar Modo Teste",onClick:()=>{this.setState({modo_teste:!this.state.modo_teste,dataSource:Object(d.a)(this.state.tipoListagem,null,this.state.filtro_solicitacao_numero,!this.state.modo_teste,this.state.modo_teste_responsavel_id)},(async()=>{this.parametrosUsuario=await m.a.get_parametro_usuario("solicitacao"),m.a.set_parametro_usuario("solicitacao",Object(o.a)(Object(o.a)({},this.parametrosUsuario),{},{obj_param:Object(o.a)(Object(o.a)({},this.parametrosUsuario.obj_param),{},{modo_teste:this.state.modo_teste})}))}))},onInitialized:e=>{!0===this.state.modo_teste&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnModoTeste",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}onContextMenuPreparing(e){const a=this;if("header"===e.target&&Array.isArray(e.items)&&e.items.push(Object(n.itemRestaurarEstadoDasColunas)(e)),e.row&&"data"===e.row.rowType){const t=function(a){h.a.post("solicitacao/cancelar_atividades/",{atividades_selecionadas:a},(function(){window.alert_saved("Atividades canceladas com sucesso"),e.component.refresh()}))},o=function(a){h.a.post("solicitacao/restaurar_atividades/",{atividades_selecionadas:a},(function(){window.alert_saved("Atividades restauradas com sucesso"),e.component.refresh()}))};let i=!1,s=!1;const n=e.component.getSelectedRowsData(),r=e.component.getCombinedFilter(),d=new f.default({store:n,pageSize:0});d.filter(r),d.load().done((function(n){if(n.length>0){i=!0,s=!0;for(let e=0;e<n.length;e++){let a=n[e];(!a.supervisor_permite_edicao||a.entrega||"N"!==a.cancelada||+a.situacao===window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA||a.data_finalizacao)&&(i=!1),a.supervisor_permite_edicao&&"N"===a.cancelada&&a.situacao===window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA&&!a.data_finalizacao||(s=!1)}}e.items=[{text:"Visualizar Atividade",visible:!0,onItemClick:()=>a.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,a.state.modo_teste_responsavel_nome)},{text:"Visualizar Processo",visible:!0,onItemClick:()=>a.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,a.state.modo_teste_responsavel_nome)},{beginGroup:!0,text:"Copiar para uma nova Solicita\xe7\xe3o",visible:!0,onItemClick:()=>{const t={processo_id:e.row.data.processo_id,copiar_solicitacao_id:e.row.data.solicitacao_id,modo_teste:a.state.modo_teste,modo_teste_responsavel_id:a.state.modo_teste_responsavel_id};h.a.post("solicitacao/nova/",t,(function(t){const o={solicitacaoAtividadeId:t.solicitacao_atividade_id};p.a.load("solicitacao/detalhes",((o,i)=>{i.onclose=e.component.refresh,i.show(t,window.FORMULARIO.NOVO,a.state.modo_teste_responsavel_nome,a.state.modo_teste)}),p.a.ABA.MULTIPLAS,null,null,o)}))}},{beginGroup:!0,text:e.row.data.reabertura_solicitacoes_concluidas&&e.row.data.data_finalizacao?"Retornar para esta atividade e reabrir a Solicita\xe7\xe3o":"Retornar para esta Atividade e cancelar as posteriores",visible:"N"===e.row.data.cancelada&&e.row.data.situacao!==window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA&&(!!e.row.data.entrega||!!e.row.data.retorno)&&(e.row.data.supervisor_permite_edicao&&!e.row.data.data_finalizacao||e.row.data.reabertura_solicitacoes_concluidas&&e.row.data.data_finalizacao),onItemClick:function(){window.DevExpress.ui.dialog.custom({title:"Aviso",messageHtml:"Tem certeza que deseja <strong>retornar a Solicita\xe7\xe3o para esta Atividade</strong>? Essa a\xe7\xe3o \xe9 irrevers\xedvel!",buttons:[{text:"Sim",onClick:()=>{if(!(!e.row.data.reabertura_solicitacoes_concluidas||!e.row.data.data_finalizacao)){let e="",t=null;const o=(a,o)=>{const i=v()("<div>");t=i.dxTextArea({placeholder:"Informe o motivo da reabertura da Solicita\xe7\xe3o (500 caracteres m\xe1x.)",maxLength:500,height:180,onValueChanged:a=>{e=a.value}}).dxValidator({type:"required",message:"O motivo da reabertura \xe9 obrigat\xf3rio!"}).dxTextArea("instance"),v()(a).append(i)},i=t=>{null!==e&&""!==e.trim()?a(!0,e,(()=>{t.hide()})):window.alert_fail("O motivo da reabertura \xe9 obrigat\xf3rio!")},s=e=>{e.hide()};window.alertaPopUp("Motivo da Reabertura",o,"Confirmar",i,"Cancelar",s,500,300,!1)}else a(!1);function a(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};window.alert_info("Retornando solicita\xe7\xe3o para a atividade selecionada"),h.a.post("solicitacao/retornar_atividade/",{solicitacao_atividade_id:e.row.data.solicitacao_atividade_id,solicitacao_id:e.row.data.solicitacao_id,cancelar_posteriores:!0,reabrir_solicitacao:a,motivo_reabertura:t},(function(){window.alert_saved("Atividade retornada com sucesso"),"function"===typeof o&&o(),e.component.refresh()}))}}},{text:"N\xe3o",onClick:()=>!1}]}).show()}},{text:"Cancelar Atividade",visible:e.row.data.supervisor_permite_edicao&&!e.row.data.entrega&&"N"===e.row.data.cancelada&&e.row.data.situacao!==window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA&&!e.row.data.data_finalizacao,onItemClick:()=>t([e.row.data])},{text:"Cancelar Atividades selecionadas",visible:i,onItemClick:()=>t(n)},{text:"Restaurar Atividade",visible:e.row.data.supervisor_permite_edicao&&"N"===e.row.data.cancelada&&+e.row.data.situacao===window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA,onItemClick:()=>o([e.row.data])},{text:"Restaurar Atividades selecionadas",visible:s,onItemClick:()=>o(n)}]}))}}onContentReady(e){e.component._clearState&&(e.component.state({}),e.component._clearState=!1),e.component._clearSelectedRows&&(e.component.clearSelection(),e.component._clearSelectedRows=!1),e.component._resetPageIndex&&(e.component.pageIndex(0),e.component._resetPageIndex=!1),setTimeout((()=>e.component.updateDimensions()),100)}exibirFiltrosAdicionais(){let e="Essa mensagem significa que a listagem de Solicita\xe7\xf5es de Processos foi aberta externamente com filtros pr\xe9 definidos.<br><br>Nesse caso, os filtros salvos do usu\xe1rio n\xe3o ser\xe3o carregados e nem salvos na sess\xe3o, mas ser\xe3o preservados quando a tela for aberta pelo menu do sistema.<br><br>Filtros aplicados:";e+="<ul>",this.filtro_tipo_listagem&&(e+="<li>Tipo de Listagem</li>"),this.filtro_solicitacao_numero&&(e+="<li>N\xfamero da Solicita\xe7\xe3o</li>"),this.filtro_solicitante&&(e+="<li>Solicitante</li>"),this.filtro_responsavel&&(e+="<li>Respons\xe1vel</li>"),this.filtro_cliente&&(e+="<li>Cliente</li>"),e+="</ul>",Object(_.alert)(e,"Filtros Externos")}onRowClick(e){window.onDoubleClick(e,(()=>{this.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,this.state.modo_teste_responsavel_nome,this.state.modo_teste)}))}onRowPrepared(e){if(m.a.PE.Solicitacao_Listagem_onRowPrepared)try{m.a.PE.Solicitacao_Listagem_onRowPrepared(e)}catch(e){console.log(e)}}}w.defaultProps={exibirAlertaFiltrosAdicionais:!0}},743:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return r}));var o=t(248),i=t(253),s=t(262);let n=()=>new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"tipo_moeda_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(e,t){i.a.get({route:"tipo_moeda/listar_para_selecao/",data:Object(o.a)({dx_grid:!0},a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"tipo_moeda/listar_para_selecao/",data:{dx_grid:!0,tipo_moeda_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}}),r=(e,a)=>{i.a.post("tipo_moeda/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(t){window.alert_tooltip("Salvo com sucesso!","success",500),a&&a(e)}))}},744:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(280),i=t(564),s=t(244);const n=[Object(s.jsx)(o.a,{width:"100%",caption:"Descri\xe7\xe3o"},"nome"),Object(s.jsx)(i.a,{},"simbolo")]},745:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=t(495),s=t(746),n=t(87);class r extends i.a{constructor(e){super(e),this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState())}propsToObjState(){var e,a,t,o;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,dataSource:Object(s.a)(this.props.modulo,window.cripto(n.a.sessao.usuario_id.toString())),instanceSelecaoPadraoTagBox:null!==(a=this.props.instanceSelecaoGrupoUsuarios)&&void 0!==a?a:null,aoAlterar:null!==(t=this.props.aoAlterar)&&void 0!==t?t:null,elementAttr:null!==(o=this.props.elementAttr)&&void 0!==o?o:null}}componentDidUpdate(e,a){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}r.defaultProps={placeholder:"Filtro por grupos de usu\xe1rios",displayExpr:"nome",valueExpr:"grupo_usuarios_id",searchEnabled:!0}},746:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(248),i=t(253),s=t(262);let n=function(e,a,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new s.default({paginate:!1,key:"grupo_usuarios_id",load:s=>{let r=window.loadOptionsToActionParams(s);return new Promise((function(d,l){i.a.get({route:"grupo_usuarios/listar/",data:Object(o.a)({listar_grupos_sistema:n,nome:s.searchValue,usuario_id:a,modulo:e,dx_grid:t},r),func_response:function(e){d(e)},func_fail:function(e){e.validation&&l(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},747:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return s}));var o=t(248),i=t(495);class s extends i.a{constructor(e){super(e),this.state=Object(o.a)(Object(o.a)({},this.state),this.propsToObjState())}propsToObjState(){var e,a,t,o,i,s;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,items:null!==(a=this.props.items)&&void 0!==a?a:[],instanceSelecaoPadraoTagBox:null!==(t=this.props.instanceSelecaoGruposAtivos)&&void 0!==t?t:null,aoAlterar:null!==(o=this.props.aoAlterar)&&void 0!==o?o:null,elementAttr:null!==(i=this.props.elementAttr)&&void 0!==i?i:null,maxDisplayedTags:null!==(s=this.props.maxDisplayedTags)&&void 0!==s?s:void 0}}componentDidUpdate(e,a){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}s.defaultProps={placeholder:"Filtro por ativos",displayExpr:"nome",valueExpr:"id"}},748:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({pageSize:20,key:"consulta_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"consulta_integracao/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"consulta_integracao/listar/",data:{dx_grid:!0,conexao_integracao_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},749:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var o=t(254);class i extends o.Column{}i.defaultProps={dataField:"valor",caption:"Valor",dataType:"number",format:"#,##0.00",allowGrouping:!1,allowHeaderFiltering:!1,editorOptions:{format:"#,##0.00",showClearButton:!0}}},750:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(254),i=t(560),s=t(244);class n extends o.Column{}n.defaultProps={dataField:"situacao",caption:"Situa\xe7\xe3o da Oportunidade",width:80,children:Object(s.jsx)(o.Lookup,{dataSource:i.oportunidadeSituacoes,displayExpr:"descricao",valueExpr:"id"})}},751:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return d})),t.d(a,"d",(function(){return l}));var o=t(248),i=t(253),s=t(262);let n=()=>new s.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"cubo_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise((function(e,t){i.a.get({route:"cubo/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:function(a){let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){i.a.get({route:"cubo/listar/",data:{dx_grid:!0,cubo_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}}),r=(e,a)=>{i.a.post("cubo/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(t){window.alert_tooltip("Salvo com sucesso!","success",500),a&&a(e)}))},d=e=>new s.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"integrante_id",load:a=>{let t=window.loadOptionsToActionParams(a);return new Promise((function(a,s){i.a.get({route:"cubo/listar_equipe/",data:Object(o.a)({cubo_id:e,dx_grid:!0},t),func_response:function(e){let t=window.createLoadExtra(e);a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:e=>{},update:(e,a)=>{},remove:e=>{}}),l=(e,a,t)=>{i.a.post("cubo/salvar_equipe",{cubo_id:e,arr_equipe:window.CircularJSON.stringify(a)},(function(e){window.alert_tooltip("Salvo com sucesso!","success",500),t&&t(a)}))}},752:function(e,a,t){"use strict";t.r(a);var o=t(248),i=t(43),s=t.n(i),n=t(247),r=t.n(n),d=t(380),l=t.n(d),c=t(253),u=t(87),p=t(395),m=t.n(p),h=t(464),_=t(267),f=t(795),b=t(539),v=t(487),g=t.n(v),w=t(486),j=t.n(w),O=t(244);const x=[{text:"Padr\xe3o",value:void 0},{text:"Soma",value:"sum"},{text:"Contagem",value:"count"},{text:"M\xe9dia",value:"avg"},{text:"M\xe1ximo",value:"max"},{text:"Min\xedmo",value:"min"}];class A extends r.a.Component{constructor(e){super(e),this.getDatasourceCubo=async function(e){const a=await c.a.get("cubo/getDatasourceCubo/",{cubo_id:e},null,null,null,null,null,null,null,!0),t=JSON.parse(a.dados),i=[];for(let s=0;s<a.colunas.length;s++){const e=a.colunas[s],t=this.handleOpcoesTipoColuna(e.tipo);i.push(Object(o.a)(Object(o.a)({dataField:e.nome,caption:e.titulo},t),{},{minWidth:"100"}))}this.setState({datasource:t,columns:i,datasourcePivot:new b.default({store:t})})},this.dataGridRef=r.a.createRef(),this.filterBuilderValueInicial=[],this.filterBuilderValueFinal=[],this.filterBuilderColunasParametrosInicial=[],this.filterBuilderColunasParametrosFinal=[],this.keyCount=0,this.getKey=this.getKey.bind(this),this.onContextMenuPreparing=this.onContextMenuPreparing.bind(this),this.handleOpcoesTipoColuna=this.handleOpcoesTipoColuna.bind(this),this.exportarPivotGrid=this.exportarPivotGrid.bind(this),this.state={datasource:[],datasourcePivot:[],columns:void 0},this.getDatasourceCubo.bind(this),u.a.temp.cubo||(u.a.temp.cubo={}),u.a.temp.cubo.colunasParametros||(u.a.temp.cubo.colunasParametros={}),u.a.temp.cubo.colunasParametros["DataGridCubo_"+e.cubo_id]=[]}async componentDidMount(){await this.getDatasourceCubo(this.props.cubo_id)}getKey(){return this.keyCount++}limparColunasParametrosNaoUtilizados(){var e,a,t,o=this;const i=function(e){var a,t,s,n,r;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const l=null!==(a=null!==d&&void 0!==d?d:null===(t=o.dataGridRef)||void 0===t||null===(s=t.current)||void 0===s||null===(n=s.instance)||void 0===n||null===(r=n.state())||void 0===r?void 0:r.filterValue)&&void 0!==a?a:[];for(let o=0;o<l.length;o++){const a=l[o];if(Array.isArray(a)){if(i(e,a))return!0}if(a==e)return!0}return!1};let s=window.clone_obj(null!==(e=null===u.a||void 0===u.a||null===(a=u.a.temp)||void 0===a||null===(t=a.cubo)||void 0===t?void 0:t.colunasParametros["DataGridCubo_"+this.props.cubo_id])&&void 0!==e?e:[]);for(let n=0;n<s.length;n++){const e=s[n];s[n]=i(e,this.filterBuilderValueInicial)?e:null}u.a.temp.cubo.colunasParametros["DataGridCubo_"+this.props.cubo_id]=s.filter((e=>!!e))}render(){let e=Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100vh - 79px)",backgroundColor:"#f8f9fa",height:"calc(100vh - 79px)"},children:Object(O.jsx)("p",{style:{fontSize:"24px",color:"#495057",textAlign:"center",padding:"20px",border:"2px dashed #ced4da",borderRadius:"5px",maxWidth:"400px"},children:"N\xe3o h\xe1 dados dispon\xedveis."})});const a="DataGridCubo_"+this.props.cubo_id;if(this.state.datasource.length>0){const t=Object(h.formatMessage)("dxFilterBuilder-enterValueText"),o=Array.isArray(this.state.columns)?this.state.columns.map((e=>e.dataField)):null,i={onEditorPreparing:e=>{e.editorOptions.buttons=[{name:"parametro",location:"after",options:{stylingMode:"text",template:(o,i,n)=>s()("<div></div>").dxCheckBox({value:u.a.temp.cubo.colunasParametros[a].includes(e.dataField),text:"Par\xe2metro",onValueChanged:o=>{o.value&&!u.a.temp.cubo.colunasParametros[a].includes(e.dataField)&&u.a.temp.cubo.colunasParametros[a].push(e.dataField),!o.value&&u.a.temp.cubo.colunasParametros[a].includes(e.dataField)&&u.a.temp.cubo.colunasParametros[a].splice(u.a.temp.cubo.colunasParametros[a].indexOf(e.dataField),1),o.value&&!e.value&&e.setValue(t)}})}}],e.value===t&&(e.editorOptions.value=null);let o=e.editorOptions.onValueChanged;e.editorOptions.onValueChanged=function(i){var s,n,r;(null!==(s=null===u.a||void 0===u.a||null===(n=u.a.temp)||void 0===n||null===(r=n.cubo)||void 0===r?void 0:r.colunasParametros[a])&&void 0!==s?s:[]).includes(e.dataField)&&!i.value&&(arguments[0].value=t),o.apply(this,arguments)}},onContentReady:e=>{e.element.find(".dx-filterbuilder-text.dx-filterbuilder-item-value").each(((e,t)=>{let o=t.closest(".dx-filterbuilder-group-item"),i=s()(o).find(".dx-filterbuilder-item-field");u.a.temp.cubo.colunasParametros[a].includes(s()(i).text())?0==s()(o).find(".parametro").length&&s()(o).append('<div class="dx-filterbuilder-text parametro" title="Par\xe2metro" style="cursor: auto;"><i class="far fa-bookmark text-warning"></i></div>'):s()(o).find(".parametro").remove()}))},onInitialized:e=>{var a,t,o,i,s;this.filterBuilderValueInicial=window.clone_obj(null!==(a=null===e||void 0===e||null===(t=e.component)||void 0===t?void 0:t.option("value"))&&void 0!==a?a:[]),this.filterBuilderColunasParametrosInicial=window.clone_obj(null!==(o=null===u.a||void 0===u.a||null===(i=u.a.temp)||void 0===i||null===(s=i.cubo)||void 0===s?void 0:s.colunasParametros["DataGridCubo_"+this.props.cubo_id])&&void 0!==o?o:[]),this.limparColunasParametrosNaoUtilizados()},onDisposing:e=>{var a,t,o,i,s;if(this.filterBuilderValueFinal=window.clone_obj(null!==(a=null===e||void 0===e||null===(t=e.component)||void 0===t?void 0:t.option("value"))&&void 0!==a?a:[]),this.filterBuilderColunasParametrosFinal=window.clone_obj(null!==(o=null===u.a||void 0===u.a||null===(i=u.a.temp)||void 0===i||null===(s=i.cubo)||void 0===s?void 0:s.colunasParametros["DataGridCubo_"+this.props.cubo_id])&&void 0!==o?o:[]),window.isEquivalent(this.filterBuilderValueInicial,this.filterBuilderValueFinal)&&!window.isEquivalent(this.filterBuilderColunasParametrosInicial,this.filterBuilderColunasParametrosFinal)){var n,r,d,l;const e=null!==(n=null===(r=this.dataGridRef)||void 0===r||null===(d=r.current)||void 0===d||null===(l=d.instance)||void 0===l?void 0:l.state())&&void 0!==n?n:null;e.colunasParametros=this.filterBuilderColunasParametrosFinal,e&&u.a.set_parametro_usuario("DataGridCubo_"+this.props.cubo_id,e)}}};e=Object(O.jsx)(_.default,{ref:this.dataGridRef,style:{height:"calc(100vh - 79px)"},dataSource:this.state.datasource,columns:this.state.columns,remoteOperations:!1,onToolbarPreparing:e=>{var t=[{location:"after",locateInMenu:"never",template:()=>{let t=s()("<div></div>");return l.a.render(r.a.createElement(f.default,{chave:a,colunasAceitas:o,aoAlterarStateStoring:a=>{var t,o;e.component.option("stateStoring",a),e.component.refresh(),(null!==(t=null===(o=e.component.state())||void 0===o?void 0:o.colunasParametros)&&void 0!==t?t:[]).length>0&&e.component.option("filterBuilderPopup",{visible:!0})}}),t[0]),t}}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)},filterBuilder:i})}return Object(O.jsx)(r.a.Fragment,{children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-md-12",children:Object(O.jsxs)(m.a,{swipeEnabled:!1,children:[Object(O.jsx)(p.Item,{title:"DataGrid",icon:"fas fa-list",children:e}),Object(O.jsxs)(p.Item,{title:"PivotGrid",icon:"dx-icon dx-icon-datafield",children:[Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,marginRight:5,float:"right"},children:Object(O.jsxs)("button",{className:"btn btn-default",onClick:this.exportarPivotGrid,children:[Object(O.jsx)("i",{class:"fas fa-file-export"}),"\xa0Exportar PivotGrid"]})}),Object(O.jsxs)(j.a,{ref:e=>{e&&(this.chart=e.instance)},style:{paddingTop:"10px"},className:"dx-theme-background-color",children:[Object(O.jsx)(w.Size,{height:200}),Object(O.jsx)(w.Tooltip,{enabled:!0,customizeTooltip:C}),Object(O.jsx)(w.CommonSeriesSettings,{type:"bar"}),Object(O.jsx)(w.AdaptiveLayout,{width:450})]}),Object(O.jsxs)(g.a,{style:{height:"calc(100vh - 335px)"},id:"pivotgrid",dataSource:this.state.datasourcePivot,onContextMenuPreparing:this.onContextMenuPreparing,allowSortingBySummary:!0,allowFiltering:!0,showBorders:!0,showColumnTotals:!1,showColumnGrandTotals:!1,showRowTotals:!1,showRowGrandTotals:!1,ref:e=>{e&&(this.pivotGrid=e.instance,this.pivotGrid.bindChart(this.chart,{dataFieldsDisplayMode:"splitPanes",alternateDataFields:!1}))},children:[Object(O.jsx)(v.FieldChooser,{enabled:!0,height:400}),Object(O.jsx)(v.FieldPanel,{visible:!0}),Object(O.jsx)(v.Scrolling,{mode:"virtual"}),Object(O.jsx)(v.StateStoring,{enabled:!0,type:"custom",customLoad:()=>{const e=u.a.get_parametro_usuario("PivotGridCubo_"+this.props.cubo_id);return!(!e||!e.fields)&&(setTimeout((()=>{for(let a=0;a<e.fields.length;a++){const t=e.fields[a];t.summaryType&&this.state.datasourcePivot.field(a,{summaryType:t.summaryType,dataType:t.summaryType&&"count"!==t.summaryType?"number":null,format:"#,##0.##"})}this.state.datasourcePivot.load()})),e)},customSave:e=>u.a.set_parametro_usuario("PivotGridCubo_"+this.props.cubo_id,e)})]},this.getKey())]})]})})})})}onContextMenuPreparing(e){if(e.field&&"data"===e.field.area){let a=[];x.forEach((t=>{a.push({text:t.text,selected:e.summaryType===t.value,onItemClick:()=>{this.state.datasourcePivot.field(e.field?e.field.index:e.cell.dataSourceIndex,{summaryType:t.value,dataType:t.value&&"count"!==t.value?"number":null,format:"#,##0.##"}),this.state.datasourcePivot.load()}})})),e.items.push({text:"Tipo de Resumo",items:a})}}handleOpcoesTipoColuna(e){const a={dataType:"string"};return+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA||+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA_HORA?(a.dataType=+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA?"date":"datetime",a.format=+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA?"dd/MM/yyyy":"dd/MM/yyyy HH:mm",a.allowGrouping=!1,a.allowHeaderFiltering=!1):+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_NUMERO&&(a.dataType="number"),a}exportarPivotGrid(){u.a.obter_token_publico((e=>{const a=window.WS_URI+"/cubo/exportar_pivotgrid/?token_publico="+e+"&cubo_id="+this.props.cubo_id;window.open(a,"_blank")}))}}function C(e){return{html:"".concat(e.seriesName," | Total<div>").concat(e.originalValue,"</div>")}}A.defaultProps={abaTitulo:"Cubo"},a.default=A},753:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return r}));var o=t(248),i=(t(247),t(281)),s=t(754),n=t(244);function r(e){return Object(n.jsx)(i.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(s.a)()})))}r.defaultProps={valueExpr:"tecnico_id",displayExpr:"nome",dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridSearchPanelEnabled:!1,columns:[{dataField:"nome",caption:"Nome"}]}},754:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({paginate:!0,pageSize:20,key:"tecnico_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"/tecnico/listar/",data:Object(o.a)({dx_grid:!0,apontamento_rapido:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"/tecnico/listar/",data:{dx_grid:!0,tecnico_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),r=(e,a,t)=>{s.a.post({route:"/apontamento_projeto/salvar_tela_apontamento_simples/",data:{apontamentos:e,usuario_id:a},func_response(e){"function"===typeof t&&t()},func_fail(e){}})}},755:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({pageSize:20,key:"cargo_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"cargo/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"cargo/listar/",data:{dx_grid:!0,cargo_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},756:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _Users_bighetti_Workspace_bp_24x_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(248),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(247),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(380),react_dom__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__),_datasource_Documento__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(558),_datasource_AssuntoDocumento__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(740),_datasource_TipoDocumento__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(741),_api_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(87),_api_view__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(271),_api_ws__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(253),_MenuHorizontal__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1045),jquery__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43),jquery__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_10__),devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(707),devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__),devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(321),devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_12__),devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(375),devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_13__),devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(373),devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_14__),react_split__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1135),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(244),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);class ListagemDocumentos extends react__WEBPACK_IMPORTED_MODULE_1___default.a.Component{constructor(props){super(props),this.verificaPermissaoGED=(obj_atual,tipo_permissao)=>{if(_api_app__WEBPACK_IMPORTED_MODULE_6__.a.sessao.dados.admin)return!0;var arr_permitido=["seguranca","exclusao","escrita","visualizacao","download","nova_revisao"];if(!arr_permitido.includes(tipo_permissao))return!1;let pasta_pai=this.state.arrCurrentPath?this.state.arrCurrentPath[this.state.arrCurrentPath.length-1]:null;if(obj_atual&&tipo_permissao){if(!("N"!=obj_atual.controle_acessos&&0!=obj_atual.controle_acessos||"N"!=pasta_pai.controle_acessos&&0!=pasta_pai.controle_acessos))return!0;if("S"==obj_atual.controle_acessos||1==obj_atual.controle_acessos){var permissao_usuario=eval("obj_atual.usuario_permissao_"+tipo_permissao),permissao_grupo=eval("obj_atual.grupo_usuarios_permissao_"+tipo_permissao);return"S"==permissao_usuario||1==permissao_usuario||"S"==permissao_grupo||1==permissao_grupo}if("S"==pasta_pai.controle_acessos||1==pasta_pai.controle_acessos){var permissao_usuario=eval("pasta_pai.usuario_permissao_"+tipo_permissao),permissao_grupo=eval("pasta_pai.grupo_usuarios_permissao_"+tipo_permissao);return"S"==permissao_usuario||1==permissao_usuario||"S"==permissao_grupo||1==permissao_grupo}}return!1},this.elementoArvore=null,this.carregamentoInicial=!0,this.selectedNode=null,this.fileManagerRef=react__WEBPACK_IMPORTED_MODULE_1___default.a.createRef(),this.state={fileItems:[],exibirExpirados:!1,exibirBloqueados:!1,exibirAtivos:!0,limite:0,permiteCarregarMais:!0,pesquisa:null,assuntoId:null,tipoDocumentoId:null,dataInicio:null,dataFim:null,centralDocumentosParams:null,contextMenuItemSelected:null,itemsSelected:{documentos:[],pastas:[],documentosNome:[],pastasNome:[],permissoes:{download:!1,exclusao:!1,visualizacao:!1,escrita:!1,seguranca:!1}},areaTransferencia:{tipo:null,documentos:[],pastas:[],documentosNome:[],pastasNome:[]},itemSelected:null,orderByNome:null,orderByAsc:!0,posicaoScrollTop:0},this.newFileMenuOptions={items:[{text:"Novo Documento",icon:"plus",items:[{text:"Envio simples",tipo:"simples"},{text:"Envio m\xfaltiplo",tipo:"multiplo"}]}],onItemClick:this.onItemClick.bind(this)},this.newFolder={items:[{text:"Nova Pasta",icon:"newfolder",tipo:"pasta"}],onItemClick:this.onItemClick.bind(this)},this.refresh={icon:"refresh",hint:"Recarregar",onClick:()=>{this.recarregarPastaAtual(!1)}},this.exibirExpirados=()=>({icon:"event",hint:this.state.exibirExpirados?"Ocultar Expirados":"Exibir Expirados",elementAttr:{style:this.state.exibirExpirados?"background-color: rgba(0,0,0,.3);":""},onClick:()=>{this.setState({exibirExpirados:!this.state.exibirExpirados}),this.recarregarPastaAtual(!1)}}),this.exibirBloqueados=()=>({icon:"fas fa-ban",hint:this.state.exibirBloqueados?"Ocultar Bloqueados":"Exibir Bloqueados",elementAttr:{style:this.state.exibirBloqueados?"background-color: rgba(0,0,0,.3);":""},onClick:()=>{this.setState({exibirBloqueados:!this.state.exibirBloqueados}),this.recarregarPastaAtual(!1)}}),this.exibirAtivos=()=>({icon:"fas fa-check",hint:this.state.exibirAtivos?"Ocultar Ativos e Pendentes":"Exibir Ativos e Pendentes",elementAttr:{style:this.state.exibirAtivos?"background-color: rgba(0,0,0,.3);":""},onClick:()=>{this.setState({exibirAtivos:!this.state.exibirAtivos}),this.recarregarPastaAtual(!1)}}),this.configuracoes={icon:"preferences",visible:_api_app__WEBPACK_IMPORTED_MODULE_6__.a.sessao.dados.admin,hint:"Configura\xe7\xf5es",onClick:()=>{_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/configuracoes",((e,a)=>{a.onclose=e=>{"undefined"==typeof e&&(e=!1),e&&this.atualizarParametros()},a.show()}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.NAO)}};const loadDropDownButtonsItems=function(){var e;if("function"!==typeof(null===_api_app__WEBPACK_IMPORTED_MODULE_6__.a||void 0===_api_app__WEBPACK_IMPORTED_MODULE_6__.a||null===(e=_api_app__WEBPACK_IMPORTED_MODULE_6__.a.PE)||void 0===e?void 0:e.Listagem_Documentos_Botoes_Toolbar))return[];const a=_api_app__WEBPACK_IMPORTED_MODULE_6__.a.PE.Listagem_Documentos_Botoes_Toolbar();return Array.isArray(a)?a:[]};this.dropDownButtonsOptions={text:"Mais op\xe7\xf5es",displayExpr:"name",valueExpr:"id",width:150,onItemClick:e=>{var a;"function"===typeof(null===(a=e.itemData)||void 0===a?void 0:a.itemClick)?e.itemData.itemClick(e,this):window.alert_info("Nenhuma a\xe7\xe3o de clique configurada para este bot\xe3o.")},items:loadDropDownButtonsItems()},this.btnCarregarMaisOnClick=()=>{this.state.permiteCarregarMais?(this.setState({limite:this.state.limite+50}),this.recarregarPastaAtual(!0)):window.alertaPopUp("Aten\xe7\xe3o","<p>N\xe3o existem mais registros para serem carregados nesta pasta.</p>")},this.fnColar=e=>{const a=this.state.arrCurrentPath?this.state.arrCurrentPath[this.state.arrCurrentPath.length-1]:null;if(this.verificaPermissaoGED(a,"escrita"))if(this.state.areaTransferencia.pastas.length>0||this.state.areaTransferencia.documentos.length>0){let a=this.state.arrCurrentPath?this.state.arrCurrentPath[this.state.arrCurrentPath.length-1]:{},t="recorte"==this.state.areaTransferencia.tipo?"Mover arquivos":"Copiar Arquivos",o="Tem certeza que deseja "+("recorte"==this.state.areaTransferencia.tipo?"mover":"copiar")+" esses arquivos?<br><br>"+(this.state.areaTransferencia.pastasNome.length>0?this.state.areaTransferencia.pastasNome.join("<br>")+"<br>":"")+(this.state.areaTransferencia.documentosNome.length>0?this.state.areaTransferencia.documentosNome.join("<br>"):"");window.alertaPopUp(t,o,"Sim",(()=>{let t=0;if(t=e?a.id||0:this.state.itemsSelected.pastas[0]||a.id||0,!t)return window.alertaPopUp("Valida\xe7\xe3o","Falha ao colar os arquivos. A pasta de destino n\xe3o foi informada."),!1;_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(this.state.areaTransferencia.pastas),documentos:JSON.stringify(this.state.areaTransferencia.documentos),colar:!0,option:this.state.areaTransferencia.tipo,pasta_destino_id:t},(()=>{this.recarregarPastaAtual(),window.alert_saved("Arquivos "+("recorte"==this.state.areaTransferencia.tipo?"movidos":"copiados")+" com sucesso"),"recorte"==this.state.areaTransferencia.tipo&&this.setState({areaTransferencia:{tipo:null,pastas:[],documentos:[],pastasNome:[],documentosNome:[]}})}))}),"N\xe3o")}else window.alertaPopUp("Aten\xe7\xe3o","<p>N\xe3o existem registros para serem colados.</p>");else window.alertaPopUp("Aten\xe7\xe3o","<p>Voc\xea n\xe3o possui permiss\xe3o de escrever nessa pasta.</p>")},this.colar={icon:"fa fa-clipboard",hint:"Colar na pasta atual",onClick:()=>{this.fnColar(!0)}},this.exportar={hint:"Exportar",items:[{icon:"export",items:[{text:"Documentos desta pasta (XLSX)",icon:"exportxlsx",tipo:"pasta_atual_xlsx"},{text:"Documentos desta pasta (CSV)",icon:"fas fa-file-csv",tipo:"pasta_atual_csv"},{text:"Documentos desta pasta e sub pastas (XLSX)",icon:"exportxlsx",tipo:"pasta_atual_subpastas_xlsx"},{text:"Documentos desta pasta e sub pastas (CSV)",icon:"fas fa-file-csv",tipo:"pasta_atual_subpastas_csv"}]}],onItemClick:this.onItemClick.bind(this)},this.onCurrentDirectoryChanged=this.onCurrentDirectoryChanged.bind(this),this.onSelectedFileOpened=this.onSelectedFileOpened.bind(this),this.carregarDados=this.carregarDados.bind(this),this.renderArvore=this.renderArvore.bind(this),this.onItemClick=this.onItemClick.bind(this),this.recarregarPastaAtual=this.recarregarPastaAtual.bind(this),this.onContextMenuShowing=this.onContextMenuShowing.bind(this),this.onSelectionChanged=this.onSelectionChanged.bind(this),this.adicionarEventoOrdenacao=this.adicionarEventoOrdenacao.bind(this),this.favoritosAdicionarClick=this.favoritosAdicionarClick.bind(this),this.favoritosRemoverClick=this.favoritosRemoverClick.bind(this),this.refreshArvore=this.refreshArvore.bind(this)}componentDidMount(){this.carregamentoInicial=!0,this.atualizarParametros()}atualizarParametros(){_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.get("documento/get_parametros/",null,(e=>{this.setState({centralDocumentosParams:e}),this.recarregarPastaAtual(!1)}))}detalharPasta(e,a){let t=e=>{"undefined"==typeof e&&(e=!1),e&&this.refreshArvore()};_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/pasta",((o,i)=>{i.pasta_notificacao=null!=e&&"undefined"!=typeof e.notificar_por_email&&null!=e.notificar_por_email&&e.notificar_por_email||!1,i.onclose=t,i.show(a===window.FORMULARIO.NOVO?null:e.id,a,e)}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.MULTIPLAS)}detalharDocumento(e,a,t,o){let i=e=>{"undefined"==typeof e&&(e=!1),e&&this.carregarDados(a)};_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/documento",((s,n)=>{n.onclose=i,n.show(e,t,a,null,o)}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.MULTIPLAS)}async carregarDados(e,a,t){const o=this.fileManagerRef.current.instance._itemView._filesView?this.fileManagerRef.current.instance._itemView._filesView.getScrollable():this.fileManagerRef.current.instance._itemView._itemList.getScrollable(),i=o&&a?o.scrollTop():0;let s={documentoPastaID:e,exibirExpirados:this.state.exibirExpirados,exibirBloqueados:this.state.exibirBloqueados,exibirAtivos:this.state.exibirAtivos,limite:a?this.state.limite:0,pesquisa:this.state.pesquisa,assuntoId:this.state.assuntoId,tipoDocumentoId:this.state.tipoDocumentoId,dataInicio:this.state.dataInicio,dataFim:this.state.dataFim,orderByNome:this.state.orderByNome,orderByAsc:this.state.orderByAsc};const n=await Object(_datasource_Documento__WEBPACK_IMPORTED_MODULE_3__.a)(s);let r=[];for(let d=0;d<n.pastas.length;d++){const e=n.pastas[d];let a=e.nome;window.verifica_favorito("pastas",e.atalho_documento_pasta_id>0?e.atalho_documento_pasta_id:e.documento_pasta_id)&&(a+=" ((Favorito))"),e.atalho_documento_pasta_id>0&&(a+=" ((Atalho))"),r.push(Object(_Users_bighetti_Workspace_bp_24x_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)({name:a.replaceAll("/","\u29f8"),isDirectory:!0},e))}for(let d=0;d<n.documentos.length;d++){const e=n.documentos[d];let a=e.nome;window.verifica_favorito("documentos",e.atalho_documento_id>0?e.atalho_documento_id:e.documento_id)&&(a+=" ((Favorito))"),e.atalho_documento_id>0&&(a+=" ((Atalho))"),e.revisao_data_envio&&(e.revisao_data_envio=e.revisao_data_envio.format_date()),r.push(Object(_Users_bighetti_Workspace_bp_24x_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)({name:a,isDirectory:!1,size:e.revisao_tamanho},e))}n.pasta_atual_predecessoras.unshift(n.pasta_atual),n.pasta_atual_predecessoras.reverse(),this.setState({fileItems:a?[...this.state.fileItems,...r]:r,arrCurrentPath:n.pasta_atual_predecessoras,limite:a?this.state.limite:0,permiteCarregarMais:!(n.pastas.length<50&&n.documentos.length<50),totalizador:n.totalizador_geral,posicaoScrollTop:i},(()=>{"function"===typeof t&&t()})),e&&!this.carregamentoInicial?this.elementoArvore.jstree("open_node",e):this.carregamentoInicial&&(this.carregamentoInicial=!1)}onItemClick(e){let{itemData:a,viewArea:t,fileSystemItem:o}=e,i=this.state.arrCurrentPath[this.state.arrCurrentPath.length-1];if("pasta"===a.tipo)this.detalharPasta(i,window.FORMULARIO.NOVO);else if("simples"===a.tipo)this.detalharDocumento(null,i.id,window.FORMULARIO.NOVO,!1);else if("multiplo"===a.tipo)_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("upload/envio_multiplo",((e,a)=>{a.onclose=()=>{this.carregarDados(i.id)},a.show(i.id)}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.SIM);else if("pasta_atual_xlsx"===a.tipo||"pasta_atual_csv"===a.tipo||"pasta_atual_subpastas_xlsx"===a.tipo||"pasta_atual_subpastas_csv"===a.tipo)window.alertaPopUp("Relat\xf3rio de documentos","<h4>Por favor, aguarde!</h4> <p>O relat\xf3rio de documentos est\xe1 sendo gerado. Quanto maior a quantidade de arquivos, maior o tempo que o relat\xf3rio levar\xe1 para ser processado.</p> <p>Voc\xea pode fechar esta janela a qualquer momento.</p>"),_api_app__WEBPACK_IMPORTED_MODULE_6__.a.obter_token_publico((e=>{_api_app__WEBPACK_IMPORTED_MODULE_6__.a.download(window.WS_URI+"documento/gera_excel_pasta/?documento_pasta_id="+i.id+"&subpastas="+("pasta_atual_subpastas_xlsx"===a.tipo||"pasta_atual_subpastas_csv"===a.tipo?"S":"N")+"&extensao="+("pasta_atual_xlsx"===a.tipo||"pasta_atual_subpastas_xlsx"===a.tipo?"xlsx":"csv")+"&token_publico="+e)}));else if("propriedades"===a.tipo)o.dataItem.isDirectory?(o.dataItem.id=o.dataItem.documento_pasta_id,this.detalharPasta(o.dataItem,window.FORMULARIO.EDITAR)):this.detalharDocumento(o.dataItem.documento_id,o.dataItem.documento_pasta_id,window.FORMULARIO.EDITAR,!1);else if("abrir_pasta"===a.tipo)this.carregarDados(o.dataItem.documento_pasta_id);else if("download_zip"===a.tipo)window.alert_info("Aguarde alguns segundos para que o download seja iniciado. Quanto mais arquivos, mais demorado ser\xe1 para gerar um arquivo ZIP."),_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.get({route:"documento/solicitar_download_zip/",data:{pastas:this.state.itemsSelected.pastas.join(),documentos:this.state.itemsSelected.documentos.join()},func_response:e=>{"undefined"!=typeof e.nome_arquivo_zip&&_api_app__WEBPACK_IMPORTED_MODULE_6__.a.obter_token_publico((a=>{_api_app__WEBPACK_IMPORTED_MODULE_6__.a.download(window.WS_URI+"documento/download_zip/?nome_arquivo_zip="+e.nome_arquivo_zip+"&token_publico="+a)}))}});else if("compactar_zip"===a.tipo)_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.get({route:"documento/compactar_zip/",data:{pastas:this.state.itemsSelected.pastas.join(),documentos:this.state.itemsSelected.documentos.join(),documento_pasta_id:i.id},func_response:e=>{this.recarregarPastaAtual(!1,(()=>{this.fileManagerRef.current.instance.resetOption("selectedItemKeys"),this.fileManagerRef.current.instance.option("selectedItemKeys",[e.nome]),this.fileManagerRef.current.instance.option("focusedItemKey",e.nome)}))}});else if("exclusao"===a.tipo){var s="Tem certeza que deseja mover esses arquivos para a lixeira?<br><br>"+(this.state.itemsSelected.pastasNome.length>0?this.state.itemsSelected.pastasNome.join("<br>")+"<br>":"")+(this.state.itemsSelected.documentosNome.length>0?this.state.itemsSelected.documentosNome.join("<br>"):"");window.alertaPopUp("Excluir",s,"Sim",(()=>{_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(this.state.itemsSelected.pastas),documentos:JSON.stringify(this.state.itemsSelected.documentos),excluir:!0},(()=>{this.recarregarPastaAtual(!1),window.alert_saved("Arquivos exclu\xeddos com sucesso")}))}),"N\xe3o")}else if("copiar"===a.tipo||"recorte"===a.tipo)this.setState({areaTransferencia:{tipo:a.tipo,pastas:this.state.itemsSelected.pastas,documentos:this.state.itemsSelected.documentos,pastasNome:this.state.itemsSelected.pastasNome,documentosNome:this.state.itemsSelected.documentosNome}});else if("colar"===a.tipo)this.fnColar(!1);else if("criar_atalho"===a.tipo)_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/selecionar_pasta",((e,a)=>{a.show((e=>{_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.post("documento/salvar_atalho",{pastas:JSON.stringify(this.state.itemsSelected.pastas),documentos:JSON.stringify(this.state.itemsSelected.documentos),predecessor_id:e},(e=>{this.recarregarPastaAtual(),1==e.atalhos.length?window.alert_saved('Atalho criado com sucesso em "'+e.predecessor.path+'"'):window.alert_saved(e.atalhos.length+' atalhos criados com sucesso em "'+e.predecessor.path+'"')}))}),null)}));else if("download"===a.tipo)_api_app__WEBPACK_IMPORTED_MODULE_6__.a.obter_token_publico((e=>{_api_app__WEBPACK_IMPORTED_MODULE_6__.a.download(window.WS_URI+"documento/download/?&documento_id="+this.state.itemsSelected.documentos[0]+"&token_publico="+e)}));else if("nova_revisao"===a.tipo)this.detalharDocumento(o.dataItem.documento_id,o.dataItem.documento_pasta_id,window.FORMULARIO.EDITAR,!0);else if("bloquear"===a.tipo)_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.get("documento/situacao_ultima_revisao/",{documento_id:o.dataItem.atalho_documento_id>0?o.dataItem.atalho_documento_id:o.dataItem.documento_id},(e=>{if(null==e)window.alertaPopUp("Aten\xe7\xe3o !",'<div class="alert alert-danger" style="text-align: center"> <span href="#" class="alert-link"><strong>N\xe3o \xe9 possivel bloquear documentos com revis\xf5es </strong>pendentes<strong></span></div>');else if("N"!=e||this.state.centralDocumentosParams.documentos_permitir_bloquear_reprovados){let e=null,a=null;"S"==o.dataItem.bloqueado?(e="N",a='Tem certeza que deseja desbloquear o arquivo "'+o.dataItem.nome+'"?'):"N"!=o.dataItem.bloqueado&&""!=o.dataItem.bloqueado||(e="S",a='Tem certeza que deseja bloquear o arquivo "'+o.dataItem.nome+'"?'),window.alertaPopUp("Documentos",a,"Sim",(()=>{"N"==e?_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.post("documento/salva_motivo_bloqueio",{bloqueado:e,documento_id:o.dataItem.atalho_documento_id>0?o.dataItem.atalho_documento_id:o.dataItem.documento_id},(e=>{this.recarregarPastaAtual(!1),window.alert_saved("Salvo com sucesso")})):_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/selecao_motivo",((a,t)=>{t.show(o.dataItem.atalho_documento_id>0?o.dataItem.atalho_documento_id:o.dataItem.documento_id,e),t.onsave=()=>{this.recarregarPastaAtual(!1)}}))}),"N\xe3o")}else window.alertaPopUp("Aten\xe7\xe3o !",'<div class="alert alert-danger" style="text-align: center"> <span href="#" class="alert-link"><strong>N\xe3o \xe9 possivel bloquear documentos com a ultima revis\xe3o </strong>reprovada<strong></span></div>')}));else if("visualizar"===a.tipo||"visualizar_aba"===a.tipo)if(o.dataItem.documento_revisao_id)if(this.state.itemsSelected.permissoes.visualizacao){let e=o.dataItem.documento_revisao_id,t=o.dataItem.documento_id,i=o.dataItem.nome,s=o.dataItem.bloqueado,n=o.dataItem.utilizar_controle_distribuicao,r=this.state.itemsSelected.permissoes.download;"application/pdf"===o.dataItem.mime_type?"visualizar"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/visualizar_pdf",((a,o)=>{o.show(e,null,t,"S","S",s,n,r)})):"visualizar_aba"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_7__.a.loadReact(window.components.VisualizarPDFAba.default,{documento_revisao_id:e,documento_id:t,permissao_download:r,abaTitulo:"PDF: ".concat(i)}):o.dataItem.mime_type.includes("image/")?"visualizar"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/visualizar_documento",((a,o)=>{o.show(e,t,"S","S",s,n,r)})):"visualizar_aba"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_7__.a.loadReact(window.components.VisualizarImagemAba.default,{documento_revisao_id:e,documento_id:t,documento_nome:i,abaTitulo:"IMG: ".concat(i)}):o.dataItem.mime_type.includes("video/")&&("visualizar"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/visualizar_video",((a,o)=>{o.show(e,t,"S","S",s,n,r)})):"visualizar_aba"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_7__.a.loadReact(window.components.VisualizarVideoAba.default,{documento_revisao_id:e,documento_id:t,documento_nome:i,abaTitulo:"V\xeddeo: ".concat(i)}))}else window.alertaPopUp("Valida\xe7\xe3o","Voc\xea n\xe3o possui permiss\xe3o para visualizar o documento.");else window.alertaPopUp("Valida\xe7\xe3o","A visualiza\xe7\xe3o deste documento n\xe3o est\xe1 dispon\xedvel.");else if("gerar_url_acesso"===a.tipo){let e=null,a=function(a){e=window.DevExpress.ui.dialog.custom({title:"Link de acesso",messageHtml:"Abaixo, o link de acesso: <br><br> <a href="+a+" target='_blank'>"+a+"</a>",buttons:[{text:"OK",onClick:function(){e&&e.hide()}},{text:"Copiar link",onClick:function(e){window.copyToClipboard(a)}}]}),e.show()};o.dataItem.isDirectory?a(_api_app__WEBPACK_IMPORTED_MODULE_6__.a.sessao.dados.app_url+"/#/documento/pasta/"+o.dataItem.documento_pasta_id):a(_api_app__WEBPACK_IMPORTED_MODULE_6__.a.sessao.dados.app_url+"/#/documento/detalhe/"+o.dataItem.documento_id)}else if("gerar_url_download"===a.tipo){let e=()=>{_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.post("documento/gerar_url_download/",{documento_id:o.dataItem.documento_id},(e=>{window.alert_saved("URL de download do arquivo gerada com sucesso!"),t(e)}))},a=null,t=function(t){a=window.DevExpress.ui.dialog.custom({title:"Link de download",messageHtml:"Abaixo, o link de download para o documento: <br><br> <a href="+t+" target='_blank'>"+t+"</a> <br><br> <small>* Com esse link, qualquer usu\xe1rio poder\xe1 realizar o download do documento, mesmo que ele n\xe3o tenha cadastro no Next BP.</small> <br> <small>* Gerar um novo link ir\xe1 impossibilitar o download do documento pelo link atual.</small>",buttons:[{text:"OK",onClick:function(){a&&a.hide()}},{text:"Gerar novo link",onClick:function(t){a&&a.hide(),e()}},{text:"Copiar link",onClick:function(e){window.copyToClipboard(t)}}]}),a.show()};_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.get("documento/verificar_url_download/",{documento_revisao_id:o.dataItem.documento_revisao_id},(function(o){o?t(o):(a&&a.hide(),e())}))}else"assinaturas_clicksign"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("clicksign/detalhes",(function(e,a){a.show(o.dataItem.documento_revisao_id,o.dataItem),a.onclose=onclose}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.SIM):"assinaturas_certsign"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("certsign/detalhes",(function(e,a){a.show(o.dataItem.documento_revisao_id,o.dataItem),a.onclose=onclose}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.SIM):"assinaturas_d4sign"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("d4sign/detalhes",(function(e,a){a.show(o.dataItem.documento_revisao_id,o.dataItem),a.onclose=onclose}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.MULTIPLAS)}adicionarEventoSituacao(e){e.element.find(".dx-filemanager-details").find(".dx-scrollable-container").on("scroll",(()=>{setTimeout((()=>{this.tratarLinhas(e)}),500),this.tratarLinhas(e)})),this.tratarLinhas(e),e.component.element().find(".dx-drawer-panel-content.dx-overlay.dx-widget.dx-visibility-change-handler").hide()}tratarLinhas(e){this.adicionarZebra(e),this.adicionarCoresSituacao(e),this.adicionarIcones(e),this.adicionarEventoOrdenacao(e)}adicionarEventoOrdenacao(e){e.element.find("[role='columnheader'].thumbnailDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].tagDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].situacaoRevDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].vigenciaDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].codigoDoc").off("click").on("click",(()=>{this.setState({orderByNome:"codigo",orderByAsc:"codigo"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].nomeDoc").off("click").on("click",(()=>{this.setState({orderByNome:"nome",orderByAsc:"nome"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].assuntoDoc").off("click").on("click",(()=>{this.setState({orderByNome:"assunto",orderByAsc:"assunto"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].tipoDoc").off("click").on("click",(()=>{this.setState({orderByNome:"tipo_documento",orderByAsc:"tipo_documento"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].versaoDoc").off("click").on("click",(()=>{this.setState({orderByNome:"versao",orderByAsc:"versao"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].tamanhoDoc").off("click").on("click",(()=>{this.setState({orderByNome:"tamanho",orderByAsc:"tamanho"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].modificacaoDoc").off("click").on("click",(()=>{this.setState({orderByNome:"modificacao",orderByAsc:"modificacao"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].dataAprovacaoRevDoc").off("click").on("click",(()=>{this.setState({orderByNome:"data_aprovacao",orderByAsc:"data_aprovacao"!==this.state.orderByNome||!this.state.orderByAsc,fileItems:[]}),this.recarregarPastaAtual(!1)}));let a=this.state.orderByAsc?"dx-sort-up":"dx-sort-down";"codigo"===this.state.orderByNome?e.element.find("[role='columnheader'].codigoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"nome"===this.state.orderByNome?e.element.find("[role='columnheader'].nomeDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"assunto"===this.state.orderByNome?e.element.find("[role='columnheader'].assuntoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"tipo_documento"===this.state.orderByNome?e.element.find("[role='columnheader'].tipoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"versao"===this.state.orderByNome?e.element.find("[role='columnheader'].versaoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"tamanho"===this.state.orderByNome?e.element.find("[role='columnheader'].tamanhoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"data_aprovacao"===this.state.orderByNome&&e.element.find("[role='columnheader'].dataAprovacaoRevDoc .dx-sort").removeClass("dx-sort-none").addClass(a)}adicionarZebra(e){const a=e.element.find(".dx-data-row");for(let t=0;t<a.length;t++){const e=a[t];t%2!==0?jquery__WEBPACK_IMPORTED_MODULE_10___default()(e).addClass("dx-row-alt"):jquery__WEBPACK_IMPORTED_MODULE_10___default()(e).removeClass("dx-row-alt")}}adicionarCoresSituacao(e){e.element.find(".situacaoRevDoc:contains('Bloqueado')").addClass("bg-label-danger fa fa-ban").css("display","revert"),e.element.find(".situacaoRevDoc:contains('Expirado')").addClass("bg-label-default"),e.element.find(".situacaoRevDoc:contains('Pendente')").addClass("bg-label-warning"),e.element.find(".situacaoRevDoc:contains('Reprovado')").addClass("bg-label-danger"),e.element.find(".situacaoRevDoc:contains('Ativo')").addClass("bg-label-success"),e.element.find(".situacaoRevDoc:contains('Arquivo n\xe3o enviado')").addClass("bg-label-default")}adicionarIcones(e){const a=e.element.find(".nomeDoc").closest("tr").not(".dx-header-row");jquery__WEBPACK_IMPORTED_MODULE_10___default()(a).each(((e,a)=>{const t=jquery__WEBPACK_IMPORTED_MODULE_10___default()(a).find(".thumbnailDoc");t.css("text-align","left");if(t.find(".div_info").length>0)return;t.append('<div class="div_info" style="display: inline-flex"><div class="div_info_icones" style="display: inline-flex; flex-direction: column; row-gap: 2px;"></div></div>');const o=jquery__WEBPACK_IMPORTED_MODULE_10___default()(a).find(".nomeDoc:contains('((Atalho))')").length>0,i=jquery__WEBPACK_IMPORTED_MODULE_10___default()(a).find(".nomeDoc:contains('((Favorito))')").length>0,s=t.find(".div_info"),n=t.find("i");n.detach(),n.prependTo(s);const r=s.find(".div_info_icones"),d=jquery__WEBPACK_IMPORTED_MODULE_10___default()(a).find(".dx-filemanager-details-item-name-wrapper");i&&0===r.find(".img_favorito").length&&(r.append('<i class="far fa-star img_favorito" style="font-size: 7px;" title="Favorito"></i>'),jquery__WEBPACK_IMPORTED_MODULE_10___default()(d).text(jquery__WEBPACK_IMPORTED_MODULE_10___default()(d).text().replace(/\(\(Favorito\)\)/g,"").trim())),o&&0===r.find(".img_atalho").length&&(r.append('<i class="fa fa-external-link-alt img_atalho" style="font-size: 7px;" title="Atalho"></i>'),jquery__WEBPACK_IMPORTED_MODULE_10___default()(d).text(jquery__WEBPACK_IMPORTED_MODULE_10___default()(d).text().replace(/\(\(Atalho\)\)/g,"").trim()))}))}onContextMenuShowing(e){e.fileSystemItem&&this.setState({contextMenuItemSelected:e.fileSystemItem.dataItem})}onSelectionChanged(e){let a=null,t=[],o=[],i=[],s=[],n=[],r=[],d={download:!0,exclusao:!0,visualizacao:!0,escrita:!0,seguranca:!0,nova_revisao:!1};for(let l=0;l<e.selectedItems.length;l++){const c=e.selectedItems[l];c.isDirectory?(o.push(c.dataItem.documento_pasta_id),s.push(c.dataItem.nome),c.dataItem.atalho_documento_pasta_id>0&&r.push({index:l,documento_pasta_id:c.dataItem.documento_pasta_id,atalho_documento_pasta_id:c.dataItem.atalho_documento_pasta_id})):(t.push(c.dataItem.documento_id),i.push(c.dataItem.nome),c.dataItem.atalho_documento_id>0&&n.push({index:l,documento_id:c.dataItem.documento_id,atalho_documento_id:c.dataItem.atalho_documento_id})),1===e.selectedItems.length&&(a=c),d.download=this.verificaPermissaoGED(c.dataItem,"download"),d.exclusao=this.verificaPermissaoGED(c.dataItem,"exclusao"),d.visualizacao=this.verificaPermissaoGED(c.dataItem,"visualizacao"),d.escrita=this.verificaPermissaoGED(c.dataItem,"escrita"),d.seguranca=this.verificaPermissaoGED(c.dataItem,"seguranca"),d.nova_revisao=this.verificaPermissaoGED(c.dataItem,"nova_revisao")}this.setState({itemsSelected:{pastas:o,documentos:t,pastasNome:s,documentosNome:i,pastasAtalho:r,documentosAtalho:n,permissoes:d},itemSelected:a})}onCurrentDirectoryChanged(e){if(e.directory.dataItem){this.carregarDados(e.directory.dataItem.documento_pasta_id);let a=e.component.element().find(".dx-menu-items-container").last();react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_MenuHorizontal__WEBPACK_IMPORTED_MODULE_9__.a,{}),a[0])}}onSelectedFileOpened(e){var a,t;const o=null!==(a=null===e||void 0===e||null===(t=e.file)||void 0===t?void 0:t.dataItem)&&void 0!==a?a:null;o&&this.detalharDocumento(o.documento_id,o.documento_pasta_id,window.FORMULARIO.EDITAR,!1)}renderArvore(){this.elementoArvore.jstree({contextmenu:{items:{Abrir:{label:"Abrir",icon:"fa fa-folder-open",action:e=>{let a=jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.reference).jstree(!0).get_node(jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.reference).jstree(!0).get_selected()).original.pasta_id;this.carregarDados(a)}},Propriedades:{label:"Propriedades",icon:"fa fa-edit",action:e=>{let a=jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.reference).jstree(!0).get_node(jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.reference).jstree(!0).get_selected()).original.pasta_id;_api_view__WEBPACK_IMPORTED_MODULE_7__.a.load("central_documentos/pasta",((e,t)=>{t.onclose=e=>{"undefined"==typeof e&&(e=!1),e&&this.refreshArvore()},t.show(a,window.FORMULARIO.EDITAR)}),_api_view__WEBPACK_IMPORTED_MODULE_7__.a.ABA.MULTIPLAS)}}}},types:{default:{icon:"far fa-folder"},"f-open":{icon:"far fa-folder-open"},"f-closed":{icon:"far fa-folder"}},plugins:["json_data","contextmenu","sort","types"],core:{check_callback:!0,multiple:!1,data:(e,a)=>{var t;t="#"==e.id?null:e.original.pasta_id,_api_ws__WEBPACK_IMPORTED_MODULE_8__.a.get("documento/listar_arvore_pastas/",{documento_pasta_id:t,estrutura_completa:"N"},(e=>{a(e)}))},themes:{icons:!0}}}),this.elementoArvore.unbind("hover_node.jstree").on("hover_node.jstree",((e,a)=>{jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.target).find("#"+a.node.id).prop("title",a.node.text)})),this.elementoArvore.unbind("open_node.jstree").on("open_node.jstree",((e,a)=>{a.instance.set_type(a.node,"f-open")})),this.elementoArvore.unbind("close_node.jstree").on("close_node.jstree",((e,a)=>{a.instance.set_type(a.node,"f-closed")})),this.elementoArvore.unbind("select_node.jstree").on("select_node.jstree",((e,a)=>{var t=window.event||e,o=t.which||t.button;if(1!=o&&"undefined"!=typeof o)return!1;this.selectedNode=a.node.id,this.carregarDados(a.node.id)}));let e=1;this.elementoArvore.on("loaded.jstree",(()=>{this.state.arrCurrentPath&&this.state.arrCurrentPath.length>1&&a()}));const a=()=>{if(e>=this.state.arrCurrentPath.length)return;const t=this.state.arrCurrentPath[e];this.elementoArvore.jstree("open_node",t.id,(()=>{e++,a()}))}}recarregarPastaAtual(){var e;let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.state.arrCurrentPath?this.state.arrCurrentPath[this.state.arrCurrentPath.length-1].id:null!==(e=this.props.documentoPastaId)&&void 0!==e?e:null;this.carregarDados(o||null,a,t)}renderCarregarMaisRegistros(e){const a=jquery__WEBPACK_IMPORTED_MODULE_10___default()('<a href="#"><i class="dx-icon fas fa-folder-plus" style="font-size: 16px;"></i>&nbsp;Carregar mais registros</a>');a.on("click",this.btnCarregarMaisOnClick);const t=jquery__WEBPACK_IMPORTED_MODULE_10___default()('<div class="dx-filemanager-rodape" style="height: 35px; order: 10; padding: 6px 20px; text-align: center; position: relative;"></div>'),o=jquery__WEBPACK_IMPORTED_MODULE_10___default()('<div id="contador" style="position: absolute; top: 6px; right: 0; font-size: 14px; padding: 4px 8px; color: #333;"><span id="contador-numero" style="font-weight: bold;">'+this.state.fileItems.length+" de "+this.state.totalizador+" registros</span></div>");t.append(a),t.append(o),e.find(".dx-filemanager-items-panel .dx-filemanager-rodape").remove(),e.find(".dx-filemanager-items-panel").append(t),this.state.permiteCarregarMais?a.show():a.hide()}substituirAtalhos(e,a){for(let t=0;t<a.length;t++){const o=a[t];if(+e==+(o.documento_id||o.documento_pasta_id))return+(o.atalho_documento_id||o.atalho_documento_pasta_id)}return+e}favoritosAdicionarExibir(){for(let e=0;e<this.state.itemsSelected.pastas.length;e++){if(!window.verifica_favorito("pastas",this.substituirAtalhos(this.state.itemsSelected.pastas[e],this.state.itemsSelected.pastasAtalho)))return!0}for(let e=0;e<this.state.itemsSelected.documentos.length;e++){if(!window.verifica_favorito("documentos",this.substituirAtalhos(this.state.itemsSelected.documentos[e],this.state.itemsSelected.documentosAtalho)))return!0}return!1}favoritosRemoverExibir(){for(let e=0;e<this.state.itemsSelected.pastas.length;e++){if(window.verifica_favorito("pastas",this.substituirAtalhos(this.state.itemsSelected.pastas[e],this.state.itemsSelected.pastasAtalho)))return!0}for(let e=0;e<this.state.itemsSelected.documentos.length;e++){if(window.verifica_favorito("documentos",this.substituirAtalhos(this.state.itemsSelected.documentos[e],this.state.itemsSelected.documentosAtalho)))return!0}return!1}favoritarItens(e){let a=[];for(let t=0;t<this.state.itemsSelected.pastas.length;t++)a.push({tipo:"pastas",id:this.substituirAtalhos(this.state.itemsSelected.pastas[t],this.state.itemsSelected.pastasAtalho)});for(let t=0;t<this.state.itemsSelected.documentos.length;t++)a.push({tipo:"documentos",id:this.substituirAtalhos(this.state.itemsSelected.documentos[t],this.state.itemsSelected.documentosAtalho)});window.favoritar_itens(a,e),this.recarregarPastaAtual()}refreshArvore(){const e=this.elementoArvore.jstree(!0),a=[],t=e.get_json("#",{flat:!0});for(let o=0;o<t.length;o++){const e=t[o];e.state&&e.state.opened&&a.push(e.id)}this.elementoArvore.off("refresh.jstree").on("refresh.jstree",(function(){const e=jquery__WEBPACK_IMPORTED_MODULE_10___default()(this).jstree(!0);for(let t=0;t<a.length;t++){const o=a[t];e.get_node(o)&&e.open_node(o)}})),this.selectedNode&&(e.deselect_all(),e.select_node(this.selectedNode)),e.refresh()}favoritosAdicionarClick(){this.favoritarItens(!0)}favoritosRemoverClick(){this.favoritarItens(!1)}render(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("style",{children:"\n                        .split-layout {\n                            display: flex;\n                            height: 100vh;\n                        }\n\n                        .split-layout .gutter {\n                            background-color: #e0e0e0;\n                            transition: background-color 0.2s;\n                        }\n\n                        .split-layout .gutter:hover {\n                            background-color: #bdbdbd;\n                        }\n\n                        .split-layout .gutter.gutter-horizontal {\n                            cursor: col-resize;\n                            width: 6px;\n                        }\n                        "}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{className:"row",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"col-md-3",style:{paddingRight:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_12___default.a,{className:"dx-theme-background-color",label:"Filtro por nome, tag ou c\xf3digo",labelMode:"static",onValueChanged:e=>{this.setState({pesquisa:e.value}),this.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"col-md-3",style:{paddingRight:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_13___default.a,{label:"Filtro por assunto",labelMode:"static",className:"dx-theme-background-color",displayExpr:"descricao",valueExpr:"assunto_id",dataSource:Object(_datasource_AssuntoDocumento__WEBPACK_IMPORTED_MODULE_4__.a)(),showClearButton:!0,onValueChanged:e=>{this.setState({assuntoId:e.value}),this.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"col-md-3",style:{paddingRight:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_13___default.a,{label:"Filtro por tipo do documento",labelMode:"static",className:"dx-theme-background-color",displayExpr:"nome",valueExpr:"tipo_documento_id",dataSource:Object(_datasource_TipoDocumento__WEBPACK_IMPORTED_MODULE_5__.a)(),showClearButton:!0,onValueChanged:e=>{this.setState({tipoDocumentoId:e.value}),this.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{className:"col-md-3",style:{padding:"0px"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"col-md-6",style:{paddingRight:"5px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_14___default.a,{label:"De",labelMode:"static",className:"dx-theme-background-color",type:"date",showClearButton:!0,onValueChanged:e=>{this.setState({dataInicio:window.formatDate(e.value,!0)}),this.state.dataInicio&&this.state.dataFim&&this.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"col-md-6",style:{paddingLeft:"5px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_14___default.a,{label:"At\xe9",labelMode:"static",className:"dx-theme-background-color",type:"date",showClearButton:!0,onValueChanged:e=>{this.setState({dataFim:window.formatDate(e.value,!0)}),(this.state.dataInicio&&this.state.dataFim||null===this.state.dataInicio&&null===this.state.dataFim)&&this.recarregarPastaAtual(!1)}})})]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react_split__WEBPACK_IMPORTED_MODULE_15__.a,{className:"split-layout",sizes:[25,75],minSize:100,direction:"horizontal",gutterSize:6,gutterAlign:"center",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{className:"jsTreeDiv",style:{overflow:"auto",padding:10,background:"#ffffff",height:"calc(100vh - 75px)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11___default.a,{ref:this.fileManagerRef,className:"dx-theme-background-color",style:{height:"calc(100vh - 75px)"},rootFolderName:"Raiz",fileSystemProvider:this.state.fileItems,onContextMenuItemClick:this.onItemClick,onContextMenuShowing:this.onContextMenuShowing,onSelectionChanged:this.onSelectionChanged,onCurrentDirectoryChanged:this.onCurrentDirectoryChanged,onSelectedFileOpened:this.onSelectedFileOpened,showNavPane:!1,onOptionChanged:e=>{"itemView"===e.name&&"details"===e.value&&setTimeout((()=>{this.adicionarEventoSituacao(e)}),500)},onContentReady:e=>{jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.component.element().find(".dx-drawer-panel-content")[0]).css("display","none");let a=e.component.element().find(".dx-menu-items-container").last();react_dom__WEBPACK_IMPORTED_MODULE_2___default.a.render(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_MenuHorizontal__WEBPACK_IMPORTED_MODULE_9__.a,{arrCurrentPath:this.state.arrCurrentPath,fnCarregarDados:this.carregarDados}),a[0]),setTimeout((()=>{this.elementoArvore=jquery__WEBPACK_IMPORTED_MODULE_10___default()(e.component.element().parents()[1]).find(".jsTreeDiv");const a=this.state.posicaoScrollTop,t=this.fileManagerRef.current.instance._itemView._filesView?this.fileManagerRef.current.instance._itemView._filesView.getScrollable():this.fileManagerRef.current.instance._itemView._itemList.getScrollable();this.renderArvore(),this.renderCarregarMaisRegistros(e.component.element()),this.adicionarEventoSituacao(e),t&&t.scrollTo(a)}),500)},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Toolbar,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{name:"separator"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{name:"create"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxMenu",location:"before",options:this.newFolder}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxMenu",location:"before",options:this.newFileMenuOptions}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxDropDownButton",location:"before",locateInMenu:"auto",visible:this.dropDownButtonsOptions.items.length,options:this.dropDownButtonsOptions}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.colar,visible:this.state.areaTransferencia.pastas.length>0||this.state.areaTransferencia.documentos.length>0}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.refresh}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{name:"separator",location:"after",locateInMenu:"auto"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.exibirExpirados()}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.exibirBloqueados()}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.exibirAtivos()}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{name:"switchView"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{name:"separator",location:"after",locateInMenu:"auto"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxMenu",location:"after",locateInMenu:"auto",options:this.exportar}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.configuracoes})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.ContextMenu,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Abrir",icon:"fa fa-folder-open",tipo:"abrir_pasta",visible:this.state.contextMenuItemSelected&&this.state.contextMenuItemSelected.isDirectory&&this.state.itemsSelected.pastas.length<=1&&this.state.itemsSelected.documentos.length<=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Download",icon:"fa fa-download",tipo:"download",visible:this.state.itemsSelected.permissoes.download&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Download (ZIP)",icon:"fas fa-file-archive",tipo:"download_zip",visible:this.state.itemsSelected.permissoes.download&&(this.state.itemsSelected.pastas.length>=1||this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>1)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Compactar (ZIP)",icon:"fas fa-file-archive",tipo:"compactar_zip",visible:this.state.itemsSelected.permissoes.escrita&&(this.state.itemsSelected.pastas.length>=1||this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>1)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Enviar Nova Revis\xe3o",icon:"fa fa-cloud-upload-alt",tipo:"nova_revisao",visible:(this.state.itemsSelected.permissoes.escrita||this.state.itemsSelected.permissoes.nova_revisao)&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Excluir",icon:"fa fa-trash",tipo:"exclusao",visible:this.state.itemsSelected.permissoes.exclusao&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Bloquear/Desbloquear",icon:"fa fa-ban",tipo:"bloquear",visible:this.state.itemsSelected.permissoes.seguranca&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Copiar",icon:"far fa-copy",tipo:"copiar",visible:this.state.itemsSelected.permissoes.visualizacao&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Recortar",icon:"fa fa-cut",tipo:"recorte",visible:this.state.itemsSelected.permissoes.escrita&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Colar",icon:"fa fa-clipboard",tipo:"colar",visible:this.state.itemsSelected.permissoes.escrita&&this.state.itemsSelected.pastas.length<=1&&0===this.state.itemsSelected.documentos.length&&(this.state.areaTransferencia.pastas.length>0||this.state.areaTransferencia.documentos.length>0)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Criar Atalho",icon:"fa fa-external-link-alt",tipo:"criar_atalho",visible:this.state.itemsSelected.permissoes.escrita&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Propriedades",icon:"fa fa-edit",tipo:"propriedades",visible:this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length===1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Visualizar",icon:"fa fa-window-maximize",tipo:"visualizar",visible:this.state.itemsSelected.permissoes.visualizacao&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.mime_type&&("application/pdf"===this.state.itemSelected.dataItem.mime_type||this.state.itemSelected.dataItem.mime_type.includes("image/")||this.state.itemSelected.dataItem.mime_type.includes("video/"))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Visualizar em nova aba",icon:"fa fa-window-maximize",tipo:"visualizar_aba",visible:this.state.itemsSelected.permissoes.visualizacao&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.mime_type&&("application/pdf"===this.state.itemSelected.dataItem.mime_type||this.state.itemSelected.dataItem.mime_type.includes("image/")||this.state.itemSelected.dataItem.mime_type.includes("video/"))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Link",icon:"fa fa-link",tipo:"gerar_url_acesso",visible:this.state.itemsSelected.permissoes.visualizacao&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length===1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Link para download",icon:"fa fa-link",tipo:"gerar_url_download",visible:this.state.itemsSelected.permissoes.download&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Assinaturas (Clicksign)",icon:"fa fa-address-card",tipo:"assinaturas_clicksign",visible:0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.revisao_nome&&window.extensao_valida(this.state.itemSelected.dataItem.revisao_nome,window.extensoes_validas_assinatura)&&this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.clicksign_ativo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Assinaturas (Certsign)",icon:"fa fa-address-card",tipo:"assinaturas_certsign",visible:0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.revisao_nome&&window.extensao_valida(this.state.itemSelected.dataItem.revisao_nome,window.extensoes_validas_assinatura)&&this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.certsign_ativo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Assinaturas (D4Sign)",icon:"fa fa-address-card",tipo:"assinaturas_d4sign",visible:0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.revisao_nome&&window.extensao_valida(this.state.itemSelected.dataItem.revisao_nome,window.extensoes_validas_assinatura)&&this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.d4sign_ativo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Adicionar aos Favoritos",icon:"far fa-star",tipo:"favoritos_adicionar",visible:this.favoritosAdicionarExibir(),onClick:this.favoritosAdicionarClick}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Item,{text:"Remover dos Favoritos",icon:"far fa-star",tipo:"favoritos_remover",visible:this.favoritosRemoverExibir(),onClick:this.favoritosRemoverClick})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.ItemView,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Details,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"codigo",caption:"Codigo",cssClass:"codigoDoc",width:"95",visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_codigo_documento_listagem}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"thumbnail",cssClass:"thumbnailDoc"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"name",caption:"Nome",cssClass:"nomeDoc"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"tag_documento",width:"95",caption:"Tag",cssClass:"tagDoc",hidingPriority:9,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_tag}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"situacao",width:"95",caption:"Situa\xe7\xe3o",cssClass:"situacaoRevDoc",hidingPriority:8,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_situacao_documento}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"data_aprovacao",dataType:"date",width:"95",caption:"Aprova\xe7\xe3o",cssClass:"dataAprovacaoRevDoc",hidingPriority:7,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_data_aprovacao}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"assunto_descricao",width:"95",cssClass:"assuntoDoc",caption:"Assunto",hidingPriority:6,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_assunto}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"tipo_documento_nome",width:"95",cssClass:"tipoDoc",caption:"Tipo Documento",hidingPriority:5,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_tipo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"versao",width:"65",cssClass:"versaoDoc",caption:"Vers\xe3o",hidingPriority:4}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"size",caption:"Tamanho",cssClass:"tamanhoDoc",hidingPriority:3,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_tamanho}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"revisao_data_envio",dataType:"date",width:"95",caption:"Modifica\xe7\xe3o",cssClass:"modificacaoDoc",hidingPriority:2,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_data_modificacao}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_11__.Column,{dataField:"data_vigencia",dataType:"date",width:"95",caption:"Vigente At\xe9",cssClass:"vigenciaDoc",hidingPriority:1,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_vigente_ate})]})})]})})]})]})}}ListagemDocumentos.defaultProps={abaTitulo:"Documentos"},__webpack_exports__.default=ListagemDocumentos},757:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r}));var o=t(248),i=t(262),s=t(253);const n=()=>new i.default({pageSize:20,key:"classificacao_movimentacao_financeira_id",load:e=>{let a=window.loadOptionsToActionParams(e);return new Promise(((e,t)=>{s.a.get({route:"/classificacao_movimentacao_financeira/listar/",data:Object(o.a)({dx_grid:!0},a),func_response:a=>{let t=window.createLoadExtra(a);e(Object(o.a)(Object(o.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){s.a.get({route:"/classificacao_movimentacao_financeira/listar/",data:{dx_grid:!0,classificacao_movimentacao_financeira_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return await s.a.get({route:"/classificacao_movimentacao_financeira/listar/",data:{tipo:e},awaitReturn:!0})}},758:function(e,a,t){e.exports={cardContainer:"CardFavorito_cardContainer__3ykse",iconeModulo:"CardFavorito_iconeModulo__2nz9V",topoTitulo:"CardFavorito_topoTitulo__2PxW8",cardCorpo:"CardFavorito_cardCorpo__3cDV-"}},759:function(e,a,t){"use strict";t.r(a),t.d(a,"consultarCNPJ",(function(){return i})),t.d(a,"preencherCampos",(function(){return s}));var o=t(253);const i=async e=>await o.a.get("consulta/cnpj/",{cnpj:e},null,null,null,null,null,null,null,!0),s=(e,a)=>{const t=(e.edt_razao_social.val()&&e.edt_razao_social.val()!==a.nome?"<br /> Raz\xe3o Social de: <b>"+e.edt_razao_social.val()+"</b> para: <b>"+a.nome+"</b>":"")+(e.edt_nome.val()&&e.edt_nome.val()!==a.fantasia?"<br /> Nome Fantasia de: <b>"+e.edt_nome.val()+"</b> para: <b>"+a.fantasia+"</b>":"")+(e.edt_endereco.val()&&e.edt_endereco.val()!==a.logradouro?"<br /> Endere\xe7o de: <b>"+e.edt_endereco.val()+"</b> para: <b>"+a.logradouro+"</b>":"")+(e.edt_numero.val()&&e.edt_numero.val()!==a.numero?"<br /> N\xfamero de: <b>"+e.edt_numero.val()+"</b> para: <b>"+a.numero+"</b>":"")+(e.edt_complemento.val()&&e.edt_complemento.val()!==a.complemento?"<br /> Complemento de: <b>"+e.edt_complemento.val()+"</b> para: <b>"+a.complemento+"</b>":"")+(e.edt_bairro.val()&&e.edt_bairro.val()!==a.bairro?"<br /> Bairro de: <b>"+e.edt_bairro.val()+"</b> para: <b>"+a.bairro+"</b>":"")+(e.edt_telefone1.val()&&e.edt_telefone2.val()&&e.edt_telefone3.val()&&e.edt_telefone4.val()&&e.edt_telefone1.val()!==a.telefone?"<br /> Telefone 1 de: <b>"+e.edt_telefone1.val()+"</b> para: <b>"+a.telefone+"</b>":"")+(e.inputCEP.props.CampoCep&&e.inputCEP.props.CampoCep!==a.cep?"<br /> CEP de: <b>"+e.inputCEP.props.CampoCep+"</b> para: <b>"+a.cep+"</b><br/> Observa\xe7\xe3o: alterando o CEP o endere\xe7o atualizado com base no registro atualizado":""),o=()=>{e.edt_razao_social.val(a.nome),e.edt_nome.val(a.fantasia),e.inputCEP.props.setCampoCep(a.cep),e.div_componente_cep.find(".btn_pesquisar").addClass("origem_input_cnpj",!0).trigger("click"),e.edt_endereco.val(a.logradouro),e.edt_numero.val(a.numero),e.edt_complemento.val(a.complemento),e.edt_bairro.val(a.bairro),e.edt_telefone1.val()?e.edt_telefone2.val()?e.edt_telefone3.val()?e.edt_telefone4.val()?e.edt_telefone1.val(a.telefone):e.edt_telefone4.val(a.telefone):e.edt_telefone3.val(a.telefone):e.edt_telefone2.val(a.telefone):e.edt_telefone1.val(a.telefone)};""!==t?window.alertaPopUp("Aten\xe7\xe3o","<center>Algumas informa\xe7\xf5es est\xe3o divergentes do cadastro atual</center>"+t+"<br /><br /><center>Deseja confirmar a altera\xe7\xe3o ?</center>","Sim",o,"N\xe3o",(function(){})):o()}},760:function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return s}));t(248);var o=t(253);let i=(e,a,t,i)=>{o.a.post({route:"votacao/votar",data:{votacao_id:e,votacao_opcao_id:a},func_response:e=>{window.alert_saved("Voto realizado"),t&&t(e)},func_fail:e=>{window.alert_fail("Falha ao votar"),i&&i(e)}})},s=(e,a,t)=>{o.a.get({route:"votacao/resultado/",data:{votacao_id:e},func_response:e=>{a&&a(e)},func_fail:e=>{window.alert_fail("Falha ao carregar dados da vota\xe7\xe3o"),t&&t(e)}})}},763:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return Be}));var o=t(248),i=t(247),s=t.n(i),n=t(253),r=t(87),d=t(271),l=t(308),c=t(314),u=t(716),p=t(244);class m extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState()}propsToObjState(){var e,a,t;let o=null!==(e=this.props.tooltip)&&void 0!==e?e:null;return this.props.novaMensagem&&(o='As altera\xe7\xf5es ser\xe3o aplicadas ap\xf3s acionar o bot\xe3o "Confirmar"'),{label:null!==(a=this.props.label)&&void 0!==a?a:null,tooltip:o,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t?t:null}}componentDidUpdate(e,a){e.label===this.props.label&&e.tooltip===this.props.tooltip&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}render(){return Object(p.jsxs)("label",{className:"small text-muted",title:this.state.tooltip,children:[this.state.label,this.state.novaMensagem?Object(p.jsxs)(s.a.Fragment,{children:["\xa0",Object(p.jsx)("i",{className:"text-info fas fa-info-circle"})]}):null]})}}m.defaultProps={};const h=Object(i.createContext)({});function _(e){let{children:a}=e;const[t,o]=Object(i.useState)(null),[s,d]=Object(i.useState)(null),[l,c]=Object(i.useState)(null),[u,m]=Object(i.useState)(null),[_,f]=Object(i.useState)({}),[b,v]=Object(i.useState)(null),[g,w]=Object(i.useState)(null),[j,O]=Object(i.useState)(null),[x,A]=Object(i.useState)(null),[C,S]=Object(i.useState)(null),[I,E]=Object(i.useState)(!1),[P,T]=Object(i.useState)(null);return Object(p.jsx)(h.Provider,{value:{botaoPressionado:t,assuntoChamadoAnterior:s,assuntoChamadoAtual:l,novoAssuntoChamado:u,reclassificacaoMemoria:_,chamadoMotivoId:b,entidadeId:g,entidadeTipo:j,chamadoMotivoTipoGestaoTempo:x,chamadoMotivoHorasUteis:C,obterNovoPrazoChamado:I,grupoMotivoId:P,handleSetBotaoPressionado:function(e){o(e)},handleSetAssuntoChamadoAnterior:function(e){d(e)},handleSetAssuntoChamadoAtual:function(e){c(e)},handleSetNovoAssuntoChamado:function(e){m(e)},handleSetReclassificacaoMemoria:function(e){f(e)},handleSetChamadoMotivoId:function(e){v(e)},handleSetEntidadeId:function(e){w(e)},handleSetEntidadeTipo:function(e){O(e)},handleSetChamadoMotivoGestaoTempo:function(e){A(e)},handleSetChamadoMotivoHorasUteis:function(e){S(e)},handleSetObterNovoPrazoChamado:function(e){E(e)},handleSetGrupoMotivoId:function(e){T(e)},handlePausarApontamento:function(e,a){n.a.get("apontamento_projeto/objeto/",{apontamento_id:e.apontamento_projeto_id},(t=>{let o=t.atividade[0],i={},s=[],d=new Date,l=d.getHours()+":"+(d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes());i.atividade_id=o.projeto_atividade_id,i.descricao=o.atividade_simplificada,i.horas_atividade=null,i.porcentagem_atividade=o.porcentagem,s[0]=i,n.a.post("apontamento_projeto/salvar",{apontamento_id:t.id,usuario_id:r.a.sessao.dados.usuario_id,projeto_id:t.projeto_id,atividade:JSON.stringify(s),cliente_id:t.cliente_id,dia:t.dia,hora_inicial:t.hora_inicial,hora_final:l,apontamento_dinamico:!0,atividade_iniciada:!1,entregue:!1,apontamento_dinamico_acao:window.APONTAMENTO_DINAMICO_ACAO.PAUSAR,chamado_id:e.id},(e=>{window.alert_saved("Apontamento atualizado com sucesso"),"function"===typeof a&&a()}))}))}},children:a})}class f extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a,t,o,i;let s=this.props.detalhes?this.props.detalhes.chamado_motivo_id:null,n=null!==(e=null!==(a=this.props.grupoMotivoId)&&void 0!==a?a:this.props.detalhes.grupo_motivo_id)&&void 0!==e?e:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.grupo_motivo_id&&(n=this.props.reclassificacaoMemoria.grupo_motivo_id),this.props.reclassificacaoMemoria.chamado_motivo_id&&(s=this.props.reclassificacaoMemoria.chamado_motivo_id)),{detalhes:null!==(t=this.props.detalhes)&&void 0!==t?t:null,selecionado:s,novaMensagem:null!==(o=this.props.novaMensagem)&&void 0!==o&&o,reclassificacaoMemoria:null!==(i=this.props.reclassificacaoMemoria)&&void 0!==i&&i,grupoMotivoId:n}}componentDidUpdate(e,a){e.detalhes.chamado_motivo_id===this.props.detalhes.chamado_motivo_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.grupo_motivo_id===this.props.detalhes.grupo_motivo_id&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}aoAlterar(e,a){let t=this.state.selecionado;if(+t!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.chamado_motivo_id!==+e)if(a&&"S"===a.descricao_motivo_on_assunto&&this.context.assuntoChamadoAtual!==a.nome){Object(c.confirm)("Deseja alterar o assunto do chamado para <strong>"+a.nome+"</strong>? <br><br> <small>Esta mensagem foi exibida porque o Motivo de Chamado selecionado est\xe1 configurado para que a sua descri\xe7\xe3o seja sugerida no assunto do Chamado.</small>","Aten\xe7\xe3o").then((o=>{o?Object(l.f)({chamado_id:this.state.detalhes.id,chamado_motivo_id:e,assunto:a.nome},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:t}))):Object(l.f)({chamado_id:this.state.detalhes.id,chamado_motivo_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:t})))}))}else Object(l.f)({chamado_id:this.state.detalhes.id,chamado_motivo_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:t})));else this.props.aoAlterar&&this.props.aoAlterar(e,a)}render(){var e,a;let t=this.state.grupoMotivoId;this.context&&this.context.grupoMotivoId&&this.context.grupoMotivoId!=this.state.grupoMotivoId&&(t=this.context.grupoMotivoId);let i=this.state.selecionado?this.state.selecionado.toString():null,s=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(u.default,{chamadoId:this.state.detalhes.id,grupoMotivoId:null!==(e=null!==(a=t)&&void 0!==a?a:this.state.detalhes.grupo_motivo_id)&&void 0!==e?e:null,selecionado:i,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:s,motivoVinculadoId:this.state.detalhes.chamado_motivo_id})]})}}f.defaultProps={label:"Motivo"},f.contextType=h;var b=t(281),v=t(488),g=t(280);function w(e){return Object(p.jsx)(b.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(v.c)(e.chamadoId)})))}const j=[Object(p.jsx)(g.a,{width:"100%"},"nome")];w.defaultProps={aoAlterar:null,displayExpr:e=>e&&e.nome,children:j,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};class O extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a;let t=this.props.detalhes?this.props.detalhes.grupo_motivo_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.grupo_motivo_id&&(t=this.props.reclassificacaoMemoria.grupo_motivo_id),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:t,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a}}componentDidUpdate(e,a){e.detalhes.grupo_motivo_id===this.props.detalhes.grupo_motivo_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.grupo_motivo_id!==+e?Object(l.f)({chamado_id:this.state.detalhes.id,grupo_motivo_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a}))):this.props.aoAlterar&&this.props.aoAlterar(e)}render(){let e=this.state.selecionado?this.state.selecionado.toString():null,a=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(w,{chamadoId:this.state.detalhes.id,selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:a})]})}}O.defaultProps={label:"Grupo de Motivo"},O.contextType=h;var x=t(718);class A extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?{tipo:this.props.detalhes.tipo,id:this.props.detalhes.entidade_id?this.props.detalhes.entidade_id.toString():null}:null,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a,exibirTelefones:!1,caretIcon:"fas fa-caret-right"}}componentDidUpdate(e,a){e.detalhes.tipo===this.props.detalhes.tipo&&e.detalhes.entidade_id===this.props.detalhes.entidade_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;!a||a.tipo===e.tipo&&+a.entidade_id===+e.id||this.setState({selecionado:e}),this.state.novaMensagem||!e||!+this.state.detalhes.id||this.state.detalhes.tipo===e.tipo&&+this.state.detalhes.entidade_id===+e.id?this.props.aoAlterar&&this.props.aoAlterar(e):Object(l.f)({chamado_id:+this.state.detalhes.id,entidade_tipo:e.tipo,entidade_id:e.id},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a})))}handleExibirTelefones(){this.setState({exibirTelefones:!this.state.exibirTelefones,caretIcon:!0===!this.state.exibirTelefones?"fas fa-caret-down":"fas fa-caret-right"})}render(){let e=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(x.default,{selecionado:this.state.selecionado,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:e}),null!==this.props.detalhes.tipo&&""!==this.props.detalhes.tipo&&"E"!==this.props.detalhes.tipo&&(this.props.detalhes.entidade_telefone1||this.props.detalhes.entidade_telefone2||this.props.detalhes.entidade_telefone3||this.props.detalhes.entidade_telefone4)&&Object(p.jsxs)("div",{style:{marginTop:10},children:[Object(p.jsxs)("p",{style:{cursor:"pointer",display:"inline-block"},onClick:this.handleExibirTelefones.bind(this),children:[Object(p.jsx)("i",{className:"fas fa-phone-square-alt"})," ",Object(p.jsx)("strong",{children:"Contato"})," ",Object(p.jsx)("i",{className:this.state.caretIcon})]}),this.state.exibirTelefones&&Object(p.jsxs)("div",{children:[this.props.detalhes.entidade_telefone1&&Object(p.jsxs)("p",{children:[Object(p.jsx)("strong",{children:"Telefone 1: "}),this.props.detalhes.entidade_telefone1]}),this.props.detalhes.entidade_telefone2&&Object(p.jsxs)("p",{children:[Object(p.jsx)("strong",{children:"Telefone 2: "}),this.props.detalhes.entidade_telefone2]}),this.props.detalhes.entidade_telefone3&&Object(p.jsxs)("p",{children:[Object(p.jsx)("strong",{children:"Telefone 3: "}),this.props.detalhes.entidade_telefone3]}),this.props.detalhes.entidade_telefone4&&Object(p.jsxs)("p",{children:[Object(p.jsx)("strong",{children:"Telefone 4: "}),this.props.detalhes.entidade_telefone4]})]})]})]})}}A.defaultProps={label:"Entidade",selecionadoTipo:null,selecionadoId:null},A.contextType=h;var C=t(490);function S(e){return Object(p.jsx)(b.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(l.d)(e.chamadoId,e.entidadeTipo,e.entidadeId)})))}S.defaultProps={chamadoId:null,entidadeTipo:null,entidadeId:null,aoAlterar:null,displayExpr:e=>e&&e.nome,columns:[C.a],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};class I extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a,t,o,i,s,n,r;let d=null!==(e=null!==(a=this.props.entidadeTipo)&&void 0!==a?a:this.props.detalhes.tipo)&&void 0!==e?e:null,l=null!==(t=null!==(o=this.props.entidadeId)&&void 0!==o?o:this.props.detalhes.entidade_id)&&void 0!==t?t:null,c=this.props.detalhes?this.props.detalhes.solicitante_id:null,u=null!==(i=this.props.colaboradorPodeAlterarSolicitante)&&void 0!==i&&i;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.entidade_tipo&&this.props.reclassificacaoMemoria.entidade_id&&(d=this.props.reclassificacaoMemoria.entidade_tipo,l=this.props.reclassificacaoMemoria.entidade_id),this.props.reclassificacaoMemoria.usuario_solicitante_id&&(c=this.props.reclassificacaoMemoria.usuario_solicitante_id),this.props.reclassificacaoMemoria.hasOwnProperty("chamado_motivo_altera_solicitante")&&(u=this.props.reclassificacaoMemoria.chamado_motivo_altera_solicitante)),{detalhes:null!==(s=this.props.detalhes)&&void 0!==s?s:null,selecionado:c,novaMensagem:null!==(n=this.props.novaMensagem)&&void 0!==n&&n,reclassificacaoMemoria:null!==(r=this.props.reclassificacaoMemoria)&&void 0!==r&&r,entidadeTipo:d,entidadeId:l,colaboradorPodeAlterarSolicitante:u}}componentDidUpdate(e,a){e.detalhes.solicitante_id===this.props.detalhes.solicitante_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.tipo===this.props.detalhes.tipo&&e.detalhes.entidade_id===this.props.detalhes.entidade_id&&e.detalhes.situacao===this.props.detalhes.situacao&&e.colaboradorPodeAlterarSolicitante===this.props.colaboradorPodeAlterarSolicitante&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.solicitante_id!==+e?Object(l.f)({chamado_id:this.state.detalhes.id,usuario_solicitante_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a}))):this.props.aoAlterar&&this.props.aoAlterar(e)}render(){let e=+this.context.entidadeId>0?this.context.entidadeId:this.state.entidadeId,a=this.context.entidadeTipo?this.context.entidadeTipo:this.state.entidadeTipo,t=this.state.selecionado?this.state.selecionado.toString():null,i=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao)||!r.a.sessao.dados.admin&&r.a.sessao.dados.tipo===window.USUARIO_TIPO.COLABORADOR&&!this.state.colaboradorPodeAlterarSolicitante;return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(S,{chamadoId:this.state.detalhes.id,entidadeTipo:a,entidadeId:e,selecionado:t,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:i})]})}}function E(e){return Object(p.jsx)(b.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(l.b)(e.chamadoId,e.entidadeTipo,e.entidadeId,e.motivoId)})))}I.defaultProps={label:"Solicitante"},I.contextType=h;E.defaultProps={chamadoId:null,entidadeTipo:null,entidadeId:null,motivoId:null,aoAlterar:null,displayExpr:e=>e&&e.nome,columns:[C.a],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};class P extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a,t,o,i,s,n,r,d;let l=null!==(e=null!==(a=this.props.entidadeTipo)&&void 0!==a?a:this.props.detalhes.tipo)&&void 0!==e?e:null,c=null!==(t=null!==(o=this.props.entidadeId)&&void 0!==o?o:this.props.detalhes.entidade_id)&&void 0!==t?t:null,u=null!==(i=null!==(s=this.props.motivoId)&&void 0!==s?s:this.props.detalhes.chamado_motivo_id)&&void 0!==i?i:null,p=this.props.detalhes?this.props.detalhes.usuario_responsavel_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.entidade_tipo&&this.props.reclassificacaoMemoria.entidade_id&&(l=this.props.reclassificacaoMemoria.entidade_tipo,c=this.props.reclassificacaoMemoria.entidade_id),this.props.reclassificacaoMemoria.chamado_motivo_id&&(u=this.props.reclassificacaoMemoria.chamado_motivo_id),this.props.reclassificacaoMemoria.usuario_responsavel_id&&(p=this.props.reclassificacaoMemoria.usuario_responsavel_id)),{detalhes:null!==(n=this.props.detalhes)&&void 0!==n?n:null,selecionado:p,novaMensagem:null!==(r=this.props.novaMensagem)&&void 0!==r&&r,reclassificacaoMemoria:null!==(d=this.props.reclassificacaoMemoria)&&void 0!==d&&d,entidadeTipo:l,entidadeId:c,motivoId:u}}componentDidUpdate(e,a){e.detalhes.usuario_responsavel_id===this.props.detalhes.usuario_responsavel_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.tipo===this.props.detalhes.tipo&&e.detalhes.entidade_id===this.props.detalhes.entidade_id&&e.detalhes.chamado_motivo_id===this.props.detalhes.chamado_motivo_id&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.usuario_responsavel_id!==+e?Object(l.f)({chamado_id:this.state.detalhes.id,usuario_responsavel_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a}))):this.props.aoAlterar&&this.props.aoAlterar(e)}render(){let e=this.state.motivoId,a=this.state.entidadeId,t=this.state.entidadeTipo;this.context&&(this.context.chamadoMotivoId&&this.context.chamadoMotivoId!=this.state.motivoId&&(e=this.context.chamadoMotivoId),this.context.entidadeId&&this.context.entidadeId!=this.state.entidadeId&&(a=this.context.entidadeId),this.context.entidadeTipo&&this.context.entidadeTipo!=this.state.entidadeTipo&&(t=this.context.entidadeTipo));let i=this.state.selecionado?this.state.selecionado.toString():null,s=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR&&!(r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")&&r.a.verifica_permissao(r.a.temp.empresa,"altera_responsavel"))||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao);return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(E,{chamadoId:this.state.detalhes.id,entidadeTipo:t,entidadeId:a,motivoId:e,selecionado:i,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:s})]})}}P.defaultProps={label:"Respons\xe1vel"},P.contextType=h;var T=t(373),y=t.n(T),R=t(443);class D extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this),this.aoAlterarFixarPrevisaoRetorno=this.aoAlterarFixarPrevisaoRetorno.bind(this),this.obtendoNovaPrevisao=!1}propsToObjState(e){var a,t;let o=this.props.detalhes&&this.props.detalhes.data_previsao_retorno?window.date_create(this.props.detalhes.data_previsao_retorno):null,i=this.props.detalhes?this.props.detalhes.solicitante_id:null,s=this.props.detalhes?this.props.detalhes.solicitante_pode_alterar_previsao_retorno:null,n=this.props.detalhes?this.props.detalhes.tipo_gestao_tempo:null,r=this.props.detalhes?this.props.detalhes.horas_uteis:null,d=this.props.detalhes?this.props.detalhes.fixar_previsao_retorno:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.usuario_solicitante_id&&(i=this.props.reclassificacaoMemoria.usuario_solicitante_id),this.props.reclassificacaoMemoria.chamado_motivo_solicitante_pode_alterar_previsao_retorno&&(s=this.props.reclassificacaoMemoria.chamado_motivo_solicitante_pode_alterar_previsao_retorno),this.props.reclassificacaoMemoria.chamado_motivo_tipo_gestao_tempo&&(n=this.props.reclassificacaoMemoria.chamado_motivo_tipo_gestao_tempo),this.props.reclassificacaoMemoria.chamado_motivo_horas_uteis&&(r=this.props.reclassificacaoMemoria.chamado_motivo_horas_uteis),this.props.reclassificacaoMemoria.data_previsao_retorno&&(o=window.date_create(this.props.reclassificacaoMemoria.data_previsao_retorno)),this.props.reclassificacaoMemoria.fixar_previsao_retorno&&(d=this.props.reclassificacaoMemoria.fixar_previsao_retorno)),{detalhes:null!==(a=this.props.detalhes)&&void 0!==a?a:null,selecionado:o,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t,solicitanteId:i,solicitantePodeAlterarPrevisaoRetorno:s,tipoGestaoTempo:n,tipo:+n===window.GESTAO_TEMPO.HORAS_UTEIS?"datetime":"date",horasUteis:r,FixarPrevisaoRetorno:d}}componentDidMount(){this.obterNovoPrazo()}componentDidUpdate(e,a){if(e.detalhes.data_previsao_retorno!==this.props.detalhes.data_previsao_retorno||e.detalhes.tipo_gestao_tempo!==this.props.detalhes.tipo_gestao_tempo||e.detalhes.solicitante_id!==this.props.detalhes.solicitante_id||e.detalhes.rascunho!==this.props.detalhes.rascunho||e.detalhes.situacao!==this.props.detalhes.situacao||e.novaMensagem!==this.props.novaMensagem||!window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)){const a=this.propsToObjState(e);a.novaMensagem&&a.detalhes&&+a.tipoGestaoTempo===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&(e.novaMensagem!==this.props.novaMensagem||e.reclassificacaoMemoria&&this.props.reclassificacaoMemoria&&e.reclassificacaoMemoria.chamado_motivo_id!==this.props.reclassificacaoMemoria.chamado_motivo_id)?this.obterNovoPrazo(a):this.setState(a)}}obterNovoPrazo(e){let a=e||this.state;!this.obtendoNovaPrevisao&&a.novaMensagem&&a.detalhes&&"S"!=a.FixarPrevisaoRetorno&&+a.tipoGestaoTempo===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&(this.obtendoNovaPrevisao=!0,n.a.get("chamado/get_previsao_retorno/",{calendario_trabalho_id:r.a.sessao.dados.calendario_trabalho_id>0?r.a.sessao.dados.calendario_trabalho_id:1,horas_uteis:a.horasUteis,chamado_id:this.props.detalhes.id},(t=>{const o=a.selecionado,i={previousValue:o,value:window.date_create(t.trim())||a.selecionado};a.selecionado=i.value,e&&this.setState(a),+o!==+a.selecionado.value&&a.novaMensagem&&this.aoAlterar(i),this.obtendoNovaPrevisao=!1}))),this.context&&this.context.handleSetObterNovoPrazoChamado(!1)}aoAlterar(e){const a=this.state.selecionado;if(+a!==+e.value&&this.setState({selecionado:e.value}),!this.props.detalhes&&!this.props.detalhes.id)return!1;this.state.novaMensagem||+a===+e.value?this.props.aoAlterar&&this.props.aoAlterar(e):Object(l.f)({chamado_id:this.props.detalhes.id,data_previsao_retorno:window.formatDateTime(e.value,!0)},this.props.aoAlterar?this.props.aoAlterar:null,(a=>this.setState({selecionado:e.previousValue})))}aoAlterarFixarPrevisaoRetorno(e){let a=e.value?"S":"N",t=e.previousValue?"S":"N";if(this.state.FixarPrevisaoRetorno!==a&&this.setState({FixarPrevisaoRetorno:a}),!this.props.detalhes&&!this.props.detalhes.id)return!1;this.state.novaMensagem||t===a?this.props.aoAlterarFixarPrevisaoRetorno&&this.props.aoAlterarFixarPrevisaoRetorno(e.value):Object(l.f)({chamado_id:this.props.detalhes.id,fixar_previsao_retorno:a},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({FixarPrevisaoRetorno:t})))}render(){if(this.context&&!0===this.context.obterNovoPrazoChamado){let e=Object(o.a)(Object(o.a)({},this.state),{},{tipoGestaoTempo:this.context.chamadoMotivoTipoGestaoTempo,horasUteis:this.context.chamadoMotivoHorasUteis});this.obterNovoPrazo(e)}return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(y.a,{value:this.state.selecionado,type:this.state.tipo,useMaskBehavior:!0,stylingMode:"filled",onValueChanged:this.aoAlterar,readOnly:!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR||r.a.sessao.dados.tipo===window.USUARIO_TIPO.COLABORADOR&&+r.a.sessao.dados.usuario_id===+this.state.solicitanteId&&"N"===this.state.solicitantePodeAlterarPrevisaoRetorno||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao))}),Object(p.jsx)(R.CheckBox,{visible:"S"===this.props.detalhes.chamado_motivo_permite_fixar_previsao_retorno&&(r.a.sessao.dados.admin||+r.a.sessao.dados.usuario_id===this.props.detalhes.usuario_responsavel_id),disabled:!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR||r.a.sessao.dados.tipo===window.USUARIO_TIPO.COLABORADOR&&+r.a.sessao.dados.usuario_id===+this.state.solicitanteId&&"N"===this.state.solicitantePodeAlterarPrevisaoRetorno||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao)),onValueChanged:this.aoAlterarFixarPrevisaoRetorno,text:"Fixar previs\xe3o de retorno",value:"S"===this.state.FixarPrevisaoRetorno})]})}}D.defaultProps={label:"Previs\xe3o de Retorno"},D.contextType=h;var M=t(554);function k(e){return Object(p.jsx)(b.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(M.a)()})))}const N=[Object(p.jsx)(g.a,{width:"100%",caption:"Prioridade"},"nome")];k.defaultProps={aoAlterar:null,displayExpr:e=>e&&e.nome,children:N,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};class F extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a;let t=this.props.detalhes?this.props.detalhes.chamado_prioridade_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.chamado_prioridade_id&&(t=this.props.reclassificacaoMemoria.chamado_prioridade_id),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:t,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a}}componentDidUpdate(e,a){e.detalhes.chamado_prioridade_id===this.props.detalhes.chamado_prioridade_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.chamado_prioridade_id!==+e?Object(l.f)({chamado_id:this.state.detalhes.id,chamado_prioridade_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a}))):this.props.aoAlterar&&this.props.aoAlterar(e)}render(){let e=this.state.selecionado?this.state.selecionado.toString():null,a=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(k,{selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:a})]})}}F.defaultProps={label:"Prioridade"},F.contextType=h;var L=t(321),B=t.n(L);class U extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState()}propsToObjState(){var e;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?this.props.detalhes.nota_avaliacao_nome:null}}componentDidUpdate(e,a){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}render(){return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)("label",{className:"small text-muted",children:this.props.label}),Object(p.jsx)(B.a,{value:this.state.selecionado,stylingMode:"filled",readOnly:!0})]})}}U.defaultProps={label:"Avalia\xe7\xe3o"};var V=t(267),z=t(254),G=t(548),H=t(43),q=t.n(H);class W extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this),this.btnAddClick=this.btnAddClick.bind(this),this.btnRemoverClick=this.btnRemoverClick.bind(this),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.onEditorPreparing=this.onEditorPreparing.bind(this),this.toolbarLabelRender=this.toolbarLabelRender.bind(this),this.dataGridRef=s.a.createRef()}propsToObjState(){var e,a;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,emails_adicionais:this.props.detalhes?this.props.detalhes.emails_adicionais:null,editavel:this.props.detalhes.rascunho||r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")&&![window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.props.detalhes.situacao),novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a}}componentDidUpdate(e,a){e.detalhes.emails_adicionais===this.props.detalhes.emails_adicionais&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}get dataGrid(){return this.dataGridRef.current.instance}onToolbarPreparing(e){const a=(this.context.botaoPressionado&&"reclassificar"===this.context.botaoPressionado||!this.context.botaoPressionado)&&this.state.editavel;e.toolbarOptions.items.unshift({location:"before",template:"toolbarLabel"},{location:"after",widget:"dxButton",locateInMenu:"auto",showText:"inMenu",options:{icon:"fa fa-plus",text:"Adicionar",stylingMode:"text",onClick:this.btnAddClick},visible:a})}aoAlterar(){let e=this.state.emails_adicionais.map((e=>e.email)).join(";");this.state.novaMensagem?this.props.aoAlterar&&this.props.aoAlterar(e):Object(l.f)({chamado_id:this.state.detalhes.id,emails_adicionais:e},this.props.aoAlterar?this.props.aoAlterar:null)}btnAddClick(e){this.dataGrid.addRow()}btnRemoverClick(e){let a=this.state.emails_adicionais;const t=a.map((e=>e.email)).sort().join(";");let o=[];a.forEach((a=>{e.row.data.email!==a.email&&o.push(a)})),this.setState({emails_adicionais:o},(()=>{t!==o.map((e=>e.email)).sort().join(";")&&this.aoAlterar()}))}onEditorPreparing(e){"email"===e.dataField&&"dataRow"===e.parentType&&(e.editorName="dxAutocomplete",e.editorOptions.dataSource=Object(C.b)({cliente_id:this.state.detalhes.cliente_id,prospect_id:this.state.detalhes.prospect_id,fornecedor_id:this.state.detalhes.fornecedor_id,filtra_usuario_colaborador:!0,tipo_usuario_chamado_escolhido:this.state.detalhes.cliente_id?window.USUARIO_TIPO.CLIENTE:this.state.detalhes.prospect_id?window.USUARIO_TIPO.PROSPECT:this.state.detalhes.fornecedor_id?window.USUARIO_TIPO.FORNECEDOR:window.USUARIO_TIPO.COLABORADOR}),e.editorOptions.valueExpr="email",e.editorOptions.itemTemplate=function(e){return q()("<div>"+e.nome+("grupo"!==e.tipo?" ("+e.email+")":"")+"</div>")})}toolbarLabelRender(){return Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem})}render(){const e=(this.context.botaoPressionado&&"reclassificar"===this.context.botaoPressionado||!this.context.botaoPressionado)&&this.state.editavel;return Object(p.jsx)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:Object(p.jsxs)(V.default,{ref:this.dataGridRef,dataSource:this.state.emails_adicionais,filterPanel:{visible:!1},filterRow:{visible:!1},headerFilter:{visible:!1},groupPanel:{visible:!1},export:{enabled:!1},allowColumnReordering:!1,columnChooser:{enabled:!1},editing:{mode:"cell",allowUpdating:e},keyExpr:"id",showBorders:!1,showColumnHeaders:!1,showColumnLines:!1,columnFixing:{enable:!1},rowAlternationEnabled:!1,onEditorPreparing:this.onEditorPreparing,onToolbarPreparing:this.onToolbarPreparing,onRowInserted:()=>this.aoAlterar(),onRowUpdated:()=>this.aoAlterar(),noDataText:"",searchPanel:{visible:!1},children:[Object(p.jsx)(z.Column,{dataField:"email",allowEditing:!0}),Object(p.jsx)(z.Column,{type:"buttons",width:50,alignment:"right",children:Object(p.jsx)(z.Button,{hint:"Remover e-mail",icon:"fa fa-times",onClick:this.btnRemoverClick,visible:e})}),Object(p.jsx)(G.Template,{name:"toolbarLabel",render:this.toolbarLabelRender})]})})}}W.defaultProps={label:"E-mails adicionais"},W.contextType=h;class K extends s.a.Component{render(){return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)("label",{className:"small text-muted",children:this.props.label}),Object(p.jsx)("div",{children:window.format_time(this.props.valor)})]})}}K.defaultProps={label:"Total horas trabalhadas"};var J=t(722),Q=t(723);function Z(e){return Object(p.jsx)(b.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(J.a)()})))}Z.defaultProps={aoAlterar:null,displayExpr:e=>e&&e.nome,children:Q.a,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};class X extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a;let t=this.props.detalhes?this.props.detalhes.classificacao_chamado_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.classificacao_chamado_id&&(t=this.props.reclassificacaoMemoria.classificacao_chamado_id),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:t,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a}}componentDidUpdate(e,a){e.detalhes.classificacao_chamado_id===this.props.detalhes.classificacao_chamado_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.classificacao_chamado_id!==+e?Object(l.f)({chamado_id:this.state.detalhes.id,classificacao_chamado_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a}))):this.props.aoAlterar&&this.props.aoAlterar(e)}render(){let e=this.state.selecionado?this.state.selecionado.toString():null,a=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(Z,{selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:a})]})}}function Y(e){const{chamadoId:a,selecionado:t,readOnly:s}=e,[n,r]=Object(i.useState)({dataSource:Object(l.c)(a),readOnly:null!==s&&void 0!==s?s:null,selecionado:t||null});return Object(i.useEffect)((()=>{r({dataSource:Object(l.c)(a),readOnly:null!==s&&void 0!==s?s:null,selecionado:t||null})}),[a,t,s]),Object(p.jsx)(b.default,Object(o.a)(Object(o.a)({},e),n))}X.defaultProps={label:"Classifica\xe7\xe3o"},X.contextType=h;Y.defaultProps={chamadoId:null,aoAlterar:null,displayExpr:e=>e&&e.nome,columns:[l.e],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};class $ extends s.a.Component{constructor(e){super(e),this.sugerirSituacaoMotivo=!0,this.state=Object(o.a)({sugerirSituacaoMotivo:!0},this.propsToObjState()),this.sugerirSituacaoMotivo=this.state?this.state.sugerirSituacaoMotivo:this.sugerirSituacaoMotivo,this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a;let t=this.props.detalhes?+this.props.detalhes.situacao:null,o=this.context?this.context.botaoPressionado:this.props.botaoPressionado,i=this.props.configuracoesChamado;if(this.props.novaMensagem&&this.props.detalhes)if("S"!==i.sugerir_situacao&&"S"!==i.sugerir_situacao_reclassificacao||!(this.state&&this.state.sugerirSituacaoMotivo||!this.state&&this.sugerirSituacaoMotivo)||+r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR)this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.situacao&&(t=this.props.reclassificacaoMemoria.situacao);else if("S"===i.sugerir_situacao_reclassificacao&&"reclassificar"==o||"S"===i.sugerir_situacao&&"escreverMensagem"==o){switch(this.props.detalhes.tipo){case window.TIPO_ENTIDADE.CLIENTE:t=window.CHAMADO_SITUACAO.AGUARDANDO_CLIENTE;break;case window.TIPO_ENTIDADE.ORGANIZACAO:t=window.CHAMADO_SITUACAO.AGUARDANDO_ORGANIZACAO;break;case window.TIPO_ENTIDADE.FORNECEDOR:t=window.CHAMADO_SITUACAO.AGUARDANDO_FORNECEDOR;break;case window.TIPO_ENTIDADE.EMPRESA:t===window.CHAMADO_SITUACAO.AGUARDANDO_EMPRESA&&+this.props.detalhes.usuario_responsavel_id!==+r.a.sessao.dados.usuario_id?t=window.CHAMADO_SITUACAO.AGUARDANDO_RESPONSAVEL:+this.props.detalhes.solicitante_id!==+r.a.sessao.dados.usuario_id&&(t=window.CHAMADO_SITUACAO.AGUARDANDO_EMPRESA)}t!==+this.props.detalhes.situacao&&this.props.aoAlterar&&this.props.aoAlterar(t)}return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:t,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a,sugerirMotivo:!0,botaoPressionado:o,configuracoesChamado:i}}componentDidUpdate(e,a){e.detalhes.situacao===this.props.detalhes.situacao&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}aoAlterar(e){let a=this.state.selecionado;if(+a===+e)return;this.setState({selecionado:e,sugerirSituacaoMotivo:!1});const t=()=>{!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.situacao!==+e?Object(l.f)({chamado_id:this.state.detalhes.id,situacao:e},this.props.aoAlterar?this.props.aoAlterar:null,(e=>this.setState({selecionado:a}))):this.props.aoAlterar&&this.props.aoAlterar(e)};e==window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO&&parseInt(this.state.detalhes.usuario_responsavel_id,10)>0&&"S"==this.props.detalhes.chamado_motivo_definir_situacao_aguardando_responsavel?window.alertaPopUp("Aten\xe7\xe3o","Alterar a situa\xe7\xe3o para Aguardando Atendimento ir\xe1 limpar o campo de Respons\xe1vel do Chamado. Deseja continuar?","Sim",(()=>{t()}),"N\xe3o",(()=>{this.setState({selecionado:a})})):t()}render(){var e;let a=this.state.selecionado?this.state.selecionado.toString():null,t=!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")&&!this.state.novaMensagem||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(Y,{chamadoId:this.state.detalhes.id,entidadeTipo:null!==(e=this.state.detalhes.tipo)&&void 0!==e?e:null,selecionado:a,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:t,atualizarValorAutomaticamente:!0})]})}}$.defaultProps={label:"Situa\xe7\xe3o"},$.contextType=h;class ee extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(e){var a,t;let o=this.props.detalhes&&this.props.detalhes.data_inicio_sla?window.date_create(this.props.detalhes.data_inicio_sla):null,i=this.props.detalhes?this.props.detalhes.solicitante_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.usuario_solicitante_id&&(i=this.props.reclassificacaoMemoria.usuario_solicitante_id),this.props.reclassificacaoMemoria.data_inicio_sla&&(o=window.date_create(this.props.reclassificacaoMemoria.data_inicio_sla))),{detalhes:null!==(a=this.props.detalhes)&&void 0!==a?a:null,selecionado:o,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t,solicitanteId:i}}componentDidUpdate(e,a){if(e.detalhes.data_inicio_sla!==this.props.detalhes.data_inicio_sla||e.detalhes.solicitante_id!==this.props.detalhes.solicitante_id||e.detalhes.rascunho!==this.props.detalhes.rascunho||e.detalhes.situacao!==this.props.detalhes.situacao||e.novaMensagem!==this.props.novaMensagem||!window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)){const a=this.propsToObjState(e);this.setState(a)}}aoAlterar(e){const a=this.state.selecionado;if(+a!==+e.value&&this.setState({selecionado:e.value}),!this.props.detalhes&&!this.props.detalhes.id)return!1;this.state.novaMensagem||+a===+e.value?this.props.aoAlterar&&this.props.aoAlterar(e):Object(l.f)({chamado_id:this.props.detalhes.id,data_inicio_sla:window.formatDateTime(e.value,!0)},this.props.aoAlterar?this.props.aoAlterar:null,(a=>this.setState({selecionado:e.previousValue})))}render(){return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(p.jsx)(y.a,{value:this.state.selecionado,type:"datetime",useMaskBehavior:!0,stylingMode:"filled",onValueChanged:this.aoAlterar,readOnly:!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao))})]})}}ee.defaultProps={label:"Programar SLA"},ee.contextType=h;class ae extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.solicitarRefresh=this.solicitarRefresh.bind(this),this.handleReclassificacaoMemoria=this.handleReclassificacaoMemoria.bind(this),this.reclassificacaoMemoriaEntidade=this.reclassificacaoMemoriaEntidade.bind(this),this.reclassificacaoMemoriaSolicitante=this.reclassificacaoMemoriaSolicitante.bind(this),this.reclassificacaoMemoriaGrupoMotivo=this.reclassificacaoMemoriaGrupoMotivo.bind(this),this.reclassificacaoMemoriaMotivo=this.reclassificacaoMemoriaMotivo.bind(this),this.reclassificacaoMemoriaResponsavel=this.reclassificacaoMemoriaResponsavel.bind(this),this.reclassificacaoMemoriaClassificacao=this.reclassificacaoMemoriaClassificacao.bind(this),this.reclassificacaoMemoriaPrioridade=this.reclassificacaoMemoriaPrioridade.bind(this),this.reclassificacaoMemoriaPrevisaoRetorno=this.reclassificacaoMemoriaPrevisaoRetorno.bind(this),this.reclassificacaoMemoriaFixarPrevisaoRetorno=this.reclassificacaoMemoriaFixarPrevisaoRetorno.bind(this),this.reclassificacaoMemoriaSituacao=this.reclassificacaoMemoriaSituacao.bind(this),this.reclassificacaoMemoriaEmailsAdicionais=this.reclassificacaoMemoriaEmailsAdicionais.bind(this),this.reclassificacaoMemoriaInicioSLA=this.reclassificacaoMemoriaInicioSLA.bind(this),this.reclassificacao_memoria={}}componentDidUpdate(e,a){e.detalhes===this.props.detalhes&&e.botaoPressionadoReclassificacao===this.props.botaoPressionadoReclassificacao&&e.colaboradorPodeAlterarSolicitante===this.props.colaboradorPodeAlterarSolicitante||this.setState(this.propsToObjState())}shouldComponentUpdate(e,a){return!!a.atualizar_componente}propsToObjState(){var e,a,t;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,botaoPressionadoReclassificacao:null!==(a=this.props.botaoPressionadoReclassificacao)&&void 0!==a?a:null,colaboradorPodeAlterarSolicitante:null!==(t=this.props.colaboradorPodeAlterarSolicitante)&&void 0!==t&&t,atualizar_componente:!0}}solicitarRefresh(e){this.props.aoSolicitarRefresh&&this.props.aoSolicitarRefresh(e)}handleReclassificacaoMemoria(e){const a=Object(o.a)(Object(o.a)({},this.reclassificacao_memoria),e);this.reclassificacao_memoria=a,this.context.handleSetReclassificacaoMemoria(this.reclassificacao_memoria)}reclassificacaoMemoriaEntidade(e){this.handleReclassificacaoMemoria({entidade_tipo:e.tipo,entidade_id:e.id}),this.context.handleSetEntidadeId(e.id),this.context.handleSetEntidadeTipo(e.tipo),this.context.handleSetObterNovoPrazoChamado(!0)}reclassificacaoMemoriaSolicitante(e){this.handleReclassificacaoMemoria({usuario_solicitante_id:e})}reclassificacaoMemoriaGrupoMotivo(e){this.handleReclassificacaoMemoria({grupo_motivo_id:e}),this.context.handleSetGrupoMotivoId(e)}reclassificacaoMemoriaMotivo(e,a){let t={chamado_motivo_id:e};if(a&&(t=Object(o.a)(Object(o.a)({},t),{},{chamado_motivo_horas_uteis:a.horas_uteis,chamado_motivo_tipo_gestao_tempo:a.tipo_gestao_tempo,chamado_motivo_solicitante_pode_alterar_previsao_retorno:a.solicitante_pode_alterar_previsao_retorno,chamado_motivo_altera_solicitante:"S"===a.altera_solicitante}),"S"===a.descricao_motivo_on_assunto&&this.context.assuntoChamadoAtual!==a.nome)){Object(c.confirm)("Deseja alterar o assunto do chamado para <strong>"+a.nome+"</strong>? <br><br> <small>Esta mensagem foi exibida porque o Motivo de Chamado selecionado est\xe1 configurado para que a sua descri\xe7\xe3o seja sugerida no assunto do Chamado.</small>","Aten\xe7\xe3o").then((e=>{e?this.context.handleSetNovoAssuntoChamado(a.nome):this.context.handleSetNovoAssuntoChamado(null)}))}this.handleReclassificacaoMemoria(t),this.context.handleSetChamadoMotivoId(e),this.context.handleSetChamadoMotivoGestaoTempo(a.tipo_gestao_tempo),this.context.handleSetChamadoMotivoHorasUteis(a.horas_uteis),this.context.handleSetObterNovoPrazoChamado(!0)}reclassificacaoMemoriaResponsavel(e){this.handleReclassificacaoMemoria({usuario_responsavel_id:e}),"S"===this.props.detalhes.chamado_motivo_definir_situacao_aguardando_responsavel&&(parseInt(e,10)>0&&[this.context.reclassificacaoMemoria.situacao,this.props.detalhes.situacao].includes(window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO)?this.handleReclassificacaoMemoria({situacao:window.CHAMADO_SITUACAO.AGUARDANDO_RESPONSAVEL}):(!parseInt(e,10)||parseInt(e,10)<0)&&this.handleReclassificacaoMemoria({situacao:window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO}))}reclassificacaoMemoriaClassificacao(e){this.handleReclassificacaoMemoria({classificacao_chamado_id:e})}reclassificacaoMemoriaPrioridade(e){this.handleReclassificacaoMemoria({chamado_prioridade_id:e})}reclassificacaoMemoriaPrevisaoRetorno(e){let a=null;e&&e.value&&(a=window.formatDateTime(e.value,!0)),this.handleReclassificacaoMemoria({data_previsao_retorno:a})}reclassificacaoMemoriaInicioSLA(e){let a=null;e&&e.value&&(a=window.formatDateTime(e.value,!0)),this.handleReclassificacaoMemoria({data_inicio_sla:a})}reclassificacaoMemoriaFixarPrevisaoRetorno(e){e=e?"S":"N",this.handleReclassificacaoMemoria({fixar_previsao_retorno:e})}reclassificacaoMemoriaSituacao(e){this.handleReclassificacaoMemoria({situacao:e}),e==window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO&&(parseInt(this.context.reclassificacaoMemoria.usuario_responsavel_id,10)>0||parseInt(this.props.detalhes.usuario_responsavel_id,10)>0)&&this.handleReclassificacaoMemoria({usuario_responsavel_id:null})}reclassificacaoMemoriaEmailsAdicionais(e){this.handleReclassificacaoMemoria({emails_adicionais:e})}render(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"panel panel-default card-dados-chamado",children:Object(p.jsxs)("div",{className:"list-group",children:[Object(p.jsx)(A,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaEntidade:this.solicitarRefresh}),Object(p.jsx)(I,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaSolicitante:this.solicitarRefresh,colaboradorPodeAlterarSolicitante:this.state.colaboradorPodeAlterarSolicitante}),"S"===r.a.sessao.dados.parametro_chamado.chk_exibir_na_abertura_grupo_motivo_chamado?Object(p.jsx)(O,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaGrupoMotivo:this.solicitarRefresh}):null,Object(p.jsx)(f,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaMotivo:this.solicitarRefresh}),this.state.detalhes.rascunho&&r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR?null:Object(p.jsx)(P,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaResponsavel:this.solicitarRefresh,chamadoMotivoId:this.state.chamadoMotivoId}),"S"===r.a.sessao.dados.parametro_chamado.chamado_classificacoes?Object(p.jsx)(X,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaClassificacao:this.solicitarRefresh}):null,Object(p.jsx)(F,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaPrioridade:this.solicitarRefresh}),this.state.detalhes.rascunho&&r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR?null:Object(p.jsx)(D,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaPrevisaoRetorno:this.solicitarRefresh,aoAlterarFixarPrevisaoRetorno:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaFixarPrevisaoRetorno:this.solicitarRefresh}),"S"!==this.props.detalhes.chamado_motivo_permite_programar_inicio_sla||this.state.detalhes.rascunho&&r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR?null:Object(p.jsx)(ee,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaInicioSLA:this.solicitarRefresh}),this.state.detalhes.rascunho&&r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR?null:Object(p.jsx)($,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaSituacao:this.solicitarRefresh,configuracoesChamado:this.props.configuracoesChamado})]})}),Object(p.jsx)("div",{className:"panel panel-default card-dados-chamado",children:Object(p.jsx)("div",{className:"list-group",children:Object(p.jsx)(W,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaEmailsAdicionais:this.solicitarRefresh})})}),this.state.detalhes.rascunho?null:Object(p.jsx)("div",{className:"panel panel-default card-dados-chamado",children:Object(p.jsxs)("div",{className:"list-group",children:[this.state.detalhes.nota_avaliacao_id?Object(p.jsx)(U,{detalhes:this.state.detalhes}):null,!this.props.detalhes||""===this.props.detalhes.horas_trabalhadas||null===this.props.detalhes.horas_trabalhadas||"undefined"===typeof this.props.detalhes.horas_trabalhadas||"00:00:00"===this.props.detalhes.horas_trabalhadas||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR&&!0!==r.a.sessao.dados.admin?null:Object(p.jsx)(K,{valor:this.props.detalhes.horas_trabalhadas})]})})]})}}ae.contextType=h;var te=t(414),oe=t(357),ie=t(307),se=t.n(ie),ne=t(485);class re extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState()}propsToObjState(){var e;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null}}componentDidUpdate(e,a){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}render(){let e="";return this.state.detalhes&&(e=this.state.detalhes&&!0===this.state.detalhes.rascunho?"Rascunho":window.ChamadoDescSituacaoHumano(this.state.detalhes.situacao,r.a.sessao.dados.tipo)),Object(p.jsx)("span",{className:"label label-default",children:e})}}re.defaultProps={};var de=t(724),le=t(725),ce=t(376);class ue extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState()}propsToObjState(){var e;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null}}componentDidUpdate(e,a){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}render(){let e=window.Colors(this.state.detalhes.motivo_cor);return Object(p.jsx)("span",{className:"label",style:{background:e.hex,color:e.nome_hex},children:this.state.detalhes.motivo})}}ue.defaultProps={};var pe=t(491);class me extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.assuntoChange=this.assuntoChange.bind(this),this.btnMensagensClick=this.btnMensagensClick.bind(this),this.btnFormularioAvaliacaoClick=this.btnFormularioAvaliacaoClick.bind(this),this.btnFormularioAberturaClick=this.btnFormularioAberturaClick.bind(this),this.btnFormularioEncerramentoClick=this.btnFormularioEncerramentoClick.bind(this),this.btnReferenciasClick=this.btnReferenciasClick.bind(this),this.btnRecarregarClick=this.btnRecarregarClick.bind(this),this.btnToogleExibirMaisDetalhesClick=this.btnToogleExibirMaisDetalhesClick.bind(this),this.handleGerenciarApontamento=this.handleGerenciarApontamento.bind(this),this.handleIniciarApontamento=this.handleIniciarApontamento.bind(this)}propsToObjState(){var e,a,t,o,i;let s="iniciarAtendimento",n="fas fa-play-circle",r="Iniciar Atendimento",d="Iniciar";return"S"!=this.props.detalhes.chamado_motivo_utiliza_apontamento_chamado&&!0!==this.props.detalhes.chamado_motivo_utiliza_apontamento_chamado||this.props.detalhes.status_apontamento!=window.CHAMADO_STATUS_APONTAMENTO.INICIADO||(s="pausarAtendimento",n="fas fa-pause-circle",r="Pausar Atendimento",d="Pausar"),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,referenciasCount:this.props.detalhes.oportunidade.length+this.props.detalhes.solicitacao_atividades.length+this.props.detalhes.projeto_atividades.length+this.props.detalhes.pdca_atividades.length+this.props.detalhes.tarefa_quadro_lista_cartao.length,mensagensCount:null!==(a=this.props.mensagensCount)&&void 0!==a?a:0,assunto:this.props.detalhes?this.props.detalhes.assunto:null,assuntoOriginal:this.props.detalhes?this.props.detalhes.assunto:null,tipoGestaoTempo:this.props.detalhes?this.props.detalhes.tipo_gestao_tempo:null,horasEstimadas:this.props.detalhes?this.props.detalhes.horas_previsao_retorno:null,dataPrazo:this.props.detalhes?this.props.detalhes.data_previsao_retorno:null,calendarioTrabalhoId:this.props.detalhes?this.props.detalhes.chamado_motivo_calendario_trabalho_id:null,botaoPressionado:null!==(t=this.props.botaoPressionado)&&void 0!==t?t:null,exibirMaisDetalhes:null!==(o=this.props.exibirMaisDetalhes)&&void 0!==o?o:null,bloquearExibirMaisDetalhes:null!==(i=this.props.bloquearExibirMaisDetalhes)&&void 0!==i?i:null,btnApontamentoAcao:s,btnApontamentoIcon:n,btnApontamentoHint:r,btnApontamentoText:d}}componentDidUpdate(e,a){e.detalhes===this.props.detalhes&&e.exibirMaisDetalhes===this.props.exibirMaisDetalhes&&e.bloquearExibirMaisDetalhes===this.props.bloquearExibirMaisDetalhes||this.setState(this.propsToObjState())}btnMensagensClick(){this.setState({botaoPressionado:"mensagens"},(()=>{this.props.btnMensagensClick&&this.props.btnMensagensClick()}))}btnFormularioAvaliacaoClick(){this.setState({botaoPressionado:"avaliacao"},(()=>{this.props.btnFormularioAvaliacaoClick&&this.props.btnFormularioAvaliacaoClick()}))}btnFormularioAberturaClick(){this.setState({botaoPressionado:"formularioAbertura"},(()=>{this.props.btnFormularioAberturaClick&&this.props.btnFormularioAberturaClick()}))}btnFormularioEncerramentoClick(){this.setState({botaoPressionado:"formularioEncerramento"},(()=>{this.props.btnFormularioEncerramentoClick&&this.props.btnFormularioEncerramentoClick()}))}btnReferenciasClick(){this.setState({botaoPressionado:"referencias"},(()=>{this.props.btnReferenciasClick&&this.props.btnReferenciasClick()}))}btnRecarregarClick(){this.props.btnRecarregarClick&&this.props.btnRecarregarClick()}btnToogleExibirMaisDetalhesClick(){this.props.btnToogleExibirMaisDetalhesClick&&this.setState({exibirMaisDetalhes:this.props.btnToogleExibirMaisDetalhesClick()})}assuntoChange(e){e.value!==this.state.assunto&&this.setState({assunto:e.value},(()=>{e.value.trim().length>0&&"reclassificar"!==this.context.botaoPressionado&&Object(l.f)({chamado_id:this.state.detalhes.id,assunto:e.value},this.props.btnRecarregarClick?this.props.btnRecarregarClick:null)})),this.context.handleSetAssuntoChamadoAtual(e.value)}handleGerenciarApontamento(e){if(e==window.CHAMADO_APONTAMENTO_ACAO.INICIAR)n.a.post("/chamado/gerenciar_apontamento/",{chamado_id:this.state.detalhes.id,responsavel_id:r.a.sessao.dados.usuario_id},(e=>{if(!e)return window.alertaPopUp("Valida\xe7\xe3o","N\xe3o foi poss\xedvel criar a Atividade do Projeto para o usu\xe1rio respons\xe1vel.<br><br>Verifique se o usu\xe1rio \xe9 <strong>T\xe9cnico de Projetos</strong> e faz parte da <strong>equipe do Projeto</strong>."),!1;this.handleIniciarApontamento(e)}));else if(e==window.CHAMADO_APONTAMENTO_ACAO.PAUSAR){let e=()=>{this.setState({btnApontamentoAcao:"iniciarAtendimento",btnApontamentoIcon:"fas fa-play-circle",btnApontamentoHint:"Iniciar Atendimento",btnApontamentoText:"Iniciar"},(()=>{this.btnRecarregarClick()}))};this.context.handlePausarApontamento(this.state.detalhes,e)}}handleIniciarApontamento(e){let a={},t=[],o=new Date,i=window.getDate(),s=o.getHours()+":"+o.getMinutes();a.atividade_id=e.id,a.descricao=e.atividade_simplificada,a.horas_atividade=null,a.porcentagem_atividade=e.porcentagem,t[0]=a,n.a.post("apontamento_projeto/salvar/",{apontamento_id:null,usuario_id:r.a.sessao.dados.usuario_id,projeto_id:e.projeto_id,atividade:JSON.stringify(t),cliente_id:e.cliente_id,dia:i,hora_inicial:s,hora_final:"",apontamento_dinamico:!0,atividade_iniciada:!0,entregue:!1,apontamento_dinamico_acao:window.APONTAMENTO_DINAMICO_ACAO.INICIAR,chamado_id:this.state.detalhes.id,chamado_entidade_nome:this.state.detalhes.entidade_nome,chamado_responsavel_anterior:e.chamado_responsavel_anterior},(a=>{window.alert_saved("Atividade "+e.codigo+" salva com sucesso"),this.setState({btnApontamentoAcao:"pausarAtendimento",btnApontamentoIcon:"fas fa-pause-circle",btnApontamentoHint:"Pausar Atendimento",btnApontamentoText:"Pausar"},(()=>{this.btnRecarregarClick()}))}))}imprimirChamado(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.a.get("/chamado/imprimir_chamado/",{chamado_id:this.state.detalhes.id,ignorar_mensagens_vazias:e},(e=>{const a=window.open();a.document.title="Chamado #".concat(this.state.detalhes.id),a.document.body.style.fontFamily="Arial,Helvetica,sans-serif",q()(a.document.body).html(e),setTimeout((()=>{a.print()}),1e3),a.onafterprint=function(){a.close()}}))}render(){var e;let a=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao)),t=this.state.assunto;return this.context.novoAssuntoChamado&&(t=this.context.novoAssuntoChamado),this.context.handleSetAssuntoChamadoAtual(t),this.context.handleSetAssuntoChamadoAnterior(this.state.assunto),Object(p.jsx)("div",{className:"panel panel-default",children:Object(p.jsx)("div",{className:"list-group",children:Object(p.jsxs)("div",{className:"list-group-item",style:{padding:"10px"},children:[this.state.detalhes?Object(p.jsx)(s.a.Fragment,{children:Object(p.jsxs)(se.a,{children:[Object(p.jsxs)(ie.Item,{location:"before",children:[Object(p.jsxs)("b",{children:["#",this.state.detalhes.id," ",Object(p.jsx)(te.default,{style:{padding:"0px"},url:"#/chamado/"+this.state.detalhes.id,children:Object(p.jsx)("span",{className:"far fa-copy"})})]}),Object(p.jsx)(oe.a,{})]}),Object(p.jsx)(ie.Item,{location:"before",visible:+this.state.detalhes.entidade_id>0,locateInMenu:"auto",children:Object(p.jsx)(pe.default,{tipo:this.state.detalhes.tipo,id:this.state.detalhes.entidade_id,nome:this.state.detalhes.entidade_nome,logoId:this.state.detalhes.entidade_logo_id})}),Object(p.jsx)(ie.Item,{location:"before",visible:+this.state.detalhes.solicitante_id>0,locateInMenu:"auto",children:Object(p.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(p.jsx)(ce.a,{tamanho:"28",documentoId:this.state.detalhes.usuario_solicitante_foto_id,imgAlternativa:"assets/img/icones_bp/imagem_usuario_padrao.svg",titulo:"Solicitante",nome:this.state.detalhes.solicitante_nome}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(p.jsx)(oe.a,{}),Object(p.jsx)("div",{children:this.state.detalhes.solicitante_nome}),Object(p.jsx)(oe.a,{})]})})]})}),Object(p.jsx)(ie.Item,{location:"before",visible:+this.state.detalhes.usuario_responsavel_id>0,locateInMenu:"auto",children:Object(p.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},title:"Respons\xe1vel",children:[Object(p.jsx)(ce.a,{tamanho:"28",documentoId:this.state.detalhes.foto_usuario_responsavel,imgAlternativa:"assets/img/icones_bp/imagem_usuario_padrao.svg",titulo:"Respons\xe1vel",nome:this.state.detalhes.usuario_responsavel_nome}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(p.jsx)(oe.a,{}),Object(p.jsx)("div",{children:this.state.detalhes.usuario_responsavel_nome}),Object(p.jsx)(oe.a,{})]})})]})}),Object(p.jsx)(ie.Item,{location:"before",locateInMenu:"auto",children:Object(p.jsx)(re,{detalhes:this.state.detalhes})}),Object(p.jsx)(ie.Item,{location:"before",locateInMenu:"auto",children:Object(p.jsx)(ue,{detalhes:this.state.detalhes})}),Object(p.jsx)(ie.Item,{location:"after",visible:!this.state.detalhes.rascunho,children:Object(p.jsx)("div",{className:"small",children:Object(p.jsx)(de.a,{viewHtmlId:null!==(e=this.props.viewHtmlId)&&void 0!==e?e:null,detalhes:this.state.detalhes,autoUpdate:"true"})})}),Object(p.jsx)(ie.Item,{location:"after",visible:!this.state.detalhes.rascunho&&+this.state.detalhes.situacao!==window.CHAMADO_SITUACAO.ENCERRADO&&+this.state.detalhes.situacao!==window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE,children:Object(p.jsx)("div",{className:"small visible-lg",children:Object(p.jsx)(le.a,{TipoGestaoTempo:this.state.tipoGestaoTempo,HorasEstimadas:this.state.horasEstimadas,DataPrazo:this.state.dataPrazo,CalendarioTrabalhoId:this.state.calendarioTrabalhoId,ExibirTituloDataPrazo:!0,TituloDataPrazo:"Previs\xe3o de Retorno"})})}),Object(p.jsx)(ie.Item,{location:"after",visible:!this.state.detalhes.rascunho,children:Object(p.jsxs)(ne.ButtonGroup,{selectionMode:"single",stylingMode:"text",selectedItemKeys:[this.state.botaoPressionado],keyExpr:"acao",style:{paddingLeft:"46px"},children:[Object(p.jsx)(ne.Item,{acao:this.state.btnApontamentoAcao,icon:this.state.btnApontamentoIcon,hint:this.state.btnApontamentoHint,text:this.state.btnApontamentoText,onClick:()=>{"iniciarAtendimento"==this.state.btnApontamentoAcao?this.handleGerenciarApontamento(window.CHAMADO_APONTAMENTO_ACAO.INICIAR):"pausarAtendimento"==this.state.btnApontamentoAcao&&this.handleGerenciarApontamento(window.CHAMADO_APONTAMENTO_ACAO.PAUSAR)},visible:r.a.sessao.dados.tipo==window.USUARIO_TIPO.COLABORADOR&&("S"==r.a.sessao.dados.tecnico||!0===r.a.sessao.dados.tecnico)&&this.state.detalhes.situacao!=window.CHAMADO_SITUACAO.ENCERRADO&&this.state.detalhes.situacao!=window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE&&("S"==this.state.detalhes.chamado_motivo_utiliza_apontamento_chamado||!0===this.state.detalhes.chamado_motivo_utiliza_apontamento_chamado)&&(+this.state.detalhes.usuario_responsavel_id>0&&this.state.detalhes.usuario_responsavel_id==r.a.sessao.dados.usuario_id||0==+this.state.detalhes.usuario_responsavel_id)}),Object(p.jsx)(ne.Item,{acao:"formularioAbertura",icon:"fas fa-clipboard-list",hint:"Formul\xe1rio Abertura",onClick:this.btnFormularioAberturaClick,visible:+this.state.detalhes.formulario_abertura_id>0,elementAttr:{class:"btn_formulario_abertura"}}),Object(p.jsx)(ne.Item,{acao:"formularioEncerramento",icon:"fas fa-clipboard-check",hint:"Formul\xe1rio Encerramento",onClick:this.btnFormularioEncerramentoClick,visible:(r.a.sessao.dados.tipo===window.USUARIO_TIPO.COLABORADOR||!0===r.a.sessao.dados.admin)&&this.state.detalhes.exibir_formulario_encerramento&&+this.state.detalhes.formulario_encerramento_id>0&&(this.state.detalhes.situacao===window.CHAMADO_SITUACAO.ENCERRADO||this.state.detalhes.situacao===window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE),elementAttr:{class:"btn_formulario_encerramento"}}),Object(p.jsx)(ne.Item,{acao:"avaliacao",icon:"fas fa-star-half-alt",hint:"Avalia\xe7\xe3o",onClick:this.btnFormularioAvaliacaoClick,visible:+this.state.detalhes.formulario_avaliacao_id>0&&+this.state.detalhes.situacao===window.CHAMADO_SITUACAO.ENCERRADO,elementAttr:{class:"btn_avaliacao"}}),Object(p.jsx)(ne.Item,{acao:"mensagens",icon:"fas fa-comments",hint:"Mensagens",onClick:this.btnMensagensClick,text:this.state.mensagensCount>0?this.state.mensagensCount:null,elementAttr:{class:"btn_mensagens"}}),Object(p.jsx)(ne.Item,{acao:"referencias",icon:"fas fa-sitemap",hint:"Refer\xeancias",onClick:this.btnReferenciasClick,text:this.state.referenciasCount>0?this.state.referenciasCount:null,elementAttr:{class:"btn_referencias"}})]})}),Object(p.jsx)(ie.Item,{location:"after",visible:!this.state.detalhes.rascunho,children:Object(p.jsx)(ne.ButtonGroup,{selectionMode:"single",stylingMode:"text",keyExpr:"acao",selectedItemKeys:[this.state.exibirMaisDetalhes?"exibirMaisDetalhes":null],disabled:this.state.bloquearExibirMaisDetalhes,children:Object(p.jsx)(ne.Item,{acao:"exibirMaisDetalhes",onClick:this.btnToogleExibirMaisDetalhesClick,hint:"mais informa\xe7\xf5es...",icon:"fa fa-users-cog",stylingMode:"text",elementAttr:{class:"btn_exibir_mais_detalhes"}})})}),Object(p.jsx)(ie.Item,{widget:"dxButton",location:"after",visible:!this.state.detalhes.rascunho,showText:"inMenu",locateInMenu:"auto",options:{hint:"Recarregar",text:"Recarregar",onClick:this.btnRecarregarClick,icon:"fas fa-sync-alt",stylingMode:"text",elementAttr:{class:"btn_recarregar"}}}),Object(p.jsx)(ie.Item,{widget:"dxDropDownButton",location:"after",showText:"always",locateInMenu:"auto",options:{text:"Imprimir Chamado",icon:"fas fa-file-pdf",valueExpr:"id",displayExpr:"descricao",items:[{id:1,descricao:"Impress\xe3o padr\xe3o",onClick:e=>this.imprimirChamado()},{id:2,descricao:"Ignorar mensagens vazias",onClick:e=>this.imprimirChamado(!0)}]}})]})}):null,Object(p.jsx)(oe.b,{}),Object(p.jsx)("label",{className:"text-muted",children:"Assunto"}),Object(p.jsx)(B.a,{stylingMode:"filled",value:t,width:"100%",placeholder:"Insira aqui o assunto. Seja breve nas palavras.",onValueChanged:this.assuntoChange,readOnly:a})]})})})}}me.contextType=h;var he=t(1082);class _e extends he.a{constructor(e){super(e),this.props.init.images_upload_handler=this.handleImagesUpload.bind(this),this.props.init.content_css="./"+r.a.url_css_bootstrap}handleImagesUpload(e,a,t){let o,i;o=new XMLHttpRequest,o.withCredentials=!1,o.open("POST",window.WS_URI+"/imagem_tinymce/upload/"),o.setRequestHeader("X-Auth-Token",n.a.token),o.onload=function(){let e;200===o.status?(e=JSON.parse(o.responseText),e&&"string"===typeof e.location?a(e.location):t("Invalid JSON: "+o.responseText)):t("HTTP Error: "+o.status)},i=new FormData,i.append("file",e.blob(),e.filename()),"undefined"!==typeof this.props.moduloId&&i.append("modulo_id",this.props.moduloId),o.send(i)}}_e.defaultProps={moduloId:null,init:{menubar:!1,statusbar:!0,branding:!1,theme:"silver",menu:{},height:310,extended_valid_elements:"script[language|type]",invalid_elements:"script",language:"pt_BR",format:"text",paste_data_images:!0,browser_spellcheck:!0,contextmenu:!1,media_live_embeds:!0,media_poster:!1,media_dimensions:!1,media_alt_source:!1,resize:!0,min_height:310,plugins:["fullscreen media advlist autolink lists link image imagetools charmap print preview hr anchor pagebreak","searchreplace visualblocks visualchars code","insertdatetime nonbreaking table directionality","template paste textpattern"],toolbar:["undo redo | styleselect | bold italic | forecolor backcolor | fullscreen","alignleft aligncenter alignright alignjustify | bullist numlist | link image media "],image_advtab:!0,forced_root_block:""}};var fe=t(696),be=t.n(fe);class ve extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.handleEditorChange=this.handleEditorChange.bind(this),this.elemKey=be()(Math.random()+new Date+Math.random()+be()(Math.random()))}propsToObjState(){var e;return{chamadoId:this.props.chamadoId,chamadoMensagemId:"undefined"!==typeof this.props.chamadoMensagemId?this.props.chamadoMensagemId:null,chamadoMotivoId:null!==(e=this.props.chamadoMotivoId)&&void 0!==e?e:null,editavel:"undefined"!==typeof this.props.editavel&&this.props.editavel,mensagem:"undefined"!==typeof this.props.mensagem?this.props.mensagem:"",tipo:"undefined"!==typeof this.props.tipo?this.props.tipo:"",processando:!1}}componentDidUpdate(e,a){e.mensagem!==this.props.mensagem&&this.setState(this.propsToObjState())}handleEditorChange(e,a){this.setState({mensagem:e},(()=>{this.props.aoEditar&&this.props.aoEditar(e)}))}componentDidMount(){let e=q()("[mensagem_item_fusao="+this.elemKey+"]");e.css("cursor","pointer"),e.on("mouseover",(function(){q()(this).css("text-decoration","underline")})).on("mouseleave",(function(e){e.target.style.removeProperty("text-decoration")})),e.off("click"),e.on("click",(function(e){var a=q()(this).attr("id");d.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:a},(function(e,a){}),window.View.ABA.MULTIPLAS)})),this.peChamadoMensagemEditavelRender()}peChamadoMensagemEditavelRender(){if(r.a.PE.ChamadoMensagemEditavelRender)try{r.a.PE.ChamadoMensagemEditavelRender(this.props.viewHtmlId,this.state)}catch(e){console.log(e)}}render(){if(this.state.editavel)return Object(p.jsx)("div",{className:"cardMensagemChamadoRichTextEditor",style:{marginBottom:"10px"},children:Object(p.jsx)(_e,{value:this.state.mensagem,onEditorChange:this.handleEditorChange,moduloId:window.MODULOS.CHAMADO})});let e=null;e=window.is_html(this.state.mensagem)?this.state.mensagem:window.nl2br(this.state.mensagem);const a=this.elemKey;if(+this.state.tipo===window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_FUSAO_CHAMADOS){let t=e.substring(e.lastIndexOf("chamado(s)")+10+1,e.lastIndexOf("foi(ram)")-1).trim().split(",").map((function(e){return'<span mensagem_item_fusao="'+a+'" id="'+e.substring(1)+'">'+e+"</span>"})).join(", ");e="O(s) chamado(s) "+t+" foi(ram) fundido(s) com este chamado.<br/>"}if(+this.state.tipo===window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_ENCERRAMENTO){const t="Este chamado foi fundido com o chamado ";if(e.indexOf(t)>=0){const o=e.substring(t.length,e.length);e=t+('<span mensagem_item_fusao="'+a+'" id="'+o.substring(1)+'">'+o+"</span>")}}return Object(p.jsx)("div",{className:"mensagemChamado",dangerouslySetInnerHTML:{__html:e}})}}var ge=t(726),we=t(555),je=t(556);class Oe extends s.a.Component{constructor(e){super(e),this.state={horasTrabalhadas:"00:00"===this.props.mascaraHorasTrabalhadas?this.props.horasTrabalhadas:window.format_time(this.props.horasTrabalhadas),mensagemId:this.props.mensagemId,permiteEdicao:this.props.permiteEdicao||!1,modoEdicao:!1},this.horasTrabalhadasInicial=this.state.horasTrabalhadas,this.horasTrabalhadasClick=this.horasTrabalhadasClick.bind(this),this.aoAlterar=this.aoAlterar.bind(this),this.solicitarRefresh=this.solicitarRefresh.bind(this)}horasTrabalhadasClick(){this.setState({modoEdicao:!this.state.modoEdicao})}aoAlterar(e){this.setState({horasTrabalhadas:e.value})}solicitarRefresh(){this.props.aoSolicitarRefresh&&this.props.chamadoId&&this.props.aoSolicitarRefresh(this.props.chamadoId)}render(){let e=null,a=null;return this.state.permiteEdicao&&(e=this.horasTrabalhadasClick,a={cursor:"pointer"}),Object(p.jsx)(s.a.Fragment,{children:this.state.modoEdicao&&this.state.permiteEdicao?Object(p.jsx)("div",{style:{maxWidth:"200px"},children:Object(p.jsxs)(L.TextBox,{mask:Object(je.a)(this.props.mascaraHorasTrabalhadas),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:this.aoAlterar,value:this.state.horasTrabalhadas,stylingMode:"filled",children:[Object(p.jsx)(L.Button,{name:"salvar",location:"after",options:{icon:"far fa-save",type:"default",stylingMode:"text",onClick:()=>{Object(l.g)(this.state.mensagemId,this.state.horasTrabalhadas,(e=>{this.setState({modoEdicao:!1},(()=>{this.horasTrabalhadasInicial=this.state.horasTrabalhadas,this.solicitarRefresh()}))}),(e=>{this.setState({horasTrabalhadas:this.horasTrabalhadasInicial})}))}}}),Object(p.jsx)(L.Button,{name:"cancelar",location:"after",options:{icon:"fas fa-times",type:"normal",stylingMode:"text",onClick:()=>{this.setState({modoEdicao:!1,horasTrabalhadas:this.horasTrabalhadasInicial})}}})]})}):Object(p.jsxs)("div",{className:"text-muted small",title:"Horas trabalhadas",children:[Object(p.jsx)("span",{className:"far fa-clock"}),"\xa0",Object(p.jsx)("span",{onClick:e,style:a,children:window.format_time(this.state.horasTrabalhadas)})]})})}}function xe(e){let a="";switch(parseInt(e.tipo,10)){case 1:a="Abertura";break;case 3:a="Encerramento";break;case 4:a="Reabertura";break;case 5:a="Reclassifica\xe7\xe3o";break;case 6:a="Encerramento por Inatividade";break;case 8:a="Fus\xe3o";break;case 7:a=r.a.lang.observacao_interna_chamado.observacao_interna;break;default:a=""}return Object(p.jsx)("div",{children:Object(p.jsx)("span",{className:"label label-info",style:{},children:a})})}function Ae(e){return e.observacoes?Object(p.jsx)("div",{className:"text-muted small",style:{lineBreak:"anywhere"},dangerouslySetInnerHTML:{__html:e.observacoes}}):null}var Ce=t(330);function Se(e){if(!e.documentos||0===e.documentos.length)return null;const a=e=>{r.a.obter_token_publico((function(a){r.a.download(window.WS_URI+"documento/download/?documento_revisao_id="+e.documento_revisao_id+"&token_publico="+a)}))};return e.documentos.map((e=>{const t="application/pdf"===e.mime_type||"image/png"===e.mime_type||"image/bmp"===e.mime_type||"image/jpeg"===e.mime_type||"image/jpg"===e.mime_type||"image/gif"===e.mime_type||window.MIME_TYPE_OFFICE.indexOf(e.mime_type)>=0;return Object(p.jsxs)("div",{style:{display:"inline-flex"},children:[t?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(Ce.Button,{type:"normal",stylingMode:"outlined",text:window.FileShortName(e.revisao_nome),hint:e.revisao_nome,onClick:()=>(e=>{"application/pdf"===e.mime_type?d.a.load("central_documentos/visualizar_pdf",(function(a,t){t.show(e.documento_revisao_id)})):"image/png"===e.mime_type||"image/bmp"===e.mime_type||"image/jpeg"===e.mime_type||"image/jpg"===e.mime_type||"image/gif"===e.mime_type?d.a.load("central_documentos/visualizar_documento",(function(a,t){t.show(e.documento_revisao_id)})):window.MIME_TYPE_OFFICE.indexOf(e.mime_type)>=0&&r.a.obter_token_publico((a=>{let t=window.location.protocol+"//"+window.location.host+"/"+window.location.pathname,o=t.indexOf("index.html");o>0&&(t=t.substring(0,o)),t+="/webservice/index.php/documento/download/?documento_revisao_id="+e.documento_revisao_id+"&token_publico="+a;var i="https://docs.google.com/viewer?embedded=true&url="+encodeURIComponent(t);window.open(i,"_blank")}))})(e)}),Object(p.jsx)(Ce.Button,{type:"normal",stylingMode:"outlined",icon:"fa fa-download",hint:"Download",onClick:()=>a(e)})]}):Object(p.jsx)(Ce.Button,{type:"normal",stylingMode:"outlined",text:window.FileShortName(e.revisao_nome),hint:e.revisao_nome,onClick:()=>a(e)}),Object(p.jsx)(oe.a,{})]})}))}class Ie extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e;return{valor:null!==(e=this.props.valor)&&void 0!==e?e:null}}componentDidUpdate(e,a){e.valor!==this.props.valor&&this.setState(this.propsToObjState())}aoAlterar(e){this.setState({valor:e.value},(()=>{this.props.aoAlterar&&this.props.aoAlterar(e)}))}render(){let e=this.state.valor?this.state.valor.toString():null;return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)(m,{label:this.props.label,novaMensagem:!0}),Object(p.jsx)(B.a,{mask:Object(je.a)(this.props.mascaraHorasTrabalhadas),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:this.aoAlterar,value:e,stylingMode:"filled"})]})}}Ie.defaultProps={label:"Horas Trabalhadas",valor:null};var Ee=t(727);function Pe(e){return Object(p.jsx)(b.default,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{dataSource:Object(Ee.a)(e.chamadoId)})))}Pe.defaultProps={chamadoId:null,aoAlterar:null,displayExpr:e=>e&&e.nome,children:[Object(p.jsx)(g.a,{caption:"Avalia\xe7\xe3o",width:"100%"})],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1};class Te extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.aoAlterar=this.aoAlterar.bind(this)}propsToObjState(){var e,a;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?null!==(a=this.props.detalhes.nota_avaliacao_id)&&void 0!==a?a:this.props.detalhes.avaliacao_padrao_id:null}}componentDidUpdate(e,a){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}aoAlterar(e){if(!e)return!1;this.props.aoAlterar&&this.props.aoAlterar(e)}render(){let e=this.state.selecionado?this.state.selecionado.toString():null;return Object(p.jsxs)("div",{className:"list-group-item",style:Object(o.a)(Object(o.a)({},this.props.style),{},{border:"0px"}),children:[Object(p.jsx)("label",{className:"small text-muted",children:this.props.label}),Object(p.jsx)(Pe,{chamadoId:this.state.detalhes.id,selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:this.state.detalhes.nota_avaliacao_id})]})}}Te.defaultProps={label:"Referente ao atendimento realizado, voc\xea ficou"};class ye extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.formularioRef=s.a.createRef(),this.renderFormulario=this.renderFormulario.bind(this)}propsToObjState(){var e,a;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?this.props.detalhes.formulario_avaliacao_id:null,readOnly:null!==(a=this.props.readOnly)&&void 0!==a&&a}}componentDidMount(){this.renderFormulario()}componentDidUpdate(e,a){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}render(){return Object(p.jsx)("div",{ref:this.formularioRef})}renderFormulario(){var e;let a=null!==(e=this.props.main)&&void 0!==e?e:{};a.html=q()('<div class="aba_personalizado"><div class="titulo_formulario">Campos Personalizados</div><div class="form-editor"><div class="form-grupos panel-body" style="padding: 0px;"></div><div class="form-grupo" template-grupo template-ref="" style="display: none;"><div><h3 class="text-primary lbl_grupo_nome"></h3></div></div><div class="form-grupo-campo" template-campo template-ref="" style="display: none;"><div class="div_campo form-group"><span class="lbl_obrigatorio text-danger">* </span><label class="lbl_nome">{Nome}</label><div class="div_input"></div></div></div></div></div>'),a.html_id="html_id",a.aba_personalizado=a.html,a.titulo_formulario=a.html.find(".titulo_formulario"),a.form_editor=a.html.find(".form-editor"),a.form_grupos=a.html.find(".form-grupos"),a.template_grupo=a.html.find("[template-grupo]"),a.template_campo=a.html.find("[template-campo]"),a.lbl_nome=a.html.find(".lbl_nome"),n.a.get("formulario_chamado_avaliacao/get_formulario/",{chamado_id:this.state.detalhes.id},(e=>{e&&(a.campos_personalizados=e,a.titulo_formulario.html(e.nome),a.campos_personalizados.registros&&q.a.each(a.campos_personalizados.registros,(function(e,t){"campo_anexo"===e?t&&q.a.each(t,(function(e,t){if(t){var o=t.split(";"),i=parseInt(o[0]),s=o[1];q.a.each(a.campos_personalizados.grupos,(function(a,t){q.a.each(t.elementos,(function(a,t){e===t.id_elemento&&(t.valor=i,t.documento_revisao={},t.documento_revisao.nome_arquivo=s,t.documento_revisao.mime_type=window.extensao_to_mimetype(s.substring(s.lastIndexOf(".")+1,s.length)))}))}))}})):"selecao_documento"===e?q.a.each(t,(function(e,t){q.a.each(a.campos_personalizados.grupos,(function(a,o){q.a.each(o.elementos,(function(a,o){e===o.id_elemento&&(o.valor=t)}))}))})):"campo_tabela"===e&&q.a.each(t,(function(e,t){if("string"===typeof t)try{t=JSON.parse(t.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}catch(o){console.warn(t,t.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}t&&q.a.each(a.campos_personalizados.grupos,(function(a,o){q.a.each(o.elementos,(function(a,o){e===o.id_elemento&&(o.tamanho_render=t.tamanho_render,o.valor=t.valor,"undefined"!==typeof o.valor&&q.a.each(o.valor,(function(e,a){if(null!=a.revisao){var t=a.revisao.split(";"),o=parseInt(t[0]),i=t[1];a.valor=o,a.documento_revisao={},a.documento_revisao.nome_arquivo=i,a.documento_revisao.mime_type=window.extensao_to_mimetype(i.substring(i.lastIndexOf(".")+1,i.length))}})))}))}))}))})),window.require(["./assets/view/formulario/util"],(t=>{(new t).render_previsao({div_formulario:a,template_campo:a.template_campo,template_grupo:a.template_grupo,obj_formulario:a.campos_personalizados,disabled_all:this.state.readOnly,liberar_campos:!this.state.readOnly}),e.registros&&q.a.each(e.registros,(function(t,o){"campo_geral"===t?Object.keys(e.registros.campo_geral).map((function(t,o){return a.aba_personalizado.find("[id_elemento="+t+"]").val(e.registros.campo_geral[t]),a.aba_personalizado.find("[id_elemento="+t+"]").change(),a.aba_personalizado.find("[id_elemento="+t+"]").blur(),t})):"campo_decimal"===t?Object.keys(e.registros.campo_decimal).map((function(t,o){return e.registros.campo_decimal[t]&&(a.aba_personalizado.find("[id_elemento="+t+"]").val(e.registros.campo_decimal[t].replace(".",",")),a.aba_personalizado.find("[id_elemento="+t+"]").change(),a.aba_personalizado.find("[id_elemento="+t+"]").blur()),t})):"lista_opcoes"===t?Object.keys(e.registros.lista_opcoes).map((function(t,o){var i=a.aba_personalizado.find("[id_elemento="+t+"]").find("option"),s=e.registros.lista_opcoes[t];null!=s&&(s=s.split(";"));var n=0;return i&&s&&q.a.each(i,(function(e,a){q.a.each(s,(function(e,t){a.value===t&&(a.selected=!0,q()(a).change(),q()(a).blur(),n=q()(a).index(),q()(a).parent().parent().find("[data-original-index='"+n+"']").addClass("selected"))}))})),t})):"radio"===t?Object.keys(e.registros.radio).map((function(t,o){var i=a.aba_personalizado.find("[id_elemento="+t+"]");return i.parent().find("input[value='"+e.registros.radio[t]+"']").prop("checked",!0),i.parent().find("input[value='"+e.registros.radio[t]+"']").change(),t})):"checkbox"===t?Object.keys(e.registros.checkbox).map((function(t,o){var i=e.registros.checkbox[t];null!=i&&(i=i.split(";"));var s=a.aba_personalizado.find("[id_elemento="+t+"]");return i&&q.a.each(i,(function(e,a){s.parent().find("input[value='"+a+"']").prop("checked",!0)})),t})):"'caixa_verificacao'"===t?q.a.each(e.registros.caixa_verificacao,(function(e,t){"S"===t&&a.aba_personalizado.find("[id_elemento="+e+"]").prop("checked",!0)})):"editor_texto"===t?setTimeout((function(){Object.keys(e.registros.editor_texto).map((function(t,o){return window.tinyMCE.get(a.aba_personalizado.find("[id_elemento="+t+"]").attr("id")).setContent(e.registros.editor_texto[t]),t}))}),500):"campo_integracao"===t&&Object.keys(e.registros.campo_integracao).map((function(t,o){return a.aba_personalizado.find("[id_elemento="+t+"]").find(".dx-dropdownbox").dxDropDownBox("instance").option("value",e.registros.campo_integracao[t]),t}))})),q()(this.formularioRef.current).html(a.form_editor[0])})))}))}}var Re=t(446);let De=!1;class Me extends s.a.Component{constructor(e){var a,t,i,n,r,d,l;super(e),this.state=Object(o.a)(Object(o.a)({mensagem:"undefined"!==typeof this.props.mensagem?this.props.mensagem:null,mensagemEdicao:"undefined"!==typeof this.props.mensagem?this.props.mensagem.mensagem:null,anexos:[]},this.propsToObjState()),{},{nova:"undefined"!==typeof this.props.nova&&this.props.nova,editavel:"undefined"!==typeof this.props.editavel&&this.props.editavel,exibirBotaoDownloadAnexos:null!==(a=this.props.exibirBotaoDownloadAnexos)&&void 0!==a&&a,situacao:null!==(t=this.props.situacao)&&void 0!==t?t:null,previsaoRetorno:null!==(i=this.props.previsaoRetorno)&&void 0!==i?i:null,horasTrabalhadas:null!==(n=this.props.horasTrabalhadas)&&void 0!==n?n:null,notificarEnvolvidos:null===(r=this.props.notificarEnvolvidos)||void 0===r||r,mascaraHorasTrabalhadas:null!==(d=this.props.mascaraHorasTrabalhadas)&&void 0!==d?d:"000:00",fixarPrevisaoRetorno:null!==(l=this.props.fixarPrevisaoRetorno)&&void 0!==l?l:null}),this.escreverMensagem=this.escreverMensagem.bind(this),this.observacaoInterna=this.observacaoInterna.bind(this),this.reclassificar=this.reclassificar.bind(this),this.encerrar=this.encerrar.bind(this),this.avaliar=this.avaliar.bind(this),this.reabertura=this.reabertura.bind(this),this.confirmar=this.confirmar.bind(this),this.cancelar=this.cancelar.bind(this),this.solicitarRefresh=this.solicitarRefresh.bind(this),this.aoEditarMensagem=this.aoEditarMensagem.bind(this),this.aoAlterarTipoExibicaoDataEnvio=this.aoAlterarTipoExibicaoDataEnvio.bind(this),this.aoAlterarSituacao=this.aoAlterarSituacao.bind(this),this.aoAlterarPrevisaoRetorno=this.aoAlterarPrevisaoRetorno.bind(this),this.aoAlterarHorasTrabalhadas=this.aoAlterarHorasTrabalhadas.bind(this),this.aoAlterarNotificarEnvolvidos=this.aoAlterarNotificarEnvolvidos.bind(this),this.aoAlterarNotaAvaliacao=this.aoAlterarNotaAvaliacao.bind(this),this.downloadTodosAnexos=this.downloadTodosAnexos.bind(this),this.btnFusaoChamadosClick=this.btnFusaoChamadosClick.bind(this),this.btnEncerrarInatividadeClick=this.btnEncerrarInatividadeClick.bind(this),this.btnExcluirClick=this.btnExcluirClick.bind(this),this.btnAnexarArquivoClick=this.btnAnexarArquivoClick.bind(this),this.btnRemoverAnexo=this.btnRemoverAnexo.bind(this),this.aoAlterarFixarPrevisaoRetorno=this.aoAlterarFixarPrevisaoRetorno.bind(this),this.formularioAvaliacao={},this.formularioAbertura=s.a.createRef(),this.formularioAberturaMain={},this.formularioEncerramento=s.a.createRef(),this.formularioEncerramentoMain={},this.emmitAoAlterarBotaoPressionado()}propsToObjState(){var e,a,t,i;let s=("undefined"===typeof this.state||"undefined"===typeof this.state.botaoPressionado)&&null!==(e=this.props.botaoPressionado)&&void 0!==e?e:null;s=this.state&&this.state.botaoPressionado?this.state.botaoPressionado:s;const n=!(!this.state||!this.state.editavel)&&this.state.editavel;let d={};if(this.props.detalhes){let e=r.a.get_parametro_usuario("chamado_rascunho_"+this.props.detalhes.id);e&&("undefined"!==typeof e.mensagemEdicao&&(d.mensagemEdicao=e.mensagemEdicao),"undefined"!==typeof e.botaoPressionado&&"avaliar"!==s&&(d.botaoPressionado=this.props.detalhes&&this.props.detalhes.rascunho?"abertura":e.botaoPressionado),"undefined"!==typeof e.anexos&&(d.anexos=e.anexos||[]))}return Object(o.a)({detalhes:null!==(a=this.props.detalhes)&&void 0!==a?a:null,botaoPressionado:this.props.detalhes&&this.props.detalhes.rascunho?"abertura":s,editavel:!(!this.props.detalhes||!this.props.detalhes.rascunho)||n,dataEnvioExtenso:null!==(t=this.props.dataEnvioExtenso)&&void 0!==t&&t,chamadoMotivoId:this.props.detalhes?this.props.detalhes.chamado_motivo_id:null,notaAvaliacaoId:this.props.detalhes?null!==(i=this.props.detalhes.nota_avaliacao_id)&&void 0!==i?i:this.props.detalhes.avaliacao_padrao_id:null},d)}componentDidUpdate(e,a){e.detalhes===this.props.detalhes&&e.dataEnvioExtenso===this.props.dataEnvioExtenso||(r.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:this.state.mensagemEdicao,botaoPressionado:this.state.botaoPressionado,anexos:this.state.anexos}),this.setState(this.propsToObjState()))}componentWillUnmount(){this.state.nova&&r.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:this.state.mensagemEdicao,botaoPressionado:this.state.botaoPressionado,anexos:this.state.anexos})}emmitAoAlterarBotaoPressionado(){"function"===typeof this.props.aoAlterarBotaoPressionado&&this.props.aoAlterarBotaoPressionado(this.state.botaoPressionado)}handleTipoMensagem(e){this.context.handleSetBotaoPressionado(e),this.setState({botaoPressionado:e,editavel:!0}),this.emmitAoAlterarBotaoPressionado()}escreverMensagem(){this.handleTipoMensagem("escreverMensagem")}observacaoInterna(){this.handleTipoMensagem("observacaoInterna")}reclassificar(){this.handleTipoMensagem("reclassificar")}reabertura(){this.handleTipoMensagem("reabertura")}encerrar(){this.handleTipoMensagem("encerrar")}avaliar(){this.handleTipoMensagem("avaliar")}confirmar(){var e,a;if(De)return;De=!0;let t=e=>{De=!1,window.alert_saved("Mensagem salva com sucesso"),r.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:null,botaoPressionado:null,anexos:[]}),this.setState({mensagemEdicao:null,botaoPressionado:null,editavel:!1,processando:!1,anexos:[]},(()=>{this.props.aoSalvar&&this.props.aoSalvar(e),setTimeout((()=>{this.context.handleSetBotaoPressionado(null),this.context.handleSetReclassificacaoMemoria({})}),900)}))},i=e=>{De=!1,window.alert_fail("Falhou, tente novamente."),this.setState({editavel:!0,processando:!1})},s=null;s=this.state.horasTrabalhadas&&this.state.horasTrabalhadas.trim().replace(":","").length>0?this.state.horasTrabalhadas:this.state.mascaraHorasTrabalhadas;let d={chamado_id:this.state.detalhes.id,mensagem:this.state.mensagemEdicao,situacao:this.state.situacao?this.state.situacao:this.state.detalhes.situacao,data_previsao_retorno:this.state.previsaoRetorno?window.formatDateTime(this.state.previsaoRetorno,!0):null,documentos:this.state.anexos.map((e=>e.file)),enviar_documento:this.state.anexos.map((e=>e.email.toString())).join(","),horas_trabalhadas:s,notificacao_mensagem_reclassificacao:this.state.notificarEnvolvidos,nota_avaliacao_id:null!==(e=this.state.notaAvaliacaoId)&&void 0!==e?e:null,rascunho:!1,tipo:null,assunto:this.context.assuntoChamadoAtual,fixar_previsao_retorno:null!==(a=this.state.fixarPrevisaoRetorno)&&void 0!==a?a:null};if(+this.state.detalhes.apontamento_projeto_id>0&&"encerrar"===this.state.botaoPressionado&&1===+this.state.detalhes.status_apontamento){let e=()=>{n.a.post("chamado/encerrar_chamado",d,t,null,null,!0,null,null,null,i)};this.context.handlePausarApontamento(this.state.detalhes,e)}else if(d.horas_trabalhadas.trim().replace(" ","").replace(":","").length!==this.state.mascaraHorasTrabalhadas.replace(":","").length)Object(c.alert)("Formato inv\xe1lido para Horas Trabalhadas","Valida\xe7\xe3o");else{let e="mensagem/salvar";if("observacaoInterna"===this.state.botaoPressionado)e="mensagem/salvar_observacao_interna";else if(["encerrar","avaliar"].includes(this.state.botaoPressionado)&&"S"===this.state.detalhes.exibir_avaliacao&&+this.state.detalhes.solicitante_id===+r.a.sessao.usuario_id){var l,u;if(this.formularioAvaliacao.campos_personalizados&&(!this.validar_campos_obrigatorios()||!this.validar_data_form()))return!1;e="chamado/salvar_avaliacao",d=Object(o.a)(Object(o.a)({},d),{},{formulario_avaliacao:JSON.stringify(this.formularioAvaliacao.campos_personalizados)},null===(l=this.formularioEncerramento)||void 0===l||null===(u=l.current)||void 0===u?void 0:u.getPostParams()),this.formularioAvaliacao.campos_personalizados&&q()(this.formularioAvaliacao.campos_personalizados.grupos).each((function(e,a){q()(a.elementos).each((function(e,a){+a.tipo===window.ELEMENTO_TIPO.ANEXO&&a.anexo?d[a.elem_key]=a.anexo:+a.tipo===window.ELEMENTO_TIPO.TABELA&&a.valor&&q()(a).each((function(e,a){a.valor&&q()(a.valor).each((function(e,a){d[a.elem_key+"_linha_"+a.linha]=a.anexo}))}))}))}))}else if("encerrar"===this.state.botaoPressionado){var p,m,h,_,f;if(null!==(p=this.formularioEncerramento)&&void 0!==p&&p.current&&(null===(m=this.formularioEncerramento)||void 0===m||null===(h=m.current)||void 0===h||!h.validar()))return De=!1,!1;e="chamado/encerrar_chamado",d=Object(o.a)(Object(o.a)({},d),null===(_=this.formularioEncerramento)||void 0===_||null===(f=_.current)||void 0===f?void 0:f.getPostParams())}else if("reabertura"===this.state.botaoPressionado)e="chamado/reabrir_chamado";else if("abertura"===this.state.botaoPressionado){if(!this.formularioAbertura.current.validar())return De=!1,!1;e="mensagem/salvar",d=Object(o.a)(Object(o.a)(Object(o.a)({},d),this.formularioAbertura.current.getPostParams()),{},{tipo:window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_ABERTURA})}else if("reclassificar"===this.state.botaoPressionado){var b;e="chamado/salvar",d=Object(o.a)(Object(o.a)({},d),null!==(b=this.context.reclassificacaoMemoria)&&void 0!==b?b:{})}n.a.post(e,d,t,null,null,!0,null,null,null,i)}}cancelar(){if(this.state.detalhes.rascunho){let e=e=>{window.alert_saved("Rascunho cancelado."),d.a.unload(this.props.viewHtmlId)},a=e=>{window.alert_fail("Falhou, tente novamente."),this.setState({editavel:!0,processando:!1})};window.alertaPopUp("Cancelar","Deseja cancelar? Este <b>rascunho</b> de chamado ser\xe1 <b>exclu\xeddo</b> permanentemente.","Sim, excluir este rascunho",(()=>{n.a.post({route:"chamado/excluir",data:{chamado_id:this.state.detalhes.id},func_response:e,func_fail:a})}),"N\xe3o, voltar para edi\xe7\xe3o",(()=>{}),null,"200px")}else this.context.handleSetBotaoPressionado(null),this.context.handleSetNovoAssuntoChamado(this.context.assuntoChamadoAnterior),this.setState({botaoPressionado:null,editavel:!1,anexos:[]}),this.solicitarRefresh();r.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:null,botaoPressionado:null,anexos:[]}),this.emmitAoAlterarBotaoPressionado()}solicitarRefresh(e){this.props.aoSolicitarRefresh&&this.props.aoSolicitarRefresh(e)}aoEditarMensagem(e){this.setState({mensagemEdicao:e})}aoAlterarSituacao(e){this.setState({situacao:e})}aoAlterarPrevisaoRetorno(e){this.setState({previsaoRetorno:e.value})}aoAlterarHorasTrabalhadas(e){this.setState({horasTrabalhadas:e.value})}aoAlterarNotificarEnvolvidos(e){this.setState({notificarEnvolvidos:e.value})}aoAlterarNotaAvaliacao(e){this.setState({notaAvaliacaoId:e})}aoAlterarFixarPrevisaoRetorno(e){e=e?"S":"N",this.setState({fixarPrevisaoRetorno:e})}form_get_elemento_by_id(e){var a={};return q()(this.formularioAvaliacao.campos_personalizados.grupos).each((function(t,o){Array.isArray(o.elementos)&&q()(o.elementos).each((function(t,o){o.id_elemento===e&&(a=o)}))})),a=window.spread({nome:""},a)}validar_data_form(){var e=new Date,a=("0"+e.getDate()).slice(-2),t=("0"+(e.getMonth()+1)).slice(-2),o=e.getFullYear()+"-"+t+"-"+a,i="";return this.formularioAvaliacao.form_editor.find('[type="date"]').each((function(e,a){var t=q()(a);"undefined"==typeof(t.attr("disabled")||t.attr("readonly"))&&"none"!==q()(a).css("display")&&""!==a.value&&null!=a.value&&("S"===t.attr("data_retroativa")&&(window.get_datepicker(t)<o?(t.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),t.tooltip("show"),i+=this.form_get_elemento_by_id(q()(a).attr("id_elemento")).nome+"<br />"):t.tooltip("destroy")),"S"===t.attr("data_retroativa_igual")&&(window.get_datepicker(t)<=o?(t.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),t.tooltip("show"),i+=this.form_get_elemento_by_id(q()(a).attr("id_elemento")).nome+"<br />"):t.tooltip("destroy")))})),""===i||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Data Inv\xe1lida !'," Data informada fora do per\xedodo v\xe1lido, informe corretamente para os campos abaixo: <br /><br /> "+i),!1)}validar_campos_obrigatorios(){var e="";return this.formularioAvaliacao.form_editor.find("[required]").not(".selectpicker").each(((a,t)=>{var o=q()(t);"text"===o.attr("type")&&"undefined"==typeof o.attr("maskmoney")?"undefined"==typeof o.attr("readonly")&&"none"!==q()(t).css("display")||q()(t).hasClass("input_consulta_integracao")?"undefined"!==typeof o.attr("maskmoney")?""!==t.value.trim()&&0!==o.maskMoney("unmasked")[0]||(e+=this.form_get_elemento_by_id(q()(t).attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(o)):""===t.value.trim()&&(e+=this.form_get_elemento_by_id(q()(t).attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(o)):o.tooltip("destroy"):"undefined"==typeof o.attr("disabled")&&"none"!==q()(t).css("display")?"undefined"!==typeof o.attr("maskmoney")||"date"===o.attr("type")&&"undefined"==typeof o.attr("disabled")&&"undefined"==typeof o.attr("readonly")?""===t.value.trim()&&(e+=this.form_get_elemento_by_id(q()(t).attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(o)):""===t.value.trim()&&"date"!==o.attr("type")&&(e+=this.form_get_elemento_by_id(q()(t).attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(o)):o.tooltip("destroy")})),this.formularioAvaliacao.form_editor.find(".vld_lista_check").each(((a,t)=>{var o=q()(t);if(!o[0].children[0].disabled&&"none"!==o[0].children[0].style.display){var i=o.find("input:checked"),s=o.parent().find(".lbl_nome");i&&0!==i.length?s.tooltip("destroy"):(e+=this.form_get_elemento_by_id(q()(t).find("input:first").attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(s))}})),this.formularioAvaliacao.form_editor.find(".vld_lista_radio").each(((a,t)=>{var o=q()(t);if(!o[0].children[0].disabled&&"none"!==o[0].children[0].style.display){var i=o.find("input:checked"),s=o.parent().find(".lbl_nome");i&&0!==i.length?s.tooltip("destroy"):(e+=this.form_get_elemento_by_id(q()(t).find("input:first").attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(s))}})),this.formularioAvaliacao.form_editor.find("select.selectpicker[required]").each(((a,t)=>{var o=q()(t);if(!o[0].disabled&&"none"!==o[0].style.display){var i=o.val(),s=o.closest(".div_campo").find(".lbl_nome");i&&0!==i.length?s.tooltip("destroy"):(e+=this.form_get_elemento_by_id(q()(t).attr("id_elemento")).nome+"<br />",this.alerta_campo_obrigatorio(s))}})),""===e||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Campos Obrigat\xf3rios !'," Por gentileza, preencha os campos abaixo: <br /><br /> "+e),!1)}alerta_campo_obrigatorio(e,a){e.tooltip({title:"Campo obrigatorio",placement:"undefined"!=typeof a?a:"auto"}),e.tooltip("show")}renderGridAnexos(){return!(!this.state.anexos||0===this.state.anexos.length)&&Object(p.jsxs)(V.default,{dataSource:this.state.anexos,filterPanel:{visible:!1},filterRow:{visible:!1},headerFilter:{visible:!1},groupPanel:{visible:!1},export:{enabled:!1},allowColumnReordering:!1,columnChooser:{enabled:!1},editing:{mode:"cell",allowUpdating:!0},keyExpr:"id",showBorders:!1,showColumnLines:!1,columnFixing:{enable:!1},rowAlternationEnabled:!1,children:[Object(p.jsx)(z.Column,{dataField:"arquivo",allowEditing:!1}),Object(p.jsx)(z.Column,{dataField:"tamanho",allowEditing:!1,width:100}),Object(p.jsx)(z.Column,{dataField:"email",width:100}),Object(p.jsx)(z.Column,{type:"buttons",width:50,alignment:"right",children:Object(p.jsx)(z.Button,{hint:"Remover anexo",icon:"fa fa-times",onClick:this.btnRemoverAnexo})})]})}btnRemoverAnexo(e){let a=this.state.anexos,t=[];a.forEach((a=>{e.row.data.file!==a.file&&t.push(a)})),this.setState({anexos:t})}downloadTodosAnexos(){r.a.obter_token_publico((e=>{r.a.download(window.WS_URI+"chamado/download/?chamado_id="+this.state.detalhes.id+"&token_publico="+e)}))}btnFusaoChamadosClick(){d.a.load("chamado/fusao_chamados",((e,a)=>{a.onclose=()=>{this.props.aoSalvar&&this.props.aoSalvar()},a.show(this.state.detalhes.id)}))}btnEncerrarInatividadeClick(){d.a.load("chamado/encerramento_chamado_inatividade",((e,a)=>{a.onclose=()=>{this.props.aoSalvar&&this.props.aoSalvar()},a.show(this.state.detalhes.id)}))}btnExcluirClick(){d.a.load("chamado/excluir_chamado",((e,a)=>{a.onclose=()=>{d.a.unload(this.props.viewHtmlId)},a.show(this.state.detalhes.id)}))}btnAnexarArquivoClick(){let e=document.createElement("input");e.type="file",e.multiple="multiple",e.onchange=e=>{const a=Array.from(e.target.files);let t=[];a.forEach((e=>{t.push({arquivo:e.name,tamanho:window.filesize(e.size),email:!1,mimeType:e.type,file:e,id:window.elem_key_random()})})),this.setState({anexos:[...this.state.anexos,...t]})},e.click()}aoAlterarTipoExibicaoDataEnvio(e){this.props.aoAlterarTipoExibicaoDataEnvio&&this.props.aoAlterarTipoExibicaoDataEnvio(e)}render(){var e;if(!("undefined"!==typeof this.props.mensagem?this.props.mensagem.tipo:null)){let e=[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.props.chamadoSituacao),a=!1;if("S"===this.state.detalhes.somente_admin_encerra&&r.a.sessao.dados.admin)a=!0;else if("S"===this.state.detalhes.somente_solicitante_encerra){if(r.a.sessao.usuario_id===+this.state.detalhes.solicitante_id||r.a.sessao.dados.admin)a=!0;else if(r.a.sessao.dados.usuarios_substituidos.length>0){r.a.sessao.dados.usuarios_substituidos.filter((e=>"S"===e.substituir_modulo_chamados&&+e.usuario_substituido_id===+this.state.detalhes.solicitante_id)).length>0&&(a=!0)}}else"N"===this.state.detalhes.somente_admin_encerra&&"N"===this.state.detalhes.somente_solicitante_encerra&&(a=!0);if("encerrar"===this.state.botaoPressionado){let e=window.nl2br(this.state.detalhes.mensagem_padrao);"S"===this.state.detalhes.sugerir_mensagem_padrao_colaboradores&&+r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR&&(e=null),e&&!this.state.mensagemEdicao&&this.state.mensagemEdicao!==e&&this.setState({mensagemEdicao:e})}let t=[];if(r.a.PE.CardMensagemChamadoTopoBotoesAdicionais)try{let e=r.a.PE.CardMensagemChamadoTopoBotoesAdicionais(this.props.viewHtmlId,this.state,this.solicitarRefresh);Array.isArray(e)&&e.forEach((e=>{t.push(Object(p.jsx)(ne.Item,{text:e.titulo,type:"default",onClick:e.click,visible:!0},window.random_hash()))}))}catch(h){console.log(h)}return t.push(Object(p.jsx)(ne.Item,{acao:"escreverMensagem",icon:"fas fa-comment",text:"Escrever Mensagem",type:"escreverMensagem"===this.state.botaoPressionado?"default":"normal",onClick:this.escreverMensagem,visible:!e,elementAttr:{class:"btn_escrever_mensagem"}},"escreverMensagem"),Object(p.jsx)(ne.Item,{acao:"observacaoInterna",icon:"fas fa-sticky-note",text:"Observa\xe7\xe3o Interna",type:"observacaoInterna"===this.state.botaoPressionado?"default":"normal",onClick:this.observacaoInterna,visible:r.a.sessao.dados.tipo===window.USUARIO_TIPO.COLABORADOR,elementAttr:{class:"btn_observacao_interna"}},"observacaoInterna"),Object(p.jsx)(ne.Item,{acao:"reclassificar",icon:"fas fa-tag",text:"Reclassificar",type:"reclassificar"===this.state.botaoPressionado?"default":"normal",onClick:this.reclassificar,visible:!e&&r.a.sessao.dados.tipo===window.USUARIO_TIPO.COLABORADOR&&r.a.verifica_permissao(r.a.temp.empresa,"reclassificar_chamado"),elementAttr:{class:"btn_reclassificar"}},"reclassificar"),Object(p.jsx)(ne.Item,{acao:"encerrar",icon:"fas fa-check",text:"Encerrar",type:"encerrar"===this.state.botaoPressionado?"default":"normal",onClick:this.encerrar,visible:!e&&a,elementAttr:{class:"btn_encerrar"}},"encerrar"),Object(p.jsx)(ne.Item,{acao:"avaliar",icon:"fas fa-star-half-alt",text:"Avaliar",type:"avaliar"===this.state.botaoPressionado?"success":"normal",onClick:this.avaliar,visible:e&&"S"===this.state.detalhes.exibir_avaliacao&&0===+this.state.detalhes.nota_avaliacao_id&&0===+this.state.detalhes.formulario_chamado_avaliacao_id&&+r.a.sessao.dados.usuario_id===+this.state.detalhes.solicitante_id,elementAttr:{class:"btn_avaliar"}},"avaliar"),Object(p.jsx)(ne.Item,{acao:"reabertura",icon:"far fa-thumbs-down",text:"Reabrir chamado",type:"reabertura"===this.state.botaoPressionado?"danger":"normal",onClick:this.reabertura,visible:e,elementAttr:{class:"btn_reabertura"}},"reabertura")),Object(p.jsx)(s.a.Fragment,{children:Object(p.jsx)("div",{className:"panel ",children:Object(p.jsx)("div",{className:"panel-body ",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-xs-12 text-left",children:[this.state.nova?Object(p.jsxs)(se.a,{visible:this.state.detalhes&&!this.state.detalhes.rascunho,stylingMode:"text",ref:this.toolBarTopoRef,children:[Object(p.jsx)(ie.Item,{location:"before",children:Object(p.jsx)(ne.ButtonGroup,{selectionMode:"single",stylingMode:"text",selectedItemKeys:[this.state.botaoPressionado],keyExpr:"acao",children:t})}),Object(p.jsx)(ie.Item,{locateInMenu:"always",widget:"dxButton",visible:!e&&r.a.verifica_permissao(r.a.temp.empresa,"chamado_fusao"),children:Object(p.jsx)(Ce.Button,{onClick:this.btnFusaoChamadosClick,text:"Fundir outros chamados neste chamado",icon:"fas fa-object-group",stylingMode:"text"})}),Object(p.jsx)(ie.Item,{locateInMenu:"always",widget:"dxButton",visible:!e&&a,children:Object(p.jsx)(Ce.Button,{onClick:this.btnEncerrarInatividadeClick,text:"Encerrar por Inatividade",icon:"fa fa-clock",stylingMode:"text"})}),Object(p.jsx)(ie.Item,{locateInMenu:"always",widget:"dxButton",visible:r.a.sessao.dados.admin,children:Object(p.jsx)(Ce.Button,{onClick:this.btnExcluirClick,text:"Excluir",icon:"fa fa-trash-alt",stylingMode:"text"})}),Object(p.jsx)(ie.Item,{location:"after",children:Object(p.jsx)(Ce.Button,{onClick:this.downloadTodosAnexos,hint:"Download de todos os anexos",icon:"fa fa-download",stylingMode:"text",visible:this.state.exibirBotaoDownloadAnexos})})]},"toolbar"):null,this.state.botaoPressionado?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(oe.b,{}),Object(p.jsxs)("div",{children:["avaliar"!==this.state.botaoPressionado?Object(p.jsx)(ve,{viewHtmlId:this.props.viewHtmlId,chamadoMotivoId:this.state.chamadoMotivoId,editavel:!0,chamadoId:this.state.detalhes.id,aoEditar:this.aoEditarMensagem,mensagem:this.state.mensagemEdicao}):null,e||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR||["observacaoInterna","reabertura"].includes(this.state.botaoPressionado)?null:Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsxs)("div",{className:"row",children:[["escreverMensagem"].includes(this.state.botaoPressionado)?Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)($,{detalhes:this.state.detalhes,style:{padding:"0px"},novaMensagem:!0,aoAlterar:this.aoAlterarSituacao,botaoPressionado:this.context.botaoPressionado,configuracoesChamado:this.props.configuracoesChamado})}):null,["escreverMensagem"].includes(this.state.botaoPressionado)?Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)(D,{style:{padding:"0px"},novaMensagem:!0,detalhes:this.state.detalhes,aoAlterar:this.aoAlterarPrevisaoRetorno,aoAlterarFixarPrevisaoRetorno:this.aoAlterarFixarPrevisaoRetorno})}):null,["escreverMensagem","reclassificar","encerrar"].includes(this.state.botaoPressionado)?Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)(Ie,{style:{padding:"0px"},aoAlterar:this.aoAlterarHorasTrabalhadas,mascaraHorasTrabalhadas:this.state.mascaraHorasTrabalhadas})}):null]}),Object(p.jsx)(oe.b,{})]}),this.renderGridAnexos(),Object(p.jsx)(oe.b,{}),e&&"reabertura"===this.state.botaoPressionado?Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-12",children:["O chamado ser\xe1 reaberto, antes de prosseguir, verifique se o assunto do chamado est\xe1 relacionado com o motivo da reabertura do mesmo, caso contr\xe1rio realize a abertura de um novo chamado.",Object(p.jsx)(oe.b,{})]})}):null,!["encerrar","avaliar"].includes(this.state.botaoPressionado)||"S"!==this.state.detalhes.exibir_avaliacao||+r.a.sessao.dados.usuario_id!==+this.state.detalhes.solicitante_id&&+r.a.sessao.dados.usuario_id!==+this.state.detalhes.usuario_abertura_id?null:Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:+this.state.detalhes.formulario_avaliacao_id>0?Object(p.jsx)(ye,{detalhes:this.state.detalhes,main:this.formularioAvaliacao}):Object(p.jsx)(Te,{style:{padding:"0px"},detalhes:this.state.detalhes,aoAlterar:this.aoAlterarNotaAvaliacao})})}),Object(p.jsx)(oe.b,{})]}),!["encerrar"].includes(this.state.botaoPressionado)||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR&&!0!==r.a.sessao.dados.admin||"S"!==this.state.detalhes.exibir_formulario_encerramento?null:Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(Re.default,{ref:this.formularioEncerramento,main:this.formularioEncerramentoMain,urlGet:"formulario_chamado_encerramento/get_formulario",urlGetParams:{chamado_id:this.state.detalhes.id,motivo_id:this.state.chamadoMotivoId},paramCamposPersonalizados:"formulario_encerramento"})})}),Object(p.jsx)(oe.b,{})]}),["abertura"].includes(this.state.botaoPressionado)?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(Re.default,{ref:this.formularioAbertura,main:this.formularioAberturaMain,urlGet:"formulario_chamado_abertura/get_formulario",urlGetParams:{chamado_id:this.state.detalhes.id,motivo_id:this.state.chamadoMotivoId},paramCamposPersonalizados:"formulario_abertura"})})}),Object(p.jsx)(oe.b,{})]}):null,Object(p.jsxs)(se.a,{children:[Object(p.jsxs)(ie.Item,{location:"before",children:[Object(p.jsx)(Ce.Button,{onClick:this.confirmar,text:"Confirmar",icon:"fas fa-check",stylingMode:"contained",type:"encerrar"===this.state.botaoPressionado?"success":"default"}),Object(p.jsx)(Ce.Button,{onClick:this.btnAnexarArquivoClick,hint:"Anexar arquivo",icon:"fas fa-paperclip",stylingMode:"text",visible:"avaliar"!==this.state.botaoPressionado})]}),e||this.state.detalhes.rascunho||r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR&&!0!==r.a.sessao.dados.admin||!(["reclassificar","escreverMensagem"].includes(this.state.botaoPressionado)&&"S"===this.state.detalhes.notificacao_mensagem_reclassificacao_opcional||["observacaoInterna"].includes(this.state.botaoPressionado)&&"S"===this.state.detalhes.notificacao_observacao_interna_opcional)?null:Object(p.jsx)(ie.Item,{location:"before",children:Object(p.jsx)(R.CheckBox,{text:"Notificar envolvidos",value:this.state.notificarEnvolvidos,onValueChanged:this.aoAlterarNotificarEnvolvidos})}),Object(p.jsx)(ie.Item,{location:"after",children:Object(p.jsx)(Ce.Button,{onClick:this.cancelar,text:"Cancelar",stylingMode:"text"})})]})]})]}):null]})})})})})}let a=null,t="",o=!1,i=0,n=0;this.state.nova?(a=r.a.sessao.dados.foto_id,t=r.a.sessao.dados.nome):"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.nome_usuario&&(a=this.state.mensagem.foto_id,t=this.state.mensagem.nome_usuario,o=this.state.mensagem.usuario_supervisionado,i=+this.state.mensagem.usuario_tipo,n=+this.state.mensagem.tipo);let d=Object(p.jsx)(ce.a,{nome:t,tamanho:"32",documentoId:a,imgAlternativa:"assets/img/icones_bp/imagem_usuario_padrao.svg"}),l=parseInt(r.a.sessao.dados.usuario_id,10)===parseInt(this.state.mensagem.usuario_id,10),c=l?"text-right pull-right":"text-left";const u=r.a.verifica_permissao(r.a.temp.empresa,"edicao_horas_trabalhadas");let m=r.a.sessao.dados.admin||u&&(l||o);return Object(p.jsx)("div",{className:"panel",children:Object(p.jsx)("div",{className:"panel-body",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-xs-12 text-left",style:{display:"inline-flex",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:[l?null:Object(p.jsxs)(s.a.Fragment,{children:[d,Object(p.jsx)(oe.a,{})]}),Object(p.jsxs)("div",{style:{width:"100%"},children:[Object(p.jsxs)("div",{className:c,children:[Object(p.jsx)(ge.a,{nome:t}),Object(p.jsx)(we.a,{dataEnvio:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.data_envio?this.state.mensagem.data_envio:null,aoAlterarTipoExibicao:this.aoAlterarTipoExibicaoDataEnvio,extenso:this.state.dataEnvioExtenso}),i===window.USUARIO_TIPO.COLABORADOR&&[window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_NORMAL,window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_ENCERRAMENTO,window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_RECLASSIFICACAO].includes(n)?Object(p.jsx)("div",{children:Object(p.jsx)(Oe,{chamadoId:this.props.chamadoId,mensagemId:this.props.chamadoMensagemId,permiteEdicao:m,horasTrabalhadas:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.horas_trabalhadas?this.state.mensagem.horas_trabalhadas:null,mascaraHorasTrabalhadas:this.props.mascaraHorasTrabalhadas,aoSolicitarRefresh:null!==(e=this.props.aoSolicitarRefresh)&&void 0!==e?e:null})}):null]}),"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.tipo?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(xe,{tipo:this.state.mensagem.tipo}),l&&parseInt(this.state.mensagem.tipo,10)===window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_NORMAL?null:Object(p.jsx)(oe.b,{})]}):null,Object(p.jsx)(ve,{viewHtmlId:this.props.viewHtmlId,editavel:this.state.editavel,chamadoId:this.state.detalhes?this.state.detalhes.id:null,chamadoMotivoId:this.state.chamadoMotivoId,mensagem:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.mensagem?this.state.mensagem.mensagem:"Sem mensagem",tipo:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.tipo?this.state.mensagem.tipo:null},"mensagem"),"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.observacoes?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(oe.b,{}),Object(p.jsx)(Ae,{observacoes:this.state.mensagem.observacoes},"observacoes")]}):null,"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.documentos&&Array.isArray(this.state.mensagem.documentos)&&this.state.mensagem.documentos.length>0?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(oe.b,{}),Object(p.jsx)(Se,{documentos:this.state.mensagem.documentos},"documentos")]}):null]}),l?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(oe.a,{}),d]}):null]})})})})}}Me.contextType=h;class ke extends s.a.Component{constructor(e){super(e),this.buttonGroupRef=s.a.createRef(null),this.handleExibirMensagens=this.handleExibirMensagens.bind(this),this.state={exibirMensagens:!1}}render(){const e={backgroundColor:"#FFF",boxSizing:"border-box",padding:10,minWidth:200,marginTop:5};return Object(p.jsx)("div",{id:"container",children:Object(p.jsxs)("div",{style:Object(o.a)({display:"flex"},{marginBottom:12,marginTop:-8,gap:10}),id:"grupoMensagens",children:[Object(p.jsx)("a",{style:{display:"inline-block",width:"30px",height:"30px",borderRadius:10,backgroundColor:"#FFF",textAlign:"center",lineHeight:"31px",textDecoration:"none",fontSize:12,fontWeight:"bold"},href:"#",ref:this.buttonGroupRef,onClick:this.handleExibirMensagens,title:"Exibir mensagens agrupadas",children:Object(p.jsx)("i",{className:this.state.exibirMensagens?"fas fa-times":"fas fa-ellipsis-h"})}),Object(p.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:Array.isArray(this.props.mensagens)&&this.props.mensagens.length&&this.props.mensagens.map(((a,t)=>{var o;let i=parseInt(r.a.sessao.dados.usuario_id)===parseInt(a.usuario_id),s=(r.a.sessao.dados.admin||r.a.verifica_permissao(r.a.temp.empresa,"edicao_horas_trabalhadas"))&&(i||a.usuario_supervisionado);return Object(p.jsx)("div",{style:{display:this.state.exibirMensagens?"":"none",marginTop:-4,marginBottom:t+1!=this.props.mensagens.length?8:0},className:"mensagemGrupo",children:Object(p.jsxs)("div",{style:e,children:[Object(p.jsx)("div",{style:{float:"right"},children:Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsxs)("div",{style:{marginRight:12},children:[Object(p.jsx)("strong",{style:{display:"block",textAlign:"right"},children:a.nome_usuario}),Object(p.jsx)(we.a,{dataEnvio:a.data_envio,aoAlterarTipoExibicao:this.props.aoAlterarTipoExibicaoDataEnvio,extenso:this.props.dataEnvioExtenso}),Object(p.jsx)("div",{style:{textAlign:"right"},children:Object(p.jsx)(Oe,{chamadoId:a.chamado_id,mensagemId:a.id,permiteEdicao:s,horasTrabalhadas:a.horas_trabalhadas,mascaraHorasTrabalhadas:this.props.mascaraHorasTrabalhadas,aoSolicitarRefresh:null!==(o=this.props.aoSolicitarRefresh)&&void 0!==o?o:null})})]}),Object(p.jsx)("div",{children:Object(p.jsx)(ce.a,{nome:a.nome_usuario,tamanho:"32",documentoId:a.foto_id,imgAlternativa:"assets/img/icones_bp/imagem_usuario_padrao.svg"})})]})}),Object(p.jsx)("div",{className:"text-muted small",style:{lineBreak:"anywhere"},dangerouslySetInnerHTML:{__html:a.observacoes}})]})})}))})]})})}handleExibirMensagens(){this.setState((e=>({exibirMensagens:!e.exibirMensagens})))}}var Ne=t(497);t(374),t(1024);class Fe extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.formularioAbertura=s.a.createRef(),this.formularioAberturaMain={},this.confirmarClick=this.confirmarClick.bind(this),this.cancelarClick=this.cancelarClick.bind(this)}propsToObjState(){var e,a,t;return{chamadoId:null!==(e=this.props.chamadoId)&&void 0!==e?e:null,chamadoMotivoId:null!==(a=this.props.chamadoMotivoId)&&void 0!==a?a:null,readOnly:null!==(t=this.props.readOnly)&&void 0!==t&&t}}componentDidUpdate(e,a){e.chamadoId===this.props.chamadoId&&e.chamadoMotivoId===this.props.chamadoMotivoId||this.setState(this.propsToObjState())}confirmarClick(){if(!this.formularioAbertura.current.validar())return!1;let e=Object(o.a)(Object(o.a)({chamado_id:this.state.chamadoId},this.formularioAbertura.current.getPostParams()),this.formularioAbertura.current.getAnexosParams());n.a.post({route:"formulario_chamado_abertura/salvar",data:e,func_response:e=>{window.alert_saved("Formul\xe1rio salvo com sucesso."),this.formularioAbertura.current.renderFormulario()},func_fail:e=>{window.alert_fail("Falhou, tente novamente.")},data_files:!0})}cancelarClick(){this.formularioAbertura.current.renderFormulario()}render(){return Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(Re.default,{ref:this.formularioAbertura,main:this.formularioAberturaMain,urlGet:"formulario_chamado_abertura/get_formulario",urlGetParams:{chamado_id:this.state.chamadoId,motivo_id:this.state.chamadoMotivoId},readOnly:this.state.readOnly}),Object(p.jsxs)(se.a,{visible:!this.state.readOnly,children:[Object(p.jsx)(ie.Item,{location:"before",children:Object(p.jsx)(Ce.Button,{onClick:this.confirmarClick,text:"Salvar",icon:"fas fa-check",stylingMode:"contained",type:"default"})}),Object(p.jsx)(ie.Item,{location:"after",children:Object(p.jsx)(Ce.Button,{onClick:this.cancelarClick,text:"Cancelar",stylingMode:"text"})})]})]})}}class Le extends s.a.Component{constructor(e){super(e),this.state=this.propsToObjState(),this.formularioEncerramento=s.a.createRef(),this.formularioEncerramentoMain={},this.confirmarClick=this.confirmarClick.bind(this),this.cancelarClick=this.cancelarClick.bind(this)}propsToObjState(){var e,a,t;return{chamadoId:null!==(e=this.props.chamadoId)&&void 0!==e?e:null,chamadoMotivoId:null!==(a=this.props.chamadoMotivoId)&&void 0!==a?a:null,readOnly:null!==(t=this.props.readOnly)&&void 0!==t&&t}}componentDidUpdate(e,a){e.chamadoId===this.props.chamadoId&&e.chamadoMotivoId===this.props.chamadoMotivoId||this.setState(this.propsToObjState())}confirmarClick(){var e,a,t,i,s,r,d;if(null!==(e=this.formularioEncerramento)&&void 0!==e&&e.current&&(null===(a=this.formularioEncerramento)||void 0===a||null===(t=a.current)||void 0===t||!t.validar()))return!1;let l=Object(o.a)(Object(o.a)({chamado_id:this.state.chamadoId},null===(i=this.formularioEncerramento)||void 0===i||null===(s=i.current)||void 0===s?void 0:s.getPostParams()),null===(r=this.formularioEncerramento)||void 0===r||null===(d=r.current)||void 0===d?void 0:d.getAnexosParams());n.a.post({route:"formulario_chamado_encerramento/salvar",data:l,func_response:e=>{var a,t;window.alert_saved("Formul\xe1rio salvo com sucesso."),null===(a=this.formularioEncerramento)||void 0===a||null===(t=a.current)||void 0===t||t.renderFormulario()},func_fail:e=>{window.alert_fail("Falhou, tente novamente.")},data_files:!0})}cancelarClick(){var e,a;null===(e=this.formularioEncerramento)||void 0===e||null===(a=e.current)||void 0===a||a.renderFormulario()}render(){return Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)(Re.default,{ref:this.formularioEncerramento,main:this.formularioEncerramentoMain,urlGet:"formulario_chamado_encerramento/get_formulario",urlGetParams:{chamado_id:this.state.chamadoId,motivo_id:this.state.chamadoMotivoId},readOnly:this.state.readOnly}),Object(p.jsxs)(se.a,{visible:!this.state.readOnly,children:[Object(p.jsx)(ie.Item,{location:"before",children:Object(p.jsx)(Ce.Button,{onClick:this.confirmarClick,text:"Salvar",icon:"fas fa-check",stylingMode:"contained",type:"default"})}),Object(p.jsx)(ie.Item,{location:"after",children:Object(p.jsx)(Ce.Button,{onClick:this.cancelarClick,text:"Cancelar",stylingMode:"text"})})]})]})}}class Be extends s.a.Component{constructor(e){var a,t,o,i,s,n,d,l,c,u,p,m,h,_,f,b,v,g,w;super(e),this.state={novo:!1,chamadoId:"undefined"!=typeof e.chamadoId?e.chamadoId:0,cartaoId:null!==(a=e.cartaoId)&&void 0!==a?a:null,projetoAtividadeId:null!==(t=e.projetoAtividadeId)&&void 0!==t?t:null,projetoId:null!==(o=e.projetoId)&&void 0!==o?o:null,oportunidadeId:null!==(i=e.oportunidadeId)&&void 0!==i?i:null,solicitacaoAtividadeId:null!==(s=e.solicitacaoAtividadeId)&&void 0!==s?s:null,solicitacaoId:null!==(n=e.solicitacaoId)&&void 0!==n?n:null,pdcaId:null!==(d=e.pdcaId)&&void 0!==d?d:null,pdcaAtividadeId:null!==(l=e.pdcaAtividadeId)&&void 0!==l?l:null,assunto:null!==(c=e.assunto)&&void 0!==c?c:null,emails:null!==(u=e.emails)&&void 0!==u?u:null,entidadeId:null!==(p=e.entidadeId)&&void 0!==p?p:null,entidadeTipo:null!==(m=e.entidadeTipo)&&void 0!==m?m:null,situacao:null,entidadeNome:null,detalhes:null,mensagens:null,referencias:null,botaoPressionado:null!==(h=e.botaoPressionado)&&void 0!==h?h:"mensagens",botaoPressionadoReclassificacao:!1,botaoPressionadoAvaliar:null!==(_=e.botaoPressionadoAvaliar)&&void 0!==_&&_,carregandoMensagem:!1,exibirBotaoDownloadAnexos:!1,exibirMaisDetalhes:null!==(f=e.exibirMaisDetalhes)&&void 0!==f?f:(()=>{let e=r.a.get_parametro_usuario("chamado_detalhes");return!(!e||"undefined"===typeof e.exibirMaisDetalhes||""===e.exibirMaisDetalhes)&&e.exibirMaisDetalhes})(),colaboradorPodeAlterarSolicitante:!1,dataEnvioExtenso:null!==(b=e.dataEnvioExtenso)&&void 0!==b?b:(()=>{let e=r.a.get_parametro_usuario("chamado_detalhes");return!(!e||"undefined"===typeof e.dataEnvioExtenso||""===e.dataEnvioExtenso)&&e.dataEnvioExtenso})(),referenciaTabela:null!==(v=e.referenciaTabela)&&void 0!==v?v:null,referenciaId:null!==(g=e.referenciaId)&&void 0!==g?g:null,mascaraHorasTrabalhadas:null!==(w=e.mascaraHorasTrabalhadas)&&void 0!==w?w:"000:00"},this.getInstanceMaisDetalhes=this.getInstanceMaisDetalhes.bind(this),this.getInstanceMensagens=this.getInstanceMensagens.bind(this),this.obterDetalhes=this.obterDetalhes.bind(this),this.aoSalvarMensagem=this.aoSalvarMensagem.bind(this),this.aoAlterarBotaoPressionadoCardNovaMensagem=this.aoAlterarBotaoPressionadoCardNovaMensagem.bind(this),this.btnToogleExibirMaisDetalhesClick=this.btnToogleExibirMaisDetalhesClick.bind(this),this.aoAlterarTipoExibicaoDataEnvio=this.aoAlterarTipoExibicaoDataEnvio.bind(this)}getInstanceMaisDetalhes(e){if(e){let a=e.instance.element();a.css("height","calc(100vh - "+(a.closest("[div-view]").find(".cardTopo").height()+50)+"px)")}}getInstanceMensagens(e){if(e){let a=e.instance.element();a.css("height","calc(100vh - "+(a.closest("[div-view]").find(".cardTopo").height()+50)+"px)")}}componentDidMount(){n.a.get("chamado/get_configuracoes/",null,(e=>{this.configuracoes_chamado=e,0===this.state.chamadoId?this.novo():this.obterDetalhes()}))}componentWillUnmount(){this.props.onClose&&this.props.onClose()}novo(){let e={rascunho:!0,usuario_solicitante_id:r.a.sessao.dados.usuario_id,situacao:window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO};if(this.state.cartaoId&&(e=Object(o.a)(Object(o.a)({},e),{},{tarefa_quadro_lista_cartao_id:this.state.cartaoId})),this.state.projetoAtividadeId&&(e=Object(o.a)(Object(o.a)({},e),{},{projeto_atividade_id:this.state.projetoAtividadeId})),this.state.projetoId&&(e=Object(o.a)(Object(o.a)({},e),{},{projeto_id:this.state.projetoId})),this.state.assunto&&(e=Object(o.a)(Object(o.a)({},e),{},{assunto:this.state.assunto})),this.state.oportunidadeId&&(e=Object(o.a)(Object(o.a)({},e),{},{oportunidade_id:this.state.oportunidadeId})),this.state.solicitacaoAtividadeId&&(e=Object(o.a)(Object(o.a)({},e),{},{solicitacao_atividade_id:this.state.solicitacaoAtividadeId})),this.state.solicitacaoId&&(e=Object(o.a)(Object(o.a)({},e),{},{solicitacao_id:this.state.solicitacaoId})),this.state.pdcaId&&(e=Object(o.a)(Object(o.a)({},e),{},{pdca_id:this.state.pdcaId})),this.state.pdcaAtividadeId&&(e=Object(o.a)(Object(o.a)({},e),{},{pdca_atividade_id:this.state.pdcaAtividadeId})),this.state.emails&&"S"===r.a.sessao.dados.parametro_chamado.sugerir_email&&(e=Object(o.a)(Object(o.a)({},e),{},{emails_adicionais:this.state.emails})),"S"===r.a.sessao.dados.parametro_chamado.sugerir_entidade_usuario_logado&&!this.state.oportunidadeId&&!this.state.solicitacaoAtividadeId&&!this.state.solicitacaoId)switch(+r.a.sessao.dados.tipo){case window.USUARIO_TIPO.CLIENTE:e=Object(o.a)(Object(o.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.CLIENTE,entidade_id:r.a.sessao.dados.cliente_id});break;case window.USUARIO_TIPO.COLABORADOR:e=Object(o.a)(Object(o.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.EMPRESA,entidade_id:r.a.temp.empresa});break;case window.USUARIO_TIPO.FORNECEDOR:e=Object(o.a)(Object(o.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.FORNECEDOR,entidade_id:r.a.sessao.dados.fornecedor.fornecedor_id});break;case window.USUARIO_TIPO.PROSPECT:e=Object(o.a)(Object(o.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.ORGANIZACAO,entidade_id:r.a.sessao.dados.organizacao.organizacao_id})}this.state.entidadeId&&(e=Object(o.a)(Object(o.a)({},e),{},{entidade_id:this.state.entidadeId})),this.state.entidadeTipo&&(e=Object(o.a)(Object(o.a)({},e),{},{entidade_tipo:this.state.entidadeTipo})),this.state.referenciaTabela&&(e=Object(o.a)(Object(o.a)({},e),{},{referencia_tabela:this.state.referenciaTabela})),this.state.referenciaId&&(e=Object(o.a)(Object(o.a)({},e),{},{referencia_id:this.state.referenciaId})),Object(l.f)(e,this.obterDetalhes),this.setState({novo:!0,exibirMaisDetalhes:!0})}verificaDocumentosEmMensagens(e){let a=!1;return e&&e.every((e=>!(e.documentos.length>0)||(a=!0,!1))),a}setStateResponse(e,a){e&&e.chamado&&(r.a.titulo_aba(this.props.html_id,"Chamado #"+e.chamado.id),this.setState(Object(o.a)({detalhes:e.chamado,chamadoId:e.chamado.id,entidadeId:e.chamado.entidade_id,entidadeNome:e.chamado.entidade_nome,assunto:e.chamado.assunto,situacao:e.chamado.situacao,mensagens:e.mensagens,carregandoMensagem:!1,exibirBotaoDownloadAnexos:this.verificaDocumentosEmMensagens(e.mensagens),exibirMaisDetalhes:this.state.exibirMaisDetalhes||e.chamado.rascunho,mascaraHorasTrabalhadas:e.configuracoes.mascara_horas_trabalhadas,colaboradorPodeAlterarSolicitante:"S"===e.chamado.chamado_motivo_altera_solicitante},a)))}obterDetalhes(e,a){if(e&&e.chamado&&!1===e.chamado.tem_permissao)window.alertaPopUp("Salvo com sucesso","As altera\xe7\xe3o foram salvas com sucesso. Por\xe9m, voc\xea n\xe3o possui mais permiss\xe3o no chamado.","Ok",(()=>{})),q()('[id="'+this.props.html_id+'"]').css({pointerEvents:"none",opacity:.5});else if(e&&e.chamado)this.setStateResponse(e,a);else{if(!this.state.chamadoId)return;this.setState({carregandoMensagem:!0},(()=>{if(r.a.PE.Chamado_Detalhes_listar_mensagens_antes)try{r.a.PE.Chamado_Detalhes_listar_mensagens_antes(this.props.html_id,this.state,this.obterDetalhes)}catch(e){console.log(e)}n.a.get({route:"chamado/listar_detalhes_chamado/",data:{chamado_id:this.state.chamadoId},func_response:t=>{if(this.setStateResponse(t,a),r.a.PE.Chamado_Detalhes_listar_mensagens_depois)try{r.a.PE.Chamado_Detalhes_listar_mensagens_depois(this.props.html_id,this.state,this.obterDetalhes)}catch(e){console.log(e)}},func_fail:()=>{this.setState({detalhes:null,carregandoMensagem:!1},(()=>{d.a.unload(this.props.html_id)}))}})}))}}aoSalvarMensagem(e){let a={botaoPressionadoReclassificacao:!1,botaoPressionadoAvaliar:!1};this.obterDetalhes(e,a),this.state.novo&&this.setState(Object(o.a)({novo:!1},a))}aoAlterarBotaoPressionadoCardNovaMensagem(e){this.setState({botaoPressionadoReclassificacao:"reclassificar"===e})}renderReferencias(){return Object(p.jsx)(Ne.default,{tabela:"chamado",id:this.state.chamadoId,html_id:this.props.html_id})}renderFormularioAvaliacao(){return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)("div",{className:"panel",children:Object(p.jsx)("div",{className:"panel-body",children:Object(p.jsx)(ye,{detalhes:this.state.detalhes,readOnly:!0})})})})})}renderFormularioAbertura(){return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)("div",{className:"panel",children:Object(p.jsx)("div",{className:"panel-body",children:Object(p.jsx)(Fe,{chamadoId:this.state.detalhes.id,chamadoMotivoId:this.state.detalhes.chamado_motivo_id,readOnly:+r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR})})})})})}renderFormularioEncerramento(){return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)("div",{className:"panel",children:Object(p.jsx)("div",{className:"panel-body",children:Object(p.jsx)(Le,{chamadoId:this.state.detalhes.id,chamadoMotivoId:this.state.detalhes.chamado_motivo_id,readOnly:+r.a.sessao.dados.tipo!==window.USUARIO_TIPO.COLABORADOR})})})})})}renderMensagensLoading(){return Object(p.jsx)("div",{className:"panel",children:Object(p.jsx)("div",{className:"panel-body",children:Object(p.jsx)("div",{className:"",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-xs-12 text-left",children:[Object(p.jsx)("div",{className:"animationLoading",children:Object(p.jsxs)("div",{className:"animationLoadingTopo",children:[Object(p.jsx)("div",{className:"animationLoadingFoto"}),Object(p.jsx)(oe.a,{}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"animationLoadingLineA"}),Object(p.jsx)(oe.b,{}),Object(p.jsx)("div",{className:"animationLoadingLineB"}),Object(p.jsx)(oe.b,{}),Object(p.jsx)("div",{className:"animationLoadingLineC"}),Object(p.jsx)(oe.b,{}),Object(p.jsx)("div",{className:"animationLoadingLineD"}),Object(p.jsx)(oe.b,{}),Object(p.jsx)("div",{className:"animationLoadingLineE"})]})]})}),Object(p.jsx)(oe.b,{})]})})})})})}renderMensagens(){if(Array.isArray(this.state.mensagens)&&this.state.mensagens.length){let e=[],a=0;for(let t=0;t<this.state.mensagens.length;t++){let i=this.state.mensagens[t];null!==i.mensagem&&i.mensagem.length?(e.push(Object(o.a)({},i)),a=e.length):(Array.isArray(e[a])||(e[a]=[]),e[a].push(Object(o.a)({},i)))}return e.length?e.map((e=>Array.isArray(e)?Object(p.jsx)(ke,{mensagens:e,aoAlterarTipoExibicaoDataEnvio:this.aoAlterarTipoExibicaoDataEnvio,dataEnvioExtenso:this.state.dataEnvioExtenso,mascaraHorasTrabalhadas:this.state.mascaraHorasTrabalhadas,aoSolicitarRefresh:this.obterDetalhes}):Object(p.jsx)(Me,{editavel:!1,mensagem:e,aoSalvar:this.aoSalvarMensagem,chamadoId:this.state.chamadoId,chamadoMensagemId:e.id,aoAlterarTipoExibicaoDataEnvio:this.aoAlterarTipoExibicaoDataEnvio,dataEnvioExtenso:this.state.dataEnvioExtenso,notificarEnvolvidos:"S"===this.state.detalhes.valor_padrao_notificar_envolvolvidos,mascaraHorasTrabalhadas:this.state.mascaraHorasTrabalhadas,aoSolicitarRefresh:this.obterDetalhes,configuracoesChamado:this.configuracoes_chamado},e.id.toString()))):null}}btnToogleExibirMaisDetalhesClick(){const e=!this.state.exibirMaisDetalhes;return this.setState({exibirMaisDetalhes:e},(()=>{r.a.set_parametro_usuario("chamado_detalhes",{exibirMaisDetalhes:this.state.exibirMaisDetalhes})})),e}aoAlterarTipoExibicaoDataEnvio(e){this.setState({dataEnvioExtenso:e},(()=>{r.a.set_parametro_usuario("chamado_detalhes",{dataEnvioExtenso:e})}))}renderReclassificacao(){return this.state.detalhes?Object(p.jsx)(ae,{chamadoId:this.state.chamadoId,detalhes:this.state.detalhes,aoSolicitarRefresh:this.obterDetalhes,botaoPressionadoReclassificacao:this.state.botaoPressionadoReclassificacao,colaboradorPodeAlterarSolicitante:this.state.colaboradorPodeAlterarSolicitante,configuracoesChamado:this.configuracoes_chamado}):null}render(){if(!this.state.detalhes)return Object(p.jsx)("div",{children:"Carregando, aguarde..."});const e=this.state.botaoPressionadoReclassificacao||this.state.exibirMaisDetalhes,a=e?"col-md-3":"hidden",t=e?"col-md-9":"col-md-12";return Object(p.jsx)(_,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"row cardTopo",children:Object(p.jsx)("div",{className:"col-md-12",children:Object(p.jsx)(me,{viewHtmlId:this.props.html_id,chamadoId:this.state.chamadoId,detalhes:this.state.detalhes,mensagensCount:"undefined"!=typeof this.state.mensagens&&Array.isArray(this.state.mensagens)?this.state.mensagens.length:0,botaoPressionado:this.state.botaoPressionado,exibirMaisDetalhes:e,bloquearExibirMaisDetalhes:this.state.botaoPressionadoReclassificacao,btnToogleExibirMaisDetalhesClick:this.btnToogleExibirMaisDetalhesClick,btnMensagensClick:()=>this.setState({botaoPressionado:"mensagens"}),btnFormularioAvaliacaoClick:()=>this.setState({botaoPressionado:"avaliacao"}),btnFormularioAberturaClick:()=>this.setState({botaoPressionado:"formularioAbertura"}),btnFormularioEncerramentoClick:()=>this.setState({botaoPressionado:"formularioEncerramento"}),btnReferenciasClick:()=>this.setState({botaoPressionado:"referencias"}),btnRecarregarClick:this.obterDetalhes,aoSolicitarRefresh:this.obterDetalhes},"cardTopo")})}),Object(p.jsxs)("div",{className:"row",children:[e?Object(p.jsx)("div",{className:a,children:Object(p.jsx)("div",{className:"text-content",children:this.renderReclassificacao()})}):null,Object(p.jsx)("div",{className:t,children:Object(p.jsx)("div",{className:"text-content",children:Object(p.jsxs)(s.a.Fragment,{children:["mensagens"===this.state.botaoPressionado?Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"cardMensagem",children:Object(p.jsx)(Me,{viewHtmlId:this.props.html_id,detalhes:this.state.detalhes,nova:!0,editavel:!0,aoSalvar:this.aoSalvarMensagem,chamadoId:this.state.chamadoId,chamadoSituacao:this.state.situacao,exibirBotaoDownloadAnexos:this.state.exibirBotaoDownloadAnexos,aoAlterarBotaoPressionado:this.aoAlterarBotaoPressionadoCardNovaMensagem,aoSolicitarRefresh:this.obterDetalhes,botaoPressionado:this.state.botaoPressionadoAvaliar?"avaliar":null,notificarEnvolvidos:"S"===this.state.detalhes.valor_padrao_notificar_envolvolvidos,mascaraHorasTrabalhadas:this.state.mascaraHorasTrabalhadas,configuracoesChamado:this.configuracoes_chamado},"cardMensagemEditavel")}),this.state.carregandoMensagem?this.renderMensagensLoading():null,this.renderMensagens()]}):null,"referencias"===this.state.botaoPressionado?this.renderReferencias():null,"avaliacao"===this.state.botaoPressionado?this.renderFormularioAvaliacao():null,"formularioAbertura"===this.state.botaoPressionado?this.renderFormularioAbertura():null,"formularioEncerramento"===this.state.botaoPressionado?this.renderFormularioEncerramento():null]})})})]})]})})}}Be.defaultProps={abaTitulo:"Chamado",cartaoId:null,viewCode:window.TELAS.DETALHES_CHAMADO.codigo}},778:function(e,a,t){"use strict";t.d(a,"a",(function(){return _}));var o=t(254),i=t(244);class s extends o.Column{}s.defaultProps={dataField:"nome_fantasia",caption:"Nome Fantasia",width:150,cellRender:e=>{let a="",t="";switch(e.data.tipo){case"C":a="label-info",t="Cliente";break;case"O":a="label-primary",t="Organiza\xe7\xe3o";break;case"F":a="label-warning",t="Fornecedor";break;case"E":a="label-success",t="Empresa"}return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("span",{className:"label lb_tipo ".concat(a),style:{margin:"5px"},title:t,children:e.data.tipo}),Object(i.jsx)("span",{"data-placement":"bottom",children:e.text})]})}};var n=t(719),r=t(720);class d extends o.Column{}d.defaultProps={dataField:"razao_social",caption:"Raz\xe3o Social",width:150};var l=t(553);class c extends o.Column{}c.defaultProps={dataField:"unidade",caption:"Unidade",width:100};var u=t(721);class p extends o.Column{}p.defaultProps={dataField:"cidade",caption:"Cidade",width:100};class m extends o.Column{}m.defaultProps={dataField:"bairro",caption:"Bairro",width:100};class h extends o.Column{}h.defaultProps={dataField:"endereco",caption:"Endere\xe7o",width:150};const _=[Object(i.jsx)(l.a,{},"codigo"),Object(i.jsx)(c,{},"unidade"),Object(i.jsx)(s,{},"nomeFantasia"),Object(i.jsx)(d,{},"razaoSocial"),Object(i.jsx)(u.a,{},"cnpj"),Object(i.jsx)(n.a,{dataField:"email_principal",caption:"E-mail Principal"},"emailPrincipal"),Object(i.jsx)(r.a,{dataField:"telefone1",caption:"Telefone 1"},"telefone1"),Object(i.jsx)(r.a,{dataField:"telefone2",caption:"Telefone 2"},"telefone2"),Object(i.jsx)(r.a,{dataField:"telefone3",caption:"Telefone 3"},"telefone3"),Object(i.jsx)(r.a,{dataField:"telefone4",caption:"Telefone 4"},"telefone4"),Object(i.jsx)(p,{},"cidade"),Object(i.jsx)(m,{},"bairro"),Object(i.jsx)(h,{},"endereco")]},786:function(e,a,t){"use strict";t.d(a,"a",(function(){return M}));var o=t(247),i=t.n(o),s=t(395),n=t.n(s),r=t(808),d=t(742),l=t(248),c=t(380),u=t.n(c),p=t(254),m=t(314),h=(t(561),t(267)),_=t(562),f=t(349),b=t(280),v=t(415),g=t(343),w=t(350),j=t(43),O=t.n(j),x=t(733),A=t(563),C=t(244);const S=[{id:"1",descricao:"Conclu\xedda"},{id:"2",descricao:"Cancelada"},{id:"3",descricao:"Andamento"},{id:"4",descricao:"Atrasada"}],I=e=>e.data.etiquetas&&Array.isArray(e.data.etiquetas)?e.data.etiquetas.map((e=>Object(C.jsx)(A.a,Object(l.a)({},e)))):"";var E=t(315),P=t(87),T=t(271),y=t(262);class R extends i.a.Component{constructor(e){super(e),this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.handleBtnEditarClick=this.handleBtnEditarClick.bind(this),this.handleSelectBoxChange=this.handleSelectBoxChange.bind(this),this.stateStoring=this.stateStoring.bind(this),this.onRowClick=this.onRowClick.bind(this),this.dataGridRef=i.a.createRef(),this.parametrosUsuario=P.a.get_parametro_usuario("solicitacoesProcesso"),this.gridStateStoring=this.stateStoring(),this.listResponsaveisModoTeste=Object(_.b)();let a=window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,t=!1,o=0,s="";this.parametrosUsuario&&("undefined"!==typeof this.parametrosUsuario.tipoListagem&&null!==this.parametrosUsuario.tipoListagem&&""!==this.parametrosUsuario.tipoListagem&&+this.parametrosUsuario.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&(a=+this.parametrosUsuario.tipoListagem),this.parametrosUsuario.obj_param?(t="undefined"!==typeof this.parametrosUsuario.obj_param.modo_teste&&this.parametrosUsuario.obj_param.modo_teste,o="undefined"!==typeof this.parametrosUsuario.obj_param.modo_teste_responsavel_id?this.parametrosUsuario.obj_param.modo_teste_responsavel_id:0,s="undefined"!==typeof this.parametrosUsuario.obj_param.modo_teste_responsavel_nome?this.parametrosUsuario.obj_param.modo_teste_responsavel_nome:""):this.parametrosUsuario.obj_param={}),this.state={dataSource:Object(_.c)(a,t,o,null,null,this.props.processo_id),tipoListagem:a,modo_teste:t,modo_teste_responsavel_id:o,modo_teste_responsavel_nome:s,filtro_solicitacao_numero:null}}get dataGrid(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}render(){var e;const a=[...(t=P.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo,[Object(C.jsx)(f.a,{dataField:"S"===t?"numero":"solicitacao_id",allowGrouping:!1,caption:"#",sortIndex:0,sortOrder:"desc",width:100,dataType:"number"},"numero_solicitacao_por_processo"),Object(C.jsx)(b.a,{dataField:"processo_nome",caption:"Processo",sortIndex:1,sortOrder:"asc",width:500},"processo_nome"),Object(C.jsx)(b.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:500},"descricao"),Object(C.jsx)(v.default,{dataField:"usuario_solicitacao_nome",caption:"Solicitante",width:180},"usuario_solicitacao_nome"),Object(C.jsx)(g.a,{dataField:"data",caption:"In\xedcio Solicita\xe7\xe3o",width:180,allowGrouping:!1,allowHeaderFiltering:!1},"data"),Object(C.jsx)(g.a,{dataField:"data_finalizacao",caption:"Fim Solicita\xe7\xe3o",width:180,allowGrouping:!1,allowHeaderFiltering:!1,defaultVisible:!1},"data_finalizacao"),Object(C.jsx)(x.a,{dataField:"cliente_nome",caption:"Cliente",width:180},"cliente"),Object(C.jsx)(w.a,{dataField:"solicitacao_situacao",caption:"Situa\xe7\xe3o Solicita\xe7\xe3o",width:120,lookup:{dataSource:S,displayExpr:"descricao",valueExpr:"id"},cellTemplate:(e,a)=>{let t="",o="";switch(+a.data.solicitacao_situacao){case 1:t="label-success",o="Conclu\xedda";break;case 2:t="label-danger",o="Cancelada";break;case 3:t="label-info",o="Em Andamento";break;case 4:t="label-danger",o="Atrasada"}e.css({textAlign:"center"}).addClass("bg-"+t),O()("<span>").text(o).css({color:"#FFF"}).appendTo(e)}},"solicitacao_situacao"),Object(C.jsx)(p.Column,{dataField:"etiquetas",caption:"Etiquetas",width:180,allowGrouping:!1,allowFiltering:!1,allowSorting:!1,cellRender:I},"etiquetas")]),Object(C.jsxs)(p.Column,{type:"buttons",children:[Object(C.jsx)(E.a,{hint:"Visualizar Solicita\xe7\xe3o",icon:"fas fa-sitemap",onClick:e=>this.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,this.state.modo_teste_responsavel_nome,this.state.modo_teste),visible:e=>!0===P.a.sessao.dados.admin||!0===e.row.data.acesso_supervisor}),","]},"buttonsSolicitacoes")];var t;const o=null!==(e=this.props.subtractHeight)&&void 0!==e?e:"0px",s={height:"calc(100vh - 46px - ".concat(o,")"),width:"100%"};return Object(C.jsx)(i.a.Fragment,{children:Object(C.jsxs)(h.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,style:s,stateStoring:this.gridStateStoring,onToolbarPreparing:this.onToolbarPreparing,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},keyExpr:"solicitacao_id",onRowClick:this.onRowClick,rowAlternationEnabled:!1,onRowExpanded:e=>{let a=e.component.getRowIndexByKey(e.key),t=e.component.getRowElement(a);t.css({background:"#DBDBDB"}),t.parent().find(".dx-master-detail-cell").css({background:"#FFF"})},onRowCollapsed:e=>{let a=e.component.getRowIndexByKey(e.key);e.component.getRowElement(a).css({background:""})},onRowPrepared:e=>{if("data"===e.rowType){let a=e.rowElement;e.isExpanded?(a.css({background:"#DBDBDB"}),a.parent().find(".dx-master-detail-row").css({background:"#FFF"})):a.css({background:""})}},showBorders:!1,children:[a,Object(C.jsx)(p.MasterDetail,{enabled:!0,template:async(e,a)=>{u.a.render(i.a.createElement(window.views.solicitacao_processo.ListagemAtividadesMasterDetail.default,{data:a.data}),e[0])}})]})})}handleBtnEditarClick(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null;e.row?i=e.row.data:e.data&&(i=e.data);const s=a==window.FORMULARIO.EDITAR?{solicitacaoAtividadeId:i.solicitacao_atividade_id}:{solicitacaoId:i.solicitacao_id};T.a.load("solicitacao/detalhes",((s,n)=>{n.onclose=e.component.refresh,n.show(i.solicitacao_atividade_id,a,t,o)}),T.a.ABA.MULTIPLAS,null,null,s)}handleSelectBoxChange(e){if(this.dataGridRef&&this.dataGridRef.current&&e.selectedItem&&e.selectedItem.id!==this.state.tipoListagem){const a=a=>{e.component.option("value",+a),this.setState({dataSource:Object(_.c)(a,this.state.modo_teste,this.state.modo_teste_responsavel_id,null,null,this.props.processo_id),tipoListagem:+a},(async()=>{this.parametrosUsuario=await P.a.get_parametro_usuario("solicitacoesProcesso"),+this.state.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&P.a.set_parametro_usuario("solicitacoesProcesso",Object(l.a)(Object(l.a)({},this.parametrosUsuario),{},{tipoListagem:+this.state.tipoListagem}))}))},t=this.dataGridRef.current._instance;if(t._resetPageIndex=!0,t._clearSelectedRows=!0,+e.selectedItem.id===window.SOLICITACAO_FILTROS.TODAS){Object(m.confirm)("Listar todas as Solicita\xe7\xf5es poder\xe1 levar um tempo. Deseja continuar?","Aten\xe7\xe3o").then((e=>{a(e?window.SOLICITACAO_FILTROS.TODAS:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS)}))}else a(+e.selectedItem.id)}}onToolbarPreparing(e){let a=[{id:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,descricao:"Minhas Pend\xeancias",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_CONCLUIDA,descricao:"Minhas Solicita\xe7\xf5es Conclu\xeddas",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_EM_ABERTO,descricao:"Minhas Solicita\xe7\xf5es em Andamento",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,descricao:"Processos Supervisionados",categoria:"Geral",visible:"S"===P.a.sessao.dados.supervisor_processo||"S"===P.a.sessao.dados.supervisor_processo_usuario||"S"===P.a.sessao.dados.supervisor_processo_grupo_usuario},{id:window.SOLICITACAO_FILTROS.ATRASADAS,descricao:"Solicita\xe7\xf5es Atrasadas",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS,descricao:"Todas Solicita\xe7\xf5es",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS_ANDAMENTO,descricao:"Solicita\xe7\xf5es em Andamento",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CANCELADAS,descricao:"Solicita\xe7\xf5es Canceladas",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CONCLUIDAS,descricao:"Solicita\xe7\xf5es Conclu\xeddas",categoria:"Situa\xe7\xe3o"}],t=[{widget:"dxTextBox",location:"after",locateInMenu:"auto",options:{width:"140px",placeholder:"N\xba Solicita\xe7\xe3o",value:this.state.filtro_solicitacao_numero,buttons:[{location:"before",name:"pesquisar",options:{icon:"search",disabled:!0}}],onEnterKey:e=>{let a=e.component.option("value");if(null!==a&&""!==a.trim()){const e="S"!==P.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a:null,t="S"===P.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a:null;this.setState({dataSource:Object(_.c)(window.SOLICITACAO_FILTROS.TODAS,this.state.modo_teste,this.state.modo_teste_responsavel_id,e,t,this.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.TODAS,filtro_solicitacao_numero:a})}else this.setState({dataSource:Object(_.c)(window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,this.state.modo_teste,this.state.modo_teste_responsavel_id,null,null,this.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,filtro_solicitacao_numero:null})}}},{widget:"dxSelectBox",visible:!0===this.state.modo_teste,locateInMenu:"auto",options:{dataSource:new y.default({store:this.listResponsaveisModoTeste,paginate:!0,pageSize:10}),valueExpr:"id",displayExpr:"nome",searchEnabled:!0,searchModeOption:"contains",searchExprOption:"nome",width:"250px",placeholder:"Respons\xe1vel (Modo Teste)",value:this.state.modo_teste_responsavel_id,onValueChanged:e=>{const a=e.value,t=e.component.option("text");this.setState({modo_teste_responsavel_id:a,modo_teste_responsavel_nome:t,dataSource:Object(_.c)(this.state.tipoListagem,this.state.modo_teste,a,null,null,this.props.processo_id)},(async()=>{this.parametrosUsuario=await P.a.get_parametro_usuario("solicitacoesProcesso"),P.a.set_parametro_usuario("solicitacoesProcesso",Object(l.a)(Object(l.a)({},this.parametrosUsuario),{},{obj_param:Object(l.a)(Object(l.a)({},this.parametrosUsuario.obj_param),{},{modo_teste_responsavel_id:a,modo_teste_responsavel_nome:t})}))}))}}},{widget:"dxSelectBox",locateInMenu:"auto",options:{dataSource:new y.default({store:a,group:"categoria"}),width:"250px",placeholder:"Filtrar por",valueExpr:"id",displayExpr:"descricao",value:+this.state.tipoListagem,grouped:!0,onSelectionChanged:this.handleSelectBoxChange},location:"after"},{widget:"dxButton",options:{icon:"plus",hint:"Nova Solicita\xe7\xe3o",text:"Nova Solicita\xe7\xe3o",onClick:()=>{T.a.load("solicitacao/nova",((a,t)=>{t.onclose=e.component.refresh,t.show(null,null,null,null,null,null,null,null,this.state.modo_teste,this.state.modo_teste_responsavel_id,!1,this.state.modo_teste_responsavel_nome)}))}},location:"after",name:"BtnNovaSolicitacao",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-flask",hint:"Habilitar Modo Teste",text:"Habilitar Modo Teste",onClick:e=>{this.setState({modo_teste:!this.state.modo_teste,dataSource:Object(_.c)(this.state.tipoListagem,!this.state.modo_teste,this.state.modo_teste_responsavel_id,null,null,this.props.processo_id)},(async()=>{this.parametrosUsuario=await P.a.get_parametro_usuario("solicitacoesProcesso"),P.a.set_parametro_usuario("solicitacoesProcesso",Object(l.a)(Object(l.a)({},this.parametrosUsuario),{},{obj_param:Object(l.a)(Object(l.a)({},this.parametrosUsuario.obj_param),{},{modo_teste:this.state.modo_teste})}))}))},onInitialized:e=>{!0===this.state.modo_teste&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnModoTeste",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:()=>{e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-compress-alt",hint:"Recolher todas as linhas",text:"Recolher todas as linhas",onClick:a=>{e.component.collapseAll(-1)}},showText:"inMenu",location:"after",name:"BtnRecolherLinhas",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}stateStoring(){return{enabled:!0,type:"custom",customLoad:()=>P.a.get_parametro_usuario("solicitacoesProcesso").datagrid,customSave:e=>P.a.set_parametro_usuario("solicitacoesProcesso",{datagrid:e})}}onRowClick(e){if(!0===P.a.sessao.dados.admin||!0===e.data.acesso_supervisor){const a=()=>{this.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,this.state.modo_teste_responsavel_nome,this.state.modo_teste)};window.onDoubleClick(e,a)}}}var D=t(396);class M extends i.a.Component{constructor(e){super(e)}async componentDidMount(){let e=await Object(D.objetoProcesso)(this.props.processo_id);if(e.nome){const a=e.nome.length>15?"...":"";P.a.titulo_aba(this.props.html_id,e.nome.substring(0,15)+a)}}render(){return Object(C.jsx)("div",{children:Object(C.jsxs)(n.a,{swipeEnabled:!1,children:[Object(C.jsx)(s.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(C.jsx)(r.a,{processo_id:this.props.processo_id,subtractHeight:"36px"})}),Object(C.jsx)(s.Item,{title:"Lista",icon:"fas fa-list-alt",children:Object(C.jsx)(d.a,{processo_id:this.props.processo_id,subtractHeight:"36px"})}),Object(C.jsx)(s.Item,{title:"Solicita\xe7\xf5es",icon:"fas fa-sitemap",children:Object(C.jsx)(R,{processo_id:this.props.processo_id,subtractHeight:"36px"})})]})})}}M.defaultProps={abaTitulo:"Processo...",take:20,arrColumns:[],listKey:null,route:null}},793:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var o=t(1039),i=t.n(o),s=t(1040),n=t.n(s),r=t(244);function d(e){let{idModulo:a=0,nomeModulo:t="?",qtdAbertoHoje:o=0,qtdEmAtraso:i=0,qtdTotal:s=0,iconeUrl:d="",btnAddClick:l=null,btnListClick:c=null,customButtons:u=[],titleHoje:p="",titleEmAtraso:m="",titleTotal:h="",isCentralPendencias:_=!1,fnHandleCardClick:f=null}=e;return Object(r.jsx)("div",{className:"".concat(n.a.container," col-md-4 col-sm-6 col-lg-3 templateCard"),style:{minWidth:_?170:""},children:Object(r.jsxs)("div",{className:n.a.card,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{className:n.a.topoTitulo,children:t}),l&&Object(r.jsx)("span",{className:n.a.button,onClick:function(){l&&"function"===typeof l&&l()},children:Object(r.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})}),c&&Object(r.jsx)("span",{className:n.a.button,onClick:function(){c&&"function"===typeof c&&c()},children:Object(r.jsx)("i",{className:"fa fa-external-link-alt","aria-hidden":"true"})}),u.length>0&&u.map(((e,a)=>("undefined"===typeof e.visible||!0===e.visible)&&Object(r.jsx)("span",{className:n.a.button,onClick:e.onClick,title:e.hint,children:Object(r.jsx)("i",{className:e.icon,"aria-hidden":"true"})},a)))]}),Object(r.jsxs)("div",{onClick:_?function(){"function"===typeof f&&f(a,t)}:void 0,style:{cursor:_?"pointer":"default"},children:[Object(r.jsxs)("div",{className:n.a.cardCorpo,children:[Object(r.jsxs)("p",{title:p,children:[o," Hoje"]}),Object(r.jsxs)("p",{title:m,className:n.a.qtdEmAtraso,children:[i," Em Atraso"]})]}),Object(r.jsxs)("div",{className:n.a.cardRodape,children:[Object(r.jsx)("span",{className:n.a.iconeModulo,children:""!==d&&Object(r.jsx)("img",{src:d,width:"20",alt:""})}),Object(r.jsxs)("span",{className:n.a.totalSection,title:h,children:[Object(r.jsx)("span",{className:"text-muted",children:"Total"}),"\xa0\xa0",Object(r.jsx)("span",{className:n.a.totalIndicator,children:s})]})]})]})]})})}var l=t(87),c=t(447),u=t(271);function p(e){let{data:a,supervisor_id:t,supervisor_nome:o,supervisionado_id:s,supervisionado_nome:n,onCloseModuleTab:p,isCentralPendencias:m=!1,fnHandleCardClick:h=null}=e;const _=JSON.parse(a);return Object(r.jsxs)("div",{className:m?i.a.containerCentralPendencias:i.a.container,children:[l.a.verifica_permissao(l.a.temp.empresa,"agenda")?Object(r.jsx)(d,{idModulo:c.a.agenda,nomeModulo:"Agenda",qtdAbertoHoje:_.cardCockpitAgendaHoje,qtdEmAtraso:_.cardCockpitAgendaAtrasadas,qtdTotal:_.cardCockpitAgendaTotal,iconeUrl:"assets/img/icones_bp/calendar.svg",isCentralPendencias:m,fnHandleCardClick:h,btnAddClick:()=>{window.View.load("agenda/agenda_evento",(function(e,a){let i=0,r="";null!=t&&null!=o?(i=t,r=o):null!=s&&null!=n?(i=s,r=n):(i=l.a.sessao.dados.usuario_id,r=l.a.sessao.dados.nome);let d={evento_id:null,usuario_id:i,usuario_nome:r,obj_dados_projeto:null};a.onclose=p,a.show(d)}))}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_tarefas")?Object(r.jsx)(d,{idModulo:c.a.tarefas,nomeModulo:"Tarefas",qtdAbertoHoje:_.cardCockpitCartoesHoje,qtdEmAtraso:_.cardCockpitCartoesAtrasados,qtdTotal:_.cardCockpitCartoesTotal,iconeUrl:"assets/img/icones_bp/tarefa.svg",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:()=>{window.View.load("tarefa/listar",(function(e,a){}),window.View.ABA.SIM)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_chamados")?Object(r.jsx)(d,{idModulo:c.a.chamado,nomeModulo:"Chamados",qtdAbertoHoje:_.cardCockpitChamadosHoje,qtdEmAtraso:_.cardCockpitChamadosAtrasados,qtdTotal:_.cardCockpitChamadosTotal,iconeUrl:"assets/img/icones_bp/comunication.svg",isCentralPendencias:m,fnHandleCardClick:h,btnAddClick:()=>{window.View.loadReact(window.views.chamado.Detalhes.default,{onCloseModuleTab:p},(function(e,a){}),window.View.ABA.MULTIPLAS)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_documentos")?Object(r.jsx)(d,{idModulo:c.a.documento,nomeModulo:"Documentos",qtdAbertoHoje:_.cardCockpitDocumentosHoje,qtdEmAtraso:_.cardCockpitDocumentosAtrasados,qtdTotal:_.cardCockpitDocumentosTotal,iconeUrl:"assets/img/icones_bp/folder.svg",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:()=>{u.a.loadReact(window.views.documentos.Listagem.default,{},(function(e){}),u.a.ABA.SIM)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_processos")?Object(r.jsx)(d,{idModulo:c.a.processo,nomeModulo:"Processos",qtdAbertoHoje:_.cardCockpitProcessosHoje,qtdEmAtraso:_.cardCockpitProcessosAtrasados,qtdTotal:_.cardCockpitProcessosTotal,iconeUrl:"assets/img/icones_bp/processos.svg",isCentralPendencias:m,fnHandleCardClick:h,btnAddClick:()=>{window.View.load("solicitacao/nova",(function(e,a){a.onclose=p,a.show()}),window.View.ABA.NAO)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_projetos")?Object(r.jsx)(d,{idModulo:c.a.projeto,nomeModulo:"Projetos",qtdAbertoHoje:_.cardCockpitProjetosHoje,qtdEmAtraso:_.cardCockpitProjetosAtrasados,qtdTotal:_.cardCockpitProjetosTotal,iconeUrl:"assets/img/icones_bp/icon_black_project.svg",isCentralPendencias:m,fnHandleCardClick:h,customButtons:[{icon:"fas fa-file-invoice-dollar",hint:"Apontamento de Despesa",onClick:function(){window.View.load("apontamento_despesas/detalhes",(function(e,a){a.show(window.FORMULARIO.NOVO,null)}),window.View.ABA.MULTIPLAS)},visible:l.a.verifica_permissao(l.a.temp.empresa,"apontamento_despesa")||l.a.verifica_permissao(l.a.temp.empresa,"admin_apontamento_despesa")},{icon:"far fa-clock",hint:"Apontamento de Atividade",onClick:function(){window.View.load("apontamento_projeto/detalhes",(function(e,a){a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:l.a.verifica_permissao(l.a.temp.empresa,"apontamento_atividade")||l.a.verifica_permissao(l.a.temp.empresa,"admin_apontamento_atividade")}]}):"",l.a.verifica_permissao(l.a.temp.empresa,"pdca")?Object(r.jsx)(d,{idModulo:c.a.pdca,nomeModulo:"PDCA",qtdAbertoHoje:_.cardCockpitPDCAHoje,qtdEmAtraso:_.cardCockpitPDCAAtrasados,qtdTotal:_.cardCockpitPDCATotal,iconeUrl:"assets/img/icones_bp/list_alt.svg",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:()=>{window.View.loadReact(window.views.pdca.Listagem.default,{},(function(e){}),u.a.ABA.SIM)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_relacionamento")?Object(r.jsx)(d,{idModulo:c.a.crm,nomeModulo:"CRM",qtdAbertoHoje:_.cardCockpitOportunidadesHoje,qtdEmAtraso:_.cardCockpitOportunidadesAtrasadas,qtdTotal:_.cardCockpitOportunidadesTotal,iconeUrl:"assets/img/icones_bp/people.svg",titleHoje:"Agendas e Oportunidades abertas para hoje",titleEmAtraso:m?"Oportunidades e Eventos CRM abertos":"Oportunidades e Eventos CRM atrasados (n\xe3o considera estagnado)",titleTotal:m?"Total de Oportunidades e Eventos CRM abertos":"Total de Oportunidades abertas",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:()=>{window.View.load("oportunidade/listar",(function(e,a){a.show()}),window.View.ABA.SIM)}}):""]})}},794:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t.n(o),s=t(253),n=t(267),r=t(254),d=t(751),l=t(244);var c=t(296),u=t(313);class p extends i.a.Component{constructor(e){super(e),this.getDatasourceUsuarios=async function(){const e=await s.a.get("usuario/listar_usuarios_grupos/",{listar_bloqueados:!0,listar_grupos:!0,limite:null},null,null,null,null,null,null,null,!0);this.setState({datasourceUsuarios:e})},this.onToolbarPreparing=this.onToolbarPreparing.bind(this),this.dataGrid=null,this.state={datasourceUsuarios:[]},this.getDatasourceUsuarios()}componentWillUnmount(){this.props.onClose&&this.props.onClose()}onToolbarPreparing(e){this.dataGrid=e.component;const a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cubo",text:"Adicionar",onClick:()=>{e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var t=0;t<e.toolbarOptions.items.length;t++){const a=e.toolbarOptions.items[t];"saveButton"===a.name&&(a.options.onClick=a=>{for(var t=e.component.getController("data")._items,o=[],i=0;i<t.length;i++){var s=t[i];s.removed||o.push(s.data)}Object(d.d)(this.props.cubo_id,o,(a=>{e.component.saveEditData()}))})}}render(){const e=[...(a=this.state.datasourceUsuarios,[Object(l.jsx)(r.Column,{lookup:{dataSource:{store:{type:"array",data:a,key:"id_usuario_grupo"},pageSize:10,paginate:!0},displayExpr:"nome",valueExpr:"id_usuario_grupo"},dataField:"integrante_id",caption:"Integrante"},"integrante_id"),Object(l.jsx)(r.Column,{lookup:{dataSource:window.CUBO_TIPO_PERMISSAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"},dataField:"tipo_permissao"},"tipo_permissao")]),Object(l.jsxs)(r.Column,{type:"buttons",width:110,children:[Object(l.jsx)(c.a,{visible:e=>!e.row.removed&&!e.row.data.padrao,onClick:e=>{this.dataGrid.deleteRow(e.row.rowIndex)}}),Object(l.jsx)(u.a,{visible:e=>e.row.removed,onClick:e=>{this.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"buttons")];var a;return Object(l.jsx)(i.a.Fragment,{children:Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsx)(n.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(n.stateStoring)("DataGridCubo"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(d.a)(this.props.cubo_id),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:e})})})})}}p.defaultProps={abaTitulo:"Equipe Cubo"};a.default=p},795:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return x})),t.d(a,"Edicao",(function(){return A}));var o=t(247),i=t(87),s=t(267),n=t(444),r=t.n(n),d=t(254),l=t.n(d),c=t(307),u=t.n(c),p=t(445),m=t(321),h=t.n(m),_=t(248),f=t(262),b=t(253);const v=e=>{let{chave:a}=e;return new f.default({pageSize:20,key:"id",load:e=>{let t=window.loadOptionsToActionParams(e);return new Promise(((e,o)=>{b.a.get({route:"parametro_datagrid/listar/",data:Object(_.a)({chave:a},t),func_response:a=>{let t=window.createLoadExtra(a);e(Object(_.a)(Object(_.a)({},t),{},{data:a.data}))},func_fail:e=>{e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:e=>{if(!e)return!1;return new Promise((function(a,t){b.a.get({route:"/parametro_datagrid/listar/",data:{id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},g=function(e,a,t,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,n={route:"parametro_datagrid/salvar/",data:{id:e,chave:a,nome:t,state_storing:window.CircularJSON.stringify(o)}};i&&(n=Object(_.a)(Object(_.a)({},n),{},{func_response:i})),s&&(n=Object(_.a)(Object(_.a)({},n),{},{func_fail:s})),b.a.post(n)},w=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={route:"parametro_datagrid/excluir/",data:{id:e}};a&&(o=Object(_.a)(Object(_.a)({},o),{},{func_response:a})),t&&(o=Object(_.a)(Object(_.a)({},o),{},{func_fail:t})),b.a.post(o)};var j=t(314),O=t(244);function x(e){let{chave:a,colunasAceitas:t=null,aoAlterarStateStoring:n}=e;const p=v({chave:a}),m=Object(o.useRef)(null),[h,_]=Object(o.useState)(),[f,b]=Object(o.useState)(!1),[x,C]=Object(o.useState)(!1),[S,I]=Object(o.useState)(0),[E,P]=Object(o.useState)(""),[T,y]=Object(o.useState)(null),[R,D]=Object(o.useState)({}),[M,k]=Object(o.useState)(!1),[N,F]=Object(o.useState)(!1),L=e=>({enabled:!0,type:"custom",customLoad:()=>{if(e.hasOwnProperty("colunasParametros")&&e.colunasParametros.length>0&&(i.a.temp.cubo.colunasParametros[a]=e.colunasParametros),t&&Array.isArray(t)&&t.length>0){let a=e.columns;a=Object(s.removeColunasNaoExistentes)(a,t),e.columns=a}return y(e),D(e),C(!1),e},customSave:t=>{var o,s,n,r,d,l;let c={columns:null!==(o=window.clone_obj(t.columns))&&void 0!==o?o:[],colunasParametros:null!==(s=null===i.a||void 0===i.a||null===(n=i.a.temp)||void 0===n||null===(r=n.cubo)||void 0===r?void 0:r.colunasParametros[a])&&void 0!==s?s:[],filterValue:null!==(d=t.filterValue)&&void 0!==d?d:null,searchText:null!==(l=t.searchText)&&void 0!==l?l:""},u=!window.isEquivalent(window.clone_obj(c),window.clone_obj(e));C(u),u&&D(c),i.a.set_parametro_usuario(a,t)}}),B=e=>{_(e.selectedRowKeys),e.selectedRowsData[0]&&e.selectedRowsData[0].state_storing&&(I(e.selectedRowsData[0].id),P(e.selectedRowsData[0].nome),n(L(e.selectedRowsData[0].state_storing))),b(!1)},U=()=>{k(!1),F(!1)};var V;T||n(L(null!==(V=i.a.get_parametro_usuario(a))&&void 0!==V?V:{}));const z=M?Object(O.jsx)(A,{nomeInicial:E,visible:M,isSalvarComo:N,aoSalvar:(e,t)=>{g(t?null:S,a,e,R,(a=>{U(),m.current&&(I(a.id),_([a.id])),t||P(e)}))},aoExcluir:()=>{w(S,(e=>{I(null),_([]),P(""),U()}))},aoCancelar:()=>{U()}}):null;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(r.a,{value:h,opened:f,valueExpr:"id",deferRendering:!1,displayExpr:e=>e&&"".concat(x?"* ":"").concat(e.nome),placeholder:"Vis\xe3o",showClearButton:!0,dataSource:p,onValueChanged:e=>{_(e.value),e.value||(I(0),P(""))},onOptionChanged:e=>{"opened"===e.name&&b(e.value)},contentRender:e=>Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(u.a,{children:[Object(O.jsx)(c.Item,{locateInMenu:"never",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"save",text:"Salvar",hint:"Salvar",visible:x,onClick:()=>{if(!n)return!1;S?g(S,a,E,R):k(!0)}}}),Object(O.jsx)(c.Item,{locateInMenu:"never",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"edit",text:"Editar",hint:"Editar",visible:S>0,onClick:()=>{if(!n)return!1;k(!0)}}}),Object(O.jsx)(c.Item,{locateInMenu:"never",location:"after",widget:"dxButton",showText:"inMenu",options:{icon:"refresh",text:"Recarregar",hint:"Recarregar",onClick:()=>{m.current&&m.current.instance.refresh()}}}),Object(O.jsx)(c.Item,{locateInMenu:"always",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"save",hint:"Salvar Como...",text:"Salvar Como...",visible:S>0,onClick:()=>{if(!n)return!1;k(!0),F(!0)}}}),Object(O.jsx)(c.Item,{locateInMenu:"always",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"trash",hint:"Excluir",text:"Excluir",visible:S>0,onClick:()=>{if(!n)return!1;Object(j.confirm)("Deseja excluir a vis\xe3o?","Aten\xe7\xe3o").then((e=>{if(e){w(S,(e=>{I(null),_([]),P("")}))}}))}}})]}),Object(O.jsxs)(l.a,{ref:m,dataSource:e.component.instance().getDataSource(),hoverStateEnabled:!0,selectedRowKeys:h,onSelectionChanged:B,height:"100%",showColumnHeaders:!1,remoteOperations:!0,children:[Object(O.jsx)(d.Column,{dataField:"nome",caption:"Nome"}),Object(O.jsx)(d.Selection,{mode:"single"}),Object(O.jsx)(d.Paging,{defaultPageSize:10}),Object(O.jsx)(d.Pager,{visible:!0,displayMode:"compact",showPageSizeSelector:!1,showInfo:!1,showNavigationButtons:!1}),Object(O.jsx)(d.FilterRow,{visible:!0})]})]}),width:300}),z]})}function A(e){let{nomeInicial:a="",visible:t=!1,isSalvarComo:i=!1,aoSalvar:s=null,aoExcluir:n=null,aoCancelar:r=null}=e;const[d,l]=Object(o.useState)(a);return Object(O.jsxs)(p.Popup,{visible:t,dragEnabled:!1,hideOnOutsideClick:!0,showCloseButton:!1,showTitle:!0,title:"Vis\xe3o",width:300,height:280,children:[Object(O.jsx)(p.Position,{my:"center",collision:"fit"}),Object(O.jsx)(p.ToolbarItem,{widget:"dxButton",toolbar:"top",locateInMenu:"always",options:{icon:"trash",text:"Excluir",onClick:e=>{n&&n(),l(a)}}}),Object(O.jsx)(p.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"before",options:{text:"Cancelar",type:"normal",stylingMode:"text",onClick:e=>{r&&r(),l(a)}}}),Object(O.jsx)(p.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"after",options:{icon:"save",text:"Salvar",onClick:e=>{s&&s(d,i)}}}),Object(O.jsx)("p",{children:"Nome:"}),Object(O.jsx)(h.a,{value:d,onValueChanged:e=>l(e.value)})]})}},796:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var o=t(247),i=t(271),s=t(267),n=t(496),r=t(350),d=t(254),l=t(566),c=t(253),u=t(244);const p=(e,a,t,o,s)=>{let n=[];return e.forEach((e=>{n.push(Object(u.jsx)(r.a,{dataField:e.id_elemento,caption:e.nome,width:200,allowGrouping:!1,allowHeaderFiltering:!1},e.id_elemento))})),n.push(Object(u.jsxs)(r.a,{type:"buttons",children:[Object(u.jsx)(d.Button,{hint:2==s?"Editar":"Visualizar",icon:2==s?"fas fa-pencil-alt":"fas fa-eye",cssClass:"icon_black",onClick:e=>{i.a.loadReact(l.default,{abaTitulo:"Editar Cadastro #"+e.row.data.id,cadastro_id:e.row.data.id,cadastro_generico_id:e.row.data.cadastro_id,formulario_id:a,nome_tabela:t,dataGridRef:o.current,tipo_permissao:s},(function(e){}),i.a.ABA.SIM)}}),Object(u.jsx)(d.Button,{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",visible:2==s,onClick:e=>{window.alertaPopUp("Excluir","Deseja realmente excluir o cadastro?","Sim",(()=>{c.a.post("formulario_cadastro_generico/excluir/",{nome_tabela:t,cadastro_id:e.row.data.id},(()=>{o.current.instance.refresh(),window.alert_saved("Arquivos exclu\xeddos com sucesso")}))}),"N\xe3o")}})]},"botoes")),n};function m(e){let{abaTitulo:a,onClose:t,nome_tabela:r,formulario_id:d,cadastro_generico_id:c,tipo_permissao:m}=e;const h=Object(o.useRef)(null),[_,f]=Object(o.useState)([]),[b,v]=Object(o.useState)(a),g=Object(o.useCallback)((e=>{f((a=>{const t=JSON.stringify(a),o=JSON.stringify(e);return window.isEquivalent(o,t)?a:e}))}),[]),w=Object(o.useCallback)((e=>{const a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Cadastro",text:"Novo Cadastro",visible:2==m,onClick:()=>{i.a.loadReact(l.default,{abaTitulo:"Novo Cadastro",cadastro_id:"",cadastro_generico_id:c,formulario_id:d,nome_tabela:r,dataGridRef:h.current,tipo_permissao:m},(function(e){}),i.a.ABA.SIM)}},location:"after",name:"BtnNovoCadastro",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}),[r,d,c,h]),j=Object(o.useMemo)((()=>Object(n.d)({nome_tabela:r,formulario_id:d,cadastro_generico_id:c,onCamposRecebidos:g})),[r,d,c,g]);return Object(u.jsx)("div",{style:{width:"100%"},children:Object(u.jsx)(s.default,{ref:h,style:{height:"calc(100vh - 120px)",width:"100%"},onToolbarPreparing:w,stateStoring:Object(s.stateStoring)("listagemDadosCadastrosGenericos-".concat(c)),dataSource:j,children:p(_,d,r,h,m)})})}},797:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return I}));var o=t(248),i=t(247),s=t.n(i),n=t(253),r=t(87),d=t(551),l=t.n(d),c=t(314),u=t(271),p=t(43),m=t.n(p),h=t(262),_=t(758),f=t.n(_),b=t(447),v=t(786),g=t(756),w=t(244);class j extends s.a.Component{constructor(e){super(e),this.state=Object(o.a)({displayExpression:null,valueExpression:null},this.propsToObjState())}propsToObjState(){return{lista:this.props.lista}}componentDidMount(){switch(this.props.idModulo){case b.a.documento:this.setState({displayExpression:"nome",valueExpression:"id"});break;case b.a.processo:this.setState({displayExpression:"nome",valueExpression:"processo_id"});break;case b.a.tarefas:case b.a.projeto:case b.a.crm:this.setState({displayExpression:"nome",valueExpression:"id"});break;case b.a.pdca:this.setState({displayExpression:"nome",valueExpression:"pdca_id"})}}handleItemDeleting(e){const a=this,t=m.a.Deferred();Object(c.confirm)("Deseja remover este item dos favoritos? <br /><br /> <strong>"+e.itemData.nome+"</strong>","Aten\xe7\xe3o").done((function(o){t.resolve(!o),o&&(a.props.idModulo===window.MODULOS.DOCUMENTO?window.favoritar_item(e.itemData.tipo,e.itemData.id,!1):a.props.idModulo===window.MODULOS.PROCESSO?window.favoritar_item("solicitacoes",e.itemData.processo_id,!1):a.props.idModulo===window.MODULOS.TAREFAS?window.favoritar_item("tarefa_quadros",e.itemData.id,!1):a.props.idModulo===window.MODULOS.PROJETO?e.itemData.id?window.favoritar_item("projetos",e.itemData.id,!1):e.itemData.projeto_atividade_id&&window.favoritar_item("atividades",e.itemData.projeto_atividade_id,!1):a.props.idModulo===window.MODULOS.RELACIONAMENTO?window.favoritar_item("funis_vendas",e.itemData.id,!1):a.props.idModulo===window.MODULOS.PDCA&&window.favoritar_item("pdcas",e.itemData.pdca_id,!1))})).fail(t.reject),e.cancel=t.promise()}handleItemClick(e){this.props.idModulo===window.MODULOS.DOCUMENTO?"pastas"===e.itemData.tipo?window.View.loadReact(g.default,{documentoPastaId:e.itemData.id},(e=>{}),u.a.ABA.SIM):"documentos"===e.itemData.tipo&&(e.itemData.id?"S"===e.itemData.ativa?(window.alert_info("Por favor, aguarde o download do documento"),r.a.obter_token_publico((function(a){r.a.download(window.WS_URI+"documento/download/?documento_revisao_id="+e.itemData.documento_revisao_id+"&token_publico="+a)}))):window.View.load("central_documentos/documento",(function(a,t){t.show(e.itemData.id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS):Object(c.alert)("Nenhuma vers\xe3o do documento dispon\xedvel para download","Aviso")):this.props.idModulo===window.MODULOS.PROCESSO?u.a.loadReact(v.a,{processo_id:e.itemData.processo_id},(function(e){}),u.a.ABA.SIM):this.props.idModulo===window.MODULOS.TAREFAS?window.View.load("tarefa/detalhes",(function(a,t){t.show(e.itemData)}),window.View.ABA.MULTIPLAS,null,null,{tarefaQuadroId:e.itemData.id}):this.props.idModulo===window.MODULOS.PROJETO?e.itemData.id?window.View.load("atividade_projeto/listar",(function(a,t){t.show(e.itemData.id,e.itemData.projeto_template,e.itemData.cliente_nome)}),window.View.ABA.MULTIPLAS,null,null,{projetoId:e.itemData.id}):e.itemData.projeto_atividade_id&&window.View.load("apontamento_projeto/detalhes",(function(a,t){var o={projeto_id:e.itemData.projeto_id,projeto_nome:e.itemData.projeto_nome,cliente_id:e.itemData.cliente_id,cliente_nome:e.itemData.cliente_nome||e.itemData.cliente_razao_social,projeto_atividade_id:e.itemData.projeto_atividade_id};t.onclose=onclose,t.show(o)}),window.View.ABA.MULTIPLAS,null,null,{projetoAtividadeId:e.itemData.projeto_atividade_id}):this.props.idModulo===window.MODULOS.RELACIONAMENTO?window.View.load("oportunidade/listar",(function(a,t){t.show(e.itemData.id)}),window.View.ABA.MULTIPLAS):this.props.idModulo===window.MODULOS.PDCA&&window.View.load("pdca/atividades",(function(a,t){t.show(e.itemData)}),window.View.ABA.MULTIPLAS,null,null,{pdcaId:e.itemData.pdca_id})}itemRender(e){let a=null;switch(this.props.idModulo){case window.MODULOS.DOCUMENTO:"pastas"===e.tipo?a=Object(w.jsx)("i",{className:"fas fa-folder"}):"documentos"===e.tipo&&(a=Object(w.jsx)("i",{className:"fas fa-file"}));break;case window.MODULOS.PROJETO:e.projeto_atividade_id&&(a=Object(w.jsx)("i",{className:"fa fa-clock"}))}return Object(w.jsx)(s.a.Fragment,{children:Object(w.jsxs)("div",{title:e.nome,children:[a," ",Object(w.jsx)("span",{children:e.nome})]})})}render(){return Object(w.jsx)("div",{className:f.a.cardContainer,children:Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{children:[""!==this.props.iconeUrl&&Object(w.jsx)("img",{src:this.props.iconeUrl,className:f.a.iconeModulo,alt:this.props.nomeModulo}),Object(w.jsx)("span",{className:f.a.topoTitulo,children:this.props.nomeModulo})]}),Object(w.jsx)("div",{children:Object(w.jsx)(l.a,{dataSource:new h.default({store:this.state.lista,paginate:!0,pageSize:10,valueExpr:this.state.valueExpression,displayExpr:this.state.displayExpression}),allowItemDeleting:!0,itemDeleteMode:"static",onItemDeleting:this.handleItemDeleting.bind(this),onItemClick:this.handleItemClick.bind(this),itemRender:this.itemRender.bind(this)})})]})})}}j.defaultProps={iconeUrl:"",nomeModulo:"?",idModulo:null,lista:[]};var O=t(374),x=t.n(O),A=t(710),C=t(1053),S=t.n(C);class I extends s.a.Component{constructor(e){super(e),this.state={allowRender:!1,listouProcessos:!1,listouDocumentos:!1,listouTarefaQuadros:!1,listouProjetos:!1,listouFunisVendas:!1,listouPDCAS:!1,listouAtividades:!1,listaFavoritos:{documentos:[],processos:[],tarefaQuadros:[],projetos:[],funisVendas:[],pdcas:[],atividade:[]}},this.listarFavoritos=this.listarFavoritos.bind(this)}listarFavoritosDocumentos(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_documentos")?n.a.get("documento/get_favoritos/",null,(function(a){let t,i,s=[];a&&(a.documentos&&(t=a.documentos),a.pastas&&(i=a.pastas),i&&t?s=[...t,...i]:i?s=i:t&&(s=t)),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{documentos:s}),listouDocumentos:!0})))})):this.setState({listouDocumentos:!0})}listarFavoritosProcessos(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_processos")?n.a.get("solicitacao/listar_disponiveis/",{lista_apenas_favoritas:!0},(function(a){let t=[];a&&(t=a),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{processos:t}),listouProcessos:!0})))})):this.setState({listouProcessos:!0})}listarFavoritosTarefaQuadros(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_tarefas")?n.a.get("tarefa_quadro/listar_favoritos/",null,(function(a){let t=[];a&&(t=a),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{tarefaQuadros:t}),listouTarefaQuadros:!0})))})):this.setState({listouTarefaQuadros:!0})}listarFavoritosProjetos(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_projetos")?n.a.get("projeto/listar_favoritos/",null,(function(a){let t=[];a&&(t=a),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{projetos:t}),listouProjetos:!0})))})):this.setState({listouProjetos:!0})}listarFavoritosFunisVendas(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_relacionamento")?n.a.get("funil_vendas/listar_favoritos/",null,(function(a){let t=[];a&&(t=a),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{funisVendas:t}),listouFunisVendas:!0})))})):this.setState({listouFunisVendas:!0})}listarFavoritosPDCAS(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"pdca")?n.a.get("pdca/listar_favoritos/",null,(function(a){let t=[];a&&(t=a),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{pdcas:t}),listouPDCAS:!0})))})):this.setState({listouPDCAS:!0})}listarFavoritosAtividades(e){r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_projetos")?n.a.get("atividade_projeto/listar_favoritos/",null,(function(a){let t=[];a&&(t=a),e.setState((e=>({listaFavoritos:Object(o.a)(Object(o.a)({},e.listaFavoritos),{},{atividade:t}),listouAtividades:!0})))})):this.setState({listouAtividades:!0})}listarFavoritos(){this.setState({listouDocumentos:!1,listouProcessos:!1,listouTarefaQuadros:!1,listouProjetos:!1,listouFunisVendas:!1,listouPDCAS:!1,listouAtividades:!1,allowRender:!1},(()=>{this.listarFavoritosDocumentos(this),this.listarFavoritosProcessos(this),this.listarFavoritosTarefaQuadros(this),this.listarFavoritosProjetos(this),this.listarFavoritosFunisVendas(this),this.listarFavoritosPDCAS(this),this.listarFavoritosAtividades(this)}))}componentDidMount(){this.listarFavoritos()}componentDidUpdate(e,a){this.state.listouDocumentos&&this.state.listouProcessos&&this.state.listouTarefaQuadros&&this.state.listouProjetos&&this.state.listouFunisVendas&&this.state.listouPDCAS&&this.state.listouAtividades&&!a.allowRender&&this.setState({allowRender:!0})}render(){return this.state.allowRender&&Object(w.jsxs)(x.a,{useNative:!0,style:{height:this.props.height},children:[Object(w.jsx)("div",{className:"panel-heading text-primary",children:Object(w.jsxs)("strong",{className:"dropdown home-title",children:[Object(w.jsx)("i",{className:"fa fa-star text-primary","aria-hidden":"true"}),"\xa0",Object(w.jsx)("span",{className:"txt_timeline",children:"Favoritos"}),Object(w.jsx)("button",{className:"btn btn-default btn_refresh_favoritos btn-title",onClick:this.listarFavoritos,children:Object(w.jsx)("span",{className:"fas fa-sync-alt text-primary"})})]})}),Object(w.jsxs)("div",{className:S.a.container,children:[r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_documentos")&&this.state.listaFavoritos.documentos.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/folder.svg",nomeModulo:"Documentos",idModulo:b.a.documento,lista:this.state.listaFavoritos.documentos}),r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_processos")&&this.state.listaFavoritos.processos.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/processos.svg",nomeModulo:"Processos",idModulo:b.a.processo,lista:this.state.listaFavoritos.processos}),r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_tarefas")&&this.state.listaFavoritos.tarefaQuadros.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/tarefa.svg",nomeModulo:"Tarefas",idModulo:b.a.tarefas,lista:this.state.listaFavoritos.tarefaQuadros}),r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_projetos")&&this.state.listaFavoritos.projetos.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/icon_black_project.svg",nomeModulo:"Projetos",idModulo:b.a.projeto,lista:this.state.listaFavoritos.projetos}),r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_relacionamento")&&this.state.listaFavoritos.funisVendas.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/people.svg",nomeModulo:"CRM",idModulo:b.a.crm,lista:this.state.listaFavoritos.funisVendas}),r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"pdca")&&this.state.listaFavoritos.pdcas.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/list_alt.svg",nomeModulo:"PDCA",idModulo:b.a.pdca,lista:this.state.listaFavoritos.pdcas}),r.a.verifica_permissao(r.a.sessao.dados.empresa_filial_id,"gestao_projetos")&&this.state.listaFavoritos.atividade.length>0&&Object(w.jsx)(j,{iconeUrl:"assets/img/icones_bp/central_pendencias.svg",nomeModulo:"Atividades",idModulo:b.a.projeto,lista:this.state.listaFavoritos.atividade})]})]})||Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"panel-heading text-primary",style:{marginBottom:10},children:Object(w.jsxs)("strong",{className:"dropdown home-title",children:[Object(w.jsx)("i",{className:"fa fa-star text-primary","aria-hidden":"true"}),"\xa0",Object(w.jsx)("span",{className:"txt_timeline",children:"Favoritos"}),Object(w.jsx)("button",{className:"btn btn-default btn_refresh_favoritos btn-title",onClick:this.listarFavoritos,children:Object(w.jsx)("span",{className:"fas fa-sync-alt text-primary"})})]})}),Object(w.jsxs)("div",{className:S.a.loadingIndicator,children:[Object(w.jsx)(A.LoadIndicator,{visible:!0,height:40,width:40}),Object(w.jsx)("p",{children:"Por favor, aguarde"})]})]})}}I.defaultProps={height:"calc(100vh - 45px)"}},798:function(e,a,t){"use strict";t.r(a);var o=t(248),i=t(247),s=t.n(i),n=t(551),r=t.n(n),d=t(758),l=t.n(d),c=t(443),u=t(357),p=t(253);var m=t(484),h=(t(1054),t(244));class _ extends s.a.Component{constructor(e){super(e),this.state={lista:null,edicao:!1,salvando:!1,edicaoId:null,edicaoDescricao:"",edicaoConcluido:!1,opcoes:Object(o.a)({exibirConcluidos:!1},window.App.get_parametro_usuario("notas_opcoes"))},this.listRef=s.a.createRef(),this.textDescricaoRef=s.a.createRef(),this.obterLista=this.obterLista.bind(this),this.renderItemLista=this.renderItemLista.bind(this),this.handleExibirOcultarConcluidosClick=this.handleExibirOcultarConcluidosClick.bind(this),this.handleRefreshClick=this.handleRefreshClick.bind(this),this.handleNovoClick=this.handleNovoClick.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.handleCancelarClick=this.handleCancelarClick.bind(this),this.handleSalvarClick=this.handleSalvarClick.bind(this),this.handleExcluirClick=this.handleExcluirClick.bind(this),this.handleDescricaoChanged=this.handleDescricaoChanged.bind(this),this.handleDescricaoKeyDown=this.handleDescricaoKeyDown.bind(this),this.handleConcluidoChanged=this.handleConcluidoChanged.bind(this)}get list(){return this.listRef.current?this.listRef.current.instance:null}get textDescricao(){return this.textDescricaoRef.current?this.textDescricaoRef.current:null}obterLista(){!function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.a.get({route:"nota/listar/",data:{exibir_concluidos:a},func_response:function(a){e(a)},func_fail:function(e){e.validation&&console.log(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}((e=>this.setState({lista:e})),this.state.opcoes.exibirConcluidos)}componentDidMount(){this.obterLista()}componentDidUpdate(e,a){this.textDescricao&&this.textDescricao.focus()}handleRefreshClick(e){this.obterLista()}handleItemClick(e){this.setState({edicao:!0,salvando:!1,edicaoId:e.itemData.id,edicaoDescricao:e.itemData.descricao,edicaoConcluido:"S"===e.itemData.concluido})}handleExibirOcultarConcluidosClick(e){let a=Object(o.a)(Object(o.a)({},this.state.opcoes),window.App.get_parametro_usuario("notas_opcoes"));a.exibirConcluidos=!this.state.opcoes.exibirConcluidos,this.setState({opcoes:a},(()=>this.obterLista())),window.App.set_parametro_usuario("notas_opcoes",a)}handleNovoClick(e){this.setState({edicao:!0,salvando:!1,edicaoId:null,edicaoDescricao:"",edicaoConcluido:!1})}handleSalvarClick(e){var a,t;this.setState({salvando:!0}),a={nota_id:this.state.edicaoId,descricao:this.state.edicaoDescricao,concluido:this.state.edicaoConcluido},t=e=>this.cancelarEstadoEdicao(),p.a.post("nota/salvar",a,(e=>{t&&t(e)}))}handleExcluirClick(e){var a,t;a=this.state.edicaoId,t=e=>this.cancelarEstadoEdicao(),p.a.post("nota/excluir",{nota_id:a},(e=>{t&&t(e)}))}handleCancelarClick(e){this.cancelarEstadoEdicao()}cancelarEstadoEdicao(){this.setState({edicao:!1,salvando:!1,edicaoId:null,edicaoDescricao:"",edicaoConcluido:!1},(()=>{this.obterLista()}))}handleDescricaoChanged(e){this.setState({edicaoDescricao:e.target.value})}handleDescricaoKeyDown(e){13!==e.keyCode||e.shiftKey||this.handleSalvarClick(null)}handleConcluidoChanged(e){this.setState({edicaoConcluido:e.value})}renderItemLista(e){const a="S"===e.concluido?{textDecoration:"line-through"}:{};return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(c.CheckBox,{value:"S"===e.concluido,defaultValue:!1,onValueChanged:a=>{a.event&&a.event.stopPropagation();let t=this.state.lista.slice();t.forEach(((a,o)=>{var i,s,n;+e.id===+a.id&&(t[o].concluido="S"===a.concluido?"N":"S",i=e.id,s=t[o].concluido,n=a=>{let i=t;i.forEach(((s,n)=>{+e.id===+s.id&&t[o].concluido!==(!0===a.concluido?"S":"N")&&(i[n].concluido=s.concluido?"S":"N",this.setState({lista:i}))}))},p.a.post("nota/concluir",{nota_id:i,concluido:s},(e=>{n&&n(e)})))})),this.setState({lista:t})}}),Object(h.jsx)(u.a,{}),Object(h.jsx)("div",{style:Object(o.a)(Object(o.a)({},a),{},{display:"flex"}),children:e.descricao})]})}render(){let e=Object(h.jsxs)("div",{className:"text-muted",style:{padding:"10px",textAlign:"center",minHeight:"140px"},children:[Object(h.jsx)(u.b,{}),Object(h.jsx)("h5",{children:"Ainda n\xe3o h\xe1 notas"}),Object(h.jsx)("p",{children:"Suas notas ser\xe3o exibidas aqui"}),Object(h.jsx)(m.Button,{stylingMode:"text",onClick:this.handleNovoClick,children:"Criar uma nota..."})]}),a=Object(h.jsxs)("div",{children:[Object(h.jsx)("textarea",{ref:this.textDescricaoRef,className:"form-control",rows:4,value:this.state.edicaoDescricao,onChange:this.handleDescricaoChanged,onKeyDown:this.handleDescricaoKeyDown,maxLength:500,readOnly:this.state.salvando}),Object(h.jsx)(u.b,{}),Object(h.jsx)(c.CheckBox,{value:this.state.edicaoConcluido,defaultValue:!1,onValueChanged:this.handleConcluidoChanged,text:"Conclu\xeddo",readOnly:this.state.salvando}),Object(h.jsx)(u.b,{})]}),t=Object(h.jsx)(m.ScrollView,{useNative:!0,style:{height:this.props.height},children:Object(h.jsx)(r.a,{ref:this.listRef,dataSource:this.state.lista,displayExpr:"descricao",valueExpr:"id",onItemClick:this.handleItemClick,noDataText:"",itemRender:this.renderItemLista})}),o=Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"animationLoading",style:{padding:"10px",minHeight:"140px"},children:[Object(h.jsxs)("div",{className:"animationLoadingInline",children:[Object(h.jsx)("div",{className:"animationLoadingCheckA"}),Object(h.jsx)(u.a,{}),Object(h.jsx)("div",{className:"animationLoadingTaskA"})]}),Object(h.jsxs)("div",{className:"animationLoadingInline",children:[Object(h.jsx)("div",{className:"animationLoadingCheckA"}),Object(h.jsx)(u.a,{}),Object(h.jsx)("div",{className:"animationLoadingTaskA"})]}),Object(h.jsxs)("div",{className:"animationLoadingInline",children:[Object(h.jsx)("div",{className:"animationLoadingCheckA"}),Object(h.jsx)(u.a,{}),Object(h.jsx)("div",{className:"animationLoadingTaskA"})]}),Object(h.jsxs)("div",{className:"animationLoadingInline",children:[Object(h.jsx)("div",{className:"animationLoadingCheckA"}),Object(h.jsx)(u.a,{}),Object(h.jsx)("div",{className:"animationLoadingTaskA"})]})]}),Object(h.jsx)(u.b,{})]}),i=Object(h.jsx)(s.a.Fragment,{});i=this.state.edicao?a:this.state.lista?this.state.lista.length>0?t:e:o;let n=this.state.lista?this.state.lista.filter((e=>"N"===e.concluido)).length:0;return Object(h.jsxs)(s.a.Fragment,{children:[Object(h.jsx)("div",{className:"panel-heading text-primary",children:Object(h.jsxs)("strong",{className:"dropdown home-title",children:[Object(h.jsx)("i",{className:"fas fa-sticky-note text-primary","aria-hidden":"true"}),"\xa0 Notas ",n>0?Object(h.jsx)("span",{className:"badge",children:n}):"",this.state.edicao?Object(h.jsxs)(s.a.Fragment,{children:[Object(h.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Salvar",onClick:this.handleSalvarClick,children:Object(h.jsx)("span",{className:"fa fa-save text-primary"})}),Object(h.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Cancelar",onClick:this.handleCancelarClick,children:Object(h.jsx)("span",{className:"fa fa-undo text-primary"})}),+this.state.edicaoId>0?Object(h.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Excluir",onClick:this.handleExcluirClick,children:Object(h.jsx)("span",{className:"far fa-trash-alt text-primary"})}):null]}):Object(h.jsxs)(s.a.Fragment,{children:[Object(h.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Adicionar",onClick:this.handleNovoClick,children:Object(h.jsx)("span",{className:"fa fa-plus text-primary"})}),Object(h.jsx)("button",{className:"btn btn-default btn-title",title:"Recarregar",onClick:this.handleRefreshClick,children:Object(h.jsx)("span",{className:"fas fa-sync-alt text-primary"})}),Object(h.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Exibir/esconder conclu\xeddos",onClick:this.handleExibirOcultarConcluidosClick,children:Object(h.jsx)("span",{className:"fas fa-tasks text-primary"})})]})]})}),Object(h.jsx)("div",{className:l.a.cardContainer,style:{padding:"2px"},children:i})]})}}_.defaultProps={abaTitulo:"Notas",height:"calc(100vh - 95px)"};a.default=_},807:function(e,a,t){"use strict";t.d(a,"a",(function(){return g})),t.d(a,"b",(function(){return w}));var o=t(254),i=t(349),s=t(343),n=t(280),r=t(415),d=t(244);class l extends o.Column{}l.defaultProps={dataField:"situacao",caption:"Situa\xe7\xe3o",width:100,children:Object(d.jsx)(o.Lookup,{dataSource:window.CHAMADO_SITUACAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"})};var c=t(729),u=t(725),p=t(724),m=t(43),h=t.n(m),_=t(730);const f=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return+e.data.situacao!==window.CHAMADO_SITUACAO.ENCERRADO&&+e.data.situacao!==window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE&&e.data.data_previsao_retorno?Object(d.jsx)(u.a,{TipoGestaoTempo:e.data.tipo_gestao_tempo,HorasEstimadas:e.data.horas_previsao_retorno,DataPrazo:e.data.data_previsao_retorno,CalendarioTrabalhoId:e.data.calendario_trabalho_id_param,ExibirTituloDataPrazo:a,TituloDataPrazo:"Previs\xe3o de Retorno"}):""},b=e=>{const a=parseFloat(e.data.percentual_encerramento_inatividade),t=e.data.tempo_encerramento_inatividade;return![window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO,window.CHAMADO_SITUACAO.AGUARDANDO_RESPONSAVEL,window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE,window.CHAMADO_SITUACAO.AGUARDANDO_FORNECEDOR].includes(+e.data.situacao)&&t?Object(d.jsxs)("div",{className:"small",children:[Object(d.jsx)("div",{style:{display:"flex",flexFlow:"row-reverse"},children:Object(d.jsx)("div",{style:{fontWeight:"bold",paddingLeft:"10px",paddingRight:"0px"},children:Object(d.jsx)("div",{className:"text text-default text-warning",style:{font:"inherit",width:"100%"},children:t})})}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"progress div_progress bar_progresso",style:{marginBottom:"0px",height:"12px"},children:Object(d.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-warning bar_progresso",style:{width:a+"%"}})})})]}):""},v=(e,a)=>Object(d.jsx)(p.a,{viewHtmlId:a,detalhes:e.data,autoUpdate:!0}),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return[Object(d.jsx)(i.a,{},"id"),Object(d.jsx)(s.a,{dataField:"data_abertura",caption:"Data Abertura"},"data_abertura"),Object(d.jsx)(s.a,{dataField:"data_encerramento",caption:"Data Encerramento"},"data_encerramento"),Object(d.jsx)(n.a,{dataField:"prioridade_nome",caption:"Prioridade"},"prioridade_nome"),Object(d.jsx)(n.a,{dataField:"assunto",caption:"Assunto"},"assunto"),Object(d.jsx)(l,{},"situacao"),Object(d.jsx)(r.default,{caption:"Solicitante",dataField:"usuario_solicitante_nome",dataFieldUsuarioId:"solicitante_id"},"usuario_solicitante_nome"),Object(d.jsx)(r.default,{caption:"Respons\xe1vel",dataField:"usuario_responsavel_nome",dataFieldUsuarioId:"usuario_responsavel_id"},"usuario_responsavel_nome"),Object(d.jsx)(c.a,{},"entidadeTipo"),Object(d.jsx)(n.a,{dataField:"codigo_entidade",caption:"C\xf3digo Entidade"},"codigo_entidade"),Object(d.jsx)(n.a,{dataField:"entidade_nome",caption:"Entidade"},"entidade_nome"),Object(d.jsx)(s.a,{dataField:"data_previsao_retorno",caption:"Previs\xe3o retorno",cellRender:f},"data_previsao_retorno"),Object(d.jsx)(n.a,{dataField:"motivo",caption:"Motivo"},"motivo"),Object(d.jsx)(n.a,{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",visible:!1},"classificacao_nome"),Object(d.jsx)(n.a,{dataField:"grupo_motivo_nome",caption:"Grupo de Motivo"},"grupo_motivo_nome"),Object(d.jsx)(o.Column,{dataField:"percentual_encerramento_inatividade",dataType:"number",caption:"% para encerramento por inatividade",cellRender:b,allowGrouping:!1,allowFiltering:!1,width:150},"percentual_encerramento_inatividade"),Object(d.jsx)(o.Column,{dataField:"sla",dataType:"number",caption:"SLA",cellRender:a=>v(a,e),allowGrouping:!1,allowFiltering:!1,width:150},"sla"),Object(d.jsx)(n.a,{dataField:"nota_avaliacao_nome",caption:"Nota de Avalia\xe7\xe3o",visible:!1},"nota_avaliacao_nome")]},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return[Object(d.jsx)(i.a,{},"chamado_id"),Object(d.jsx)(_.a,{dataField:"entidade_nome",caption:"Entidade"},"entidade_nome"),Object(d.jsx)(s.a,{dataField:"data_abertura",caption:"Data Abertura"},"data_abertura"),Object(d.jsx)(s.a,{dataField:"data_previsao_retorno",caption:"Previs\xe3o retorno",cellRender:f,width:180},"data_previsao_retorno"),Object(d.jsx)(n.a,{dataField:"assunto",caption:"Assunto"},"assunto"),Object(d.jsx)(n.a,{dataField:"motivo",caption:"Motivo",cellTemplate:(e,a)=>{let t=window.Colors(a.data.motivo_cor);h()(e).html('<span class="label" style="background: '+t.hex+"; color: "+t.nome_hex+';">'+a.data.motivo+"</span>")}},"motivo"),Object(d.jsx)(r.default,{caption:"Solicitante",dataField:"usuario_solicitante_nome",dataFieldUsuarioId:"solicitante_id",width:200},"usuario_solicitante_nome"),Object(d.jsx)(r.default,{caption:"Respons\xe1vel",dataField:"usuario_responsavel_nome",dataFieldUsuarioId:"usuario_responsavel_id",width:200},"usuario_responsavel_nome"),Object(d.jsx)(n.a,{dataField:"prioridade_nome",caption:"Prioridade",width:180},"prioridade_nome"),Object(d.jsx)(l,{width:200},"chamado_situacao"),Object(d.jsx)(s.a,{dataField:"data_encerramento",caption:"Data Encerramento"},"data_encerramento"),Object(d.jsx)(o.Column,{dataField:"sla",dataType:"number",caption:"SLA Tempo Atendimento",cellRender:a=>v(a,e),allowGrouping:!1,allowFiltering:!1,allowSorting:!1,width:180},"sla_tempo_atendimento"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_reacao",caption:"SLA Tempo Rea\xe7\xe3o",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_reacao)},"sla_tempo_reacao"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_resolucao",caption:"SLA Tempo Resolu\xe7\xe3o",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_resolucao)},"sla_tempo_resolucao"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_total",caption:"SLA Total",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_total)},"sla_tempo_total"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_solicitante",caption:"SLA Tempo Solicitante",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_solicitante)},"sla_tempo_solicitante"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_encerrado",caption:"SLA Tempo Encerrado",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_encerrado)},"sla_tempo_encerrado"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_reacao_real",caption:"SLA Tempo Rea\xe7\xe3o Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_reacao_real)},"sla_tempo_reacao_real"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_resolucao_real",caption:"SLA Tempo Resolu\xe7\xe3o Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_resolucao_real)},"sla_tempo_resolucao_real"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_total_real",caption:"SLA Total Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_total_real)},"sla_tempo_total_real"),Object(d.jsx)(o.Column,{dataField:"sla_tempo_solicitante_real",caption:"SLA Tempo Solicitante Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:e=>window.format_time(e.sla_tempo_solicitante_real)},"sla_tempo_solicitante_real"),Object(d.jsx)(n.a,{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",visible:!1},"classificacao_nome"),Object(d.jsx)(n.a,{caption:"Grupo Motivo",dataField:"grupo_motivo_nome",width:180},"grupo_motivo_nome"),Object(d.jsx)(c.a,{width:100},"entidade_tipo"),Object(d.jsx)(n.a,{dataField:"codigo_entidade",caption:"C\xf3digo Entidade"},"codigo_entidade"),Object(d.jsx)(n.a,{caption:"Nome Projeto",dataField:"projeto_nome",width:100,allowFiltering:!1},"projeto_nome"),Object(d.jsx)(n.a,{caption:"Atividade Projeto",dataField:"projeto_atividade_descricao",width:100,allowFiltering:!1},"projeto_atividade_descricao"),Object(d.jsx)(o.Column,{dataField:"percentual_encerramento_inatividade",dataType:"number",caption:"Percentual Encerramento Inatividade",cellRender:b,allowGrouping:!1,allowFiltering:!1,width:150},"percentual_encerramento_inatividade"),Object(d.jsx)(n.a,{dataField:"nota_avaliacao_nome",caption:"Nota de Avalia\xe7\xe3o",visible:!1},"nota_avaliacao_nome"),Object(d.jsx)(s.a,{dataField:"ultima_mensagem_data_envio",caption:"Ultima A\xe7\xe3o",visible:!1},"ultima_mensagem_data_envio")]}},808:function(e,a,t){"use strict";t.d(a,"a",(function(){return g}));var o=t(247),i=t.n(o),s=t(374),n=t.n(s),r=t(307),d=t.n(r),l=t(248),c=t(376),u=t(87),p=t(271),m=(t(1036),t(563)),h=t(244);function _(e){let{card:a,solicitacaoDetalhesOnclose:t}=e,o="",i="bg-label-info";switch(+a.situacao){case window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO:o="Em Andamento";break;case window.SOLICITACAO_STATUS.ATIVIDADE_CONCLUIDA:o="Concluida",i="bg-label-success";break;case window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA:o="Atrasada",i="bg-label-danger";break;case window.SOLICITACAO_STATUS.ATIVIDADE_NAO_ENTREGUE:o="N\xe3o Entregue",i="bg-label-warning";break;case window.SOLICITACAO_STATUS.ATIVIDADE_RETORNADA:o="Retornada";break;case window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA:o="Cancelada"}const s=a.data?window.formatar_data_humano(a.data)+", "+a.data.substring(11,16):null,n=a.data?"Inicio em "+a.data.format_date_time():null,_=a.prazo_execucao?window.formatar_data_humano(a.prazo_execucao)+("00:00"==a.prazo_execucao.substring(11,16)?"":", "+a.prazo_execucao.substring(11,16)):null,f=a.prazo_execucao?"Prazo em "+("00:00"==a.prazo_execucao.substring(11,16)?a.prazo_execucao.format_date():a.prazo_execucao.format_date_time()):null;let b=[];const v=a.cliente_id?Object(h.jsx)(c.a,{tamanho:"28",clienteId:a.cliente_id,nome:a.cliente_nome},"foto_cliente"):null;a.cliente_id&&b.push(Object(h.jsx)(r.Item,{location:"before",locateInMenu:"never",text:a.cliente_nome},"cliente"));const g=+a.situacao==window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA?"text-danger":"text-info";let w=[],j="";Array.isArray(a.responsaveis)&&+a.atividade_tipo!=window.PROCESSO_ATIVIDADE_TIPO.INICIO&&a.responsaveis.map(((e,a)=>{j+=e.nome,w.push(Object(h.jsx)(c.a,{tamanho:"28",usuarioId:e.usuario_id,titulo:"Respons\xe1vel",nome:e.nome,margemFlutuante:!0},window.elem_key_random()))})),+a.grupo_usuarios_responsaveis_id>0&&+a.atividade_tipo!=window.PROCESSO_ATIVIDADE_TIPO.INICIO&&(j+=a.grupo_usuarios_responsaveis_nome,w.push(Object(h.jsx)(c.a,{tamanho:"28",titulo:"Grupo de Usu\xe1rios Respons\xe1veis",nome:a.grupo_usuarios_responsaveis_nome,margemFlutuante:!0})));const O=a.etiquetas.map((e=>Object(h.jsx)(m.a,Object(l.a)({},e))));return Object(h.jsxs)("div",{className:"card dx-card dx-theme-text-color dx-theme-background-color ",style:{minHeight:"130px",paddingLeft:"0px",paddingRight:"0px"},onClick:e=>{p.a.load("solicitacao/detalhes",(function(e,o){o.onclose=t,o.show(a.solicitacao_atividade_id)}),p.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:a.solicitacao_atividade_id})},children:[Object(h.jsxs)("div",{style:{marginTop:"-10px",paddingLeft:"10px",paddingRight:"10px"},children:[Object(h.jsx)(d.a,{children:[Object(h.jsx)(r.Item,{location:"before",locateInMenu:"never",children:Object(h.jsxs)("span",{className:"label label-primary",style:{fontSize:"unset"},children:["#","S"===u.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a.numero:a.solicitacao_id]})},"numero"),Object(h.jsx)(r.Item,{location:"after",locateInMenu:"never",children:Object(h.jsxs)("div",{className:"text-right",children:[Object(h.jsx)("div",{className:"text-muted small",title:n,children:s}),Object(h.jsxs)("div",{title:f,className:"small "+g,children:[Object(h.jsx)("i",{className:"fa fa-clock","aria-hidden":"true"}),"\xa0",_]})]})},"datas")]}),"S"===u.a.sessao.dados.parametro_processo.utilizar_nome_extenso&&a.cliente_nome?Object(h.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:a.cliente_nome,children:"Cliente: "+a.cliente_nome}):"","S"===u.a.sessao.dados.parametro_processo.utilizar_nome_extenso?Object(h.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:a.usuario_solicitacao_nome,children:"Solicitante: "+a.usuario_solicitacao_nome}):"","S"===u.a.sessao.dados.parametro_processo.utilizar_nome_extenso&&j?Object(h.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:a.cliente_nome,children:"Respons\xe1vel: "+j}):"","N"===u.a.sessao.dados.parametro_processo.utilizar_nome_extenso?Object(h.jsx)(d.a,{style:{marginTop:"-5px"},children:[Object(h.jsx)(r.Item,{location:"before",locateInMenu:"never",children:Object(h.jsxs)("div",{style:{display:"flex"},children:[v,Object(h.jsx)(c.a,{tamanho:"28",usuarioId:a.usuario_solicitacao_id,titulo:"Solicitante",nome:a.usuario_solicitacao_nome,margemFlutuante:!!v},"foto_solicitante"),w]})},"solicitante")]}):"",Object(h.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:a.descricao,children:a.descricao}),O&&Object(h.jsx)("div",{style:{display:"flex",flexWrap:"wrap",marginBottom:"10px"},children:O})]}),Object(h.jsx)("div",{style:{height:"10px",position:"absolute",bottom:"0px",width:"100%"},className:i,title:o,children:"\xa0"})]})}var f=t(396);const b=[{id:window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,nome:"Atividades Em Andamento"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_CONCLUIDA,nome:"Atividades Conclu\xeddas"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA,nome:"Atividades Em Atraso"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_NAO_ENTREGUE,nome:"Atividades N\xe3o Entregues"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_RETORNADA,nome:"Atividades Retornadas"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA,nome:"Atividades Canceladas"}],v=[{id:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,nome:"Minhas Pend\xeancias"},{id:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,nome:"Supervisionados"},{id:window.SOLICITACAO_FILTROS.TODAS_ANDAMENTO,nome:"Todas as Pend\xeancias"}];class g extends i.a.Component{constructor(e){var a;super(e),this.state={list:[],filtro_status:window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,filtro_tipo:null!==(a=null===e||void 0===e?void 0:e.filtro_tipo)&&void 0!==a?a:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,cliente_nome:"",solicitacao_codigo:"",solicitacao_descricao:"",solicitante_nome:"",responsavel_nome:"",etiqueta_nome:""},this.listar.bind(this)}async componentDidMount(){await this.listar()}async listar(){let e={processo_id:this.props.processo_id,filtro_status:this.state.filtro_status,filtro_tipo:this.state.filtro_tipo,solicitacao_codigo:this.state.solicitacao_codigo,solicitacao_descricao:this.state.solicitacao_descricao,cliente_nome:this.state.cliente_nome,solicitante_nome:this.state.solicitante_nome,responsavel_nome:this.state.responsavel_nome,etiqueta_nome:this.state.etiqueta_nome},a=await Object(f.listarProcessosQuadroAtividades)(e);this.setState({list:a})}onListUpdated(e){this.setState({list:e})}render(){var e;const a=(null!==(e=this.state.list)&&void 0!==e?e:[]).map(((e,a)=>Object(h.jsx)(j,{processo_nome:e.processo_nome,title:e.descricao,index:a,cards:e.itens,main:this,onListUpdated:this.onListUpdated.bind(this),solicitacaoDetalhesOnclose:e=>this.listar()},e.processo_atividade_id+"_"+e.itens.data.length))),t=Object(h.jsx)(i.a.Fragment,{children:Object(h.jsx)("div",{className:"dx_kanban",children:Object(h.jsx)(n.a,{className:"scrollable-board",direction:"horizontal",showScrollbar:"always",style:{overflow:"scroll"},children:a})})});if(this.state.list.length>0){const e=this.state.list[0].processo_nome.length>15?"...":"";u.a.titulo_aba(this.props.html_id,this.state.list[0].processo_nome.substring(0,15)+e)}return Object(h.jsxs)("div",{children:[Object(h.jsx)(w,{processo_id:this.props.processo_id,processo_nome:this.state.list.length>0?this.state.list[0].processo_nome:"",clienteNomeValue:this.state.cliente_nome,clienteNomeOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({cliente_nome:a},(()=>{this.listar()}))},solicitacaoCodigoValue:this.state.solicitacao_codigo,solicitacaoCodigoOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({solicitacao_codigo:a},(()=>{this.listar()}))},solicitacaoDescricaoValue:this.state.solicitacao_descricao,solicitacaoDescricaoOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({solicitacao_descricao:a},(()=>{this.listar()}))},solicitanteNomeValue:this.state.solicitante_nome,solicitanteNomeOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({solicitante_nome:a},(()=>{this.listar()}))},responsavelNomeValue:this.state.responsavel_nome,responsavelNomeOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({responsavel_nome:a},(()=>{this.listar()}))},etiquetaNomeValue:this.state.etiqueta_nome,etiquetaNomeOnEnterKey:e=>{const a=e.component.instance().option("value");this.setState({etiqueta_nome:a},(()=>{this.listar()}))},filtroStatusValue:this.state.filtro_status,filtroStatusValueOnValueChanged:e=>{const a=e.value;this.setState({filtro_status:a},(()=>{this.listar()}))},filtroTipoValue:this.state.filtro_tipo,filtroTipoValueOnValueChanged:e=>{const a=e.value;this.setState({filtro_tipo:a},(()=>{this.listar()}))},novaSolicitacaoOnClose:e=>{this.listar()},recarregarOnClick:e=>{this.listar()}}),t]})}}function w(e){let{processo_id:a,processo_nome:t,clienteNomeValue:o,clienteNomeOnEnterKey:i,solicitacaoCodigoValue:s,solicitacaoCodigoOnEnterKey:n,solicitacaoDescricaoValue:l,solicitacaoDescricaoOnEnterKey:c,solicitanteNomeValue:u,solicitanteNomeOnEnterKey:m,responsavelNomeValue:_,responsavelNomeOnEnterKey:f,etiquetaNomeValue:g,etiquetaNomeOnEnterKey:w,filtroStatusValue:j,filtroStatusValueOnValueChanged:O,filtroTipoValue:x,filtroTipoValueOnValueChanged:A,novaSolicitacaoOnClose:C,recarregarOnClick:S}=e;return Object(h.jsxs)(d.a,{children:[Object(h.jsx)(r.Item,{location:"before",showText:"always",locateInMenu:"auto",widget:"dxButton",options:{text:"Nova Solicita\xe7\xe3o",hint:"Nova Solicita\xe7\xe3o",icon:"fa fa-plus",stylingMode:"text",onClick:()=>function(e,a){p.a.load("solicitacao/nova",((t,o)=>{o.onclose=a,o.show({processo_id:e})}))}(a,C)}}),Object(h.jsx)(r.Item,{location:"before",showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Recarregar",hint:"Recarregar",icon:"refresh",stylingMode:"text",onClick:S}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"N\xba Solicita\xe7\xe3o",labelMode:"static",value:s,onEnterKey:n}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Descri\xe7\xe3o Solicita\xe7\xe3o",labelMode:"static",value:l,onEnterKey:c}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Cliente",labelMode:"static",value:o,onEnterKey:i}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Solicitante",labelMode:"static",value:u,onEnterKey:m}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Respons\xe1vel",labelMode:"static",value:_,onEnterKey:f}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Etiqueta",labelMode:"static",value:g,onEnterKey:w}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxSelectBox",visible:a>0,options:{width:"195px",displayExpr:"nome",valueExpr:"id",value:j,onValueChanged:O,placeholder:"Situa\xe7\xe3o",items:b}}),Object(h.jsx)(r.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxSelectBox",visible:a>0,options:{width:"180px",displayExpr:"nome",valueExpr:"id",value:x,onValueChanged:A,items:v}})]})}function j(e){var a,t,o,i;let{processo_nome:s,title:r,index:d,cards:l,main:c,onListUpdated:u,solicitacaoDetalhesOnclose:p}=e;const m=c.state.list[d].itens?c.state.list[d].itens.totalCount:0,b=-1!==parseInt(null===c||void 0===c||null===(a=c.props)||void 0===a?void 0:a.processo_id)?null:Object(h.jsx)("div",{className:"list-title dx-theme-text-color processo_lista",title:s,children:s}),v=null!==(t=null===c||void 0===c||null===(o=c.props)||void 0===o?void 0:o.subtractHeight)&&void 0!==t?t:"0px",g=-1!==parseInt(null===c||void 0===c||null===(i=c.props)||void 0===i?void 0:i.processo_id)?"0px":"13px";return Object(h.jsxs)("div",{className:"list ",style:{height:"calc(100vh - 110px - ".concat(v,")"),width:"260px"},children:[Object(h.jsx)("div",{className:"pull-right",style:{marginRight:"10px",marginTop:"8px"},children:Object(h.jsx)("div",{className:"label label-default",children:m})}),b,Object(h.jsx)("div",{className:"list-title dx-theme-text-color titulo_lista",title:r,children:r}),Object(h.jsx)(n.a,{style:{height:"calc(100vh - 110px - 40px - ".concat(g," - ").concat(v,")")},className:"scrollable-list",direction:"vertical",showScrollbar:"always",onReachBottom:l.data.length<l.totalCount?async e=>{let a=parseInt(c.state.list[d].skip||0)+parseInt(c.props.take),t=[...c.state.list],o={processo_id:c.props.processo_id,filtro_status:c.state.filtro_status,filtro_tipo:c.state.filtro_tipo,solicitacao_codigo:c.state.solicitacao_codigo,solicitacao_descricao:c.state.solicitacao_descricao,cliente_nome:c.state.cliente_nome,solicitante_nome:c.state.solicitante_nome,responsavel_nome:c.state.responsavel_nome,etiqueta_nome:c.state.etiqueta_nome,processo_atividade_id:t[d].processo_atividade_id,skip:a},i=await Object(f.listarProcessosQuadroAtividades)(o);Array.isArray(i)&&i[0].itens&&i[0].itens.data&&Array.isArray(i[0].itens.data)&&(t[d].itens.data=[...t[d].itens.data,...i[0].itens.data],t[d].itens.totalCount=i[0].itens.totalCount,t[d].skip=a,u(t))}:null,onScroll:e=>{c.state.list[d].scrollOffset=e.scrollOffset},onInitialized:e=>{setTimeout((()=>{c.state.list[d].scrollOffset&&e.component.scrollTo(c.state.list[d].scrollOffset)}))},children:l&&l.data&&Array.isArray(l.data)&&l.data.map((e=>Object(h.jsx)(_,{card:e,solicitacaoDetalhesOnclose:p})))})]})}g.defaultProps={abaTitulo:"Processo...",take:20,arrColumns:[],listKey:null,route:null}},814:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var o=t(248),i=t(254),s=t(247),n=t.n(s),r=t(43),d=t.n(r),l=t(87),c=t(271),u=t(253),p=t(330),m=t(307),h=t.n(m),_=(t(1035),t(244));class f extends n.a.Component{constructor(e){var a,t,o,i,s,n,r,d,l,c,u,p,m,h,_,f,b,v,g,w,j,O,x,A,C,S;super(e),this.state={documentoRevisaoID:null!==(a=e.documentoRevisaoID)&&void 0!==a?a:null,documentoRevisaoIDBackup:null!==(t=null!==(o=e.documentoRevisaoIDBackup)&&void 0!==o?o:e.documentoRevisaoID)&&void 0!==t?t:null,documentoRevisaoMimeType:null!==(i=e.documentoRevisaoMimeType)&&void 0!==i?i:null,documentoRevisaoMimeTypeBackup:null!==(s=null!==(n=e.documentoRevisaoMimeTypeBackup)&&void 0!==n?n:e.documentoRevisaoMimeType)&&void 0!==s?s:null,arquivoNome:null!==(r=e.arquivoNome)&&void 0!==r?r:"",arquivoNomeBackup:null!==(d=null!==(l=e.arquivoNomeBackup)&&void 0!==l?l:e.arquivoNome)&&void 0!==d?d:"",arquivoTamanho:null!==(c=e.arquivoTamanho)&&void 0!==c?c:0,arquivoTamanhoBackup:null!==(u=null!==(p=e.arquivoTamanhoBackup)&&void 0!==p?p:e.arquivoTamanho)&&void 0!==u?u:0,arquivoSelecionado:null!==(m=e.arquivoSelecionado)&&void 0!==m?m:null,arquivoPrevisao:null!==(h=e.arquivoPrevisao)&&void 0!==h?h:null,desabilitado:null===(_=e.desabilitado)||void 0===_||_,exibirPrevisao:null===(f=e.exibirPrevisao)||void 0===f||f,obrigatorio:null!==(b=e.obrigatorio)&&void 0!==b&&b,clicksignAtivo:null!==(v=e.clicksignAtivo)&&void 0!==v&&v,certsignAtivo:null!==(g=e.certsignAtivo)&&void 0!==g&&g,d4signAtivo:null!==(w=e.d4signAtivo)&&void 0!==w&&w,elemKey:null!==(j=e.elemKey)&&void 0!==j?j:null,solicitacaoID:null!==(O=e.solicitacaoID)&&void 0!==O?O:null,solicitacaoNumero:null!==(x=e.solicitacaoNumero)&&void 0!==x?x:null,linhaTabela:null!==(A=e.linhaTabela)&&void 0!==A?A:null,objCampoTabela:null!==(C=e.objCampoTabela)&&void 0!==C?C:null,placeholder:null!==(S=e.placeholder)&&void 0!==S?S:"Arraste um arquivo aqui ou clique no bot\xe3o para pesquisar"},this.handleLimparClick=this.handleLimparClick.bind(this),this.handleSelecionarClick=this.handleSelecionarClick.bind(this),this.handleDesfazerClick=this.handleDesfazerClick.bind(this),this.handleVisualizarClick=this.handleVisualizarClick.bind(this),this.handleDownloadClick=this.handleDownloadClick.bind(this),this.handleClicksignSignatariosClick=this.handleClicksignSignatariosClick.bind(this),this.handleCertsignSignatariosClick=this.handleCertsignSignatariosClick.bind(this),this.handleD4SignSignatariosClick=this.handleD4SignSignatariosClick.bind(this),this.handleInputDrop=this.handleInputDrop.bind(this)}handleLimparClick(e){this.state.desabilitado||this.setState({documentoRevisaoID:null,arquivoSelecionado:null,arquivoNome:"",arquivoTamanho:0},(()=>{this.props.handleAlterado&&this.props.handleAlterado(this.state)}))}handleSelecionarClick(e){if(this.state.desabilitado)return;let a=document.createElement("input");a.type="file",a.onchange=e=>{const a=e.target.files[0];let t={arquivoPrevisao:null};"undefined"!=typeof a&&a&&(t.documentoPastaID=null,t.arquivoSelecionado=a,t.arquivoNome=a.name,t.arquivoTamanho=a.size,t.documentoRevisaoMimeType=a.type),this.setState(Object(o.a)({},t),(()=>{this.props.handleAlterado&&this.props.handleAlterado(this.state)}))},this.setState({}),d()(document).ready((function(){a.click()}))}handleDesfazerClick(e){this.setState({arquivoSelecionado:null,arquivoPrevisao:null,documentoRevisaoID:this.state.documentoRevisaoIDBackup,documentoRevisaoMimeType:this.state.documentoRevisaoMimeTypeBackup,arquivoNome:this.state.arquivoNomeBackup,arquivoTamanho:this.state.arquivoTamanhoBackup})}handleVisualizarClick(e){["application/pdf"].includes(this.state.documentoRevisaoMimeType)?c.a.load("central_documentos/visualizar_pdf",((e,a)=>{a.show(this.state.documentoRevisaoID)})):["image/png","image/bmp","image/jpeg","image/jpg","image/gif"].includes(this.state.documentoRevisaoMimeType)&&c.a.load("central_documentos/visualizar_documento",((e,a)=>{a.show(this.state.documentoRevisaoID)}))}handleDownloadClick(e){l.a.obter_token_publico((e=>{this.state.documentoRevisaoID>0&&l.a.download(window.WS_URI+"documento/download/?documento_revisao_id="+this.state.documentoRevisaoID+"&solicitacao=true&token_publico="+e)}),this.state.documentoRevisaoID)}handleClicksignSignatariosClick(e){this.state.documentoRevisaoID>0?c.a.load("clicksign/detalhes",((e,a)=>{a.show(this.state.documentoRevisaoID)}),c.a.ABA.SIM):c.a.load("clicksign/configurar_signatarios",((e,a)=>{a.show(null,!1,this.state.elemKey,this.state.linhaTabela,this.state.solicitacaoID)}),c.a.ABA.SIM)}handleCertsignSignatariosClick(e){this.state.documentoRevisaoID>0?c.a.load("certsign/detalhes",((e,a)=>{a.show(this.state.documentoRevisaoID)}),c.a.ABA.SIM):c.a.load("certsign/configurar_signatarios",((e,a)=>{a.show(null,!1,this.state.elemKey,this.state.linhaTabela,this.state.solicitacaoID)}),c.a.ABA.SIM)}handleD4SignSignatariosClick(e){u.a.get("processo/get_parametros/",null,(e=>{const a=e.processo_padrao_mensagem_d4sign;let t=this.state.solicitacaoID;"S"===l.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo&&(t=this.state.solicitacaoNumero),this.state.documentoRevisaoID>0?c.a.load("d4sign/detalhes",((e,o)=>{o.show(this.state.documentoRevisaoID,null,a,t)}),c.a.ABA.SIM):c.a.load("d4sign/configurar_signatarios",((e,o)=>{o.show(null,!1,this.state.elemKey,this.state.linhaTabela,t,a)}),c.a.ABA.MULTIPLAS)}))}handleInputDragStart(e){e.preventDefault(),e.stopPropagation()}handleInputDragOver(e){e.preventDefault(),e.stopPropagation()}handleInputDragLeave(e){e.preventDefault(),e.stopPropagation()}handleInputDrop(e){e.preventDefault(),e.stopPropagation();let a=!1,t=!1;if(e.dataTransfer&&e.dataTransfer.items&&(e.dataTransfer.items.length>1&&(t=!0),d()(e.dataTransfer.items).each(((e,t)=>{t.webkitGetAsEntry().isDirectory&&(a=!0)}))),a)window.alert_modal("Aviso","<strong>Ocorreu uma falha na opera\xe7\xe3o!</strong> <br /><br /> <strong>N\xe3o</strong> \xe9 poss\xedvel realizar o <strong>upload de pastas</strong> atrav\xe9s deste campo. Por favor, selecione apenas um arquivo e tente novamente."),this.setState({});else if(t)window.alert_modal("Aviso","<strong>Ocorreu uma falha na opera\xe7\xe3o!</strong> <br /><br /> <strong>N\xe3o</strong> \xe9 poss\xedvel realizar o <strong>upload de v\xe1rios arquivos</strong> atrav\xe9s deste campo. Por favor, selecione apenas um arquivo e tente novamente."),this.setState({});else if(e&&e.dataTransfer&&e.dataTransfer.files){if(this.state.desabilitado)return;let a={arquivoPrevisao:null},t=e.dataTransfer.files[0];"undefined"!=typeof t&&t&&(a.documentoPastaID=null,a.arquivoSelecionado=t,a.arquivoNome=t.name,a.arquivoTamanho=t.size),this.setState(Object(o.a)({},a),(()=>{this.props.handleAlterado&&this.props.handleAlterado(this.state)}))}}render(){let e=null,a=null,t=null,i=null,s=null,n=null,r=null,d=null,c=null,u=null;if(!this.state.desabilitado&&this.state.documentoRevisaoIDBackup>0&&(this.state.arquivoSelecionado||!this.state.documentoRevisaoID)&&(u=Object(_.jsx)(m.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(_.jsx)(p.Button,{onClick:this.handleDesfazerClick,text:"Desfazer",icon:"fa fa-undo",stylingMode:"text",disabled:this.state.desabilitado})})),null!=this.state.arquivoSelecionado||this.state.documentoRevisaoID>0){if("undefined"!=typeof this.state.arquivoTamanho&&(a=Object(_.jsx)(m.Item,{location:"after",children:Object(_.jsx)(p.Button,{text:window.filesize(parseInt(this.state.arquivoTamanho,10)||0),stylingMode:"text",disabled:!0})})),this.state.desabilitado||(t=Object(_.jsx)(m.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(_.jsx)(p.Button,{onClick:this.handleLimparClick,text:"Limpar",icon:"fa fa-trash-alt",stylingMode:"text"})})),this.state.clicksignAtivo){let e=window.extensao_valida(this.state.arquivoNome,window.extensoes_validas_assinatura);s=Object(_.jsx)(m.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(_.jsx)(p.Button,{onClick:e?this.handleClicksignSignatariosClick:null,text:"Assinaturas (Clicksign)",icon:"fa fa-edit",stylingMode:"text",disabled:!e})})}if(this.state.certsignAtivo){let e=window.extensao_valida(this.state.arquivoNome,window.extensoes_validas_assinatura);n=Object(_.jsx)(m.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(_.jsx)(p.Button,{onClick:e?this.handleCertsignSignatariosClick:null,text:"Assinaturas (Certsign)",icon:"fa fa-edit",stylingMode:"text",disabled:!e})})}if(this.state.d4signAtivo){let e=window.extensao_valida(this.state.arquivoNome,window.extensoes_validas_assinatura);r=Object(_.jsx)(m.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(_.jsx)(p.Button,{onClick:e?this.handleD4SignSignatariosClick:null,text:"Assinaturas (D4Sign)",icon:"fa fa-edit",stylingMode:"text",disabled:!e})})}if(this.state.exibirPrevisao){let a=this.state.arquivoPrevisao;const t={"border-left":"1px solid #ccc","border-right":"1px solid #ccc","border-bottom":"1px solid #ccc"},o={"max-height":"200px","max-width":"100%"};if(this.state.arquivoSelecionado){if(null==a){let e=new FileReader;e.onload=e=>{let a=!1;const t=[".jpg",".jpeg",".bmp",".gif",".png"];for(let o=0;o<t.length;o++){let e=t[o];if(this.state.arquivoNome.substr(this.state.arquivoNome.length-e.length,e.length).toLowerCase()===e.toLowerCase()){a=!0;break}}this.setState({arquivoPrevisao:!!a&&e.target.result})},e.readAsDataURL(this.state.arquivoSelecionado)}}else if(this.state.documentoRevisaoID>0&&null==a&&["image/png","image/bmp","image/jpeg","image/jpg","image/gif"].includes(this.state.documentoRevisaoMimeType)){a=window.WS_URI+"/documento/midia/?documento_revisao_id="+this.state.documentoRevisaoID+"&tipo=v&tamanho=200&token_midia="+l.a.sessao.token_midia+"&anticache="+(new Date).getTime()}a&&(e=Object(_.jsx)("div",{style:t,children:Object(_.jsx)("img",{src:a,style:o,alt:"Imagem"})}))}}else i=Object(_.jsx)(p.Button,{onClick:this.handleSelecionarClick,hint:"Selecionar",icon:"fa fa-upload",stylingMode:"text",disabled:this.state.desabilitado});!this.state.arquivoSelecionado&&this.state.documentoRevisaoID>0&&(["application/pdf","image/png","image/bmp","image/jpeg","image/jpg","image/gif"].includes(this.state.documentoRevisaoMimeType)&&(d=Object(_.jsx)(p.Button,{onClick:this.handleVisualizarClick,hint:"Visualizar",icon:"fa fa-window-maximize",stylingMode:"text"})),c=Object(_.jsx)(m.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(_.jsx)(p.Button,{onClick:this.handleDownloadClick,text:"Download",icon:"fa fa-download",stylingMode:"text"})}));let f={onDragStart:this.handleInputDragStart,onDrag:this.handleInputDragStart,onDragOver:this.handleInputDragOver,onDragEnter:this.handleInputDragOver,onDragLeave:this.handleInputDragLeave,onDragEnd:this.handleInputDragLeave,onDrop:this.handleInputDrop};return Object(_.jsxs)("div",Object(o.a)(Object(o.a)({},f),{},{style:{display:"flex",justifyContent:"space-around"},children:[Object(_.jsx)("div",{style:{width:"100%"},children:Object(_.jsx)("div",{className:"input-group",style:{border:0,backgroundColor:"transparent",width:"100%"},children:Object(_.jsx)("input",{type:"text",className:"form-control",value:this.state.arquivoNome,readOnly:!0,placeholder:this.state.placeholder,style:{paddingLeft:"3px",paddingRight:"3px",boxShadow:"none",border:0,backgroundColor:"transparent",width:"100%"},onClick:null!=this.state.arquivoSelecionado||this.state.documentoRevisaoID>0?null:this.handleSelecionarClick,required:this.state.obrigatorio})})}),Object(_.jsxs)(h.a,{style:{border:0,backgroundColor:"transparent"},children:[a,Object(_.jsxs)(m.Item,{location:"after",children:[i,d]}),u,c,s,n,r,null,t]}),e]}))}}f.defaultProps={};class b extends i.Column{}b.defaultProps={dataField:"documento_id",caption:"Documento",width:150,cellRender:e=>{var a,t,i,s,n,r,d;let l="object"===typeof e.data.documento_id?e.data.documento_id:{desabilitado:null!==(a=e.data.desabilitado)&&void 0!==a&&a,documentoRevisaoID:null!==(t=e.data.documento_revisao_id)&&void 0!==t?t:null,documentoRevisaoMimeType:null!==(i=e.data.mime_type)&&void 0!==i?i:null,arquivoNome:null!==(s=e.data.nome_arquivo)&&void 0!==s?s:null,arquivoTamanho:null!==(n=e.data.tamanho)&&void 0!==n?n:null,placeholder:null!==(r=e.column.placeholder)&&void 0!==r?r:null,exibirPrevisao:null!==(d=e.column.exibirPrevisao)&&void 0!==d?d:null};return l.handleAlterado=a=>{e.component.cellValue(e.rowIndex,"documento_id",a)},Object(_.jsx)(f,Object(o.a)({},l))},allowEditing:!1}},962:function(e,a,t){"use strict";t.r(a);var o=t(247),i=t(87),s=t(267),n=t(442),r=t(549),d=t(412),l=t(254),c=t(484),u=t(244);const p=e=>{let{dados:a,onRowUpdated:t}=e;const p=Object(o.useRef)(null);for(let o=0;o<a.length;o++)a[o].registrar="N"===a[o].conflito||"S"===a[o].eventos_simultaneos;return Object(u.jsxs)(s.default,{style:{height:"auto"},ref:p,dataSource:a,selection:{mode:"none"},remoteOperations:!1,filterPanel:null,filterRow:null,headerFilter:null,sorting:null,groupPanel:null,searchPanel:null,columnChooser:null,export:{},onEditingStart:e=>{"registrar"!==e.column.dataField&&(e.cancel=!0),"registrar"===e.column.dataField&&e.data.agenda_ativo_id>0&&"S"===e.data.conflito&&"N"===e.data.eventos_simultaneos&&(e.cancel=!0)},onCellPrepared:e=>{"data"!==e.rowType||!["dia","hora_inicio","hora_fim","observacoes"].includes(e.column.dataField)||"S"!==e.data.conflito&&"S"!==e.data.excede||(e.cellElement.addClass("text-danger"),e.cellElement.css("background","auto")),"data"===e.rowType&&"registrar"===e.column.dataField&&e.data.agenda_ativo_id>0&&"S"===e.data.conflito&&"N"===e.data.eventos_simultaneos&&e.cellElement.html("")},onRowUpdated:t,children:[Object(u.jsx)(l.Editing,{mode:"cell",allowUpdating:!0}),Object(u.jsx)(d.a,{dataField:"registrar",caption:"Gerar",width:"60px",headerCellRender:()=>Object(u.jsx)(c.CheckBox,{defaultValue:!0,onValueChanged:e=>{for(let t=0;t<a.length;t++)a[t].registrar=e.value,a[t].agenda_ativo_id>0&&"S"===a[t].conflito&&"N"===a[t].eventos_simultaneos&&(a[t].registrar=!1);p.current.instance.refresh(),a.forEach((e=>{t({data:e})}))}})},"registrar"),Object(u.jsx)(n.a,{dataField:"dia",caption:"Dia"},"dia"),Object(u.jsx)(r.a,{dataField:"hora_inicio",caption:"Hora In\xedcio"},"hora_inicio"),Object(u.jsx)(r.a,{dataField:"hora_fim",caption:"Hora Fim"},"hora_fim"),Object(u.jsx)(l.Column,{dataField:"observacoes",caption:"Observa\xe7\xf5es",calculateCellValue:e=>{let a="";return"S"===e.conflito&&(a="J\xe1 existe evento agendado neste hor\xe1rio. "),"S"===e.excede&&(a+=i.a.lang.gestao_agenda.recorrencia_excede_calendario),a}},"observacoes")]})};p.defaultProps={abaTitulo:"Pr\xe9-visualizar eventos recorrentes"},a.default=p}}]);