define([],function(){return function(){"use strict";this.show=function(){const e="assets/img/logo_transp.png";var n=e+"?anticache="+(new Date).getTime();$("body").css("height","100vh"),$("#scrollview").css("height","calc(100vh - 32px)"),require(["./assets/view/menu/menu"],function(t){var s=(new t).menu,i=null,o=[],r="";!function e(n){for(var t=n.length;t--;){var s=n[t];s.submenus&&e(s.submenus);var i=!0,o=s.submenus?s.submenus.length:0;if(s.permissao&&("object"==typeof s.permissao&&s.permissao.length?i=s.permissao.some(function(e){return App.verifica_permissao(App.temp.empresa||App.sessao.dados.empresa_filial_id,e)}):"string"==typeof s.permissao&&(i=App.verifica_permissao(App.temp.empresa||App.sessao.dados.empresa_filial_id,s.permissao))),!i||s.submenus&&0===s.submenus.length&&o)n.splice(t,1);else{var r=s.nome||"",a=removerAcentos(r),c=a.toLowerCase().split(/\s+/),p=[];p.push(...c),p.push(c.join("")),p.push(c.join("_")),c.length>1&&(p.push([...c].reverse().join(" ")),p.push([...c].reverse().join("")),p.push([...c].reverse().join("_"))),c.forEach(e=>p.push(e)),s.tags=a.toLowerCase()+" "+p.join(" ")}}}(s),App.menu=s;var a=function(){App.drawerInstance=$("#drawer").dxDrawer({opened:!1,closeOnOutsideClick:function(e){App.drawerInstance.option("opened")&&$("#menu").trigger("click")},shading:!0,openedStateMode:"overlap",position:"left",revealMode:"slide",minSize:40,template:function(o){setTimeout(function(){o.parent().parent().css("z-index","1040")});var c=$("<div>");return i=c.dxTreeView({items:s,displayExpr:"nome",itemsExpr:"submenus",noDataText:"<div style='text-align: center' class='text-muted'><i class='icon dx-icon-close' style='font-size: 17px; vertical-align: text-top;'></i>    Sem resultados</div> ",width:300,searchEnabled:!0,searchMode:"contains",searchExpr:["nome","tags"],searchEditorOptions:{onKeyUp:function(e){""==(r=e.component.option("value"))&&(i.collapseAll(),a())},buttons:[{name:"clearCustom",location:"after",options:{hint:"Limpar pesquisa",icon:"revert",type:"normal",stylingMode:"text",elementAttr:{class:"dx-treeview-buttons"},onClick:function(){i.option("searchValue")&&(r="",i.option("searchValue",""),i.collapseAll(),a())}}},{name:"searchCustom",location:"after",options:{icon:"fas fa-bars",type:"normal",stylingMode:"text",elementAttr:{class:"dx-treeview-buttons menu-search"},onClick:function(){$("#menu").trigger("click"),i._searchEditor.focus()}}}]},onItemExpanded:function(e){App.drawerInstance.option("opened")?t(i.getNodes()):i.collapseItem(e.itemData)},onItemCollapsed:function(){t(i.getNodes())},elementAttr:{class:"dx-theme-accent-as-background-color"},itemTemplate:function(e){var n=$('<div title="'+e.nome+'">');return e.icone&&n.append('<img style="height: 20px; width: 20px;" src="'+e.icone+'">'),n.append(" "+e.nome),e.icone&&(App.drawerInstance&&App.drawerInstance.option("opened")?n.append('<img style="height: 20px; width: 20px;" class="pull-right esconderMenuRetraido hidden" src="'+e.icone+'">'):n.append('<img style="height: 20px; width: 20px;" class="pull-right esconderMenuRetraido" src="'+e.icone+'">')),n},onItemClick:function(e){var n=e.itemData;n.click&&(n.click(),App.drawerInstance.option("opened")&&$("#menu").trigger("click"))},elementAttr:{class:"dx-theme-background-color"}}).dxTreeView("instance"),c.css("min-width","250px"),c.css("max-width","600px"),c.children().last().css("height","calc(100vh - 105px)"),i._$element.prepend('<div style="text-align: center;"><img class="esconderMenuRetraido pull-right" src="assets/img/favicon.png" onError="this.onerror=null;this.src=\'assets/img/favicon.png.sample\';" style="padding-right: 5px; max-width: 35px;" /><img style="max-height: 59px; padding: 10px;" class="mostrarMenuRetraido hidden" src="'+n+'" onError="this.onerror=null;this.src=\''+e+".sample';\"/></div>"),c},onOptionChanged:function(e){e.value&&e.element.find(".dx-theme-background-color").parent().css("width","")}}).dxDrawer("instance"),$(".dx-drawer-content").css({height:"100vh",overflow:"hidden"});var t=function(e){setTimeout(function(){for(var n=0;n<e.length;n++){var s=e[n];s.expanded&&!o.includes(s.key)?o.push(s.key):App.drawerInstance.option("opened")&&!s.expanded&&o.includes(s.key)&&o.splice(o.indexOf(s.key),1),s.items&&t(s.items)}})},a=function(){for(var e=0;e<o.length;e++){var n=o[e];i.expandItem(n)}};$("#menu").dxButton({icon:"menu",visible:!1,onClick:function(){if(function(){if(App.drawerInstance.toggle(),void 0!==App.drawerInstance&&App.drawerInstance&&App.drawerInstance.option("opened")){var e=i._searchEditor.option("buttons");i.option("searchValue",r),e.splice(-1,1),i._searchEditor.option("buttons",e),App.drawerInstance._$element.find(".dx-drawer-shader").css("z-index","1039")}}(),App.drawerInstance.option("opened"))$(".esconderMenuRetraido").addClass("hidden"),$(".mostrarMenuRetraido").removeClass("hidden"),a();else{$(".esconderMenuRetraido").removeClass("hidden"),$(".mostrarMenuRetraido").addClass("hidden");var e=i._searchEditor.option("buttons");e.push({name:"searchCustom",location:"after",options:{icon:"fas fa-bars",type:"normal",stylingMode:"text",elementAttr:{class:"dx-treeview-buttons menu-search"},onClick:function(){$("#menu").trigger("click"),i._searchEditor.focus()}}}),i._searchEditor.option("buttons",e),i._searchEditor.option("value",""),i.collapseAll()}}})},c=function(e,n){if(View.validaExistenciaPE(e)){var t=document.createElement("script");t.setAttribute("src",WS_URI.replace("webservice/index.php","")+e+"?anticache="+(new Date).getTime()),t.onload=function(){manutencao_menu(),n()},t.onerror=function(){manutencao_menu(),n()},document.head.appendChild(t)}else n()};c("webservice/peJS/menu.pe.js",function(){c("webservice/especificos/peJS/menu.pe.js",function(){a()})})})}}});